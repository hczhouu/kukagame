!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Cloudplay=t()}(this,function(){"use strict";function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r,s,a=[],c=!0,l=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=r.call(n)).done)&&(a.push(i.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}function ownKeys(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,n){t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==typeof e?e:String(e)}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return commonjsRequire(e,null==t?n.path:t)}},n.exports),n.exports}function getAugmentedNamespace(n){var i;return n.__esModule?n:(i=Object.defineProperty({},"__esModule",{value:!0}),Object.keys(n).forEach(function(e){var t=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(i,e,t.get?t:{enumerable:!0,get:function(){return n[e]}})}),i)}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var core=createCommonjsModule(function(e,t){e.exports=function(l){var n=Object.create||function(e){return t.prototype=e,e=new t,t.prototype=null,e};function t(){}var e={},i=e.lib={},o=i.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},d=i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,o=e.sigBytes;if(this.clamp(),i%4)for(var r=0;r<o;r++){var s=n[r>>>2]>>>24-r%4*8&255;t[i+r>>>2]|=s<<24-(i+r)%4*8}else for(r=0;r<o;r+=4)t[i+r>>>2]=n[r>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=l.ceil(t/4)},clone:function(){var e;return(e=o.clone.call(this)).words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4){var i=function(t){var n=987654321,i=4294967295;return function(){var e=((n=36969*(65535&n)+(n>>16)&i)<<16)+(t=18e3*(65535&t)+(t>>16)&i)&i;return(e/4294967296+.5)*(.5<l.random()?1:-1)}}(4294967296*(o||l.random())),o=987654071*i();t.push(4294967296*i()|0)}return new d.init(t,e)}}),r=e.enc={},s=r.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var r=t[o>>>2]>>>24-o%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new d.init(n,t/2)}},a=r.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var r=t[o>>>2]>>>24-o%4*8&255;i.push(String.fromCharCode(r))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new d.init(n,t)}},c=r.Utf8={stringify:function(e){try{return decodeURIComponent(escape(a.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return a.parse(unescape(encodeURIComponent(e)))}},p=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,i=t.sigBytes,o=this.blockSize,r=i/(4*o),s=(r=e?l.ceil(r):l.max((0|r)-this._minBufferSize,0))*o,e=l.min(4*s,i);if(s){for(var a=0;a<s;a+=o)this._doProcessBlock(n,a);var c=n.splice(0,s);t.sigBytes-=e}return new d.init(c,e)},clone:function(){var e;return(e=o.clone.call(this))._data=this._data.clone(),e},_minBufferSize:0}),u=(i.Hasher=p.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new u.HMAC.init(n,t).finalize(e)}}}),e.algo={});return e}(Math)}),x64Core=createCommonjsModule(function(e,t){var n,o,r,i;e.exports=(i=(n=e=core).lib,o=i.Base,r=i.WordArray,(i=n.x64={}).Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],i=0;i<t;i++){var o=e[i];n.push(o.high),n.push(o.low)}return r.create(n,this.sigBytes)},clone:function(){for(var e,t=(e=o.clone.call(this)).words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}}),e)}),libTypedarrays=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){var e,o;"function"==typeof ArrayBuffer&&(e=n.lib.WordArray,o=e.init,(e.init=function(e){if((e=(e=e instanceof ArrayBuffer?new Uint8Array(e):e)instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e)instanceof Uint8Array){for(var t=e.byteLength,n=[],i=0;i<t;i++)n[i>>>2]|=e[i]<<24-i%4*8;o.call(this,n,t)}else o.apply(this,arguments)}).prototype=e)}(),n.lib.WordArray)}),encUtf16=createCommonjsModule(function(e,t){function s(e){return e<<8&4278255360|e>>>8&16711935}var o,n;e.exports=(o=(e=core).lib.WordArray,(n=e.enc).Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o+=2){var r=t[o>>>2]>>>16-o%4*8&65535;i.push(String.fromCharCode(r))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return o.create(n,2*t)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o+=2){var r=s(t[o>>>2]>>>16-o%4*8&65535);i.push(String.fromCharCode(r))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>1]|=s(e.charCodeAt(i)<<16-i%2*16);return o.create(n,2*t)}},e.enc.Utf16)}),encBase64=createCommonjsModule(function(e,t){function s(e,t,n){for(var i,o,r=[],s=0,a=0;a<t;a++)a%4&&(i=n[e.charCodeAt(a-1)]<<a%4*2,o=n[e.charCodeAt(a)]>>>6-a%4*2,r[s>>>2]|=(i|o)<<24-s%4*8,s++);return c.create(r,s)}var c;e.exports=(c=(e=core).lib.WordArray,e.enc.Base64={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=this._map,o=(e.clamp(),[]),r=0;r<n;r+=3)for(var s=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,a=0;a<4&&r+.75*a<n;a++)o.push(i.charAt(s>>>6*(3-a)&63));var c=i.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e){var t=e.length,n=this._map;if(!(i=this._reverseMap))for(var i=this._reverseMap=[],o=0;o<n.length;o++)i[n.charCodeAt(o)]=o;var r=n.charAt(64);return r&&-1!==(r=e.indexOf(r))&&(t=r),s(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64)}),md5=createCommonjsModule(function(e,t){e.exports=function(e){for(var p=Math,t=e,n=t.lib,i=n.WordArray,o=n.Hasher,r=t.algo,I=[],s=0;s<64;s++)I[s]=p.abs(p.sin(s+1))*4294967296|0;var a=r.MD5=o.extend({_doReset:function e(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function e(t,n){for(var i=0;i<16;i++){var o=n+i;var r=t[o];t[o]=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360}var s=this._hash.words;var a=t[n+0];var c=t[n+1];var l=t[n+2];var d=t[n+3];var p=t[n+4];var u=t[n+5];var h=t[n+6];var f=t[n+7];var m=t[n+8];var y=t[n+9];var g=t[n+10];var _=t[n+11];var v=t[n+12];var S=t[n+13];var b=t[n+14];var k=t[n+15];var C=s[0];var w=s[1];var T=s[2];var E=s[3];C=R(C,w,T,E,a,7,I[0]);E=R(E,C,w,T,c,12,I[1]);T=R(T,E,C,w,l,17,I[2]);w=R(w,T,E,C,d,22,I[3]);C=R(C,w,T,E,p,7,I[4]);E=R(E,C,w,T,u,12,I[5]);T=R(T,E,C,w,h,17,I[6]);w=R(w,T,E,C,f,22,I[7]);C=R(C,w,T,E,m,7,I[8]);E=R(E,C,w,T,y,12,I[9]);T=R(T,E,C,w,g,17,I[10]);w=R(w,T,E,C,_,22,I[11]);C=R(C,w,T,E,v,7,I[12]);E=R(E,C,w,T,S,12,I[13]);T=R(T,E,C,w,b,17,I[14]);w=R(w,T,E,C,k,22,I[15]);C=x(C,w,T,E,c,5,I[16]);E=x(E,C,w,T,h,9,I[17]);T=x(T,E,C,w,_,14,I[18]);w=x(w,T,E,C,a,20,I[19]);C=x(C,w,T,E,u,5,I[20]);E=x(E,C,w,T,g,9,I[21]);T=x(T,E,C,w,k,14,I[22]);w=x(w,T,E,C,p,20,I[23]);C=x(C,w,T,E,y,5,I[24]);E=x(E,C,w,T,b,9,I[25]);T=x(T,E,C,w,d,14,I[26]);w=x(w,T,E,C,m,20,I[27]);C=x(C,w,T,E,S,5,I[28]);E=x(E,C,w,T,l,9,I[29]);T=x(T,E,C,w,f,14,I[30]);w=x(w,T,E,C,v,20,I[31]);C=P(C,w,T,E,u,4,I[32]);E=P(E,C,w,T,m,11,I[33]);T=P(T,E,C,w,_,16,I[34]);w=P(w,T,E,C,b,23,I[35]);C=P(C,w,T,E,c,4,I[36]);E=P(E,C,w,T,p,11,I[37]);T=P(T,E,C,w,f,16,I[38]);w=P(w,T,E,C,g,23,I[39]);C=P(C,w,T,E,S,4,I[40]);E=P(E,C,w,T,a,11,I[41]);T=P(T,E,C,w,d,16,I[42]);w=P(w,T,E,C,h,23,I[43]);C=P(C,w,T,E,y,4,I[44]);E=P(E,C,w,T,v,11,I[45]);T=P(T,E,C,w,k,16,I[46]);w=P(w,T,E,C,l,23,I[47]);C=O(C,w,T,E,a,6,I[48]);E=O(E,C,w,T,f,10,I[49]);T=O(T,E,C,w,b,15,I[50]);w=O(w,T,E,C,u,21,I[51]);C=O(C,w,T,E,v,6,I[52]);E=O(E,C,w,T,d,10,I[53]);T=O(T,E,C,w,g,15,I[54]);w=O(w,T,E,C,c,21,I[55]);C=O(C,w,T,E,m,6,I[56]);E=O(E,C,w,T,k,10,I[57]);T=O(T,E,C,w,h,15,I[58]);w=O(w,T,E,C,S,21,I[59]);C=O(C,w,T,E,p,6,I[60]);E=O(E,C,w,T,_,10,I[61]);T=O(T,E,C,w,l,15,I[62]);w=O(w,T,E,C,y,21,I[63]);s[0]=s[0]+C|0;s[1]=s[1]+w|0;s[2]=s[2]+T|0;s[3]=s[3]+E|0},_doFinalize:function e(){var t=this._data;var n=t.words;var i=this._nDataBytes*8;var o=t.sigBytes*8;n[o>>>5]|=128<<24-o%32;var r=p.floor(i/4294967296);var s=i;n[(o+64>>>9<<4)+15]=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360;n[(o+64>>>9<<4)+14]=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360;t.sigBytes=(n.length+1)*4;this._process();var a=this._hash;var c=a.words;for(var l=0;l<4;l++){var d=c[l];c[l]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360}return a},clone:function e(){var e=o.clone.call(this);e._hash=this._hash.clone();return e}});function R(e,t,n,i,o,r,s){var a=e+(t&n|~t&i)+o+s;return(a<<r|a>>>32-r)+t}function x(e,t,n,i,o,r,s){var a=e+(t&i|n&~i)+o+s;return(a<<r|a>>>32-r)+t}function P(e,t,n,i,o,r,s){var a=e+(t^n^i)+o+s;return(a<<r|a>>>32-r)+t}function O(e,t,n,i,o,r,s){var a=e+(n^(t|~i))+o+s;return(a<<r|a>>>32-r)+t}return t.MD5=o._createHelper(a),t.HmacMD5=o._createHmacHelper(a),e.MD5}(core)}),sha1=createCommonjsModule(function(e,t){var n,i,o,d,r;e.exports=(r=(n=e=core).lib,i=r.WordArray,o=r.Hasher,r=n.algo,d=[],r=r.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],o=n[1],r=n[2],s=n[3],a=n[4],c=0;c<80;c++){c<16?d[c]=0|e[t+c]:(l=d[c-3]^d[c-8]^d[c-14]^d[c-16],d[c]=l<<1|l>>>31);var l=(i<<5|i>>>27)+a+d[c];l+=c<20?1518500249+(o&r|~o&s):c<40?1859775393+(o^r^s):c<60?(o&r|o&s|r&s)-1894007588:(o^r^s)-899497514,a=s,s=r,r=o<<30|o>>>2,o=i,i=l}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+r|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(64+i>>>9<<4)]=Math.floor(n/4294967296),t[15+(64+i>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e;return(e=o.clone.call(this))._hash=this._hash.clone(),e}}),n.SHA1=o._createHelper(r),n.HmacSHA1=o._createHmacHelper(r),e.SHA1)}),sha256=createCommonjsModule(function(e,t){e.exports=function(e){var r=Math,t=e,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=[],C=[];function c(e){var t=r.sqrt(e);for(var n=2;n<=t;n++)if(!(e%n))return false;return true}function l(e){return(e-(e|0))*4294967296|0}var d=2,p=0;while(p<64){if(c(d)){if(p<8)a[p]=l(r.pow(d,1/2));C[p]=l(r.pow(d,1/3));p++}d++}var w=[],u=s.SHA256=o.extend({_doReset:function e(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function e(t,n){var i=this._hash.words;var o=i[0];var r=i[1];var s=i[2];var a=i[3];var c=i[4];var l=i[5];var d=i[6];var p=i[7];for(var u=0;u<64;u++){if(u<16)w[u]=t[n+u]|0;else{var h=w[u-15];var f=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3;var m=w[u-2];var y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;w[u]=f+w[u-7]+y+w[u-16]}var g=c&l^~c&d;var _=o&r^o&s^r&s;var v=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22);var S=(c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25);var b=p+S+g+C[u]+w[u];var k=v+_;p=d;d=l;l=c;c=a+b|0;a=s;s=r;r=o;o=b+k|0}i[0]=i[0]+o|0;i[1]=i[1]+r|0;i[2]=i[2]+s|0;i[3]=i[3]+a|0;i[4]=i[4]+c|0;i[5]=i[5]+l|0;i[6]=i[6]+d|0;i[7]=i[7]+p|0},_doFinalize:function e(){var t=this._data;var n=t.words;var i=this._nDataBytes*8;var o=t.sigBytes*8;n[o>>>5]|=128<<24-o%32;n[(o+64>>>9<<4)+14]=r.floor(i/4294967296);n[(o+64>>>9<<4)+15]=i;t.sigBytes=n.length*4;this._process();return this._hash},clone:function e(){var e=o.clone.call(this);e._hash=this._hash.clone();return e}});return t.SHA256=o._createHelper(u),t.HmacSHA256=o._createHmacHelper(u),e.SHA256}(core)}),sha224=createCommonjsModule(function(e,t){var n,i,o,r;e.exports=(i=(n=e=core).lib.WordArray,r=n.algo,o=r.SHA256,r=r.SHA224=o.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}}),n.SHA224=o._createHelper(r),n.HmacSHA224=o._createHmacHelper(r),e.SHA224)}),sha512=createCommonjsModule(function(e,t){e.exports=function(e){var t=e,n,i=t.lib.Hasher,o=t.x64,r=o.Word,s=o.WordArray,a=t.algo;function c(){return r.create.apply(r,arguments)}for(var Te=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],Ee=[],l=0;l<80;l++)Ee[l]=c();var d=a.SHA512=i.extend({_doReset:function e(){this._hash=new s.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function K(N,L){var e=this._hash.words;var t=e[0];var n=e[1];var i=e[2];var o=e[3];var r=e[4];var s=e[5];var a=e[6];var c=e[7];var F=t.high;var l=t.low;var $=n.high;var d=n.low;var j=i.high;var p=i.low;var U=o.high;var u=o.low;var H=r.high;var h=r.low;var G=s.high;var f=s.low;var V=a.high;var m=a.low;var W=c.high;var z=c.low;var y=F;var g=l;var _=$;var v=d;var S=j;var b=p;var q=U;var k=u;var C=H;var w=h;var J=G;var T=f;var Y=V;var E=m;var X=W;var I=z;for(var R=0;R<80;R++){var Q=Ee[R];if(R<16){var Z=Q.high=N[L+R*2]|0;var x=Q.low=N[L+R*2+1]|0}else{var ee=Ee[R-15];var P=ee.high;var O=ee.low;var te=(P>>>1|O<<31)^(P>>>8|O<<24)^P>>>7;var ne=(O>>>1|P<<31)^(O>>>8|P<<24)^(O>>>7|P<<25);var ie=Ee[R-2];var M=ie.high;var D=ie.low;var oe=(M>>>19|D<<13)^(M<<3|D>>>29)^M>>>6;var re=(D>>>19|M<<13)^(D<<3|M>>>29)^(D>>>6|M<<26);var se=Ee[R-7];var ae=se.high;var ce=se.low;var le=Ee[R-16];var de=le.high;var pe=le.low;var x=ne+ce;var Z=te+ae+(x>>>0<ne>>>0?1:0);var x=x+re;var Z=Z+oe+(x>>>0<re>>>0?1:0);var x=x+pe;var Z=Z+de+(x>>>0<pe>>>0?1:0);Q.high=Z;Q.low=x}var ue=C&J^~C&Y;var he=w&T^~w&E;var fe=y&_^y&S^_&S;var me=g&v^g&b^v&b;var ye=(y>>>28|g<<4)^(y<<30|g>>>2)^(y<<25|g>>>7);var ge=(g>>>28|y<<4)^(g<<30|y>>>2)^(g<<25|y>>>7);var _e=(C>>>14|w<<18)^(C>>>18|w<<14)^(C<<23|w>>>9);var ve=(w>>>14|C<<18)^(w>>>18|C<<14)^(w<<23|C>>>9);var Se=Te[R];var be=Se.high;var ke=Se.low;var A=I+ve;var B=X+_e+(A>>>0<I>>>0?1:0);var A=A+he;var B=B+ue+(A>>>0<he>>>0?1:0);var A=A+ke;var B=B+be+(A>>>0<ke>>>0?1:0);var A=A+x;var B=B+Z+(A>>>0<x>>>0?1:0);var Ce=ge+me;var we=ye+fe+(Ce>>>0<ge>>>0?1:0);X=Y;I=E;Y=J;E=T;J=C;T=w;w=k+A|0;C=q+B+(w>>>0<k>>>0?1:0)|0;q=S;k=b;S=_;b=v;_=y;v=g;g=A+Ce|0;y=B+we+(g>>>0<A>>>0?1:0)|0}l=t.low=l+g;t.high=F+y+(l>>>0<g>>>0?1:0);d=n.low=d+v;n.high=$+_+(d>>>0<v>>>0?1:0);p=i.low=p+b;i.high=j+S+(p>>>0<b>>>0?1:0);u=o.low=u+k;o.high=U+q+(u>>>0<k>>>0?1:0);h=r.low=h+w;r.high=H+C+(h>>>0<w>>>0?1:0);f=s.low=f+T;s.high=G+J+(f>>>0<T>>>0?1:0);m=a.low=m+E;a.high=V+Y+(m>>>0<E>>>0?1:0);z=c.low=z+I;c.high=W+X+(z>>>0<I>>>0?1:0)},_doFinalize:function e(){var t=this._data;var n=t.words;var i=this._nDataBytes*8;var o=t.sigBytes*8;n[o>>>5]|=128<<24-o%32;n[(o+128>>>10<<5)+30]=Math.floor(i/4294967296);n[(o+128>>>10<<5)+31]=i;t.sigBytes=n.length*4;this._process();var r=this._hash.toX32();return r},clone:function e(){var e=i.clone.call(this);e._hash=this._hash.clone();return e},blockSize:1024/32});return t.SHA512=i._createHelper(d),t.HmacSHA512=i._createHmacHelper(d),e.SHA512}(core)}),sha384=createCommonjsModule(function(e,t){var n,i,o,r,s;e.exports=(s=(n=e=core).x64,i=s.Word,o=s.WordArray,s=n.algo,r=s.SHA512,s=s.SHA384=r.extend({_doReset:function(){this._hash=new o.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=16,e}}),n.SHA384=r._createHelper(s),n.HmacSHA384=r._createHmacHelper(s),e.SHA384)}),sha3=createCommonjsModule(function(e,t){e.exports=function(e){for(var h=Math,t=e,n=t.lib,f=n.WordArray,i=n.Hasher,o,r=t.x64.Word,s=t.algo,P=[],O=[],M=[],a=1,c=0,l=0;l<24;l++){P[a+5*c]=(l+1)*(l+2)/2%64;var d=c%5;var p=(2*a+3*c)%5;a=d;c=p}for(var a=0;a<5;a++)for(var c=0;c<5;c++)O[a+5*c]=c+(2*a+3*c)%5*5;for(var u=1,m=0;m<24;m++){var y=0;var g=0;for(var _=0;_<7;_++){if(u&1){var v=(1<<_)-1;if(v<32)g^=1<<v;else y^=1<<v-32}if(u&128)u=u<<1^113;else u<<=1}M[m]=r.create(y,g)}for(var D=[],S=0;S<25;S++)D[S]=r.create();var b=s.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function e(){var t=this._state=[];for(var n=0;n<25;n++)t[n]=new r.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function e(t,n){var i=this._state;var o=this.blockSize/2;for(var r=0;r<o;r++){var s=t[n+2*r];var a=t[n+2*r+1];s=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360;a=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;var c=i[r];c.high^=a;c.low^=s}for(var l=0;l<24;l++){for(var d=0;d<5;d++){var p=0,u=0;for(var h=0;h<5;h++){var c=i[d+5*h];p^=c.high;u^=c.low}var f=D[d];f.high=p;f.low=u}for(var d=0;d<5;d++){var m=D[(d+4)%5];var y=D[(d+1)%5];var g=y.high;var _=y.low;var p=m.high^(g<<1|_>>>31);var u=m.low^(_<<1|g>>>31);for(var h=0;h<5;h++){var c=i[d+5*h];c.high^=p;c.low^=u}}for(var v=1;v<25;v++){var c=i[v];var S=c.high;var b=c.low;var k=P[v];if(k<32){var p=S<<k|b>>>32-k;var u=b<<k|S>>>32-k}else{var p=b<<k-32|S>>>64-k;var u=S<<k-32|b>>>64-k}var C=D[O[v]];C.high=p;C.low=u}var w=D[0];var T=i[0];w.high=T.high;w.low=T.low;for(var d=0;d<5;d++)for(var h=0;h<5;h++){var v=d+5*h;var c=i[v];var E=D[v];var I=D[(d+1)%5+5*h];var R=D[(d+2)%5+5*h];c.high=E.high^~I.high&R.high;c.low=E.low^~I.low&R.low}var c=i[0];var x=M[l];c.high^=x.high;c.low^=x.low}},_doFinalize:function e(){var t=this._data;var n=t.words;this._nDataBytes*8;var i=t.sigBytes*8;var o=this.blockSize*32;n[i>>>5]|=1<<24-i%32;n[(h.ceil((i+1)/o)*o>>>5)-1]|=128;t.sigBytes=n.length*4;this._process();var r=this._state;var s=this.cfg.outputLength/8;var a=s/8;var c=[];for(var l=0;l<a;l++){var d=r[l];var p=d.high;var u=d.low;p=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360;u=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360;c.push(u);c.push(p)}return new f.init(c,s)},clone:function e(){var e=i.clone.call(this);var t=e._state=this._state.slice(0);for(var n=0;n<25;n++)t[n]=t[n].clone();return e}});return t.SHA3=i._createHelper(b),t.HmacSHA3=i._createHmacHelper(b),e.SHA3}(core)}),ripemd160=createCommonjsModule(function(e,t){function C(e,t,n){return e&t|~e&n}function w(e,t,n){return e&n|t&~n}function T(e,t){return e<<t|e>>>32-t}var n,i,o,E,I,R,x,P,O,r;e.exports=(r=(n=e=core).lib,i=r.WordArray,o=r.Hasher,r=n.algo,E=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),I=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),R=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),x=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),P=i.create([0,1518500249,1859775393,2400959708,2840853838]),O=i.create([1352829926,1548603684,1836072691,2053994217,0]),r=r.RIPEMD160=o.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,o=e[i];e[i]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}for(var r,s,a,c,l,d,p=this._hash.words,u=P.words,h=O.words,f=E.words,m=I.words,y=R.words,g=x.words,_=r=p[0],v=s=p[1],S=a=p[2],b=c=p[3],k=l=p[4],n=0;n<80;n+=1)d=(d=T(d=(d=r+e[t+f[n]]|0)+(n<16?(s^a^c)+u[0]:n<32?C(s,a,c)+u[1]:n<48?((s|~a)^c)+u[2]:n<64?w(s,a,c)+u[3]:(s^(a|~c))+u[4])|0,y[n]))+l|0,r=l,l=c,c=T(a,10),a=s,s=d,d=(d=T(d=(d=_+e[t+m[n]]|0)+(n<16?(v^(S|~b))+h[0]:n<32?w(v,S,b)+h[1]:n<48?((v|~S)^b)+h[2]:n<64?C(v,S,b)+h[3]:(v^S^b)+h[4])|0,g[n]))+k|0,_=k,k=b,b=T(S,10),S=v,v=d;d=p[1]+a+b|0,p[1]=p[2]+c+k|0,p[2]=p[3]+l+_|0,p[3]=p[4]+r+v|0,p[4]=p[0]+s+S|0,p[0]=d},_doFinalize:function(){for(var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes,i=(t[i>>>5]|=128<<24-i%32,t[14+(64+i>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process(),this._hash),o=i.words,r=0;r<5;r++){var s=o[r];o[r]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e;return(e=o.clone.call(this))._hash=this._hash.clone(),e}}),n.RIPEMD160=o._createHelper(r),n.HmacRIPEMD160=o._createHmacHelper(r),e.RIPEMD160)}),hmac=createCommonjsModule(function(e,t){var n,a;e.exports=(n=(e=core).lib.Base,a=e.enc.Utf8,void(e.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=a.parse(t));for(var n=e.blockSize,i=4*n,e=((t=t.sigBytes>i?e.finalize(t):t).clamp(),this._oKey=t.clone()),t=this._iKey=t.clone(),o=e.words,r=t.words,s=0;s<n;s++)o[s]^=1549556828,r[s]^=909522486;e.sigBytes=t.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}})))}),pbkdf2=createCommonjsModule(function(e,t){var n,i,g,o,r,_,s;e.exports=(o=(n=e=core).lib,i=o.Base,g=o.WordArray,o=n.algo,r=o.SHA1,_=o.HMAC,s=o.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:r,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=_.create(n.hasher,e),o=g.create(),r=g.create([1]),s=o.words,a=r.words,c=n.keySize,l=n.iterations;s.length<c;){for(var d=i.update(t).finalize(r),p=(i.reset(),d.words),u=p.length,h=d,f=1;f<l;f++){h=i.finalize(h),i.reset();for(var m=h.words,y=0;y<u;y++)p[y]^=m[y]}o.concat(d),a[0]++}return o.sigBytes=4*c,o}}),n.PBKDF2=function(e,t,n){return s.create(n).compute(e,t)},e.PBKDF2)}),evpkdf=createCommonjsModule(function(e,t){var n,i,d,o,r,s;e.exports=(o=(n=e=core).lib,i=o.Base,d=o.WordArray,o=n.algo,r=o.MD5,s=o.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:r,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=n.hasher.create(),o=d.create(),r=o.words,s=n.keySize,a=n.iterations;r.length<s;){c&&i.update(c);var c=i.update(e).finalize(t);i.reset();for(var l=1;l<a;l++)c=i.finalize(c),i.reset();o.concat(c)}return o.sigBytes=4*s,o}}),n.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)},e.EvpKDF)}),cipherCore=createCommonjsModule(function(e,t){var n,i,s,o,r,a,c,l,d,p,u,h,f;e.exports=void((e=core).lib.Cipher||(n=(e=e).lib,i=n.Base,s=n.WordArray,o=n.BufferedBlockAlgorithm,(p=e.enc).Utf8,r=p.Base64,a=e.algo.EvpKDF,c=n.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function o(e){return"string"==typeof e?f:u}return function(i){return{encrypt:function(e,t,n){return o(t).encrypt(i,e,t,n)},decrypt:function(e,t,n){return o(t).decrypt(i,e,t,n)}}}}()}),n.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),p=e.mode={},l=n.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=p.CBC=function(){var e=l.extend();function r(e,t,n){var i,o=this._iv;o?(i=o,this._iv=void 0):i=this._prevBlock;for(var r=0;r<n;r++)e[t+r]^=i[r]}return e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;r.call(this,e,t,i),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),e.Decryptor=e.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=e.slice(t,t+i);n.decryptBlock(e,t),r.call(this,e,t,i),this._prevBlock=o}}),e}(),h=(e.pad={}).Pkcs7={pad:function(e,t){for(var t=4*t,n=t-e.sigBytes%t,i=n<<24|n<<16|n<<8|n,o=[],r=0;r<n;r+=4)o.push(i);t=s.create(o,n);e.concat(t)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:p,padding:h}),reset:function(){c.reset.call(this);var e,t=this.cfg,n=t.iv,t=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=t.createEncryptor:(e=t.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(t,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),d=n.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),p=(e.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,e=e.salt;return(e?s.create([1398893684,1701076831]).concat(e).concat(t):t).toString(r)},parse:function(e){var t,e=r.parse(e),n=e.words;return 1398893684==n[0]&&1701076831==n[1]&&(t=s.create(n.slice(2,4)),n.splice(0,4),e.sigBytes-=16),d.create({ciphertext:e,salt:t})}},u=n.SerializableCipher=i.extend({cfg:i.extend({format:p}),encrypt:function(e,t,n,i){i=this.cfg.extend(i);var o=e.createEncryptor(n,i),t=o.finalize(t),o=o.cfg;return d.create({ciphertext:t,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(n,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),h=(e.kdf={}).OpenSSL={execute:function(e,t,n,i){i=i||s.random(8);e=a.create({keySize:t+n}).compute(e,i),n=s.create(e.words.slice(t),4*n);return e.sigBytes=4*t,d.create({key:e,iv:n,salt:i})}},f=n.PasswordBasedCipher=u.extend({cfg:u.cfg.extend({kdf:h}),encrypt:function(e,t,n,i){n=(i=this.cfg.extend(i)).kdf.execute(n,e.keySize,e.ivSize),i.iv=n.iv,e=u.encrypt.call(this,e,t,n.key,i);return e.mixIn(n),e},decrypt:function(e,t,n,i){i=this.cfg.extend(i),t=this._parse(t,i.format);n=i.kdf.execute(n,e.keySize,e.ivSize,t.salt);return i.iv=n.iv,u.decrypt.call(this,e,t,n.key,i)}})))}),modeCfb=createCommonjsModule(function(e,t){var n;e.exports=((n=core).mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function r(e,t,n,i){var o,r=this._iv;r?(o=r.slice(0),this._iv=void 0):o=this._prevBlock,i.encryptBlock(o,0);for(var s=0;s<n;s++)e[t+s]^=o[s]}return e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;r.call(this,e,t,i,n),this._prevBlock=e.slice(t,t+i)}}),e.Decryptor=e.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=e.slice(t,t+i);r.call(this,e,t,i,n),this._prevBlock=o}}),e}(),n.mode.CFB)}),modeCtr=createCommonjsModule(function(e,t){var n;e.exports=((n=core).mode.CTR=function(){var e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=this._iv,r=this._counter,s=(o&&(r=this._counter=o.slice(0),this._iv=void 0),r.slice(0));n.encryptBlock(s,0),r[i-1]=r[i-1]+1|0;for(var a=0;a<i;a++)e[t+a]^=s[a]}});return e.Decryptor=t,e}(),n.mode.CTR)}),modeCtrGladman=createCommonjsModule(function(e,t){var n;e.exports=((n=core).mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function c(e){var t,n,i;return 255==(e>>24&255)?(n=e>>8&255,i=255&e,255===(t=e>>16&255)?(t=0,255===n?(n=0,255===i?i=0:++i):++n):++t,e=0,e=(e+=t<<16)+(n<<8)+i):e+=1<<24,e}var t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=this._iv,r=this._counter,s=(o&&(r=this._counter=o.slice(0),this._iv=void 0),0===((o=r)[0]=c(o[0]))&&(o[1]=c(o[1])),r.slice(0));n.encryptBlock(s,0);for(var a=0;a<i;a++)e[t+a]^=s[a]}});return e.Decryptor=t,e}(),n.mode.CTRGladman)}),modeOfb=createCommonjsModule(function(e,t){var n;e.exports=((n=core).mode.OFB=function(){var e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=this._iv,r=this._keystream;o&&(r=this._keystream=o.slice(0),this._iv=void 0),n.encryptBlock(r,0);for(var s=0;s<i;s++)e[t+s]^=r[s]}});return e.Decryptor=t,e}(),n.mode.OFB)}),modeEcb=createCommonjsModule(function(e,t){var n;e.exports=((n=core).mode.ECB=function(){var e=n.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),n.mode.ECB)}),padAnsix923=createCommonjsModule(function(e,t){e.exports=((e=core).pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,t=4*t,t=t-n%t,n=n+t-1;e.clamp(),e.words[n>>>2]|=t<<24-n%4*8,e.sigBytes+=t},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923)}),padIso10126=createCommonjsModule(function(e,t){var n;e.exports=((n=core).pad.Iso10126={pad:function(e,t){t*=4,t-=e.sigBytes%t;e.concat(n.lib.WordArray.random(t-1)).concat(n.lib.WordArray.create([t<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126)}),padIso97971=createCommonjsModule(function(e,t){var n;e.exports=((n=core).pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971)}),padZeropadding=createCommonjsModule(function(e,t){e.exports=((e=core).pad.ZeroPadding={pad:function(e,t){t*=4;e.clamp(),e.sigBytes+=t-(e.sigBytes%t||t)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},e.pad.ZeroPadding)}),padNopadding=createCommonjsModule(function(e,t){e.exports=((e=core).pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding)}),formatHex=createCommonjsModule(function(e,t){var n,i;e.exports=(n=(e=core).lib.CipherParams,i=e.enc.Hex,e.format.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){e=i.parse(e);return n.create({ciphertext:e})}},e.format.Hex)}),aes=createCommonjsModule(function(e,t){e.exports=function(e){for(var t=e,n,i=t.lib.BlockCipher,o=t.algo,p=[],r=[],s=[],a=[],c=[],l=[],u=[],h=[],f=[],m=[],d=[],y=0;y<256;y++)if(y<128)d[y]=y<<1;else d[y]=y<<1^283;for(var g=0,_=0,y=0;y<256;y++){var v=_^_<<1^_<<2^_<<3^_<<4;v=v>>>8^v&255^99;p[g]=v;r[v]=g;var S=d[g];var b=d[S];var k=d[b];var C=d[v]*257^v*16843008;s[g]=C<<24|C>>>8;a[g]=C<<16|C>>>16;c[g]=C<<8|C>>>24;l[g]=C;var C=k*16843009^b*65537^S*257^g*16843008;u[v]=C<<24|C>>>8;h[v]=C<<16|C>>>16;f[v]=C<<8|C>>>24;m[v]=C;if(!g)g=_=1;else{g=S^d[d[d[k^S]]];_^=d[d[_]]}}var w=[0,1,2,4,8,16,32,64,128,27,54],T=o.AES=i.extend({_doReset:function e(){if(this._nRounds&&this._keyPriorReset===this._key)return;var t=this._keyPriorReset=this._key;var n=t.words;var i=t.sigBytes/4;var o=this._nRounds=i+6;var r=(o+1)*4;var s=this._keySchedule=[];for(var a=0;a<r;a++)if(a<i)s[a]=n[a];else{var c=s[a-1];if(!(a%i)){c=c<<8|c>>>24;c=p[c>>>24]<<24|p[c>>>16&255]<<16|p[c>>>8&255]<<8|p[c&255];c^=w[a/i|0]<<24}else if(i>6&&a%i==4)c=p[c>>>24]<<24|p[c>>>16&255]<<16|p[c>>>8&255]<<8|p[c&255];s[a]=s[a-i]^c}var l=this._invKeySchedule=[];for(var d=0;d<r;d++){var a=r-d;if(d%4)var c=s[a];else var c=s[a-4];if(d<4||a<=4)l[d]=c;else l[d]=u[p[c>>>24]]^h[p[c>>>16&255]]^f[p[c>>>8&255]]^m[p[c&255]]}},encryptBlock:function e(t,n){this._doCryptBlock(t,n,this._keySchedule,s,a,c,l,p)},decryptBlock:function e(t,n){var i=t[n+1];t[n+1]=t[n+3];t[n+3]=i;this._doCryptBlock(t,n,this._invKeySchedule,u,h,f,m,r);var i=t[n+1];t[n+1]=t[n+3];t[n+3]=i},_doCryptBlock:function e(t,n,i,o,r,s,a,c){var l=this._nRounds;var d=t[n]^i[0];var p=t[n+1]^i[1];var u=t[n+2]^i[2];var h=t[n+3]^i[3];var f=4;for(var m=1;m<l;m++){var y=o[d>>>24]^r[p>>>16&255]^s[u>>>8&255]^a[h&255]^i[f++];var g=o[p>>>24]^r[u>>>16&255]^s[h>>>8&255]^a[d&255]^i[f++];var _=o[u>>>24]^r[h>>>16&255]^s[d>>>8&255]^a[p&255]^i[f++];var v=o[h>>>24]^r[d>>>16&255]^s[p>>>8&255]^a[u&255]^i[f++];d=y;p=g;u=_;h=v}var y=(c[d>>>24]<<24|c[p>>>16&255]<<16|c[u>>>8&255]<<8|c[h&255])^i[f++];var g=(c[p>>>24]<<24|c[u>>>16&255]<<16|c[h>>>8&255]<<8|c[d&255])^i[f++];var _=(c[u>>>24]<<24|c[h>>>16&255]<<16|c[d>>>8&255]<<8|c[p&255])^i[f++];var v=(c[h>>>24]<<24|c[d>>>16&255]<<16|c[p>>>8&255]<<8|c[u&255])^i[f++];t[n]=y;t[n+1]=g;t[n+2]=_;t[n+3]=v},keySize:256/32});return t.AES=i._createHelper(T),e.AES}(core)}),tripledes=createCommonjsModule(function(e,t){function d(e,t){t=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=t,this._lBlock^=t<<e}function p(e,t){t=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=t,this._rBlock^=t<<e}var n,i,o,l,u,h,f,m,r,s;e.exports=(o=(n=e=core).lib,i=o.WordArray,o=o.BlockCipher,s=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],h=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],m=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],r=s.DES=o.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var i=l[n]-1;t[n]=e[i>>>5]>>>31-i%32&1}for(var o=this._subKeys=[],r=0;r<16;r++){for(var s=o[r]=[],a=h[r],n=0;n<24;n++)s[n/6|0]|=t[(u[n]-1+a)%28]<<31-n%6,s[4+(n/6|0)]|=t[28+(u[n+24]-1+a)%28]<<31-n%6;s[0]=s[0]<<1|s[0]>>>31;for(n=1;n<7;n++)s[n]=s[n]>>>4*(n-1)+3;s[7]=s[7]<<5|s[7]>>>27}for(var c=this._invSubKeys=[],n=0;n<16;n++)c[n]=o[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),d.call(this,1,1431655765);for(var i=0;i<16;i++){for(var o=n[i],r=this._lBlock,s=this._rBlock,a=0,c=0;c<8;c++)a|=f[c][((s^o[c])&m[c])>>>0];this._lBlock=s,this._rBlock=r^a}var l=this._lBlock;this._lBlock=this._rBlock,this._rBlock=l,d.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2}),n.DES=o._createHelper(r),s=s.TripleDES=o.extend({_doReset:function(){var e=this._key.words;this._des1=r.createEncryptor(i.create(e.slice(0,2))),this._des2=r.createEncryptor(i.create(e.slice(2,4))),this._des3=r.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),n.TripleDES=o._createHelper(s),e.TripleDES)}),rc4=createCommonjsModule(function(e,t){function n(){for(var e=this._S,t=this._i,n=this._j,i=0,o=0;o<4;o++){var n=(n+e[t=(t+1)%256])%256,r=e[t];e[t]=e[n],e[n]=r,i|=e[(e[t]+e[n])%256]<<24-8*o}return this._i=t,this._j=n,i}var i,o,r,s;e.exports=(o=(i=e=core).lib.StreamCipher,s=i.algo,r=s.RC4=o.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,i=this._S=[],o=0;o<256;o++)i[o]=o;for(var o=0,r=0;o<256;o++){var s=o%n,s=t[s>>>2]>>>24-s%4*8&255,r=(r+i[o]+s)%256,s=i[o];i[o]=i[r],i[r]=s}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=n.call(this)},keySize:8,ivSize:0}),i.RC4=o._createHelper(r),s=s.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;0<e;e--)n.call(this)}}),i.RC4Drop=o._createHelper(s),e.RC4)}),rabbit=createCommonjsModule(function(e,t){function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)s[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0;for(n=0;n<8;n++){var i=e[n]+t[n],o=65535&i,r=i>>>16;a[n]=((o*o>>>17)+o*r>>>15)+r*r^((4294901760&i)*i|0)+((65535&i)*i|0)}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}var n,i,o,s,a,r;e.exports=(i=(n=e=core).lib.StreamCipher,r=n.algo,o=[],s=[],a=[],r=r.Rabbit=i.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);for(var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],n=this._b=0;n<4;n++)c.call(this);for(n=0;n<8;n++)o[n]^=i[n+4&7];if(t){var t=t.words,r=t[0],t=t[1],r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),s=r>>>16|4294901760&t,a=t<<16|65535&r;o[0]^=r,o[1]^=s,o[2]^=t,o[3]^=a,o[4]^=r,o[5]^=s,o[6]^=t,o[7]^=a;for(n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)o[i]=16711935&(o[i]<<8|o[i]>>>24)|4278255360&(o[i]<<24|o[i]>>>8),e[t+i]^=o[i]},blockSize:4,ivSize:2}),n.Rabbit=i._createHelper(r),e.Rabbit)}),rabbitLegacy=createCommonjsModule(function(e,t){function a(){for(var e=this._X,t=this._C,n=0;n<8;n++)s[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0;for(n=0;n<8;n++){var i=e[n]+t[n],o=65535&i,r=i>>>16;c[n]=((o*o>>>17)+o*r>>>15)+r*r^((4294901760&i)*i|0)+((65535&i)*i|0)}e[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,e[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,e[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,e[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,e[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,e[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,e[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,e[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}var n,i,o,s,c,r;e.exports=(i=(n=e=core).lib.StreamCipher,r=n.algo,o=[],s=[],c=[],r=r.RabbitLegacy=i.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],o=this._b=0;o<4;o++)a.call(this);for(o=0;o<8;o++)i[o]^=n[o+4&7];if(t){var e=t.words,t=e[0],e=e[1],t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),e=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8),r=t>>>16|4294901760&e,s=e<<16|65535&t;i[0]^=t,i[1]^=r,i[2]^=e,i[3]^=s,i[4]^=t,i[5]^=r,i[6]^=e,i[7]^=s;for(o=0;o<4;o++)a.call(this)}},_doProcessBlock:function(e,t){var n=this._X;a.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)o[i]=16711935&(o[i]<<8|o[i]>>>24)|4278255360&(o[i]<<24|o[i]>>>8),e[t+i]^=o[i]},blockSize:4,ivSize:2}),n.RabbitLegacy=i._createHelper(r),e.RabbitLegacy)}),cryptoJs=createCommonjsModule(function(e,t){e.exports=core});function encrypt(e,t){t=cryptoJs.enc.Utf8.parse(t);return cryptoJs.AES.encrypt(e,t,{mode:cryptoJs.mode.ECB,padding:cryptoJs.pad.Pkcs7}).toString()}function decrypt(e,t){t=cryptoJs.enc.Utf8.parse(t),e=cryptoJs.AES.decrypt(e,t,{mode:cryptoJs.mode.ECB,padding:cryptoJs.pad.Pkcs7});return cryptoJs.enc.Utf8.stringify(e)}function md5Encrypt(e){return cryptoJs.MD5(e)}function base64(e){e=cryptoJs.enc.Utf8.parse(window.encodeURIComponent(e));return cryptoJs.enc.Base64.stringify(e)}function base64ToStr(e){e=cryptoJs.enc.Base64.parse(e);return cryptoJs.enc.Utf8.stringify(e)}function getDeviceInfo(){return""}function getDeviceOS(){var e=navigator.userAgent;if(/iPhone/i.test(e))return"iPhone";if(/iPad/i.test(e))return"iPad";if(/Android/i.test(e))return"Android";var t=navigator.platform;if(/^(Mac68K|MacPPC|Macintosh|MacIntel)$/i.test(t))return"Mac";if(/Linux/i.test(t))return"Linux";if(/^(Win32|Windows)$/i.test(t)){if(0<e.search(/Windows NT 5\.0|Windows 2000/))return"Win2000";if(0<e.search(/Windows NT 5\.1|Windows XP/))return"WinXP";if(0<e.search(/Windows NT 5\.2|Windows 2003/))return"Win2003";if(0<e.search(/Windows NT 6\.0|Windows Vista/))return"WinVista";if(0<e.search(/Windows NT 6\.1|Windows 7/))return"Win7";if(0<e.search(/Windows NT 6\.2|Windows 8/))return"Win8";if(0<e.search(/Windows NT 10\.0|Windows NT 6\.4|Windows 10/))return"Win10"}return/^X11$/.test(t)?"Unix":"other"}function getBrowserInfo(e){var t,n=navigator.userAgent.toLowerCase(),i="",o="";return/msie ([\d.]+)/.test(n)?(i="Trident",o=n.match(/msie ([\d.]+)/)[1]):/micromessenger\/([\d.]+)/.test(n)?(t=n.match(/micromessenger\/([\d.]+)/),i="iphone"==getDeviceInfo().toLowerCase()?"WeixinAppleWebKit":"WeixinAndroidWebKit",o=t[1]):/firefox\/([\d.]+)/.test(n)?(i="Gecko",o=n.match(/firefox\/([\d.]+)/)[1]):/chrome\/([\d.]+)/.test(n)?(i="WebKit",o=n.match(/chrome\/([\d.]+)/)[1]):/opera.([\d.]+)/.test(n)?(i="Presto",o=n.match(/opera.([\d.]+)/)[1]):/version\/([\d.]+).*safari/.test(n)&&(i="WebKit",o=n.match(/version\/([\d.]+).*safari/)[1]),"kernel"==e||"name"==e?i:"version"==e?o:""}function _webglInfo(e){var t,n=document.createElement("canvas").getContext("experimental-webgl"),i=null,o="",r=getDeviceOS().toLowerCase();return null!=(i="getExtension"in n?n.getExtension("WEBGL_debug_renderer_info"):i)&&(o=(o="getParameter"in n?n.getParameter(i[e]):o)&&o.toString().toUpperCase().trim()),"iphone"!==r&&"ipad"!==r||(t="getParameter"in n?n.getParameter(n.VERSION):t)&&(t=t.toString().toUpperCase().trim(),o=o?o+"__"+t:t),o}function getMobileDeviceGPU(){var e=getDeviceOS().toLowerCase(),t="";try{t=_webglInfo("UNMASKED_RENDERER_WEBGL")}catch(e){return"UNKNOWN"}return"iphone"===e||"ipad"===e?0<t.indexOf("A6")?"iPhone5":0<t.indexOf("A7")?"iPhone5s":-1<t.indexOf("POWERVR SGX 543")?"iPhone5c":0<t.indexOf("A8")?"iPhone6":0<t.indexOf("A9")?"iPhone6s":!(0<t.indexOf("A10"))&&0<t.search(/A11|A12|A13|A14|A15|A16/i)?"iPhone8":"iPhone7":"android"===e?{"ADRENO (TM) 505":"AndroidMedium"}[t]||"AndroidMedium":"UNKNOWN"}function getClientType(){var e=getDeviceOS().toLowerCase();return"iphone"===e||"ipad"===e||iSNewIpad()?6:"android"===e?7:3}function getMaxTouchPoints(){return navigator.maxTouchPoints||0}function iSNewIpad(){return/(Mac68K|MacPPC|Macintosh|MacIntel)/i.test(navigator.userAgent)&&3<getMaxTouchPoints()}var SDK_VERSION="web-master-6.43.2-05be21c4",CRYPT_KEY_PREFIX="web0123456789012",API_VERSION="3.0.11",saasConf={saasUrl:"https://saas-rel.haimawan.com/s/rest/api",envType:""},loggerConf={logUrl:"https://countly.haimawan.com",appKey:"9c0edb3f80d8d9adc71bb544b6dc87743340e829",timeStamp:Date.now()},mouseType={down:1,up:2,move:3},stopByApp={app:1,server:0},keyTypes={keydown:"keyDown",keyup:"keyUp"};function getSDKPath(e){var t="",n=document.getElementsByTagName("script");if(n&&0<n.length)for(var i in n){var i=n[i].src,o=i&&i.indexOf(e);if(0<o){t=i.slice(0,o);break}}return t}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function mixTips(e,t){if("string"!==typeCheck(e))return"";for(var n=0;n<t.length;++n)e=e.replace("|",t[n]);return e.replace(/\n/g,"<br />")}function createUID(e){for(var t="",n="0123456789abcdef",i=0;i<8;++i)t+=n.charAt(Math.round(15*Math.random()));for(var o=0;o<3;++o){t+="-";for(var r=0;r<4;r++)t+=n.charAt(Math.round(15*Math.random()))}for(var t=(t+="-")+("0000000"+(new Date).getTime().toString(16).toUpperCase()).substr(-8),s=0;s<4;s++)t+=n.charAt(Math.round(15*Math.random()));return"".concat(t,"-").concat(e).concat(getDeviceOS()).concat(getBrowserInfo("name"))}function formatMS(e,t){var n,i="",e=e/1e3;return 3600<e&&((n=Math.floor(e/3600))&&(i+="".concat(n).concat(t.hour)),e%=3600),60<e&&((n=Math.floor(e/60))&&(i+="".concat(n).concat(t.minute)),e%=60),(e=Math.ceil(e))&&(i+="".concat(e).concat(t.seconds)),i}function getRandomString(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:16,t="abcdefghijklmnopqrstuvwxyz0123456789",n=t.charAt(Math.floor(26*Math.random())),i=0;i<e-1;++i)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function indexBy(e,t,n){if(!e||!t)return{};var i,o={};for(i in e){var r=e[i];r&&r[t]&&(o[r[t]]=n?r[n]||"":r)}return o}function mixErrorCodeHtml(e,t,n,i){t=t||e||i+(n?"["+n+"]":"");return t=n?"".concat(t,"[").concat(n,"]"):t}function isSupportRTC(){var e=navigator.userAgent.toLowerCase();return/chrome\//gi.test(e)?54<=parseFloat(e.match(/chrome\/(\d+)/i)[1]):/firefox\//gi.test(e)?46<=parseFloat(e.match(/firefox\/(\d+)/i)[1]):!!/safari\//gi.test(e)&&11<=parseFloat(e.match(/version\/(\d+)/i)[1])}function autoPlayVideo(e){var t=document.getElementById(e);t&&(window.WeixinJSBridge?WeixinJSBridge.invoke("getNetworkType",{},function(){t.play()},!1):document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.invoke("getNetworkType",{},function(){t.play()})},!1),t.play(),t.addEventListener("pause",t.play),t.addEventListener("loadeddata",t.play),t.parentNode.addEventListener("touchend",function(){t.paused&&t.play()}),t.previousElementSibling.addEventListener("touchend",function(){t.paused&&t.play()},!0))}function setCacheGameInfo(e,t){var n=getCacheGameInfo();n[e]=t,sessionStorage.setItem("hm_cloudPlay",JSON.stringify(n))}function getCacheGameInfo(){var e=sessionStorage.getItem("hm_cloudPlay");return e?JSON.parse(e):{}}function toRequestFullscreen(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen()}function toExitFullscreen(){document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}function isIE10(){return!(window.navigator.userAgent.toLowerCase().indexOf("msie")<0)&&/MSIE\s+10.0/i.test(navigator.userAgent)&&function(){return void 0===this}()}function isIE(){return!!(window.ActiveXObject||"ActiveXObject"in window)}function isObject$2(e){return"[object Object]"===Object.prototype.toString.call(e)}function toLine(e){return e&&e.replace(/([A-Z])/g,"_$1").toLowerCase()}function emptyFunction(){}function isImage(e){var t;return null==e||"undefined"==e||e.length<8?null:(arraycopy(e,0,[],0,6),arraycopy(e,6,t=[],0,4),isJpeg(t)?"image/jpeg":(arraycopy(e,0,t=[],0,8),isPng(t)?"image/png":null))}function arraycopy(e,t,n,i,o){for(var r=0;r<o;r++)n[i+r]=e[t+r]}function arrayEquals(e,t){if("undefined"!=e&&"undefined"!=t&&e instanceof Array&&t instanceof Array){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}return!1}var pngMagic=[137,80,78,71,13,10,26,10],jpeg_jfif=[74,70,73,70],jpeg_exif=[69,120,105,102],jpegMagic=[255,216,255,224];function isJpeg(e){return arrayEquals(e,jpegMagic)||arrayEquals(e,jpeg_jfif)||arrayEquals(e,jpeg_exif)}function isPng(e){return arrayEquals(e,pngMagic)}function getCompressionCss(e){var t,n=window.innerHeight,i=window.innerWidth,e=n<i*e?(t=Math.ceil(n/e),n):(t=i,Math.ceil(i*e));return{top:(n-e)/2,left:(i-t)/2,width:t,height:e}}function paramInObj(e,t,n){var i=!1;return e.map(function(e){e[t]==n&&(i=!0)}),i}function getViewResolutionStr(e,t){var n="";return n="NaN"!=parseFloat(e).toString()&&"NaN"!=parseFloat(t).toString()?+t<+e?e+"x"+t:t+"x"+e:n}function typeCheck(e){e=Object.prototype.toString.call(e);return e.substring(8,e.length-1).toLowerCase()}function resInfoCurBitrate(e,t){for(var n=0;n<t.length;n++)if(e==t[n].id)return parseInt(t[n].bitRate)}function numToString(e){return void 0===e||null==e||isNaN(e)?"-1":e.toString()}function divideBy2(e){return parseInt(e,2)}function assiginObj(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=t;if("object"!=_typeof(t)||"object"!=_typeof(n))return n;for(e in n)hasOwnProperty(t,e)?i[e]=assiginObj(t[e],n[e]):i[e]=n[e];return i}function isArray$1(e){e=Object.prototype.toString.call(e);return"array"===e.substring(8,e.length-1).toLowerCase()}function ajax(e){var t=e.url,n=e.data,i=e.done,o=e.timeout,r=void 0===o?10:o,o=e.contentType,o=void 0===o?"application/x-www-form-urlencoded":o,s=e.retryRequestCount,a=new XMLHttpRequest,c=null;return"get"===e.method.toLowerCase()?(a.open("GET",t,!0),a.send()):"post"===e.method.toLowerCase()&&(a.open("POST",t,!0),a.setRequestHeader("Content-type",o),a.send(n)),a.onreadystatechange=function(){4===a.readyState&&(200<=a.status&&a.status<300||304===a.status?i(!0,{statusCode:a.status,message:"",timeout:1e3*r,retryRequestCount:s},a.responseText):i(!1,{statusCode:a.status,message:"",timeout:1e3*r,retryRequestCount:s},""),clearTimeout(c),a=void 0)},c=setTimeout(function(){a.abort()},1e3*r),function(){a&&(a.onreadystatechange=null,clearTimeout(c),a=c=void 0)}}function http(e){var i,o=e.url,r=e.data,s=e.method,a=e.contentType,t=e.timeout,c=e.retryCount,l=e.done,e=e.retryInterval,d=void 0===e?500:e,p=1;return isArray$1(c)&&0<c.length?(p=c.length,i=l,ajax({url:o,data:r,method:s,contentType:a,done:l=function(e,t,n){e?i(!0,t,n):--p<=0?i(!1,t,n):setTimeout(function(){ajax({url:o,data:r,method:s,contentType:a,done:l,timeout:c[p-1],retryRequestCount:c.length-p})},d)},timeout:c[p-1],retryRequestCount:0})):ajax({url:o,data:r,method:s,contentType:a,done:l,timeout:t,retryRequestCount:0})}function json2url(e){var t,n=[];for(t in e)n.push("".concat(t,"=").concat(e[t]));return n.join("&")}var SaasRequest=function(){function n(e,t){_classCallCheck(this,n),this.accessKeyId=e,this.channelId=t,this.envType=saasConf.envType,this.clientType=getClientType(),this.device=this.deviceInfo(),this.retryCount=[10,10,10,10,10,10]}return _createClass(n,[{key:"deviceInfo",value:function(){return{hardDecoderSupported:"1",osName:getDeviceOS(),osVersion:getDeviceOS(),webInfo:{installLocSignYN:"",cookieId:"",userAgent:navigator.userAgent||"",browserType:navigator.vendor||"",platform:navigator.platform||"",browserVersion:getBrowserInfo("version"),browserKernel:getBrowserInfo("kernel"),browserKernelVersion:navigator.appVersion.substring(navigator.appVersion.lastIndexOf("/")+1,navigator.appVersion.length),flashPlayerVersion:-1},screenInfo:{dpi:"",resolution:"".concat(screen.width,"*").concat(screen.height)}}}},{key:"http",value:function(r,e,s){var a=this,c={url:saasConf.saasUrl,action:r,startTime:(new Date).getTime(),responseTime:0,time:0,result:"",msg:""},t=localStorage.getItem(md5Encrypt("did"))||"",n="",l="",l=/^(104|108|211|217|218|113|112|219|220|221|223|304|305|306|308|309|310|235)$/.test(r)?(n=getRandomString(),"".concat(CRYPT_KEY_PREFIX).concat(n)):(n=e.cid,this.secretKey),i={accessKeyID:this.accessKeyId,channel:this.channelId,packageName:"haima",sdkVersion:SDK_VERSION},n={action:{actId:r,transId:"".concat((new Date).getTime()).concat(getRandomString(4)),protocol:API_VERSION,random:n,sdkType:this.clientType,did:t,clientTransId:this.clientTransId},language:this.language||"zh_CN",data:encrypt(JSON.stringify(e),l),device:encrypt(JSON.stringify(this.device),l),client:encrypt(JSON.stringify(i),l)},t=json2url({t:n.action.clientTransId,a:n.action.actId,b:i.accessKeyID,d:n.action.did,u:this.userInfo.uId,p:e.packageName||"",g:e.appChannel||"",ct:n.action.sdkType,dt:(new Date).getTime()}),i="".concat(saasConf.saasUrl,"?").concat(t);this._ajaxRelease=http({url:i,data:JSON.stringify(n),method:"post",contentType:"application/json",retryCount:this.retryCount,timeout:10,retryInterval:2e3,done:function(e,t,n){if(c.responseTime=(new Date).getTime(),c.time=c.responseTime-c.startTime,c.result=e?"success":"failed",e){e=null;try{e=JSON.parse(n)}catch(e){throw new Error(a.sdkTips.responseDataError)}var i=e,o=i.code,i=i.errorCode;if(0!=o&&(c.msg="".concat(r," ").concat(o," ").concat(e.errorMsg," ").concat(e.errorCode)),(0===o||20303===o||e.data)&&(!i||"0"===i))try{e.data=JSON.parse(decrypt(e.data,l))}catch(e){throw new Error(a.sdkTips.responseDataError)}0===o&&i&&"0"!==i&&(e.code=i),s(!0,t,e,c)}else c.msg="".concat(r," ").concat(t.status),s(!1,t,n,c)}})}},{key:"setClientTransId",value:function(e){this.clientTransId=e}},{key:"setRetryCount",value:function(e){this.retryCount=e}},{key:"setSecretKey",value:function(e){this.secretKey=e}},{key:"setUserInfo",value:function(e){this.userInfo=e}},{key:"setLanguage",value:function(e,t){this.language=e,this.sdkTips=t}},{key:"getDid",value:function(e,t){e={did:e,clientType:this.clientType,envType:this.envType};this.http("104",e,t)}},{key:"getConfig",value:function(e,t,n,i,o,r,s,a){e={clientType:this.clientType,packageName:e,type:t,accessKeyId:this.accessKeyId,envType:this.envType,appChannel:n,streamingTypes:r,sdkAbility:[s]};i&&o&&(e.viewResolution=getViewResolutionStr(i,o)),this.http("108",e,a)}},{key:"getSteamInfo",value:function(e,t){var n,i={envType:this.envType,channel:this.channelId,clientType:this.clientType,deviceType:getMobileDeviceGPU(),syncRefresh:!0,confirm:e.confirm||0,userInfo:{userId:e.userInfo.uId,token:e.userInfo.uToken,userType:e.userInfo.uType,uLevel:e.userInfo.uLevel},configInfo:e.configInfo,pkgName:e.pkgName,cToken:e.cToken,orientation:e.orientation||1,playingtime:1e3*e.playingtime,opType:e.opType||1,isArchive:!!hasOwnProperty(e,"isArchive")&&e.isArchive,streamingTypes:e.streamingTypes,cid:e.cid||"",isHotUpdate:!!hasOwnProperty(e,"isHotUpdate")&&e.isHotUpdate,protoData:e.protoData||"",appChannel:e.appChannel||"",bitRate:-1,payStr:e.payStr||"",priority:e.priority||0,extraId:e.extraId||"",noInputTimeout:hasOwnProperty(e,"noInputTimeout")?e.noInputTimeout:"",archiveFromBid:e.archiveFromBid||"",archiveFromUserId:e.archiveFromUserId||"",componentType:e.componentType||0,action:e.action||"",componentName:e.componentName||"",extraData:e.extraData||"",sdkAbility:e.sdkAbility,richData:null,resolution:-1,keepAliveTimeSeconds:hasOwnProperty(e,"standbyDuration")?e.standbyDuration:""};if(/^([1-9]+)(\d*)$/.test(e.bitRate)&&(i.bitRate=21474e5<e.bitRate?21474e5:parseInt(e.bitRate)),e.viewResolutionWidth&&(n="",e.viewResolutionWidth||e.viewResolutionHeight)&&(n=getViewResolutionStr(e.viewResolutionWidth,e.viewResolutionHeight))&&(i.viewResolution=n),e.paramsExtension)for(var o in e.paramsExtension)i[o]=e.paramsExtension[o];"object"===typeCheck(e.richData)&&(i.richData=e.richData),/^([1-9]+)(\d*)$/.test(e.resolutionId)&&(i.resolution=e.resolutionId),this.http("211",i,t)}},{key:"releaseCid",value:function(e,t,n){e={cid:e,archiveMinSeconds:t||0,envType:this.envType};this.http("202",e,n)}},{key:"cloudService",value:function(e,t,n,i,o,r,s){t={cid:t,sign:n,clientType:this.clientType,orientation:1,playingtime:1e3*e.playingtime,opType:o,envType:this.envType,isArchive:!!e.isArchive,resolution:r,confirm:i,priority:e.priority||0,payStr:e.payStr||""};3!=this.clientType&&(t.deviceType=getMobileDeviceGPU()),e.viewResolutionWidth&&(n="",e.viewResolutionWidth||e.viewResolutionHeight)&&(n=getViewResolutionStr(e.viewResolutionWidth,e.viewResolutionHeight))&&(t.viewResolution=n),this.http("201",t,s)}},{key:"getGameArchiveStatus",value:function(e,t,n,i){e={pkgName:e,userInfo:{userId:(this.userInfo=t).uId,token:t.uToken,userType:t.uType||0,uLevel:t.uLevel||""},appChannel:n,envType:this.envType};this.http("112",e,i)}},{key:"hasGameArchived",value:function(e,t,n,i){e={pkgName:e,userInfo:{userId:(this.userInfo=t).uId,token:t.uToken,userType:t.uType||0,uLevel:t.uLevel||""},appChannel:n,envType:this.envType};this.http("113",e,i)}},{key:"updateUID",value:function(e,t,n){t={envType:this.envType,cid:t.cid,playingTime:t.playingTime,userInfo:{userId:t.userInfo.uId,token:t.userInfo.uToken,userType:t.userInfo.uType||0,uLevel:t.userInfo.uLevel||""},tip:t.tip,cToken:t.cToken,sdkAbility:t.sdkAbility,protoData:e.protoData||""};this.http("214",t,n)}},{key:"checkPlayingGame",value:function(e,t){this.userInfo=e;e={envType:this.envType,userInfo:{userId:e.uId,token:e.uToken,userType:e.uType||0,uLevel:e.uLevel||""}};this.http("217",e,t)}},{key:"releasePlayingGame",value:function(e,t){var n=e.userInfo,e=(this.userInfo=n,{envType:this.envType,cid:e.cid,cToken:e.cToken,pkgName:e.pkgName,playingtime:e.playingtime,appChannel:e.appChannel,userInfo:{userId:n.uId,token:n.uToken,userType:n.uType||0,uLevel:n.uLevel||""}});this.http("218",e,t)}},{key:"toStartLiving",value:function(e,t){e={envType:this.envType,cid:e.cid,livingId:e.roomId,pushStreamUrl:e.streamerUrl};this.http("219",e,t)}},{key:"toGetPinCode",value:function(e,t){e={envType:this.envType,cid:e.cid};this.http("220",e,t)}},{key:"toApplyControlPower",value:function(e,t){3!=this.clientType&&(e.imeType=0),this.http("221",e,t)}},{key:"toEndLiving",value:function(e,t){e={envType:this.envType,cid:e.cid,livingId:e.roomId};this.http("223",e,t)}},{key:"controlPowerDistribute",value:function(e,t){e={cid:e.cid,controlInfos:e.controlInfos,envType:this.envType};this.http("304",e,t)}},{key:"controlPowerQuery",value:function(e,t){e={cid:e,envType:this.envType};this.http("305",e,t)}},{key:"captureGameImage",value:function(e,t){e={cid:e.cid,opType:e.opType,txId:e.txId,uploadUrl:e.uploadUrl,size:e.size,interval:e.interval||"",format:e.format||"",pixel:e.pixel||"",uploadType:e.uploadType||""};this.http("306",e,t)}},{key:"startHuangUp",value:function(e,t){this.http("308",e,t)}},{key:"stopHuangUp",value:function(e,t){this.http("309",e,t)}},{key:"getHangUpTime",value:function(e,t){this.http("310",e,t)}},{key:"updateStandbyDuration",value:function(e,t,n){t={cid:t,keepAliveTimeSeconds:e.standbyDuration||"",noInputTimeSeconds:e.noInputTimeout||"",envType:this.envType};this.http("235",t,n)}},{key:"httpRequestRelease",value:function(){this._ajaxRelease&&this._ajaxRelease()}}]),n}(),eventEmitter=function(){var o={};function n(e){e?delete o[e]:o={}}return{on:function(e,t){o[e]=t},emit:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];o[e]&&o[e].apply(o,n)},off:n,once:function(e,t){return o[e]=t,n(e),this}}}(),loggerEventId={init_sdk_fun_call:12058,init_sdk_fun_call_multi_error:12106,start_sdk_fun_call_multi_error:12107,init_sdk_fun_failed:12066,apply_game_fun_call:10012,apply_game_fun_failed:12233,restart_game_failed:12236,get_did_start:12063,get_did_succeed:12078,get_did_failed:12079,get_config_start:12084,get_config_succeed:12080,get_config_failed:12081,get_stream_info_start:12120,get_stream_info_succeed:12121,get_stream_info_failed:12122,release_cid_start:12091,release_cid_succeed:12076,release_cid_failed:12077,cloud_service_start:12083,cloud_service_succeed:12074,cloud_service_failed:12075,saas_socket_connect:12088,saas_socket_opened:12089,saas_socket_closed:12090,saas_socket_failed:12050,saas_socket_message:12054,saas_socket_message_parse_error:12230,saas_socket_limit_stop:12909,over_time_get_pong:12311,over_limit_get_pong:12313,saas_socket_ping_pong_delay_time:12152,get_operation_5:12242,get_operation_62:12241,input_socket_connect:12085,input_socket_opened:10021,input_socket_closed:10022,input_socket_ping_pong_delay_time:10050,input_socket_ping_pong_delay_max:10033,input_socket_start_im:12094,input_socket_stop_im:12095,input_socket_connect_failed:12049,screen_socket_connect:12401,screen_socket_opened:12402,screen_socket_closed:12403,screen_socket_reconnect:12404,video_stream_connect:12087,video_stream_connected:12034,video_stream_connect_failed:12036,device_un_support:12300,video_get_data_success:13210,video_decode_failed:13211,audio_stream_connect:12086,audio_stream_connected:12033,audio_stream_connect_failed:12035,video_first_frame_time:12045,webrtc_decode_first_frame_end:13249,page_closed:12111,webrtc_begin_connect:13215,webrtc_send_join:13221,webrtc_receive_offer:13222,webrtc_setRemoteDes_success:13223,webrtc_setRemoteDes_error:13233,webrtc_create_answer_error:13235,webrtc_setLocalDes_success:13236,webrtc_send_candidate:13226,webrtc_send_answer:13224,webrtc_setLocalDes_error:13237,webrtc_receive_candidate:13225,webrtc_addIceCandidate_success:13238,webrtc_addIceCandidate_error:13239,webrtc_ontrack:13240,webrtc_connect_success:13216,webrtc_self_connect_success:13250,webrtc_no_self_connect_success:13251,webrtc_connect_status:13252,webrtc_connect_failed:13217,webrtc_reconnect_failed:13219,webrtc_datachannel_receive:13281,webrtc_datachannel_send:13282,webrtc_signal_server_success:13241,webrtc_signal_server_disconnect:13242,webrtc_signal_server_timeout:13220,webrtc_socket_reconnect:13245,webrtc_receive_audio:13253,webrtc_x86_localIcecandidate:13254,webrtc_x86_currentUseRemoteIcecandidate:13255,webrtc_x86_track:13256,webrtc_x86_iceConnectionState:13257,webrtc_x86_icegatheringstatechange:13258,webrtc_x86_signalingstatechange:13259,webrtc_x86_connectionstatechange:13260,webrtc_x86_createOfferError:13261,webrtc_x86_getRemoteSdpBegin:13262,webrtc_x86_getRemoteSdpSuccess:13263,webrtc_x86_getRemoteSdpError:13264,webrtc_x86_setRemoteDescriptionError:13265,webrtc_x86_dataChannel:13266,webrtc_x86_dataChannelNotify:13267,webrtc_x86_sendLocalSdpBegin:13268,webrtc_x86_sendLocalSdpSuccess:13269,webrtc_x86_sendLocalSdpError:13270,webrtc_x86_up_video_collection:16005,x86_control_power_query_start:12250,x86_control_power_query_succeed:12251,x86_control_power_query_failed:12252,x86_control_power_distribute_start:12253,x86_control_power_distribute_succeed:12254,x86_control_power_distribute_failed:12255,x86_capture_game_image_start:12260,x86_capture_game_image_succeed:12261,x86_capture_game_image_failed:12262,x86_game_extra_data_pay:13272,x86_game_extra_data_play:13273,x86_game_extra_data_help:13274,x86_media_devices_request:13275,x86_media_devices_response:13276,x86_media_devices_camera_capabilities:13277,x86_update_standby_duration_start:12256,x86_update_standby_duration_succeed:12257,x86_update_standby_duration_failed:12258,app_report_finish_info:15e3,video_url_got:12044,stop_game_fun_Call:12053,sdk_error_code:13053,collect_delay_data:16003,client_network_status:13247,sdk_reconnect:12104,start_revolution:12039,enter_queue:12019,out_queue:10039,visibility_change_visible:12040,visibility_change_hidden:12041,low_bitrate_detected:12046,auto_resolution_changed_start:12011,frame_delay_info:12042,fullscreen:12001,exit_fullscreen:12002,toolbar_keyboard_btn_clicked:12006,keyboard_setting_set_game_pad:12052,auto_resolution_changed_done:12012,manual_resolution_changed_start:12014,manual_resolution_changed_done:12015,keyboard_setting_clear_all:12051,set_stop_mouse_send_flag:12110,only_apply:12190,play_ready:12191,app_start_palyer:12192,keyboard_setting_reset:12008,keyboard_setting_save:12009,show_error_page:12101,show_loading_view:12099,hide_loading_view:12100,sdk_scene_changed_call:13505,rom_share_link:12621,rom_open_camera:12622,rom_open_gallery:12623,rom_inform_cap:12624,sdk_get_capList:12625,rom_inform_capList:12626,upload_image_start:12601,upload_image_success:12602,upload_image_error:12605,upload_image_end:12606,upload_image_state:12607,downLoad_file_start:12611,downLoad_file_success:12612,downLoad_file_stop:12613,downLoad_file_cancel:12614,downLoad_file_error:12615,downLoad_file_end:12616,downLoad_file_state:12617,big_file_inform:12627,start_hang_up:12634,end_hang_up:12635,hang_up_time_end:12636,hang_up_timeout:12637,get_big_file_list:12646,big_file_list:12647,get_hang_up_time:12652,player_connect_error:13280,sensor_received:13290,sensor_list_received:13297,start_liveing:13301,start_liveing_success:13302,start_liveing_error:13303,end_liveing:13304,end_liveing_success:13305,end_liveing_error:13306,get_pin_code:13307,get_pin_code_success:13308,get_pin_code_error:13309,apply_control_power:13310,apply_control_power_success:13311,apply_control_power_error:13312,get_control_success:13313,lost_control:13315,wsmessage_send_started:12901,wsmessage_send_successed:12902,wsmessage_send_failed:12903,wsmessage_send_recevied:12904,video_camera_connect:13455,video_camera_open:13457,video_camera_first_buffer:13458,video_camera_open_ack:13459,video_camera_message:14004,video_camera_close:13460,video_camera_api_check:14006,video_camera_code_check:14007,video_camera_use_select:14008,signalv2_opened:13641,signalv2_closed:13642,signalv2_setoffer:13644,appSetScreenDirection:12410,audio_connect_open:13201,audio_connect_error:13202,audio_start_msg:13203,audio_start_msg_timeout:13204,audio_user_allow_mike:13205,audio_user_refuse_mike:13206,audio_end_msg_timeout:13207,audio_connect_close:13208,audio_not_support:13209,video_support_freamcallback:13740,video_not_support_freamcallback:13741},SCENE_EVENT_IDS={12058:!0,12106:!0,12059:!0,12107:!0,12063:!0,12078:!0,12079:!0,12084:!0,12080:!0,12081:!0,12056:!0,12057:!0,10012:!0,12082:!0,12072:!0,12088:!0,12089:!0,12044:!0,12112:!0,12113:!0,12114:!0},Logger=function(){function n(e,t){_classCallCheck(this,n),this.accessKeyId=e,this.channelId=t,this.loggerUrl="".concat(loggerConf.logUrl+"/i"),this.appKey=loggerConf.appKey,this.serverTimestamp=loggerConf.timeStamp,this.cache=[],this.clientType=getClientType()}return _createClass(n,[{key:"setGameInfo",value:function(e,t,n,i){this.extraId=e,this.uId=t,this.pkgName=n,this.appChannel=i}},{key:"setLoggerInfo",value:function(e,t,n,i){this.loggerUrl&&this.appKey||(this.loggerUrl="".concat(e,"/i"),this.appKey=t,this.serverTimestamp=n),this.deviceId=i||-1}},{key:"setCid",value:function(e){this.cid=e}},{key:"setClientTransId",value:function(e){this.clientTransId=e}},{key:"send",value:function(e,t){var n=Date.now(),n=String(Math.floor(n)),i=(new Date).getHours(),o=(new Date).getDay(),e=(t&&"object"===_typeof(t)&&(t.eventDataVer="1.0"),SCENE_EVENT_IDS[e]&&eventEmitter.emit("sceneChanged","evnt",{eventId:e}),{key:"HMCPWebEvent",count:1,timestamp:n,hour:i,dow:o,segmentation:{key:this.clientType,timeStamp:n,deviceID:this.deviceId,eventID:e,cloudID:this.cid||"",channel:this.channelId,extraId:this.extraId||"",eventData:t||"",uid:this.uId,accessKeyId:this.accessKeyId,networkType:"WIFI",netStatus:"WIFI",clientTransId:this.clientTransId,serverTimestamp:this.serverTimestamp||-1,extension:{sdkVersion:SDK_VERSION,pkgName:this.pkgName,appChannel:this.appChannel||""}}}),t=[];this.loggerUrl?(this.cache.length?(t=[].concat(_toConsumableArray(this.cache),[e]),this.cache=[]):t=[e],t="events="+JSON.stringify(t)+"&app_key="+encodeURIComponent(this.appKey)+"&device_id="+encodeURIComponent(this.deviceId)+"&sdk_name="+encodeURIComponent("javascript_native_web")+"&sdk_version="+encodeURIComponent("16.12")+"&hour="+i+"&dow="+o+"&timestamp="+n,i=json2url({c:e.segmentation.cloudID||"",e:e.segmentation.eventID,t:e.segmentation.clientTransId,s:e.segmentation.key,u:e.segmentation.uid}),ajax({url:"".concat(this.loggerUrl,"?").concat(i),data:t,method:"POST",contentType:"application/x-www-form-urlencoded",timeout:10,done:function(e){}})):this.cache.push(e)}}]),n}(),SaasSocket=function(){function i(e,t,n){_classCallCheck(this,i),this.socketUrl=e,this.maxRetryCount=t||5,this.currentRetryCount=1,this.pingpongretryCount=0,this.setDataInfo=n,this.saasGetMessage=!1,this.disconnectStatus=!1}return _createClass(i,[{key:"connect",value:function(){this.currentRetryCount>this.maxRetryCount?(this.closeReconnect(),eventEmitter.emit("saasSocket","failed",this.currentRetryCount)):(this.ws=new WebSocket(this.socketUrl),this.ws.onopen=this._open.bind(this),this.ws.onmessage=this._messages.bind(this),this.ws.onclose=this._close.bind(this))}},{key:"_open",value:function(){var e=this;eventEmitter.emit("saasSocket","open",this.currentRetryCount),this.currentRetryCount=1,this.pingpongretryCount=0,"true"==this.setDataInfo.openPingPong?(this.saasTimeOutFn(),this.saasGetMessage=!0):this.heartTimer=setInterval(function(){e.ws.send("")},1e4)}},{key:"_messages",value:function(e){this.saasGetMessage=!0,this.pingpongretryCount=0;e.data.toString().match(/^pong:\d+/gi)?this.saasPingPongCountly(e.data.toString().match(/\d+/gi)[0]):eventEmitter.emit("saasSocket","messages",e.data)}},{key:"_close",value:function(e){var t=this;eventEmitter.emit("saasSocket","close",e),this.closeReconnect(),this.disconnectStatus||(this.reconnectTimer=setTimeout(function(){t.currentRetryCount++,t.connect()},1e3+2e3*this.currentRetryCount))}},{key:"send",value:function(e){return!(!this.ws||this.ws.readyState!=WebSocket.OPEN||(this.ws.send(e),0))}},{key:"saasTimeOutFn",value:function(e){var t=this;e=e||this.setDataInfo.retryPingPongPeriod[this.pingpongretryCount]||10,clearTimeout(this.saasPingPongTimer),this.saasPingPongTimer=setTimeout(function(){if(t.saasGetMessage)t.saasSocketSendPing("ping"),t.saasTimeOutFn();else{if(t.pingpongretryCount++,t.pingpongretryCount>=t.setDataInfo.retryPingPongPeriod.length)return eventEmitter.emit("saasSocket","Countly",{eventId:loggerEventId.over_limit_get_pong,eventDate:t.pingpongretryCount}),void eventEmitter.emit("saasSocket","PingPongTimeOut");t.saasSocketSendPing("ping"),t.saasTimeOutFn(t.setDataInfo.retryPingPongPeriod[t.pingpongretryCount]),eventEmitter.emit("saasSocket","Countly",{eventId:loggerEventId.over_time_get_pong,eventDate:t.pingpongretryCount})}t.saasGetMessage=!1},e)}},{key:"saasSocketSendPing",value:function(e){var t=(new Date).getTime();this.send(e+":"+t)}},{key:"saasPingPongCountly",value:function(e){var t;"true"==this.setDataInfo.openCustomCountly&&(t=Date.now(),eventEmitter.emit("saasSocket","Countly",{eventId:loggerEventId.saas_socket_ping_pong_delay_time,eventDate:t-e}))}},{key:"closeReconnect",value:function(){clearTimeout(this.reconnectTimer),clearInterval(this.heartTimer),clearTimeout(this.saasPingPongTimer),this.ws&&(this.ws.onopen=null,this.ws.onmessage=null,this.ws.onclose=null,this.ws.close(),this.ws=null)}},{key:"disconnect",value:function(){this.disconnectStatus=!0,this.closeReconnect()}}]),i}(),InputSocket=function(){function i(e,t,n){_classCallCheck(this,i),this.socketUrl=e,this.pingPongInterval=t,this.maxPingPongDelay=n}return _createClass(i,[{key:"connect",value:function(){this.ws=new WebSocket(this.socketUrl),this.ws.onopen=this._open.bind(this),this.ws.onmessage=this._messages.bind(this),this.ws.onclose=this._close.bind(this)}},{key:"_open",value:function(){var e=this;eventEmitter.emit("inputSocket","open"),this.pingPongTimer=setInterval(function(){e.ws.send("ping:".concat((new Date).getTime()))},this.pingPongInterval||6e4)}},{key:"_messages",value:function(e){eventEmitter.emit("inputSocket","messages");var t,e=e.data;/^pong:(\d+)/i.test(e)?(t=Date.now()-RegExp.$1,eventEmitter.emit("inputSocket","delay",t),t>=this.maxPingPongDelay&&eventEmitter.emit("inputSocket","delayMax",t)):/^startim/i.test(e)?eventEmitter.emit("inputSocket","startIm",e):/^stopim/i.test(e)&&eventEmitter.emit("inputSocket","stopIm",e)}},{key:"_close",value:function(e){eventEmitter.emit("inputSocket","close",e),this.disconnect()}},{key:"send",value:function(e){this.ws&&this.ws.readyState==WebSocket.OPEN&&this.ws.send(e)}},{key:"disconnect",value:function(){clearInterval(this.pingPongTimer),this.ws&&(this.ws.onopen=null,this.ws.onmessage=null,this.ws.onclose=null,this.ws.close(),this.ws=null)}}]),i}(),ScreenSocket=function(){function n(e,t){_classCallCheck(this,n),this.socketUrl=e,this.screenType=t||"screenSocket",this.maxRetryCount=5,this.currentRetryCount=0}return _createClass(n,[{key:"connect",value:function(){return this.ws=new WebSocket(this.socketUrl),this.ws.onopen=this._open.bind(this),this.ws.onmessage=this._messages.bind(this),this.ws.onclose=this._close.bind(this),this.ws}},{key:"_open",value:function(){eventEmitter.emit(this.screenType,"open")}},{key:"_messages",value:function(e){eventEmitter.emit(this.screenType,"messages",e.data)}},{key:"send",value:function(e){return!(!this.ws||this.ws.readyState!=WebSocket.OPEN||(this.ws.send(e),0))}},{key:"_close",value:function(e){var t=this;eventEmitter.emit(this.screenType,"close",e),this.currentRetryCount>=this.maxRetryCount?eventEmitter.emit(this.screenType,"failed",e):this.reconnectTimer=setTimeout(function(){eventEmitter.emit(t.screenType,"reconnect",e),t.currentRetryCount++,t.disconnect()},3e3)}},{key:"disconnect",value:function(){this.ws&&(clearTimeout(this.reconnectTimer),this.ws.onopen=null,this.ws.onmessage=null,this.ws.onclose=null,this.ws.close(),this.ws=null)}}]),n}(),applyFailCode={INIT_PARAMS_VALIDATE_FAILED:100000001,PARAMS_ERROR:100000002,SAAS_WEBSOCKET_CONNECT:100099001,SAAS_WEBSOCKET_DATA:100099005,NETWORK_BROKEN:100099006,VIDEO_STREAME_CONNECT_FAILED:100099007,UNSUPPORTED_DEVICE:100099101,wechat_unsupported:100099102,game_interrupted:100099012,invalid_resolution:100099013,internal_error:100099014,GET_DID_TIMEOUT:100104002,GET_DID_DID_ERROR:100104005,GET_DID_COUNTLY_ERROR:100104006,GET_CONFIG_TIMEOUT:100108002,GET_STREAM_INFO_TIMEOUT:100211002,GET_STREAM_INFO_CID_ERROR:100211005,GET_STREAM_INFO_SAAS_WEBSOCKET_ERROR:100211006,GET_STREAM_INFO_INSTANCE_ERROR:100211007,RELEASE_CID_TIMEOUT:100202002,CHANGE_RESOLUTION_TIMEOUT:100201002,streaming_sdk_candidate_error:100300002,WEBRTC_CONNECT_TIMEOUT:100300005,SAAS_WEBSOCKET_RTCDATE_ERROR:100300006,x86_rtc_player_error:100400001,x86_rtc_ice_connection_failed:100400002,x86_rtc_connection_state_failed:100400003,x86_rtc_create_offer_error:100400004,x86_rtc_create_answer_error:100400004,x86_rtc_get_remote_sdp_error:100400005,x86_rtc_set_remote_desc_error:100400006,x86_rtc_data_channel_error:100400007,NO_CID:100999001,CONNECT_WS_SAAS_FAILED:100999002,WS_SAAS_PING_PONG_ERROR:100999003,WS_SAAS_PING_PONG_SECCESS:100999004,CONNECT_VIDEO_NOT_MSG:100999005,CONNECT_ONLY_AUDIO_OK:100999006,CONNECT_ONLY_INPUT_OK:100999007,CONNECT_ALL_FAILED:100999008},applyFailReason={REQUEST_ERROR:"requestError",INTERNAL_ERROR:"internalError",IS_ERROR:"instanceError",TOKEN_EXPIRE:"tokenExpire",INSTANCE_LIMIT:"instanceLimit",IS_END:"timeLimit",LOG_OUT:"logOff",MULTI_INST:"multiInst",KICK_OFF:"noOperation",QUEUE_LIMIT:"queueLimit",MAINTAIN_SERVER:"maintainServer",TOKEN_FAILED:"tokenFailed",NORMAL:"normal",LOAD_GAME_FAILED:"loadGameFailed",NETWORK_OFF:"networkOff",LINK_LIMIT:"linkLimit",UNSUPPORTED_DEVICE:"unsupportDevice"},logDisabled_=(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},applyFailReason.KICK_OFF,36),applyFailReason.INTERNAL_ERROR,60),applyFailReason.NORMAL,62),applyFailReason.IS_END,63),applyFailReason.LINK_LIMIT,64),!0),deprecationWarnings_=!0;function extractVersion(e,t,n){e=e.match(t);return e&&e.length>=n&&parseInt(e[n],10)}function wrapPeerConnectionEvent(e,i,o){var r,s;e.RTCPeerConnection&&(e=e.RTCPeerConnection.prototype,r=e.addEventListener,e.addEventListener=function(e,t){var n;return e!==i?r.apply(this,arguments):(n=function(e){e=o(e);e&&(t.handleEvent?t.handleEvent(e):t(e))},this._eventMap=this._eventMap||{},this._eventMap[i]||(this._eventMap[i]=new Map),this._eventMap[i].set(t,n),r.apply(this,[e,n]))},s=e.removeEventListener,e.removeEventListener=function(e,t){var n;return e===i&&this._eventMap&&this._eventMap[i]&&this._eventMap[i].has(t)?(n=this._eventMap[i].get(t),this._eventMap[i].delete(t),0===this._eventMap[i].size&&delete this._eventMap[i],0===Object.keys(this._eventMap).length&&delete this._eventMap,s.apply(this,[e,n])):s.apply(this,arguments)},Object.defineProperty(e,"on"+i,{get:function(){return this["_on"+i]},set:function(e){this["_on"+i]&&(this.removeEventListener(i,this["_on"+i]),delete this["_on"+i]),e&&this.addEventListener(i,this["_on"+i]=e)},enumerable:!0,configurable:!0}))}function disableLog(e){return"boolean"!=typeof e?new Error("Argument type: "+_typeof(e)+". Please use a boolean."):(logDisabled_=e)?"adapter.js logging disabled":"adapter.js logging enabled"}function disableWarnings(e){return"boolean"!=typeof e?new Error("Argument type: "+_typeof(e)+". Please use a boolean."):(deprecationWarnings_=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function log(){"undefined"==typeof window||_typeof(window)}function deprecated(e,t){}function detectBrowser(e){var t={browser:null,version:null};if(void 0!==e&&e.navigator){var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=extractVersion(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=extractVersion(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=extractVersion(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=extractVersion(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}}else t.browser="Not a browser.";return t}function isObject$1(e){return"[object Object]"===Object.prototype.toString.call(e)}function compactObject(o){return isObject$1(o)?Object.keys(o).reduce(function(e,t){var n=isObject$1(o[t]),i=n?compactObject(o[t]):o[t],n=n&&!Object.keys(i).length;return void 0===i||n?e:Object.assign(e,_defineProperty({},t,i))},{}):o}function walkStats(t,n,i){n&&!i.has(n.id)&&(i.set(n.id,n),Object.keys(n).forEach(function(e){e.endsWith("Id")?walkStats(t,t.get(n[e]),i):e.endsWith("Ids")&&n[e].forEach(function(e){walkStats(t,t.get(e),i)})}))}function filterStats(n,t,e){var i,o=e?"outbound-rtp":"inbound-rtp",r=new Map;return null!==t&&(i=[],n.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)}),i.forEach(function(t){n.forEach(function(e){e.type===o&&e.trackId===t.id&&walkStats(n,e,r)})})),r}var logging=log;function shimGetUserMedia$3(e,t){var s,i,o,n,a=e&&e.navigator;a.mediaDevices&&(s=function(o){var r;return"object"!==_typeof(o)||o.mandatory||o.optional?o:(r={},Object.keys(o).forEach(function(t){var n,i,e;"require"!==t&&"advanced"!==t&&"mediaSource"!==t&&(void 0!==(n="object"===_typeof(o[t])?o[t]:{ideal:o[t]}).exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact),i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t},void 0!==n.ideal&&(r.optional=r.optional||[],e={},"number"==typeof n.ideal?(e[i("min",t)]=n.ideal,r.optional.push(e),(e={})[i("max",t)]=n.ideal):e[i("",t)]=n.ideal,r.optional.push(e)),void 0!==n.exact&&"number"!=typeof n.exact?(r.mandatory=r.mandatory||{},r.mandatory[i("",t)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(r.mandatory=r.mandatory||{},r.mandatory[i(e,t)]=n[e])}))}),o.advanced&&(r.optional=(r.optional||[]).concat(o.advanced)),r)},i=function(n,i){if(!(61<=t.version)){if((n=JSON.parse(JSON.stringify(n)))&&"object"===_typeof(n.audio)&&((e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])})((n=JSON.parse(JSON.stringify(n))).audio,"autoGainControl","googAutoGainControl"),e(n.audio,"noiseSuppression","googNoiseSuppression"),n.audio=s(n.audio)),n&&"object"===_typeof(n.video)){var o,r=(r=n.video.facingMode)&&("object"===_typeof(r)?r:{ideal:r}),e=t.version<66;if(r&&("user"===r.exact||"environment"===r.exact||"user"===r.ideal||"environment"===r.ideal)&&(!a.mediaDevices.getSupportedConstraints||!a.mediaDevices.getSupportedConstraints().facingMode||e))if(delete n.video.facingMode,"environment"===r.exact||"environment"===r.ideal?o=["back","rear"]:"user"!==r.exact&&"user"!==r.ideal||(o=["front"]),o)return a.mediaDevices.enumerateDevices().then(function(e){var t=(e=e.filter(function(e){return"videoinput"===e.kind})).find(function(t){return o.some(function(e){return t.label.toLowerCase().includes(e)})});return(t=!t&&e.length&&o.includes("back")?e[e.length-1]:t)&&(n.video.deviceId=r.exact?{exact:t.deviceId}:{ideal:t.deviceId}),n.video=s(n.video),logging("chrome: "+JSON.stringify(n)),i(n)});n.video=s(n.video)}logging("chrome: "+JSON.stringify(n))}return i(n)},o=function(e){return 64<=t.version?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},a.getUserMedia=function(e,t,n){i(e,function(e){a.webkitGetUserMedia(e,t,function(e){n&&n(o(e))})})}.bind(a),a.mediaDevices.getUserMedia)&&(n=a.mediaDevices.getUserMedia.bind(a.mediaDevices),a.mediaDevices.getUserMedia=function(e){return i(e,function(t){return n(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return e},function(e){return Promise.reject(o(e))})})})}function shimGetDisplayMedia$2(r,e){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&"function"==typeof e&&(r.navigator.mediaDevices.getDisplayMedia=function(o){return e(o).then(function(e){var t=o.video&&o.video.width,n=o.video&&o.video.height,i=o.video&&o.video.frameRate;return o.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxFrameRate:i||3}},t&&(o.video.mandatory.maxWidth=t),n&&(o.video.mandatory.maxHeight=n),r.navigator.mediaDevices.getUserMedia(o)})})}function shimMediaStream(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function shimOnTrack$1(r){var e;"object"!==_typeof(r)||!r.RTCPeerConnection||"ontrack"in r.RTCPeerConnection.prototype?wrapPeerConnectionEvent(r,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}):(Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0}),e=r.RTCPeerConnection.prototype.setRemoteDescription,r.RTCPeerConnection.prototype.setRemoteDescription=function(){var o=this;return this._ontrackpoly||(this._ontrackpoly=function(i){i.stream.addEventListener("addtrack",function(t){var e=r.RTCPeerConnection.prototype.getReceivers?o.getReceivers().find(function(e){return e.track&&e.track.id===t.track.id}):{track:t.track},n=new Event("track");n.track=t.track,n.receiver=e,n.transceiver={receiver:e},n.streams=[i.stream],o.dispatchEvent(n)}),i.stream.getTracks().forEach(function(t){var e=r.RTCPeerConnection.prototype.getReceivers?o.getReceivers().find(function(e){return e.track&&e.track.id===t.id}):{track:t},n=new Event("track");n.track=t,n.receiver=e,n.transceiver={receiver:e},n.streams=[i.stream],o.dispatchEvent(n)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)})}function shimGetSendersWithDtmf(e){var i,o,t,n,r,s;"object"===_typeof(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype?(i=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}},e.RTCPeerConnection.prototype.getSenders||(e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()},o=e.RTCPeerConnection.prototype.addTrack,e.RTCPeerConnection.prototype.addTrack=function(e,t){var n=o.apply(this,arguments);return n||(n=i(this,e),this._senders.push(n)),n},t=e.RTCPeerConnection.prototype.removeTrack,e.RTCPeerConnection.prototype.removeTrack=function(e){t.apply(this,arguments);e=this._senders.indexOf(e);-1!==e&&this._senders.splice(e,1)}),n=e.RTCPeerConnection.prototype.addStream,e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(function(e){t._senders.push(i(t,e))})},r=e.RTCPeerConnection.prototype.removeStream,e.RTCPeerConnection.prototype.removeStream=function(e){var n=this;this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(function(t){var e=n._senders.find(function(e){return e.track===t});e&&n._senders.splice(n._senders.indexOf(e),1)})}):"object"===_typeof(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&(s=e.RTCPeerConnection.prototype.getSenders,e.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=s.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}}))}function shimGetStats(e){var s;e.RTCPeerConnection&&(s=e.RTCPeerConnection.prototype.getStats,e.RTCPeerConnection.prototype.getStats=function(){var n,i,o=this,e=Array.prototype.slice.call(arguments),t=e[0],r=e[1],e=e[2];return 0<arguments.length&&"function"==typeof t?s.apply(this,arguments):0!==s.length||0!==arguments.length&&"function"==typeof t?(n=function(e){var i={};return e.result().forEach(function(t){var n={id:t.id,timestamp:t.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type};t.names().forEach(function(e){n[e]=t.stat(e)}),i[n.id]=n}),i},i=function(t){return new Map(Object.keys(t).map(function(e){return[e,t[e]]}))},2<=arguments.length?s.apply(this,[function(e){r(i(n(e)))},t]):new Promise(function(t,e){s.apply(o,[function(e){t(i(n(e)))},e])}).then(r,e)):s.apply(this,[])})}function shimSenderReceiverGetStats(e){var n,t,i,r;"object"===_typeof(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver&&("getStats"in e.RTCRtpSender.prototype||((n=e.RTCPeerConnection.prototype.getSenders)&&(e.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=n.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e}),(t=e.RTCPeerConnection.prototype.addTrack)&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=t.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(e){return filterStats(e,t.track,!0)})}),"getStats"in e.RTCRtpReceiver.prototype||((i=e.RTCPeerConnection.prototype.getReceivers)&&(e.RTCPeerConnection.prototype.getReceivers=function(){var t=this,e=i.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e}),wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(e){return filterStats(e,t.track,!1)})}),"getStats"in e.RTCRtpSender.prototype)&&"getStats"in e.RTCRtpReceiver.prototype&&(r=e.RTCPeerConnection.prototype.getStats,e.RTCPeerConnection.prototype.getStats=function(){var t,n,i,o;return 0<arguments.length&&arguments[0]instanceof e.MediaStreamTrack?(t=arguments[0],this.getSenders().forEach(function(e){e.track===t&&(n?o=!0:n=e)}),this.getReceivers().forEach(function(e){return e.track===t&&(i?o=!0:i=e),e.track===t}),o||n&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))):r.apply(this,arguments)})}function shimAddTrackRemoveTrackWithNative(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(e){return t._shimmedLocalStreams[e][0]})};var i=e.RTCPeerConnection.prototype.addTrack,o=(e.RTCPeerConnection.prototype.addTrack=function(e,t){if(!t)return i.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=i.apply(this,arguments);return this._shimmedLocalStreams[t.id]?-1===this._shimmedLocalStreams[t.id].indexOf(n)&&this._shimmedLocalStreams[t.id].push(n):this._shimmedLocalStreams[t.id]=[t,n],n},e.RTCPeerConnection.prototype.addStream),t=(e.RTCPeerConnection.prototype.addStream=function(e){var n=this,t=(this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(t){if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError")}),this.getSenders()),i=(o.apply(this,arguments),this.getSenders().filter(function(e){return-1===t.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)},e.RTCPeerConnection.prototype.removeStream),r=(e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],t.apply(this,arguments)},e.RTCPeerConnection.prototype.removeTrack);e.RTCPeerConnection.prototype.removeTrack=function(n){var i=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},n&&Object.keys(this._shimmedLocalStreams).forEach(function(e){var t=i._shimmedLocalStreams[e].indexOf(n);-1!==t&&i._shimmedLocalStreams[e].splice(t,1),1===i._shimmedLocalStreams[e].length&&delete i._shimmedLocalStreams[e]}),r.apply(this,arguments)}}function shimAddTrackRemoveTrack(o,e){if(o.RTCPeerConnection){if(o.RTCPeerConnection.prototype.addTrack&&65<=e.version)return shimAddTrackRemoveTrackWithNative(o);var n=o.RTCPeerConnection.prototype.getLocalStreams,i=(o.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this,e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(function(e){return t._reverseStreams[e.id]})},o.RTCPeerConnection.prototype.addStream),t=(o.RTCPeerConnection.prototype.addStream=function(e){var t,n=this;this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},e.getTracks().forEach(function(t){if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError")}),this._reverseStreams[e.id]||(t=new o.MediaStream(e.getTracks()),this._streams[e.id]=t,this._reverseStreams[t.id]=e,e=t),i.apply(this,[e])},o.RTCPeerConnection.prototype.removeStream),r=(o.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[(this._streams[e.id]||e).id],delete this._streams[e.id]},o.RTCPeerConnection.prototype.addTrack=function(t,e){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var i=this._streams[e.id];return i?(i.addTrack(t),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))})):(i=new o.MediaStream([t]),this._streams[e.id]=i,this._reverseStreams[i.id]=e,this.addStream(i)),this.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(e){var i=o.RTCPeerConnection.prototype[e],t=_defineProperty({},e,function(){var t=this,n=arguments;return arguments.length&&"function"==typeof arguments[0]?i.apply(this,[function(e){e=a(t,e);n[0].apply(null,[e])},function(e){n[1]&&n[1].apply(null,e)},arguments[2]]):i.apply(this,arguments).then(function(e){return a(t,e)})});o.RTCPeerConnection.prototype[e]=t[e]}),o.RTCPeerConnection.prototype.setLocalDescription),s=(o.RTCPeerConnection.prototype.setLocalDescription=function(){var n,e,i;return arguments.length&&arguments[0].type&&(arguments[0]=(n=this,i=(e=arguments[0]).sdp,Object.keys(n._reverseStreams||[]).forEach(function(e){var e=n._reverseStreams[e],t=n._streams[e.id];i=i.replace(new RegExp(e.id,"g"),t.id)}),new RTCSessionDescription({type:e.type,sdp:i}))),r.apply(this,arguments)},Object.getOwnPropertyDescriptor(o.RTCPeerConnection.prototype,"localDescription"));Object.defineProperty(o.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=s.get.apply(this);return""===e.type?e:a(this,e)}}),o.RTCPeerConnection.prototype.removeTrack=function(t){var n,i=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!t._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(t._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(function(e){i._streams[e].getTracks().find(function(e){return t.track===e})&&(n=i._streams[e])}),n&&(1===n.getTracks().length?this.removeStream(this._reverseStreams[n.id]):n.removeTrack(t.track),this.dispatchEvent(new Event("negotiationneeded")))}}function a(n,e){var i=e.sdp;return Object.keys(n._reverseStreams||[]).forEach(function(e){var e=n._reverseStreams[e],t=n._streams[e.id];i=i.replace(new RegExp(t.id,"g"),e.id)}),new RTCSessionDescription({type:e.type,sdp:i})}}function shimPeerConnection$2(i,e){!i.RTCPeerConnection&&i.webkitRTCPeerConnection&&(i.RTCPeerConnection=i.webkitRTCPeerConnection),i.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=i.RTCPeerConnection.prototype[e],n=_defineProperty({},e,function(){return arguments[0]=new("addIceCandidate"===e?i.RTCIceCandidate:i.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)});i.RTCPeerConnection.prototype[e]=n[e]})}function fixNegotiationNeeded(e,n){wrapPeerConnectionEvent(e,"negotiationneeded",function(e){var t=e.target;if(!(n.version<72||t.getConfiguration&&"plan-b"===t.getConfiguration().sdpSemantics)||"stable"===t.signalingState)return e})}var chromeShim=Object.freeze({__proto__:null,shimMediaStream:shimMediaStream,shimOnTrack:shimOnTrack$1,shimGetSendersWithDtmf:shimGetSendersWithDtmf,shimGetStats:shimGetStats,shimSenderReceiverGetStats:shimSenderReceiverGetStats,shimAddTrackRemoveTrackWithNative:shimAddTrackRemoveTrackWithNative,shimAddTrackRemoveTrack:shimAddTrackRemoveTrack,shimPeerConnection:shimPeerConnection$2,fixNegotiationNeeded:fixNegotiationNeeded,shimGetUserMedia:shimGetUserMedia$3,shimGetDisplayMedia:shimGetDisplayMedia$2});function filterIceServers$1(e,t){var i=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){var t,n;if(e&&(e.urls||e.url))return n=e.urls||e.url,e.url&&!e.urls&&deprecated("RTCIceServer.url","RTCIceServer.urls"),n=(n=(t="string"==typeof n)?[n]:n).filter(function(e){return 0!==e.indexOf("stun:")&&e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp")&&!i&&(i=!0)}),delete e.url,e.urls=t?n[0]:n,!!n.length})}var sdp=createCommonjsModule(function(e){var l={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};l.localCName=l.generateIdentifier(),l.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},l.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(0<t?"m="+e:e).trim()+"\r\n"})},l.getDescription=function(e){e=l.splitSections(e);return e&&e[0]},l.getMediaSections=function(e){e=l.splitSections(e);return e.shift(),e},l.matchPrefix=function(e,t){return l.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},l.parseCandidate=function(e){for(var t=(0===e.indexOf("a=candidate:")?e.substring(12):e.substring(10)).split(" "),n={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1];break;case"ufrag":n.ufrag=t[i+1],n.usernameFragment=t[i+1];break;default:n[t[i]]=t[i+1]}return n},l.writeCandidate=function(e){var t=[],n=(t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port),e.type);return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},l.parseIceOptions=function(e){return e.substr(14).split(" ")},l.parseRtpMap=function(e){var e=e.substr(9).split(" "),t={payloadType:parseInt(e.shift(),10)},e=e[0].split("/");return t.name=e[0],t.clockRate=parseInt(e[1],10),t.channels=3===e.length?parseInt(e[2],10):1,t.numChannels=t.channels,t},l.writeRtpMap=function(e){var t=e.payloadType,n=(void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),e.channels||e.numChannels||1);return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},l.parseExtmap=function(e){e=e.substr(9).split(" ");return{id:parseInt(e[0],10),direction:0<e[0].indexOf("/")?e[0].split("/")[1]:"sendrecv",uri:e[1]}},l.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},l.parseFmtp=function(e){for(var t,n={},i=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<i.length;o++)n[(t=i[o].trim().split("="))[0].trim()]=t[1];return n},l.writeFmtp=function(t){var n,e="",i=t.payloadType;return void 0!==t.preferredPayloadType&&(i=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length&&(n=[],Object.keys(t.parameters).forEach(function(e){t.parameters[e]?n.push(e+"="+t.parameters[e]):n.push(e)}),e+="a=fmtp:"+i+" "+n.join(";")+"\r\n"),e},l.parseRtcpFb=function(e){e=e.substr(e.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},l.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},l.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},i=e.indexOf(":",t);return-1<i?(n.attribute=e.substr(t+1,i-t-1),n.value=e.substr(i+1)):n.attribute=e.substr(t+1),n},l.parseSsrcGroup=function(e){e=e.substr(13).split(" ");return{semantics:e.shift(),ssrcs:e.map(function(e){return parseInt(e,10)})}},l.getMid=function(e){e=l.matchPrefix(e,"a=mid:")[0];if(e)return e.substr(6)},l.parseFingerprint=function(e){e=e.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},l.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:l.matchPrefix(e+t,"a=fingerprint:").map(l.parseFingerprint)}},l.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},l.parseCryptoLine=function(e){e=e.substr(9).split(" ");return{tag:parseInt(e[0],10),cryptoSuite:e[1],keyParams:e[2],sessionParams:e.slice(3)}},l.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===_typeof(e.keyParams)?l.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},l.parseCryptoKeyParams=function(e){return 0!==e.indexOf("inline:")?null:{keyMethod:"inline",keySalt:(e=e.substr(7).split("|"))[0],lifeTime:e[1],mkiValue:e[2]?e[2].split(":")[0]:void 0,mkiLength:e[2]?e[2].split(":")[1]:void 0}},l.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},l.getCryptoParameters=function(e,t){return l.matchPrefix(e+t,"a=crypto:").map(l.parseCryptoLine)},l.getIceParameters=function(e,t){var n=l.matchPrefix(e+t,"a=ice-ufrag:")[0],e=l.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&e?{usernameFragment:n.substr(12),password:e.substr(10)}:null},l.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},l.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=l.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var o=n[i],r=l.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(r){var s=l.parseRtpMap(r),r=l.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=r.length?l.parseFmtp(r[0]):{},s.rtcpFeedback=l.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(l.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return l.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(l.parseExtmap(e))}),t},l.writeRtpDescription=function(e,t){var n="",i=(n=(n=(n=(n+="m="+e+" ")+(0<t.codecs.length?"9":"0")+" UDP/TLS/RTP/SAVPF ")+(t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n"))+"c=IN IP4 0.0.0.0\r\n"+"a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n=(n=(n+=l.writeRtpMap(e))+l.writeFmtp(e))+l.writeRtcpFb(e)}),0);return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),0<i&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){n+=l.writeExtmap(e)}),n},l.parseRtpEncodingParameters=function(e){var t,n=[],i=l.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),r=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=l.matchPrefix(e,"a=ssrc:").map(function(e){return l.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),a=0<s.length&&s[0].ssrc,s=l.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})}),c=(0<s.length&&1<s[0].length&&s[0][0]===a&&(t=s[0][1]),i.codecs.forEach(function(e){"RTX"===e.name.toUpperCase()&&e.parameters.apt&&(e={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)},a&&t&&(e.rtx={ssrc:t}),n.push(e),o)&&((e=JSON.parse(JSON.stringify(e))).fec={ssrc:a,mechanism:r?"red+ulpfec":"red"},n.push(e))}),0===n.length&&a&&n.push({ssrc:a}),l.matchPrefix(e,"b="));return c.length&&(c=0===c[0].indexOf("b=TIAS:")?parseInt(c[0].substr(7),10):0===c[0].indexOf("b=AS:")?1e3*parseInt(c[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(e){e.maxBitrate=c})),n},l.parseRtcpParameters=function(e){var t={},n=l.matchPrefix(e,"a=ssrc:").map(function(e){return l.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0],n=(n&&(t.cname=n.value,t.ssrc=n.ssrc),l.matchPrefix(e,"a=rtcp-rsize")),n=(t.reducedSize=0<n.length,t.compound=0===n.length,l.matchPrefix(e,"a=rtcp-mux"));return t.mux=0<n.length,t},l.parseMsid=function(e){var t,n=l.matchPrefix(e,"a=msid:");return 1===n.length?{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]}:0<(n=l.matchPrefix(e,"a=ssrc:").map(function(e){return l.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute})).length?{stream:(t=n[0].value.split(" "))[0],track:t[1]}:void 0},l.parseSctpDescription=function(e){var t,n=l.parseMLine(e),i=l.matchPrefix(e,"a=max-message-size:"),i=(0<i.length&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536),l.matchPrefix(e,"a=sctp-port:"));return 0<i.length?{port:parseInt(i[0].substr(12),10),protocol:n.fmt,maxMessageSize:t}:0<l.matchPrefix(e,"a=sctpmap:").length?(i=l.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" "),{port:parseInt(i[0],10),protocol:i[1],maxMessageSize:t}):void 0},l.writeSctpDescription=function(e,t){var n=[],n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"];return void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},l.generateSessionId=function(){return Math.random().toString().substr(2,21)},l.writeSessionBoilerplate=function(e,t,n){t=void 0!==t?t:2,e=e||l.generateSessionId();return"v=0\r\no="+(n||"thisisadapterortc")+" "+e+" "+t+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},l.writeMediaSection=function(e,t,n,i){t=l.writeRtpDescription(e.kind,t);return t=(t=(t+=l.writeIceParameters(e.iceGatherer.getLocalParameters()))+l.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"))+("a=mid:"+e.mid+"\r\n"),e.direction?t+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?t+="a=sendrecv\r\n":e.rtpSender?t+="a=sendonly\r\n":e.rtpReceiver?t+="a=recvonly\r\n":t+="a=inactive\r\n",e.rtpSender&&(t=t+"a="+(n="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n")+"a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+n,e.sendEncodingParameters[0].rtx)&&(t=(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+n)+"a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n"),t+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+l.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+l.localCName+"\r\n"),t},l.getDirection=function(e,t){for(var n=l.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?l.getDirection(t):"sendrecv"},l.getKind=function(e){return l.splitLines(e)[0].split(" ")[0].substr(2)},l.isRejected=function(e){return"0"===e.split(" ",2)[1]},l.parseMLine=function(e){e=l.splitLines(e)[0].substr(2).split(" ");return{kind:e[0],port:parseInt(e[1],10),protocol:e[2],fmt:e.slice(3).join(" ")}},l.parseOLine=function(e){e=l.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:e[0],sessionId:e[1],sessionVersion:parseInt(e[2],10),netType:e[3],addressType:e[4],address:e[5]}},l.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=l.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=l});function fixStatsType(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function writeMediaSection(e,t,n,i,o){t=sdp.writeRtpDescription(e.kind,t);return t=(t=(t+=sdp.writeIceParameters(e.iceGatherer.getLocalParameters()))+sdp.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"))+("a=mid:"+e.mid+"\r\n"),e.rtpSender&&e.rtpReceiver?t+="a=sendrecv\r\n":e.rtpSender?t+="a=sendonly\r\n":e.rtpReceiver?t+="a=recvonly\r\n":t+="a=inactive\r\n",e.rtpSender&&(n=e.rtpSender._initialTrackId||e.rtpSender.track.id,e.rtpSender._initialTrackId=n,t=t+"a="+(o="msid:"+(i?i.id:"-")+" "+n+"\r\n")+"a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o,e.sendEncodingParameters[0].rtx)&&(t=(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o)+"a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n"),t+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+sdp.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(t+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+sdp.localCName+"\r\n"),t}function filterIceServers(e,i){var o=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){var t,n;if(e&&(e.urls||e.url))return n=e.urls||e.url,e.url&&e.urls,n=(n=(t="string"==typeof n)?[n]:n).filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||o?0===e.indexOf("stun:")&&14393<=i&&-1===e.indexOf("?transport=udp"):o=!0}),delete e.url,e.urls=t?n[0]:n,!!n.length})}function getCommonCapabilities(i,o){function r(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]}var s={codecs:[],headerExtensions:[],fecMechanisms:[]};return i.codecs.forEach(function(n){for(var e=0;e<o.codecs.length;e++){var t=o.codecs[e];if(n.name.toLowerCase()===t.name.toLowerCase()&&n.clockRate===t.clockRate&&("rtx"!==n.name.toLowerCase()||!n.parameters||!t.parameters.apt||function(e,t,n,i){e=r(e.parameters.apt,n),n=r(t.parameters.apt,i);return e&&n&&e.name.toLowerCase()===n.name.toLowerCase()}(n,t,i.codecs,o.codecs))){(t=JSON.parse(JSON.stringify(t))).numChannels=Math.min(n.numChannels,t.numChannels),s.codecs.push(t),t.rtcpFeedback=t.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),i.headerExtensions.forEach(function(e){for(var t=0;t<o.headerExtensions.length;t++){var n=o.headerExtensions[t];if(e.uri===n.uri){s.headerExtensions.push(n);break}}}),s}function isActionAllowedInSignalingState(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function maybeAddCandidate(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}function makeError(e,t){t=new Error(t);return t.name=e,t.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],t}var rtcpeerconnection=function(R,x){function P(e,t){t.addTrack(e),t.dispatchEvent(new R.MediaStreamTrackEvent("addtrack",{track:e}))}function o(e,t,n,i){var o=new Event("track");o.track=t,o.receiver=n,o.transceiver={receiver:n},o.streams=i,R.setTimeout(function(){e._dispatchEvent("track",o)})}function i(e){var t=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=n[e].bind(n)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",e=JSON.parse(JSON.stringify(e||{})),this.usingBundle="max-bundle"===e.bundlePolicy,"negotiate"===e.rtcpMuxPolicy)throw makeError("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(e.rtcpMuxPolicy||(e.rtcpMuxPolicy="require"),e.iceTransportPolicy){case"all":case"relay":break;default:e.iceTransportPolicy="all"}switch(e.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:e.bundlePolicy="balanced"}if(e.iceServers=filterIceServers(e.iceServers||[],x),this._iceGatherers=[],e.iceCandidatePoolSize)for(var i=e.iceCandidatePoolSize;0<i;i--)this._iceGatherers.push(new R.RTCIceGatherer({iceServers:e.iceServers,gatherPolicy:e.iceTransportPolicy}));else e.iceCandidatePoolSize=0;this._config=e,this.transceivers=[],this._sdpSessionId=sdp.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1}Object.defineProperty(i.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(i.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),i.prototype.onicecandidate=null,i.prototype.onaddstream=null,i.prototype.ontrack=null,i.prototype.onremovestream=null,i.prototype.onsignalingstatechange=null,i.prototype.oniceconnectionstatechange=null,i.prototype.onconnectionstatechange=null,i.prototype.onicegatheringstatechange=null,i.prototype.onnegotiationneeded=null,i.prototype.ondatachannel=null,i.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},i.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},i.prototype.getConfiguration=function(){return this._config},i.prototype.getLocalStreams=function(){return this.localStreams},i.prototype.getRemoteStreams=function(){return this.remoteStreams},i.prototype._createTransceiver=function(e,t){var n=0<this.transceivers.length,e={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};return this.usingBundle&&n?(e.iceTransport=this.transceivers[0].iceTransport,e.dtlsTransport=this.transceivers[0].dtlsTransport):(n=this._createIceAndDtlsTransports(),e.iceTransport=n.iceTransport,e.dtlsTransport=n.dtlsTransport),t||this.transceivers.push(e),e},i.prototype.addTrack=function(t,e){if(this._isClosed)throw makeError("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find(function(e){return e.track===t}))throw makeError("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(n=this.transceivers[i]);return n=n||this._createTransceiver(t.kind),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(e)&&this.localStreams.push(e),n.track=t,n.stream=e,n.rtpSender=new R.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},i.prototype.addStream=function(t){var i,n=this;15025<=x?t.getTracks().forEach(function(e){n.addTrack(e,t)}):(i=t.clone(),t.getTracks().forEach(function(e,t){var n=i.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),i.getTracks().forEach(function(e){n.addTrack(e,i)}))},i.prototype.removeTrack=function(t){if(this._isClosed)throw makeError("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof R.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var e=this.transceivers.find(function(e){return e.rtpSender===t});if(!e)throw makeError("InvalidAccessError","Sender was not created by this connection.");var n=e.stream;e.rtpSender.stop(),e.rtpSender=null,e.track=null,e.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(n)&&-1<this.localStreams.indexOf(n)&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},i.prototype.removeStream=function(e){var n=this;e.getTracks().forEach(function(t){var e=n.getSenders().find(function(e){return e.track===t});e&&n.removeTrack(e)})},i.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},i.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},i.prototype._createIceGatherer=function(n,e){var i,o=this;return e&&0<n?this.transceivers[0].iceGatherer:this._iceGatherers.length?this._iceGatherers.shift():(i=new R.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy}),Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[n].bufferedCandidateEvents=[],this.transceivers[n].bufferCandidates=function(e){var t=!e.candidate||0===Object.keys(e.candidate).length;i.state=t?"completed":"gathering",null!==o.transceivers[n].bufferedCandidateEvents&&o.transceivers[n].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[n].bufferCandidates),i)},i.prototype._gather=function(i,o){var e,r=this,s=this.transceivers[o].iceGatherer;s.onlocalcandidate||(e=this.transceivers[o].bufferedCandidateEvents,this.transceivers[o].bufferedCandidateEvents=null,s.removeEventListener("localcandidate",this.transceivers[o].bufferCandidates),s.onlocalcandidate=function(e){var t,n;r.usingBundle&&0<o||((t=new Event("icecandidate")).candidate={sdpMid:i,sdpMLineIndex:o},(n=!(e=e.candidate)||0===Object.keys(e).length)?"new"!==s.state&&"gathering"!==s.state||(s.state="completed"):("new"===s.state&&(s.state="gathering"),e.component=1,e.ufrag=s.getLocalParameters().usernameFragment,e=sdp.writeCandidate(e),t.candidate=Object.assign(t.candidate,sdp.parseCandidate(e)),t.candidate.candidate=e,t.candidate.toJSON=function(){return{candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex,usernameFragment:t.candidate.usernameFragment}}),(e=sdp.getMediaSections(r._localDescription.sdp))[t.candidate.sdpMLineIndex]+=n?"a=end-of-candidates\r\n":"a="+t.candidate.candidate+"\r\n",r._localDescription.sdp=sdp.getDescription(r._localDescription.sdp)+e.join(""),e=r.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}),"gathering"!==r.iceGatheringState&&(r.iceGatheringState="gathering",r._emitGatheringStateChange()),n||r._dispatchEvent("icecandidate",t),e&&(r._dispatchEvent("icecandidate",new Event("icecandidate")),r.iceGatheringState="complete",r._emitGatheringStateChange()))},R.setTimeout(function(){e.forEach(function(e){s.onlocalcandidate(e)})},0))},i.prototype._createIceAndDtlsTransports=function(){var e=this,t=new R.RTCIceTransport(null),n=(t.onicestatechange=function(){e._updateIceConnectionState(),e._updateConnectionState()},new R.RTCDtlsTransport(t));return n.ondtlsstatechange=function(){e._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),e._updateConnectionState()},{iceTransport:t,dtlsTransport:n}},i.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer,t=(t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer),this.transceivers[e].iceTransport),t=(t&&(delete t.onicestatechange,delete this.transceivers[e].iceTransport),this.transceivers[e].dtlsTransport);t&&(delete t.ondtlsstatechange,delete t.onerror,delete this.transceivers[e].dtlsTransport)},i.prototype._transceive=function(e,t,n){var i=getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:sdp.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),n&&e.rtpReceiver&&0<i.codecs.length&&("video"===e.kind&&e.recvEncodingParameters&&x<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?i.encodings=e.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(i.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},i.prototype.setLocalDescription=function(e){var t,l,d,p=this;return-1===["offer","answer"].indexOf(e.type)?Promise.reject(makeError("TypeError",'Unsupported type "'+e.type+'"')):!isActionAllowedInSignalingState("setLocalDescription",e.type,p.signalingState)||p._isClosed?Promise.reject(makeError("InvalidStateError","Can not set local "+e.type+" in state "+p.signalingState)):("offer"===e.type?(t=sdp.splitSections(e.sdp),l=t.shift(),t.forEach(function(e,t){e=sdp.parseRtpParameters(e);p.transceivers[t].localCapabilities=e}),p.transceivers.forEach(function(e,t){p._gather(e.mid,t)})):"answer"===e.type&&(l=(t=sdp.splitSections(p._remoteDescription.sdp)).shift(),d=0<sdp.matchPrefix(l,"a=ice-lite").length,t.forEach(function(e,t){var n,i=p.transceivers[t],o=i.iceGatherer,r=i.iceTransport,s=i.dtlsTransport,a=i.localCapabilities,c=i.remoteCapabilities;sdp.isRejected(e)&&0===sdp.matchPrefix(e,"a=bundle-only").length||i.rejected||(n=sdp.getIceParameters(e,l),e=sdp.getDtlsParameters(e,l),d&&(e.role="server"),p.usingBundle&&0!==t||(p._gather(i.mid,t),"new"===r.state&&r.start(o,n,d?"controlling":"controlled"),"new"===s.state&&s.start(e)),t=getCommonCapabilities(a,c),p._transceive(i,0<t.codecs.length,!1))})),p._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?p._updateSignalingState("have-local-offer"):p._updateSignalingState("stable"),Promise.resolve())},i.prototype.setRemoteDescription=function(b){var k,C,e,w,T,E,t,I=this;return-1===["offer","answer"].indexOf(b.type)?Promise.reject(makeError("TypeError",'Unsupported type "'+b.type+'"')):!isActionAllowedInSignalingState("setRemoteDescription",b.type,I.signalingState)||I._isClosed?Promise.reject(makeError("InvalidStateError","Can not set remote "+b.type+" in state "+I.signalingState)):(k={},I.remoteStreams.forEach(function(e){k[e.id]=e}),C=[],e=sdp.splitSections(b.sdp),w=e.shift(),T=0<sdp.matchPrefix(w,"a=ice-lite").length,E=0<sdp.matchPrefix(w,"a=group:BUNDLE ").length,I.usingBundle=E,t=sdp.matchPrefix(w,"a=ice-options:")[0],I.canTrickleIceCandidates=!!t&&0<=t.substr(14).split(" ").indexOf("trickle"),e.forEach(function(e,t){var n,i,o,r,s,a,c,l,d,p,u,h,f,m=sdp.splitLines(e),y=sdp.getKind(e),g=sdp.isRejected(e)&&0===sdp.matchPrefix(e,"a=bundle-only").length,m=m[0].substr(2).split(" ")[2],_=sdp.getDirection(e,w),v=sdp.parseMsid(e),S=sdp.getMid(e)||sdp.generateIdentifier();g||"application"===y&&("DTLS/SCTP"===m||"UDP/DTLS/SCTP"===m)?I.transceivers[t]={mid:S,kind:y,protocol:m,rejected:!0}:(!g&&I.transceivers[t]&&I.transceivers[t].rejected&&(I.transceivers[t]=I._createTransceiver(y,!0)),m=sdp.parseRtpParameters(e),g||(r=sdp.getIceParameters(e,w),(s=sdp.getDtlsParameters(e,w)).role="client"),i=sdp.parseRtpEncodingParameters(e),a=sdp.parseRtcpParameters(e),c=0<sdp.matchPrefix(e,"a=end-of-candidates",w).length,e=sdp.matchPrefix(e,"a=candidate:").map(function(e){return sdp.parseCandidate(e)}).filter(function(e){return 1===e.component}),("offer"===b.type||"answer"===b.type)&&!g&&E&&0<t&&I.transceivers[t]&&(I._disposeIceAndDtlsTransports(t),I.transceivers[t].iceGatherer=I.transceivers[0].iceGatherer,I.transceivers[t].iceTransport=I.transceivers[0].iceTransport,I.transceivers[t].dtlsTransport=I.transceivers[0].dtlsTransport,I.transceivers[t].rtpSender&&I.transceivers[t].rtpSender.setTransport(I.transceivers[0].dtlsTransport),I.transceivers[t].rtpReceiver)&&I.transceivers[t].rtpReceiver.setTransport(I.transceivers[0].dtlsTransport),"offer"!==b.type||g?"answer"!==b.type||g||(g=(n=I.transceivers[t]).iceGatherer,h=n.iceTransport,l=n.dtlsTransport,f=n.rtpReceiver,d=n.sendEncodingParameters,o=n.localCapabilities,I.transceivers[t].recvEncodingParameters=i,I.transceivers[t].remoteCapabilities=m,I.transceivers[t].rtcpParameters=a,e.length&&"new"===h.state&&(!T&&!c||E&&0!==t?e.forEach(function(e){maybeAddCandidate(n.iceTransport,e)}):h.setRemoteCandidates(e)),E&&0!==t||("new"===h.state&&h.start(g,r,"controlling"),"new"===l.state&&l.start(s)),!getCommonCapabilities(n.localCapabilities,n.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&n.sendEncodingParameters[0].rtx&&delete n.sendEncodingParameters[0].rtx,I._transceive(n,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!f||"sendrecv"!==_&&"sendonly"!==_?delete n.rtpReceiver:(u=f.track,v?(k[v.stream]||(k[v.stream]=new R.MediaStream),P(u,k[v.stream]),C.push([u,f,k[v.stream]])):(k.default||(k.default=new R.MediaStream),P(u,k.default),C.push([u,f,k.default])))):((n=I.transceivers[t]||I._createTransceiver(y)).mid=S,n.iceGatherer||(n.iceGatherer=I._createIceGatherer(t,E)),e.length&&"new"===n.iceTransport.state&&(!c||E&&0!==t?e.forEach(function(e){maybeAddCandidate(n.iceTransport,e)}):n.iceTransport.setRemoteCandidates(e)),o=R.RTCRtpReceiver.getCapabilities(y),x<15019&&(o.codecs=o.codecs.filter(function(e){return"rtx"!==e.name})),d=n.sendEncodingParameters||[{ssrc:1001*(2*t+2)}],h=!1,"sendrecv"===_||"sendonly"===_?(h=!n.rtpReceiver,f=n.rtpReceiver||new R.RTCRtpReceiver(n.dtlsTransport,y),h&&(u=f.track,(p=v&&"-"===v.stream?p:v?(k[v.stream]||(k[v.stream]=new R.MediaStream,Object.defineProperty(k[v.stream],"id",{get:function(){return v.stream}})),Object.defineProperty(u,"id",{get:function(){return v.track}}),k[v.stream]):(k.default||(k.default=new R.MediaStream),k.default))&&(P(u,p),n.associatedRemoteMediaStreams.push(p)),C.push([u,f,p]))):n.rtpReceiver&&n.rtpReceiver.track&&(n.associatedRemoteMediaStreams.forEach(function(e){var t=e.getTracks().find(function(e){return e.id===n.rtpReceiver.track.id});t&&(t=t,(e=e).removeTrack(t),e.dispatchEvent(new R.MediaStreamTrackEvent("removetrack",{track:t})))}),n.associatedRemoteMediaStreams=[]),n.localCapabilities=o,n.remoteCapabilities=m,n.rtpReceiver=f,n.rtcpParameters=a,n.sendEncodingParameters=d,n.recvEncodingParameters=i,I._transceive(I.transceivers[t],!1,h)))}),void 0===I._dtlsRole&&(I._dtlsRole="offer"===b.type?"active":"passive"),I._remoteDescription={type:b.type,sdp:b.sdp},"offer"===b.type?I._updateSignalingState("have-remote-offer"):I._updateSignalingState("stable"),Object.keys(k).forEach(function(e){var t,i=k[e];i.getTracks().length&&(-1===I.remoteStreams.indexOf(i)&&(I.remoteStreams.push(i),(t=new Event("addstream")).stream=i,R.setTimeout(function(){I._dispatchEvent("addstream",t)})),C.forEach(function(e){var t=e[0],n=e[1];i.id===e[2].id&&o(I,t,n,[i])}))}),C.forEach(function(e){e[2]||o(I,e[0],e[1],[])}),R.setTimeout(function(){I&&I.transceivers&&I.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&0<e.iceTransport.getRemoteCandidates().length&&e.iceTransport.addRemoteCandidate({})})},4e3),Promise.resolve())},i.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},i.prototype._updateSignalingState=function(e){this.signalingState=e;e=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",e)},i.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,R.setTimeout(function(){var e;t.needNegotiation&&(t.needNegotiation=!1,e=new Event("negotiationneeded"),t._dispatchEvent("negotiationneeded",e))},0))},i.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",0<t.failed?e="failed":0<t.checking?e="checking":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected?e="connected":0<t.completed&&(e="completed"),e!==this.iceConnectionState&&(this.iceConnectionState=e,e=new Event("iceconnectionstatechange"),this._dispatchEvent("iceconnectionstatechange",e))},i.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",0<t.failed?e="failed":0<t.connecting?e="connecting":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected&&(e="connected"),e!==this.connectionState&&(this.connectionState=e,e=new Event("connectionstatechange"),this._dispatchEvent("connectionstatechange",e))},i.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(makeError("InvalidStateError","Can not call createOffer after close"));var t=r.transceivers.filter(function(e){return"audio"===e.kind}).length,n=r.transceivers.filter(function(e){return"video"===e.kind}).length,e=arguments[0];if(e){if(e.mandatory||e.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==e.offerToReceiveAudio&&(t=!0===e.offerToReceiveAudio?1:!1===e.offerToReceiveAudio?0:e.offerToReceiveAudio),void 0!==e.offerToReceiveVideo&&(n=!0===e.offerToReceiveVideo?1:!1===e.offerToReceiveVideo?0:e.offerToReceiveVideo)}for(r.transceivers.forEach(function(e){"audio"===e.kind?--t<0&&(e.wantReceive=!1):"video"===e.kind&&--n<0&&(e.wantReceive=!1)});0<t||0<n;)0<t&&(r._createTransceiver("audio"),t--),0<n&&(r._createTransceiver("video"),n--);var i=sdp.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++),e=(r.transceivers.forEach(function(e,t){var n=e.track,i=e.kind,o=e.mid||sdp.generateIdentifier(),o=(e.mid=o,e.iceGatherer||(e.iceGatherer=r._createIceGatherer(t,r.usingBundle)),R.RTCRtpSender.getCapabilities(i)),t=(x<15019&&(o.codecs=o.codecs.filter(function(e){return"rtx"!==e.name})),o.codecs.forEach(function(t){"H264"===t.name&&void 0===t.parameters["level-asymmetry-allowed"]&&(t.parameters["level-asymmetry-allowed"]="1"),e.remoteCapabilities&&e.remoteCapabilities.codecs&&e.remoteCapabilities.codecs.forEach(function(e){t.name.toLowerCase()===e.name.toLowerCase()&&t.clockRate===e.clockRate&&(t.preferredPayloadType=e.payloadType)})}),o.headerExtensions.forEach(function(t){(e.remoteCapabilities&&e.remoteCapabilities.headerExtensions||[]).forEach(function(e){t.uri===e.uri&&(t.id=e.id)})}),e.sendEncodingParameters||[{ssrc:1001*(2*t+1)}]);n&&15019<=x&&"video"===i&&!t[0].rtx&&(t[0].rtx={ssrc:t[0].ssrc+1}),e.wantReceive&&(e.rtpReceiver=new R.RTCRtpReceiver(e.dtlsTransport,i)),e.localCapabilities=o,e.sendEncodingParameters=t}),"max-compat"!==r._config.bundlePolicy&&(i+="a=group:BUNDLE "+r.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),i+="a=ice-options:trickle\r\n",r.transceivers.forEach(function(e,t){i=i+writeMediaSection(e,e.localCapabilities,"offer",e.stream,r._dtlsRole)+"a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,i+="a="+sdp.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(i+="a=end-of-candidates\r\n"))}),new R.RTCSessionDescription({type:"offer",sdp:i}));return Promise.resolve(e)},i.prototype.createAnswer=function(){var i,o,e,r=this;return r._isClosed?Promise.reject(makeError("InvalidStateError","Can not call createAnswer after close")):"have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState?Promise.reject(makeError("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState)):(i=sdp.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++),r.usingBundle&&(i+="a=group:BUNDLE "+r.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),i+="a=ice-options:trickle\r\n",o=sdp.getMediaSections(r._remoteDescription.sdp).length,r.transceivers.forEach(function(e,t){var n;o<t+1||(e.rejected?("application"===e.kind?"DTLS/SCTP"===e.protocol?i+="m=application 0 DTLS/SCTP 5000\r\n":i+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?i+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(i+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),i+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n"):(e.stream&&("audio"===e.kind?n=e.stream.getAudioTracks()[0]:"video"===e.kind&&(n=e.stream.getVideoTracks()[0]),n)&&15019<=x&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}),!(t=getCommonCapabilities(e.localCapabilities,e.remoteCapabilities)).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,i+=writeMediaSection(e,t,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(i+="a=rtcp-rsize\r\n")))}),e=new R.RTCSessionDescription({type:"answer",sdp:i}),Promise.resolve(e))},i.prototype.addIceCandidate=function(a){var c,l=this;return a&&void 0===a.sdpMLineIndex&&!a.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(e,t){if(!l._remoteDescription)return t(makeError("InvalidStateError","Can not add ICE candidate without a remote description"));if(a&&""!==a.candidate){var n=a.sdpMLineIndex;if(a.sdpMid)for(var i=0;i<l.transceivers.length;i++)if(l.transceivers[i].mid===a.sdpMid){n=i;break}var o=l.transceivers[n];if(!o)return t(makeError("OperationError","Can not add ICE candidate"));if(o.rejected)return e();var r=0<Object.keys(a.candidate).length?sdp.parseCandidate(a.candidate):{};if("tcp"===r.protocol&&(0===r.port||9===r.port))return e();if(r.component&&1!==r.component)return e();if((0===n||0<n&&o.iceTransport!==l.transceivers[0].iceTransport)&&!maybeAddCandidate(o.iceTransport,r))return t(makeError("OperationError","Can not add ICE candidate"));o=a.candidate.trim();0===o.indexOf("a=")&&(o=o.substr(2)),(c=sdp.getMediaSections(l._remoteDescription.sdp))[n]+="a="+(r.type?o:"end-of-candidates")+"\r\n",l._remoteDescription.sdp=sdp.getDescription(l._remoteDescription.sdp)+c.join("")}else for(var s=0;s<l.transceivers.length&&(l.transceivers[s].rejected||(l.transceivers[s].iceTransport.addRemoteCandidate({}),(c=sdp.getMediaSections(l._remoteDescription.sdp))[s]+="a=end-of-candidates\r\n",l._remoteDescription.sdp=sdp.getDescription(l._remoteDescription.sdp)+c.join(""),!l.usingBundle));s++);e()})},i.prototype.getStats=function(t){if(t&&t instanceof R.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)}),n)return n.getStats();throw makeError("InvalidAccessError","Invalid selector.")}var i=[];return this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(e){t[e]&&i.push(t[e].getStats())})}),Promise.all(i).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(e){var t,e=R[e];e&&e.prototype&&e.prototype.getStats&&(t=e.prototype.getStats,e.prototype.getStats=function(){return t.apply(this).then(function(t){var n=new Map;return Object.keys(t).forEach(function(e){t[e].type=fixStatsType(t[e]),n.set(e,t[e])}),n})})});var e=["createOffer","createAnswer"];return e.forEach(function(e){var n=i.prototype[e];i.prototype[e]=function(){var t=arguments;return"function"==typeof t[0]||"function"==typeof t[1]?n.apply(this,[arguments[2]]).then(function(e){"function"==typeof t[0]&&t[0].apply(null,[e])},function(e){"function"==typeof t[1]&&t[1].apply(null,[e])}):n.apply(this,arguments)}}),(e=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var n=i.prototype[e];i.prototype[e]=function(){var t=arguments;return"function"==typeof t[1]||"function"==typeof t[2]?n.apply(this,arguments).then(function(){"function"==typeof t[1]&&t[1].apply(null)},function(e){"function"==typeof t[2]&&t[2].apply(null,[e])}):n.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),i};function shimGetUserMedia$2(e){var e=e&&e.navigator,t=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(e){return t(e).catch(function(e){return Promise.reject({name:{PermissionDeniedError:"NotAllowedError"}[(e=e).name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}})})}}function shimGetDisplayMedia$1(e){"getDisplayMedia"in e.navigator&&(!e.navigator.mediaDevices||e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function shimPeerConnection$1(e,t){e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)&&(n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled"),Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})),!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var n,i=rtcpeerconnection(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=filterIceServers$1(e.iceServers,t.version),log("ICE servers after filtering:",e.iceServers)),new i(e)},e.RTCPeerConnection.prototype=i.prototype}function shimReplaceTrack(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var edgeShim=Object.freeze({__proto__:null,shimPeerConnection:shimPeerConnection$1,shimReplaceTrack:shimReplaceTrack,shimGetUserMedia:shimGetUserMedia$2,shimGetDisplayMedia:shimGetDisplayMedia$1});function shimGetUserMedia$1(e,t){var n,i,o,r,s=e&&e.navigator,e=e&&e.MediaStreamTrack;s.getUserMedia=function(e,t,n){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),s.mediaDevices.getUserMedia(e).then(t,n)},55<t.version&&"autoGainControl"in s.mediaDevices.getSupportedConstraints()||(n=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},i=s.mediaDevices.getUserMedia.bind(s.mediaDevices),s.mediaDevices.getUserMedia=function(e){return"object"===_typeof(e)&&"object"===_typeof(e.audio)&&(e=JSON.parse(JSON.stringify(e)),n(e.audio,"autoGainControl","mozAutoGainControl"),n(e.audio,"noiseSuppression","mozNoiseSuppression")),i(e)},e&&e.prototype.getSettings&&(o=e.prototype.getSettings,e.prototype.getSettings=function(){var e=o.apply(this,arguments);return n(e,"mozAutoGainControl","autoGainControl"),n(e,"mozNoiseSuppression","noiseSuppression"),e}),e&&e.prototype.applyConstraints&&(r=e.prototype.applyConstraints,e.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===_typeof(e)&&(e=JSON.parse(JSON.stringify(e)),n(e,"autoGainControl","mozAutoGainControl"),n(e,"noiseSuppression","mozNoiseSuppression")),r.apply(this,[e])}))}function shimGetDisplayMedia(t,n){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(e){return e&&e.video?(!0===e.video?e.video={mediaSource:n}:e.video.mediaSource=n,t.navigator.mediaDevices.getUserMedia(e)):((e=new DOMException("getDisplayMedia without video constraints is undefined")).name="NotFoundError",e.code=8,Promise.reject(e))})}function shimOnTrack(e){"object"===_typeof(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function shimPeerConnection(i,o){var r,n;"object"===_typeof(i)&&(i.RTCPeerConnection||i.mozRTCPeerConnection)&&(!i.RTCPeerConnection&&i.mozRTCPeerConnection&&(i.RTCPeerConnection=i.mozRTCPeerConnection),o.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=i.RTCPeerConnection.prototype[e],n=_defineProperty({},e,function(){return arguments[0]=new("addIceCandidate"===e?i.RTCIceCandidate:i.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)});i.RTCPeerConnection.prototype[e]=n[e]}),r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=i.RTCPeerConnection.prototype.getStats,i.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),t=e[0],i=e[1],e=e[2];return n.apply(this,[t||null]).then(function(n){if(o.version<53&&!i)try{n.forEach(function(e){e.type=r[e.type]||e.type})}catch(e){if("TypeError"!==e.name)throw e;n.forEach(function(e,t){n.set(t,Object.assign({},e,{type:r[e.type]||e.type}))})}return n}).then(i,e)})}function shimSenderGetStats(e){var n,t;"object"===_typeof(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype||((n=e.RTCPeerConnection.prototype.getSenders)&&(e.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=n.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e}),(t=e.RTCPeerConnection.prototype.addTrack)&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=t.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}))}function shimReceiverGetStats(e){var n;"object"===_typeof(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype||((n=e.RTCPeerConnection.prototype.getReceivers)&&(e.RTCPeerConnection.prototype.getReceivers=function(){var t=this,e=n.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e}),wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}))}function shimRemoveStream(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){var n=this;deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(e){e.track&&t.getTracks().includes(e.track)&&n.removeTrack(e)})})}function shimRTCDataChannel(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function shimAddTransceiver(e){var o;"object"===_typeof(e)&&e.RTCPeerConnection&&(o=e.RTCPeerConnection.prototype.addTransceiver)&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e,t=arguments[1],n=t&&"sendEncodings"in t,i=(n&&t.sendEncodings.forEach(function(e){if("rid"in e)if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(1<=parseFloat(e.scaleResolutionDownBy)))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(0<=parseFloat(e.maxFramerate)))throw new RangeError("max_framerate must be >= 0.0")}),o.apply(this,arguments));return!n||"encodings"in(n=(e=i.sender).getParameters())&&(1!==n.encodings.length||0!==Object.keys(n.encodings[0]).length)||(n.encodings=t.sendEncodings,e.sendEncodings=t.sendEncodings,this.setParametersPromises.push(e.setParameters(n).then(function(){delete e.sendEncodings}).catch(function(){delete e.sendEncodings}))),i})}function shimGetParameters(e){var t;"object"===_typeof(e)&&e.RTCRtpSender&&(t=e.RTCRtpSender.prototype.getParameters)&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function shimCreateOffer(e){var n;"object"===_typeof(e)&&e.RTCPeerConnection&&(n=e.RTCPeerConnection.prototype.createOffer,e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,t=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return n.apply(t,e)}).finally(function(){t.setParametersPromises=[]}):n.apply(this,arguments)})}function shimCreateAnswer(e){var n;"object"===_typeof(e)&&e.RTCPeerConnection&&(n=e.RTCPeerConnection.prototype.createAnswer,e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,t=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return n.apply(t,e)}).finally(function(){t.setParametersPromises=[]}):n.apply(this,arguments)})}var firefoxShim=Object.freeze({__proto__:null,shimOnTrack:shimOnTrack,shimPeerConnection:shimPeerConnection,shimSenderGetStats:shimSenderGetStats,shimReceiverGetStats:shimReceiverGetStats,shimRemoveStream:shimRemoveStream,shimRTCDataChannel:shimRTCDataChannel,shimAddTransceiver:shimAddTransceiver,shimGetParameters:shimGetParameters,shimCreateOffer:shimCreateOffer,shimCreateAnswer:shimCreateAnswer,shimGetUserMedia:shimGetUserMedia$1,shimGetDisplayMedia:shimGetDisplayMedia});function shimLocalStreamsAPI(e){var r;"object"===_typeof(e)&&e.RTCPeerConnection&&("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"addStream"in e.RTCPeerConnection.prototype||(r=e.RTCPeerConnection.prototype.addTrack,e.RTCPeerConnection.prototype.addStream=function(t){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach(function(e){return r.call(n,e,t)}),t.getVideoTracks().forEach(function(e){return r.call(n,e,t)})},e.RTCPeerConnection.prototype.addTrack=function(e){for(var t=this,n=arguments.length,i=new Array(1<n?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i&&i.forEach(function(e){t._localStreams?t._localStreams.includes(e)||t._localStreams.push(e):t._localStreams=[e]}),r.apply(this,arguments)}),"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t,n=this,i=(this._localStreams||(this._localStreams=[]),this._localStreams.indexOf(e));-1!==i&&(this._localStreams.splice(i,1),t=e.getTracks(),this.getSenders().forEach(function(e){t.includes(e.track)&&n.removeTrack(e)}))}))}function shimRemoteStreamsAPI(e){var t;"object"===_typeof(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams||[]}),"onaddstream"in e.RTCPeerConnection.prototype||(Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var n=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){var t;n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.includes(e)||(n._remoteStreams.push(e),(t=new Event("addstream")).stream=e,n.dispatchEvent(t))})})}}),t=e.RTCPeerConnection.prototype.setRemoteDescription,e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){var t;n._remoteStreams||(n._remoteStreams=[]),0<=n._remoteStreams.indexOf(e)||(n._remoteStreams.push(e),(t=new Event("addstream")).stream=e,n.dispatchEvent(t))})}),t.apply(n,arguments)}))}function shimCallbacksAPI(e){var i,o,r,s,a;"object"===_typeof(e)&&e.RTCPeerConnection&&(e=e.RTCPeerConnection.prototype,i=e.createOffer,o=e.createAnswer,r=e.setLocalDescription,s=e.setRemoteDescription,a=e.addIceCandidate,e.createOffer=function(e,t){var n=i.apply(this,[2<=arguments.length?arguments[2]:e]);return t?(n.then(e,t),Promise.resolve()):n},e.createAnswer=function(e,t){var n=o.apply(this,[2<=arguments.length?arguments[2]:e]);return t?(n.then(e,t),Promise.resolve()):n},e.setLocalDescription=function(e,t,n){e=r.apply(this,[e]);return n?(e.then(t,n),Promise.resolve()):e},e.setRemoteDescription=function(e,t,n){e=s.apply(this,[e]);return n?(e.then(t,n),Promise.resolve()):e},e.addIceCandidate=function(e,t,n){e=a.apply(this,[e]);return n?(e.then(t,n),Promise.resolve()):e})}function shimGetUserMedia(e){var t,i=e&&e.navigator;i.mediaDevices&&i.mediaDevices.getUserMedia&&(e=i.mediaDevices,t=e.getUserMedia.bind(e),i.mediaDevices.getUserMedia=function(e){return t(shimConstraints(e))}),!i.getUserMedia&&i.mediaDevices&&i.mediaDevices.getUserMedia&&(i.getUserMedia=function(e,t,n){i.mediaDevices.getUserMedia(e).then(t,n)}.bind(i))}function shimConstraints(e){return e&&void 0!==e.video?Object.assign({},e,{video:compactObject(e.video)}):e}function shimRTCIceServerUrls(e){var r;e.RTCPeerConnection&&(r=e.RTCPeerConnection,e.RTCPeerConnection=function(e,t){if(e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(deprecated("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,n.push(o)):n.push(e.iceServers[i])}e.iceServers=n}return new r(e,t)},e.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r)&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return r.generateCertificate}})}function shimTrackEventTransceiver(e){"object"===_typeof(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(e){var n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){var t;return e&&(void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio),t=this.getTransceivers().find(function(e){return"audio"===e.receiver.track.kind}),!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo),t=this.getTransceivers().find(function(e){return"video"===e.receiver.track.kind}),!1===e.offerToReceiveVideo&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveVideo||t||this.addTransceiver("video")),n.apply(this,arguments)}}function shimAudioContext(e){"object"!==_typeof(e)||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var safariShim=Object.freeze({__proto__:null,shimLocalStreamsAPI:shimLocalStreamsAPI,shimRemoteStreamsAPI:shimRemoteStreamsAPI,shimCallbacksAPI:shimCallbacksAPI,shimGetUserMedia:shimGetUserMedia,shimConstraints:shimConstraints,shimRTCIceServerUrls:shimRTCIceServerUrls,shimTrackEventTransceiver:shimTrackEventTransceiver,shimCreateOfferLegacy:shimCreateOfferLegacy,shimAudioContext:shimAudioContext});function shimRTCIceCandidate(t){var o;!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype||(o=t.RTCIceCandidate,t.RTCIceCandidate=function(e){var t,n,i;return"object"===_typeof(e)&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length?(t=new o(e),n=sdp.parseCandidate(e.candidate),(i=Object.assign(t,n)).toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i):new o(e)},t.RTCIceCandidate.prototype=o.prototype,wrapPeerConnectionEvent(t,"icecandidate",function(e){return e.candidate&&Object.defineProperty(e,"candidate",{value:new t.RTCIceCandidate(e.candidate),writable:"false"}),e}))}function shimMaxMessageSize(e,r){var s;e.RTCPeerConnection&&("sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}}),s=e.RTCPeerConnection.prototype.setRemoteDescription,e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e,t,n,i,o;return this._sctp=null,"chrome"===r.browser&&76<=r.version&&"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}),(o=arguments[0])&&o.sdp&&((o=sdp.splitSections(o.sdp)).shift(),o.some(function(e){e=sdp.parseMLine(e);return e&&"application"===e.kind&&-1!==e.protocol.indexOf("SCTP")}))&&(o=null===(o=(o=arguments[0]).sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/))||o.length<2||(o=parseInt(o[1],10))!=o?-1:o,n=o,i=65536,n=i="firefox"===r.browser?r.version<57?-1===n?16384:2147483637:r.version<60?57===r.version?65535:65536:2147483637:i,i=arguments[0],o=o,t=65536,"firefox"===r.browser&&57===r.version&&(t=65535),0<(i=sdp.matchPrefix(i.sdp,"a=max-message-size:")).length?t=parseInt(i[0].substr(19),10):"firefox"===r.browser&&-1!==o&&(t=2147483637),i=t,e=0===n&&0===i?Number.POSITIVE_INFINITY:0===n||0===i?Math.max(n,i):Math.min(n,i),o={},Object.defineProperty(o,"maxMessageSize",{get:function(){return e}}),this._sctp=o),s.apply(this,arguments)})}function shimSendThrowTypeError(e){var t;function n(t,n){var i=t.send;t.send=function(){var e=arguments[0],e=e.length||e.size||e.byteLength;if("open"===t.readyState&&n.sctp&&e>n.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+n.sctp.maxMessageSize+" bytes)");return i.apply(t,arguments)}}e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype&&(t=e.RTCPeerConnection.prototype.createDataChannel,e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},wrapPeerConnectionEvent(e,"datachannel",function(e){return n(e.channel,e.target),e}))}function shimConnectionState(e){var n;!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype||(n=e.RTCPeerConnection.prototype,Object.defineProperty(n,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(n,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(e){var t=n[e];n[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t,n=e.target;return n._lastConnectionState!==n.connectionState&&(n._lastConnectionState=n.connectionState,t=new Event("connectionstatechange",e),n.dispatchEvent(t)),e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),t.apply(this,arguments)}}))}function removeExtmapAllowMixed(n,e){var i;!n.RTCPeerConnection||"chrome"===e.browser&&71<=e.version||"safari"===e.browser&&605<=e.version||(i=n.RTCPeerConnection.prototype.setRemoteDescription,n.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t;return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(t=e.sdp.split("\n").filter(function(e){return"a=extmap-allow-mixed"!==e.trim()}).join("\n"),n.RTCSessionDescription&&e instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:e.type,sdp:t}):e.sdp=t),i.apply(this,arguments)})}function shimAddIceCandidateNullOrEmpty(e,t){var n;e.RTCPeerConnection&&e.RTCPeerConnection.prototype&&(n=e.RTCPeerConnection.prototype.addIceCandidate)&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var commonShim=Object.freeze({__proto__:null,shimRTCIceCandidate:shimRTCIceCandidate,shimMaxMessageSize:shimMaxMessageSize,shimSendThrowTypeError:shimSendThrowTypeError,shimConnectionState:shimConnectionState,removeExtmapAllowMixed:removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty:shimAddIceCandidateNullOrEmpty});function adapterFactory(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).window,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},n=log,i=detectBrowser(e),o={browserDetails:i,commonShim:commonShim,extractVersion:extractVersion,disableLog:disableLog,disableWarnings:disableWarnings};switch(i.browser){case"chrome":if(!chromeShim||!shimPeerConnection$2||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),o;if(null===i.version)return n("Chrome shim can not determine version, not shimming."),o;n("adapter.js shimming chrome."),o.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(e,i),shimGetUserMedia$3(e,i),shimMediaStream(e),shimPeerConnection$2(e,i),shimOnTrack$1(e),shimAddTrackRemoveTrack(e,i),shimGetSendersWithDtmf(e),shimGetStats(e),shimSenderReceiverGetStats(e),fixNegotiationNeeded(e,i),shimRTCIceCandidate(e),shimConnectionState(e),shimMaxMessageSize(e,i),shimSendThrowTypeError(e),removeExtmapAllowMixed(e,i);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),o;n("adapter.js shimming firefox."),o.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(e,i),shimGetUserMedia$1(e,i),shimPeerConnection(e,i),shimOnTrack(e),shimRemoveStream(e),shimSenderGetStats(e),shimReceiverGetStats(e),shimRTCDataChannel(e),shimAddTransceiver(e),shimGetParameters(e),shimCreateOffer(e),shimCreateAnswer(e),shimRTCIceCandidate(e),shimConnectionState(e),shimMaxMessageSize(e,i),shimSendThrowTypeError(e);break;case"edge":if(!edgeShim||!shimPeerConnection$1||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),o;n("adapter.js shimming edge."),o.browserShim=edgeShim,shimGetUserMedia$2(e),shimGetDisplayMedia$1(e),shimPeerConnection$1(e,i),shimReplaceTrack(e),shimMaxMessageSize(e,i),shimSendThrowTypeError(e);break;case"safari":if(!safariShim||!t.shimSafari)return n("Safari shim is not included in this adapter release."),o;n("adapter.js shimming safari."),o.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(e,i),shimRTCIceServerUrls(e),shimCreateOfferLegacy(e),shimCallbacksAPI(e),shimLocalStreamsAPI(e),shimRemoteStreamsAPI(e),shimTrackEventTransceiver(e),shimGetUserMedia(e),shimAudioContext(e),shimRTCIceCandidate(e),shimMaxMessageSize(e,i),shimSendThrowTypeError(e),removeExtmapAllowMixed(e,i);break;default:n("Unsupported browser!")}return o}var adapter=adapterFactory({window:"undefined"==typeof window?void 0:window}),re$1=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts$1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parseuri$1=function(e){for(var t=e,n=e.indexOf("["),i=e.indexOf("]"),o=(-1!=n&&-1!=i&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length)),re$1.exec(e||"")),r={},s=14;s--;)r[parts$1[s]]=o[s]||"";return-1!=n&&-1!=i&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r},s$2=1e3,m$2=60*s$2,h$2=60*m$2,d$2=24*h$2,w=7*d$2,y$2=365.25*d$2,ms$2=function(e,t){t=t||{};var n=_typeof(e);if("string"===n&&0<e.length)return parse$3(e);if("number"===n&&isFinite(e))return(t.long?fmtLong$2:fmtShort$2)(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$3(e){if(!(100<(e=String(e)).length)){e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(e){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return t*y$2;case"weeks":case"week":case"w":return t*w;case"days":case"day":case"d":return t*d$2;case"hours":case"hour":case"hrs":case"hr":case"h":return t*h$2;case"minutes":case"minute":case"mins":case"min":case"m":return t*m$2;case"seconds":case"second":case"secs":case"sec":case"s":return t*s$2;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function fmtShort$2(e){var t=Math.abs(e);return d$2<=t?Math.round(e/d$2)+"d":h$2<=t?Math.round(e/h$2)+"h":m$2<=t?Math.round(e/m$2)+"m":s$2<=t?Math.round(e/s$2)+"s":e+"ms"}function fmtLong$2(e){var t=Math.abs(e);return d$2<=t?plural$2(e,t,d$2,"day"):h$2<=t?plural$2(e,t,h$2,"hour"):m$2<=t?plural$2(e,t,m$2,"minute"):s$2<=t?plural$2(e,t,s$2,"second"):e+" ms"}function plural$2(e,t,n,i){t=1.5*n<=t;return Math.round(e/n)+" "+i+(t?"s":"")}function setup(t){function n(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return l.colors[Math.abs(t)%l.colors.length]}function l(e){var a;function c(){for(var i,e,t,o,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];c.enabled&&(i=c,t=(e=Number(new Date))-(a||e),i.diff=t,i.prev=a,i.curr=e,a=e,r[0]=l.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O"),r[o=0]=r[0].replace(/%([a-zA-Z%])/g,function(e,t){var n;return"%%"!==e&&(o++,"function"==typeof(t=l.formatters[t]))&&(n=r[o],e=t.call(i,n),r.splice(o,1),o--),e}),l.formatArgs.call(i,r),(i.log||l.log).apply(i,r))}return c.namespace=e,c.enabled=l.enabled(e),c.useColors=l.useColors(),c.color=n(e),c.destroy=i,c.extend=o,"function"==typeof l.init&&l.init(c),l.instances.push(c),c}function i(){var e=l.instances.indexOf(this);return-1!==e&&(l.instances.splice(e,1),!0)}function o(e,t){t=l(this.namespace+(void 0===t?":":t)+e);return t.log=this.log,t}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return((l.debug=l).default=l).coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},l.disable=function(){var e=[].concat(_toConsumableArray(l.names.map(r)),_toConsumableArray(l.skips.map(r).map(function(e){return"-"+e}))).join(",");return l.enable(""),e},l.enable=function(e){l.save(e),l.names=[],l.skips=[];var t,n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?l.skips.push(new RegExp("^"+e.substr(1)+"$")):l.names.push(new RegExp("^"+e+"$")));for(t=0;t<l.instances.length;t++){var o=l.instances[t];o.enabled=l.enabled(o.namespace)}},l.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=l.skips.length;t<n;t++)if(l.skips[t].test(e))return!1;for(t=0,n=l.names.length;t<n;t++)if(l.names[t].test(e))return!0;return!1},l.humanize=ms$2,Object.keys(t).forEach(function(e){l[e]=t[e]}),l.instances=[],l.names=[],l.skips=[],l.formatters={},l.selectColor=n,l.enable(l.load()),l}var common=setup,browser$3=createCommonjsModule(function(o,t){t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(e){var t,n,i;e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+o.exports.humanize(this.diff),this.useColors&&(t="color: "+this.color,e.splice(1,0,t,"color: inherit"),e[i=n=0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e)&&(i=n)}),e.splice(i,0,t))},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.exports=common(t),o.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),debug$7=browser$3("socket.io-client:url"),url_1=url;function url(e,t){var n=e;t=t||"undefined"!=typeof location&&location,"string"==typeof(e=null==e?t.protocol+"//"+t.host:e)&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(debug$7("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),debug$7("parse %s",e),n=parseuri$1(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";e=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+e+":"+n.port,n.href=n.protocol+"://"+e+(t&&t.port===n.port?"":":"+n.port),n}var s$1=1e3,m$1=60*s$1,h$1=60*m$1,d$1=24*h$1,y$1=365.25*d$1,ms$1=function(e,t){t=t||{};var n=_typeof(e);if("string"===n&&0<e.length)return parse$2(e);if("number"===n&&!1===isNaN(e))return(t.long?fmtLong$1:fmtShort$1)(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$2(e){if(!(100<(e=String(e)).length)){e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(e){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return t*y$1;case"days":case"day":case"d":return t*d$1;case"hours":case"hour":case"hrs":case"hr":case"h":return t*h$1;case"minutes":case"minute":case"mins":case"min":case"m":return t*m$1;case"seconds":case"second":case"secs":case"sec":case"s":return t*s$1;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function fmtShort$1(e){return d$1<=e?Math.round(e/d$1)+"d":h$1<=e?Math.round(e/h$1)+"h":m$1<=e?Math.round(e/m$1)+"m":s$1<=e?Math.round(e/s$1)+"s":e+"ms"}function fmtLong$1(e){return plural$1(e,d$1,"day")||plural$1(e,h$1,"hour")||plural$1(e,m$1,"minute")||plural$1(e,s$1,"second")||e+" ms"}function plural$1(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var debug$6=createCommonjsModule(function(e,c){function t(e){var s;function a(){if(a.enabled){for(var i=a,e=+new Date,t=e-(s||e),o=(i.diff=t,i.prev=s,i.curr=e,s=e,new Array(arguments.length)),n=0;n<o.length;n++)o[n]=arguments[n];o[0]=c.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var r=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,t){var n;return"%%"!==e&&(r++,"function"==typeof(t=c.formatters[t]))&&(n=o[r],e=t.call(i,n),o.splice(r,1),r--),e}),c.formatArgs.call(i,o),(a.log||c.log||void 0).apply(i,o)}}return a.namespace=e,a.enabled=c.enabled(e),a.useColors=c.useColors(),a.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return c.colors[Math.abs(n)%c.colors.length]}(e),a.destroy=n,"function"==typeof c.init&&c.init(a),c.instances.push(a),a}function n(){var e=c.instances.indexOf(this);return-1!==e&&(c.instances.splice(e,1),!0)}(c=e.exports=t.debug=t.default=t).coerce=function(e){return e instanceof Error?e.stack||e.message:e},c.disable=function(){c.enable("")},c.enable=function(e){c.save(e),c.names=[],c.skips=[];var t,n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?c.skips.push(new RegExp("^"+e.substr(1)+"$")):c.names.push(new RegExp("^"+e+"$")));for(t=0;t<c.instances.length;t++){var o=c.instances[t];o.enabled=c.enabled(o.namespace)}},c.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=c.skips.length;t<n;t++)if(c.skips[t].test(e))return!1;for(t=0,n=c.names.length;t<n;t++)if(c.names[t].test(e))return!0;return!1},c.humanize=ms$1,c.instances=[],c.names=[],c.skips=[],c.formatters={}}),browser$2=createCommonjsModule(function(e,o){function t(){var e;try{e=o.storage.debug}catch(e){}return e=!e&&"undefined"!=typeof process&&"env"in process?process.env.DEBUG:e}(o=e.exports=debug$6).log=function(){return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},o.formatArgs=function(e){var t,n,i=this.useColors;e[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+e[0]+(i?"%c ":" ")+"+"+o.humanize(this.diff),i&&(i="color: "+this.color,e.splice(1,0,i,"color: inherit"),e[n=t=0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e)&&(n=t)}),e.splice(n,0,i))},o.save=function(e){try{null==e?o.storage.removeItem("debug"):o.storage.debug=e}catch(e){}},o.load=t,o.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},o.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},o.enable(t())}),componentEmitter$2=createCommonjsModule(function(e){function i(e){if(e){var t,n=e;for(t in i.prototype)n[t]=i.prototype[t];return n}}(e.exports=i).prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)this._callbacks={};else{var n=this._callbacks["$"+e];if(n)if(1==arguments.length)delete this._callbacks["$"+e];else{for(var i,o=0;o<n.length;o++)if((i=n[o])===t||i.fn===t){n.splice(o,1);break}0===n.length&&delete this._callbacks["$"+e]}}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n)for(var i=0,o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),toString$3={}.toString,isarray=Array.isArray||function(e){return"[object Array]"==toString$3.call(e)},isBuffer=isBuf,withNativeBuffer="function"==typeof Buffer&&"function"==typeof Buffer.isBuffer,withNativeArrayBuffer="function"==typeof ArrayBuffer,isView=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer};function isBuf(e){return withNativeBuffer&&Buffer.isBuffer(e)||withNativeArrayBuffer&&(e instanceof ArrayBuffer||isView(e))}var toString$2=Object.prototype.toString,withNativeBlob$1="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===toString$2.call(Blob),withNativeFile$1="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===toString$2.call(File),deconstructPacket=function(e){var t=[],n=e.data;return e.data=_deconstructPacket(n,t),e.attachments=t.length,{packet:e,buffers:t}};function _deconstructPacket(e,t){if(!e)return e;var n;if(isBuffer(e))return n={_placeholder:!0,num:t.length},t.push(e),n;if(isarray(e))for(var i=new Array(e.length),o=0;o<e.length;o++)i[o]=_deconstructPacket(e[o],t);else{if("object"!==_typeof(e)||e instanceof Date)return e;var r,i={};for(r in e)i[r]=_deconstructPacket(e[r],t)}return i}var reconstructPacket=function(e,t){return e.data=_reconstructPacket(e.data,t),e.attachments=void 0,e};function _reconstructPacket(e,t){if(e){if(e&&!0===e._placeholder){if("number"==typeof e.num&&0<=e.num&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(isarray(e))for(var n=0;n<e.length;n++)e[n]=_reconstructPacket(e[n],t);else if("object"===_typeof(e))for(var i in e)e[i]=_reconstructPacket(e[i],t)}return e}var removeBlobs=function(e,a){var c=0,l=e;!function e(t,n,i){if(t)if(withNativeBlob$1&&t instanceof Blob||withNativeFile$1&&t instanceof File){c++;var o=new FileReader;o.onload=function(){i?i[n]=this.result:l=this.result,--c||a(l)},o.readAsArrayBuffer(t)}else if(isarray(t))for(var r=0;r<t.length;r++)e(t[r],r,t);else if("object"===_typeof(t)&&!isBuffer(t))for(var s in t)e(t[s],s,t)}(l),c||a(l)},binary={deconstructPacket:deconstructPacket,reconstructPacket:reconstructPacket,removeBlobs:removeBlobs},socket_ioParser=createCommonjsModule(function(e,s){var a=browser$2("socket.io-parser");function t(){}s.protocol=4,s.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],s.CONNECT=0,s.DISCONNECT=1,s.EVENT=2,s.ACK=3,s.ERROR=4,s.BINARY_EVENT=5,s.BINARY_ACK=6,s.Encoder=t,s.Decoder=n;var i=s.ERROR+'"encode error"';function o(e){var t=""+e.type;if(s.BINARY_EVENT!==e.type&&s.BINARY_ACK!==e.type||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data){var n=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===n)return i;t+=n}return a("encoded %j as %s",e,t),t}function n(){this.reconstructor=null}function r(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:s.ERROR,data:"parser error: "+e}}t.prototype.encode=function(e,t){var n;a("encoding packet %j",e),s.BINARY_EVENT===e.type||s.BINARY_ACK===e.type?(n=t,binary.removeBlobs(e,function(e){var t=o((e=binary.deconstructPacket(e)).packet);(e=e.buffers).unshift(t),n(e)})):t([o(e)])},componentEmitter$2(n.prototype),n.prototype.add=function(e){var t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=function(e){var t=0,n={type:Number(e.charAt(0))};if(null==s.types[n.type])return c("unknown packet type "+n.type);if(s.BINARY_EVENT===n.type||s.BINARY_ACK===n.type){for(var i=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var o=e.substring(i,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===e.charAt(t+1)){for(i=t+1;++t;){if(","===(r=e.charAt(t)))break;if(t===e.length)break}n.nsp=e.substring(i,t)}else n.nsp="/";o=e.charAt(t+1);if(""!==o&&Number(o)==o){for(var r,i=t+1;++t;){if(null==(r=e.charAt(t))||Number(r)!=r){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){o=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!(!1!==o&&(n.type===s.ERROR||isarray(o))))return c("invalid payload");n.data=o}return a("decoded %s as %j",e,n),n}(e),(s.BINARY_EVENT!==t.type&&s.BINARY_ACK!==t.type||(this.reconstructor=new r(t),0===this.reconstructor.reconPack.attachments))&&this.emit("decoded",t)}else{if(!isBuffer(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},n.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},r.prototype.takeBinaryData=function(e){return this.buffers.push(e),this.buffers.length===this.reconPack.attachments?(e=binary.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),e):null},r.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}}),hasCors=createCommonjsModule(function(t){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}}),globalThis_browser="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),xmlhttprequest=function(e){var t=e.xdomain,n=e.xscheme,e=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||hasCors))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&e)return new XDomainRequest}catch(e){}if(!t)try{return new globalThis_browser[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}},keys=Object.keys||function(e){var t,n=[],i=Object.prototype.hasOwnProperty;for(t in e)i.call(e,t)&&n.push(t);return n},toString$1=Object.prototype.toString,withNativeBlob="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===toString$1.call(Blob),withNativeFile="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===toString$1.call(File),hasBinary2=hasBinary;function hasBinary(e){if(e&&"object"===_typeof(e))if(isarray(e)){for(var t=0,n=e.length;t<n;t++)if(hasBinary(e[t]))return!0}else{if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(e)||"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||withNativeBlob&&e instanceof Blob||withNativeFile&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return hasBinary(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&hasBinary(e[i]))return!0}return!1}var arraybuffer_slice=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(t<0&&(t+=i),n<0&&(n+=i),i<n&&(n=i),i<=t||n<=t||0===i)return new ArrayBuffer(0);for(var o=new Uint8Array(e),r=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)r[a]=o[s];return r.buffer},after_1=after$1;function after$1(e,n,i){var o=!1;return i=i||noop,0===(r.count=e)?n():r;function r(e,t){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(o=!0,n(e),n=i):0!==r.count||o||n(null,t)}}function noop(){}var stringFromCharCode=String.fromCharCode,byteArray,byteCount,byteIndex;function ucs2decode(e){for(var t,n,i=[],o=0,r=e.length;o<r;)55296<=(t=e.charCodeAt(o++))&&t<=56319&&o<r?56320==(64512&(n=e.charCodeAt(o++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),o--):i.push(t);return i}function ucs2encode(e){for(var t,n=e.length,i=-1,o="";++i<n;)65535<(t=e[i])&&(o+=stringFromCharCode((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=stringFromCharCode(t);return o}function checkScalarValue(e,t){if(!(55296<=e&&e<=57343))return 1;if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function createByte(e,t){return stringFromCharCode(e>>t&63|128)}function encodeCodePoint(e,t){var n;return 0==(4294967168&e)?stringFromCharCode(e):(n="",0==(4294965248&e)?n=stringFromCharCode(e>>6&31|192):0==(4294901760&e)?(checkScalarValue(e,t)||(e=65533),n=stringFromCharCode(e>>12&15|224),n+=createByte(e,6)):0==(4292870144&e)&&(n=stringFromCharCode(e>>18&7|240),n=(n+=createByte(e,12))+createByte(e,6)),n+stringFromCharCode(63&e|128))}function utf8encode(e,t){for(var n=!1!==(t=t||{}).strict,i=ucs2decode(e),o=i.length,r=-1,s="";++r<o;)s+=encodeCodePoint(i[r],n);return s}function readContinuationByte(){if(byteCount<=byteIndex)throw Error("Invalid byte index");var e=255&byteArray[byteIndex];if(byteIndex++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function decodeSymbol(e){var t,n;if(byteCount<byteIndex)throw Error("Invalid byte index");if(byteIndex==byteCount)return!1;if(t=255&byteArray[byteIndex],byteIndex++,0==(128&t))return t;if(192==(224&t)){if(128<=(n=(31&t)<<6|readContinuationByte()))return n;throw Error("Invalid continuation byte")}if(224==(240&t)){if(2048<=(n=(15&t)<<12|readContinuationByte()<<6|readContinuationByte()))return checkScalarValue(n,e)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&65536<=(n=(7&t)<<18|readContinuationByte()<<12|readContinuationByte()<<6|readContinuationByte())&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}function utf8decode(e,t){for(var n,i=!1!==(t=t||{}).strict,o=(byteArray=ucs2decode(e),byteCount=byteArray.length,byteIndex=0,[]);!1!==(n=decodeSymbol(i));)o.push(n);return ucs2encode(o)}var utf8={version:"2.1.2",encode:utf8encode,decode:utf8decode},base64Arraybuffer=createCommonjsModule(function(e,t){var d;d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t.encode=function(e){for(var t=new Uint8Array(e),n=t.length,i="",o=0;o<n;o+=3)i=(i=(i=(i+=d[t[o]>>2])+d[(3&t[o])<<4|t[o+1]>>4])+d[(15&t[o+1])<<2|t[o+2]>>6])+d[63&t[o+2]];return n%3==2?i=i.substring(0,i.length-1)+"=":n%3==1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(e){for(var t,n,i,o,r=.75*e.length,s=e.length,a=0,r=("="===e[e.length-1]&&(r--,"="===e[e.length-2])&&r--,new ArrayBuffer(r)),c=new Uint8Array(r),l=0;l<s;l+=4)t=d.indexOf(e[l]),n=d.indexOf(e[l+1]),i=d.indexOf(e[l+2]),o=d.indexOf(e[l+3]),c[a++]=t<<2|n>>4,c[a++]=(15&n)<<4|i>>2,c[a++]=(3&i)<<6|63&o;return r}}),BlobBuilder=void 0!==BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,blobSupported=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),blobSupportsArrayBufferView=blobSupported&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;function mapArrayBufferViews(e){return e.map(function(e){var t,n;return e.buffer instanceof ArrayBuffer?(t=e.buffer,e.byteLength!==t.byteLength&&((n=new Uint8Array(e.byteLength)).set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer),t):e})}function BlobBuilderConstructor(e,t){t=t||{};var n=new BlobBuilder;return mapArrayBufferViews(e).forEach(function(e){n.append(e)}),t.type?n.getBlob(t.type):n.getBlob()}function BlobConstructor(e,t){return new Blob(mapArrayBufferViews(e),t||{})}"undefined"!=typeof Blob&&(BlobBuilderConstructor.prototype=Blob.prototype,BlobConstructor.prototype=Blob.prototype);var blob=blobSupported?blobSupportsArrayBufferView?Blob:BlobConstructor:blobBuilderSupported?BlobBuilderConstructor:void 0,browser$1=createCommonjsModule(function(e,m){"undefined"!=typeof ArrayBuffer&&(o=base64Arraybuffer);var o,t="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),n="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),y=t||n,g=(m.protocol=3,m.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6}),r=keys(g),u={type:"error",data:"parser error"};function s(e,t,n){for(var o=new Array(e.length),i=after_1(e.length,n),r=0;r<e.length;r++)!function(n,e,i){t(e,function(e,t){o[n]=t,i(e,o)})}(r,e[r],i)}m.encodePacket=function(e,t,n,i){"function"==typeof t&&(i=t,t=!1),"function"==typeof n&&(i=n,n=null);var o=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer){var r=e,s=i;if(!(a=t))return m.encodeBase64Packet(r,s);var a=r.data,c=new Uint8Array(a),l=new Uint8Array(1+a.byteLength);l[0]=g[r.type];for(var d=0;d<c.length;d++)l[d+1]=c[d];return s(l.buffer)}if(void 0!==blob&&o instanceof blob){var p,a=e,r=t,s=i;if(!r)return m.encodeBase64Packet(a,s);if(y){var u=a;var h=r;var f=s;return h?((p=new FileReader).onload=function(){m.encodePacket({type:u.type,data:p.result},h,!0,f)},p.readAsArrayBuffer(u.data)):m.encodeBase64Packet(u,f);return}return(r=new Uint8Array(1))[0]=g[a.type],r=new blob([r.buffer,a.data]),s(r)}return o&&o.base64?(t=e,o=i,t="b"+m.packets[e.type]+e.data.data,o(t)):(o=g[e.type],void 0!==e.data&&(o+=n?utf8.encode(String(e.data),{strict:!1}):String(e.data)),i(""+o))},m.encodeBase64Packet=function(t,n){var i,o,r="b"+m.packets[t.type];if(void 0!==blob&&t.data instanceof blob)return(i=new FileReader).onload=function(){var e=i.result.split(",")[1];n(r+e)},i.readAsDataURL(t.data);try{o=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var s=new Uint8Array(t.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];o=String.fromCharCode.apply(null,a)}return r+=btoa(o),n(r)},m.decodePacket=function(e,t,n){var i;return void 0===e?u:"string"==typeof e?"b"===e.charAt(0)?m.decodeBase64Packet(e.substr(1),t):(!n||!1!==(e=function(e){try{e=utf8.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))&&(i=e.charAt(0),Number(i)==i)&&r[i]?1<e.length?{type:r[i],data:e.substring(1)}:{type:r[i]}:u:(i=new Uint8Array(e)[0],n=arraybuffer_slice(e,1),blob&&"blob"===t&&(n=new blob([n])),{type:r[i],data:n})},m.decodeBase64Packet=function(e,t){var n,i=r[e.charAt(0)];return o?(n=o.decode(e.substr(1)),{type:i,data:n="blob"===t&&blob?new blob([n]):n}):{type:i,data:{base64:!0,data:e.substr(1)}}},m.encodePayload=function(e,n,i){"function"==typeof n&&(i=n,n=null);var o=hasBinary2(e);return n&&o?blob&&!y?m.encodePayloadAsBlob(e,i):m.encodePayloadAsArrayBuffer(e,i):e.length?void s(e,function(e,t){m.encodePacket(e,!!o&&n,!1,function(e){t(null,e.length+":"+e)})},function(e,t){return i(t.join(""))}):i("0:")},m.decodePayload=function(e,t,n){if("string"!=typeof e)return m.decodePayloadAsBinary(e,t,n);if("function"==typeof t&&(n=t,t=null),""===e)return n(u,0,1);for(var i,o="",r=0,s=e.length;r<s;r++){var a=e.charAt(r);if(":"!==a)o+=a;else{if(""===o||o!=(i=Number(o)))return n(u,0,1);if(o!=(a=e.substr(r+1,i)).length)return n(u,0,1);if(a.length){if(a=m.decodePacket(a,t,!1),u.type===a.type&&u.data===a.data)return n(u,0,1);if(!1===n(a,r+i,s))return}r+=i,o=""}}return""!==o?n(u,0,1):void 0},m.encodePayloadAsArrayBuffer=function(e,i){if(!e.length)return i(new ArrayBuffer(0));s(e,function(e,t){m.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,t){var n=t.reduce(function(e,t){t="string"==typeof t?t.length:t.byteLength;return e+t.toString().length+t+2},0),s=new Uint8Array(n),a=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var i=new Uint8Array(e.length),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);n=i.buffer}s[a++]=t?0:1;for(var r=n.byteLength.toString(),o=0;o<r.length;o++)s[a++]=parseInt(r[o]);s[a++]=255;for(i=new Uint8Array(n),o=0;o<i.length;o++)s[a++]=i[o]}),i(s.buffer)})},m.encodePayloadAsBlob=function(e,n){s(e,function(e,s){m.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);e=n.buffer,t[0]=0}for(var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),r=new Uint8Array(o.length+1),i=0;i<o.length;i++)r[i]=parseInt(o[i]);r[o.length]=255,blob&&(t=new blob([t.buffer,r.buffer,e]),s(null,t))})},function(e,t){return n(new blob(t))})},m.decodePayloadAsBinary=function(e,n,i){"function"==typeof n&&(i=n,n=null);for(var t=e,o=[];0<t.byteLength;){for(var r=new Uint8Array(t),s=0===r[0],a="",c=1;255!==r[c];c++){if(310<a.length)return i(u,0,1);a+=r[c]}var t=arraybuffer_slice(t,2+a.length),a=parseInt(a),l=arraybuffer_slice(t,0,a);if(s)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(e){for(var d=new Uint8Array(l),l="",c=0;c<d.length;c++)l+=String.fromCharCode(d[c])}o.push(l),t=arraybuffer_slice(t,a)}var p=o.length;o.forEach(function(e,t){i(m.decodePacket(e,n,!0),t,p)})}}),componentEmitter$1=createCommonjsModule(function(e){function i(e){if(e){var t,n=e;for(t in i.prototype)n[t]=i.prototype[t];return n}}(e.exports=i).prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)this._callbacks={};else{var n=this._callbacks["$"+e];if(n)if(1==arguments.length)delete this._callbacks["$"+e];else{for(var i,o=0;o<n.length;o++)if((i=n[o])===t||i.fn===t){n.splice(o,1);break}0===n.length&&delete this._callbacks["$"+e]}}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n)for(var i=0,o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),transport=Transport;function Transport(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}componentEmitter$1(Transport.prototype),Transport.prototype.onError=function(e,t){e=new Error(e);return e.type="TransportError",e.description=t,this.emit("error",e),this},Transport.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},Transport.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},Transport.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Transport.prototype.onData=function(e){e=browser$1.decodePacket(e,this.socket.binaryType);this.onPacket(e)},Transport.prototype.onPacket=function(e){this.emit("packet",e)},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")};var encode$2=function(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&(n.length&&(n+="&"),n+=encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n},decode$2=function(e){for(var t={},n=e.split("&"),i=0,o=n.length;i<o;i++){var r=n[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t},parseqs$1={encode:encode$2,decode:decode$2},componentInherit=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,map={},seed=0,i=0,prev;function encode$1(e){for(var t="";t=alphabet[e%length]+t,0<(e=Math.floor(e/length)););return t}function decode$1(e){var t=0;for(i=0;i<e.length;i++)t=t*length+map[e.charAt(i)];return t}function yeast(){var e=encode$1(+new Date);return e!==prev?(seed=0,prev=e):e+"."+encode$1(seed++)}for(;i<length;i++)map[alphabet[i]]=i;yeast.encode=encode$1,yeast.decode=decode$1;var yeast_1=yeast,s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d,ms=function(e,t){t=t||{};var n=_typeof(e);if("string"===n&&0<e.length)return parse$1(e);if("number"===n&&!1===isNaN(e))return(t.long?fmtLong:fmtShort)(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse$1(e){if(!(100<(e=String(e)).length)){e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(e){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return t*y;case"days":case"day":case"d":return t*d;case"hours":case"hour":case"hrs":case"hr":case"h":return t*h;case"minutes":case"minute":case"mins":case"min":case"m":return t*m;case"seconds":case"second":case"secs":case"sec":case"s":return t*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function fmtShort(e){return d<=e?Math.round(e/d)+"d":h<=e?Math.round(e/h)+"h":m<=e?Math.round(e/m)+"m":s<=e?Math.round(e/s)+"s":e+"ms"}function fmtLong(e){return plural(e,d,"day")||plural(e,h,"hour")||plural(e,m,"minute")||plural(e,s,"second")||e+" ms"}function plural(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var debug$5=createCommonjsModule(function(e,c){function t(e){var s;function a(){if(a.enabled){for(var i=a,e=+new Date,t=e-(s||e),o=(i.diff=t,i.prev=s,i.curr=e,s=e,new Array(arguments.length)),n=0;n<o.length;n++)o[n]=arguments[n];o[0]=c.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var r=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,t){var n;return"%%"!==e&&(r++,"function"==typeof(t=c.formatters[t]))&&(n=o[r],e=t.call(i,n),o.splice(r,1),r--),e}),c.formatArgs.call(i,o),(a.log||c.log||void 0).apply(i,o)}}return a.namespace=e,a.enabled=c.enabled(e),a.useColors=c.useColors(),a.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return c.colors[Math.abs(n)%c.colors.length]}(e),a.destroy=n,"function"==typeof c.init&&c.init(a),c.instances.push(a),a}function n(){var e=c.instances.indexOf(this);return-1!==e&&(c.instances.splice(e,1),!0)}(c=e.exports=t.debug=t.default=t).coerce=function(e){return e instanceof Error?e.stack||e.message:e},c.disable=function(){c.enable("")},c.enable=function(e){c.save(e),c.names=[],c.skips=[];var t,n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?c.skips.push(new RegExp("^"+e.substr(1)+"$")):c.names.push(new RegExp("^"+e+"$")));for(t=0;t<c.instances.length;t++){var o=c.instances[t];o.enabled=c.enabled(o.namespace)}},c.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=c.skips.length;t<n;t++)if(c.skips[t].test(e))return!1;for(t=0,n=c.names.length;t<n;t++)if(c.names[t].test(e))return!0;return!1},c.humanize=ms,c.instances=[],c.names=[],c.skips=[],c.formatters={}}),browser=createCommonjsModule(function(e,o){function t(){var e;try{e=o.storage.debug}catch(e){}return e=!e&&"undefined"!=typeof process&&"env"in process?process.env.DEBUG:e}(o=e.exports=debug$5).log=function(){return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},o.formatArgs=function(e){var t,n,i=this.useColors;e[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+e[0]+(i?"%c ":" ")+"+"+o.humanize(this.diff),i&&(i="color: "+this.color,e.splice(1,0,i,"color: inherit"),e[n=t=0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e)&&(n=t)}),e.splice(n,0,i))},o.save=function(e){try{null==e?o.storage.removeItem("debug"):o.storage.debug=e}catch(e){}},o.load=t,o.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},o.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},o.enable(t())}),debug$4=browser("engine.io-client:polling"),polling$1=Polling,hasXHR2=null!=new xmlhttprequest({xdomain:!1}).responseType;function Polling(e){var t=e&&e.forceBase64;hasXHR2&&!t||(this.supportsBinary=!1),transport.call(this,e)}componentInherit(Polling,transport),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(e){var t,n=this;function i(){debug$4("paused"),n.readyState="paused",e()}this.readyState="pausing",this.polling||!this.writable?(t=0,this.polling&&(debug$4("we are currently polling - waiting to pause"),t++,this.once("pollComplete",function(){debug$4("pre-pause polling complete"),--t||i()})),this.writable||(debug$4("we are currently writing - waiting to pause"),t++,this.once("drain",function(){debug$4("pre-pause writing complete"),--t||i()}))):i()},Polling.prototype.poll=function(){debug$4("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(e){var i=this;debug$4("polling got data %s",e);browser$1.decodePayload(e,this.socket.binaryType,function(e,t,n){if("opening"===i.readyState&&i.onOpen(),"close"===e.type)return i.onClose(),!1;i.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():debug$4('ignoring poll - transport state "%s"',this.readyState))},Polling.prototype.doClose=function(){var e=this;function t(){debug$4("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(debug$4("transport open - closing"),t()):(debug$4("transport not open - deferring close"),this.once("open",t))},Polling.prototype.write=function(e){function t(){n.writable=!0,n.emit("drain")}var n=this;this.writable=!1;browser$1.encodePayload(e,this.supportsBinary,function(e){n.doWrite(e,t)})},Polling.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=yeast_1()),this.supportsBinary||e.sid||(e.b64=1),e=parseqs$1.encode(e),this.port&&("https"==t&&443!==Number(this.port)||"http"==t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e};var debug$3=browser("engine.io-client:polling-xhr"),pollingXhr=XHR,Request_1=Request,terminationEvent;function empty$2(){}function XHR(e){var t,n;polling$1.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location&&(t="https:"===location.protocol,n=(n=location.port)||(t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t)}function Request(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function unloadHandler(){for(var e in Request.requests)Request.requests.hasOwnProperty(e)&&Request.requests[e].abort()}componentInherit(XHR,polling$1),XHR.prototype.supportsBinary=!0,XHR.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new Request(e)},XHR.prototype.doWrite=function(e,t){var e=this.request({method:"POST",data:e,isBinary:"string"!=typeof e&&void 0!==e}),n=this;e.on("success",t),e.on("error",function(e){n.onError("xhr post error",e)}),this.sendXhr=e},XHR.prototype.doPoll=function(){debug$3("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},componentEmitter$1(Request.prototype),Request.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR},t=(e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,this.xhr=new xmlhttprequest(e)),n=this;try{debug$3("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout(function(){n.onError("number"==typeof t.status?t.status:0)},0))},debug$3("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){n.onError(e)},0)}"undefined"!=typeof document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)},Request.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Request.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},Request.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},Request.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=empty$2:this.xhr.onreadystatechange=empty$2,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete Request.requests[this.index],this.xhr=null}},Request.prototype.onLoad=function(){var e,t;try{try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},Request.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},Request.prototype.abort=function(){this.cleanup()},Request.requestsCount=0,Request.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",unloadHandler):"function"==typeof addEventListener&&(terminationEvent="onpagehide"in globalThis_browser?"pagehide":"unload",addEventListener(terminationEvent,unloadHandler,!1))),pollingXhr.Request=Request_1;var pollingJsonp=JSONPPolling,rNewline=/\n/g,rEscapedNewline=/\\n/g,callbacks;function empty$1(){}function JSONPPolling(e){polling$1.call(this,e),this.query=this.query||{},callbacks=callbacks||(globalThis_browser.___eio=globalThis_browser.___eio||[]),this.index=callbacks.length;var t=this;callbacks.push(function(e){t.onData(e)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){t.script&&(t.script.onerror=empty$1)},!1)}componentInherit(JSONPPolling,polling$1),JSONPPolling.prototype.supportsBinary=!1,JSONPPolling.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),polling$1.prototype.doClose.call(this)},JSONPPolling.prototype.doPoll=function(){var t=this,e=document.createElement("script"),n=(this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)},document.getElementsByTagName("script")[0]);n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},JSONPPolling.prototype.doWrite=function(e,t){var n,i,o,r,s=this;function a(){c(),t()}function c(){if(s.iframe)try{s.form.removeChild(s.iframe)}catch(e){s.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+s.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=s.iframeId,r.src="javascript:0"}r.id=s.iframeId,s.form.appendChild(r),s.iframe=r}this.form||(n=document.createElement("form"),i=document.createElement("textarea"),o=this.iframeId="eio_iframe_"+this.index,n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=o,n.method="POST",n.setAttribute("accept-charset","utf-8"),i.name="d",n.appendChild(i),document.body.appendChild(n),this.form=n,this.area=i),this.form.action=this.uri(),c(),e=e.replace(rEscapedNewline,"\\\n"),this.area.value=e.replace(rNewline,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===s.iframe.readyState&&a()}:this.iframe.onload=a};var _nodeResolve_empty={},_nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty}),require$$1=getAugmentedNamespace(_nodeResolve_empty$1),debug$2=browser("engine.io-client:websocket"),BrowserWebSocket,NodeWebSocket;if("undefined"!=typeof WebSocket?BrowserWebSocket=WebSocket:"undefined"!=typeof self&&(BrowserWebSocket=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{NodeWebSocket=require$$1}catch(e){}var WebSocketImpl=BrowserWebSocket||NodeWebSocket,websocket=WS;function WS(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=BrowserWebSocket&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(WebSocketImpl=NodeWebSocket),transport.call(this,e)}componentInherit(WS,transport),WS.prototype.name="websocket",WS.prototype.supportsBinary=!0,WS.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new WebSocketImpl(e,t):new WebSocketImpl(e):new WebSocketImpl(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},WS.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},WS.prototype.write=function(e){for(var i=this,o=(this.writable=!1,e.length),t=0,n=o;t<n;t++)!function(n){browser$1.encodePacket(n,i.supportsBinary,function(e){var t;i.usingBrowserWebSocket||(t={},n.options&&(t.compress=n.options.compress),i.perMessageDeflate&&("string"==typeof e?Buffer.byteLength(e):e.length)<i.perMessageDeflate.threshold&&(t.compress=!1));try{i.usingBrowserWebSocket?i.ws.send(e):i.ws.send(e,t)}catch(e){debug$2("websocket closed before onclose event")}--o||(i.emit("flush"),setTimeout(function(){i.writable=!0,i.emit("drain")},0))})}(e[t])},WS.prototype.onClose=function(){transport.prototype.onClose.call(this)},WS.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},WS.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!==Number(this.port)||"ws"==t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=yeast_1()),this.supportsBinary||(e.b64=1),(e=parseqs$1.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},WS.prototype.check=function(){return!(!WebSocketImpl||"__initialize"in WebSocketImpl&&this.name===WS.prototype.name)};var polling_1=polling,websocket_1=websocket;function polling(e){var t,n,i=!1,o=!1,r=!1!==e.jsonp;if("undefined"!=typeof location&&(t="https:"===location.protocol,n=(n=location.port)||(t?443:80),i=e.hostname!==location.hostname||n!==e.port,o=e.secure!==t),e.xdomain=i,e.xscheme=o,"open"in new xmlhttprequest(e)&&!e.forceJSONP)return new pollingXhr(e);if(r)return new pollingJsonp(e);throw new Error("JSONP disabled")}var transports={polling:polling_1,websocket:websocket_1},indexOf=[].indexOf,indexof=function(e,t){if(indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parseuri=function(e){for(var t=e,n=e.indexOf("["),i=e.indexOf("]"),o=(-1!=n&&-1!=i&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length)),re.exec(e||"")),r={},s=14;s--;)r[parts[s]]=o[s]||"";return-1!=n&&-1!=i&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=pathNames(r,r.path),r.queryKey=queryKey(r,r.query),r};function pathNames(e,t){var n=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1),"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1),n}function queryKey(e,t){var i={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(i[t]=n)}),i}var debug$1=browser("engine.io-client:socket"),socket$1=Socket;function Socket(e,t){if(!(this instanceof Socket))return new Socket(e,t);t=t||{},e&&"object"===_typeof(e)&&(t=e,e=null),e?(e=parseuri(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=parseuri(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=parseqs$1.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&0<Object.keys(t.extraHeaders).length&&(this.extraHeaders=t.extraHeaders),t.localAddress)&&(this.localAddress=t.localAddress),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function clone(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}Socket.priorWebsocketSuccess=!1,componentEmitter$1(Socket.prototype),Socket.protocol=browser$1.protocol,Socket.Socket=Socket,Socket.Transport=transport,Socket.transports=transports,Socket.parser=browser$1,Socket.prototype.createTransport=function(e){debug$1('creating transport "%s"',e);var t=clone(this.query),n=(t.EIO=browser$1.protocol,t.transport=e,this.transportOptions[e]||{});return this.id&&(t.sid=this.id),new transports[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},Socket.prototype.open=function(){var e,t;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return t=this,void setTimeout(function(){t.emit("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},Socket.prototype.setTransport=function(e){debug$1("setting transport %s",e.name);var t=this;this.transport&&(debug$1("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),(this.transport=e).on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},Socket.prototype.probe=function(n){debug$1('probing transport "%s"',n);var i=this.createTransport(n,{probe:1}),t=!1,o=this;function e(){var e;o.onlyBinaryUpgrades&&(e=!this.supportsBinary&&o.transport.supportsBinary,t=t||e),t||(debug$1('probe transport "%s" opened',n),i.send([{type:"ping",data:"probe"}]),i.once("packet",function(e){t||("pong"===e.type&&"probe"===e.data?(debug$1('probe transport "%s" pong',n),o.upgrading=!0,o.emit("upgrading",i),i&&(Socket.priorWebsocketSuccess="websocket"===i.name,debug$1('pausing current transport "%s"',o.transport.name),o.transport.pause(function(){t||"closed"!==o.readyState&&(debug$1("changing transport and sending upgrade packet"),d(),o.setTransport(i),i.send([{type:"upgrade"}]),o.emit("upgrade",i),i=null,o.upgrading=!1,o.flush())}))):(debug$1('probe transport "%s" failed',n),(e=new Error("probe error")).transport=i.name,o.emit("upgradeError",e)))}))}function r(){t||(t=!0,d(),i.close(),i=null)}function s(e){var t=new Error("probe error: "+e);t.transport=i.name,r(),debug$1('probe transport "%s" failed because of error: %s',n,e),o.emit("upgradeError",t)}function a(){s("transport closed")}function c(){s("socket closed")}function l(e){i&&e.name!==i.name&&(debug$1('"%s" works - aborting "%s"',e.name,i.name),r())}function d(){i.removeListener("open",e),i.removeListener("error",s),i.removeListener("close",a),o.removeListener("close",c),o.removeListener("upgrading",l)}Socket.priorWebsocketSuccess=!1,i.once("open",e),i.once("error",s),i.once("close",a),this.once("close",c),this.once("upgrading",l),i.open()},Socket.prototype.onOpen=function(){if(debug$1("socket open"),this.readyState="open",Socket.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){debug$1("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},Socket.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(debug$1('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else debug$1('packet received with socket readyState "%s"',this.readyState)},Socket.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},Socket.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},Socket.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){debug$1("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},Socket.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},Socket.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emit("drain"):this.flush()},Socket.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(debug$1("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},Socket.prototype.write=Socket.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},Socket.prototype.sendPacket=function(e,t,n,i){"function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((n=n||{}).compress=!1!==n.compress,this.emit("packetCreate",e={type:e,data:t,options:n}),this.writeBuffer.push(e),i&&this.once("flush",i),this.flush())},Socket.prototype.close=function(){var e;function t(){e.onClose("forced close"),debug$1("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function i(){e.once("upgrade",n),e.once("upgradeError",n)}return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",(e=this).writeBuffer.length?this.once("drain",function(){(this.upgrading?i:t)()}):(this.upgrading?i:t)()),this},Socket.prototype.onError=function(e){debug$1("socket error %j",e),Socket.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},Socket.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(debug$1('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},Socket.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;n<i;n++)~indexof(this.transports,e[n])&&t.push(e[n]);return t};var lib$1=socket$1,parser=browser$1,componentEmitter=(lib$1.parser=parser,createCommonjsModule(function(e){function i(e){if(e){var t,n=e;for(t in i.prototype)n[t]=i.prototype[t];return n}}(e.exports=i).prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)this._callbacks={};else{var n=this._callbacks["$"+e];if(n)if(1==arguments.length)delete this._callbacks["$"+e];else for(var i,o=0;o<n.length;o++)if((i=n[o])===t||i.fn===t){n.splice(o,1);break}}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var i=0,o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}})),toArray_1=toArray;function toArray(e,t){for(var n=[],i=(t=t||0)||0;i<e.length;i++)n[i-t]=e[i];return n}var on_1=on$1;function on$1(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}var slice$1=[].slice,componentBind=function(e,t){if("function"!=typeof(t="string"==typeof t?e[t]:t))throw new Error("bind() requires a function");var n=slice$1.call(arguments,2);return function(){return t.apply(e,n.concat(slice$1.call(arguments)))}},encode=function(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&(n.length&&(n+="&"),n+=encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n},decode=function(e){for(var t={},n=e.split("&"),i=0,o=n.length;i<o;i++){var r=n[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t},parseqs={encode:encode,decode:decode},socket=createCommonjsModule(function(e,t){var o=browser$3("socket.io-client:socket"),n=(e.exports=r,{connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1}),i=componentEmitter.prototype.emit;function r(e,t,n){this.io=e,this.nsp=t,(this.json=this).ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}componentEmitter(r.prototype),r.prototype.subEvents=function(){var e;this.subs||(e=this.io,this.subs=[on_1(e,"open",componentBind(this,"onopen")),on_1(e,"packet",componentBind(this,"onpacket")),on_1(e,"close",componentBind(this,"onclose"))])},r.prototype.open=r.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},r.prototype.send=function(){var e=toArray_1(arguments);return e.unshift("message"),this.emit.apply(this,e),this},r.prototype.emit=function(e){var t;return n.hasOwnProperty(e)?i.apply(this,arguments):(e=toArray_1(arguments),(t={type:(void 0!==this.flags.binary?this.flags.binary:hasBinary2(e))?socket_ioParser.BINARY_EVENT:socket_ioParser.EVENT,data:e,options:{}}).options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(o("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),t.id=this.ids++),this.connected?this.packet(t):this.sendBuffer.push(t),this.flags={}),this},r.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},r.prototype.onopen=function(){var e;o("transport is open - connecting"),"/"!==this.nsp&&(this.query?(e="object"===_typeof(this.query)?parseqs.encode(this.query):this.query,o("sending connect packet with query %s",e),this.packet({type:socket_ioParser.CONNECT,query:e})):this.packet({type:socket_ioParser.CONNECT}))},r.prototype.onclose=function(e){o("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},r.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===socket_ioParser.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case socket_ioParser.CONNECT:this.onconnect();break;case socket_ioParser.EVENT:case socket_ioParser.BINARY_EVENT:this.onevent(e);break;case socket_ioParser.ACK:case socket_ioParser.BINARY_ACK:this.onack(e);break;case socket_ioParser.DISCONNECT:this.ondisconnect();break;case socket_ioParser.ERROR:this.emit("error",e.data)}},r.prototype.onevent=function(e){var t=e.data||[];o("emitting event %j",t),null!=e.id&&(o("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?i.apply(this,t):this.receiveBuffer.push(t)},r.prototype.ack=function(t){var n=this,i=!1;return function(){var e;i||(i=!0,e=toArray_1(arguments),o("sending ack %j",e),n.packet({type:hasBinary2(e)?socket_ioParser.BINARY_ACK:socket_ioParser.ACK,id:t,data:e}))}},r.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(o("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):o("bad ack %s",e.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){for(var e=0;e<this.receiveBuffer.length;e++)i.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){o("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(o("performing disconnect (%s)",this.nsp),this.packet({type:socket_ioParser.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(e){return this.flags.compress=e,this},r.prototype.binary=function(e){return this.flags.binary=e,this}}),backo2=Backoff;function Backoff(e){this.ms=(e=e||{}).min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=0<e.jitter&&e.jitter<=1?e.jitter:0,this.attempts=0}Backoff.prototype.duration=function(){var e,t,n=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(e=Math.random(),t=Math.floor(e*this.jitter*n),n=0==(1&Math.floor(10*e))?n-t:n+t),0|Math.min(n,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(e){this.ms=e},Backoff.prototype.setMax=function(e){this.max=e},Backoff.prototype.setJitter=function(e){this.jitter=e};var debug=browser$3("socket.io-client:manager"),has=Object.prototype.hasOwnProperty,manager=Manager;function Manager(e,t){if(!(this instanceof Manager))return new Manager(e,t);e&&"object"===_typeof(e)&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new backo2({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];e=t.parser||socket_ioParser;this.encoder=new e.Encoder,this.decoder=new e.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}Manager.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)has.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},Manager.prototype.updateSocketIds=function(){for(var e in this.nsps)has.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},Manager.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},componentEmitter(Manager.prototype),Manager.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},Manager.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},Manager.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},Manager.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},Manager.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},Manager.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Manager.prototype.open=Manager.prototype.connect=function(n,e){var t,i,o,r,s,a;return debug("readyState %s",this.readyState),~this.readyState.indexOf("open")||(debug("opening %s",this.uri),this.engine=lib$1(this.uri,this.opts),t=this.engine,(i=this).readyState="opening",this.skipReconnect=!1,o=on_1(t,"open",function(){i.onopen(),n&&n()}),r=on_1(t,"error",function(e){var t;debug("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",e),n?((t=new Error("Connection error")).data=e,n(t)):i.maybeReconnectOnOpen()}),!1!==this._timeout&&(s=this._timeout,debug("connect attempt will timeout after %d",s),a=setTimeout(function(){debug("connect attempt timed out after %d",s),o.destroy(),t.close(),t.emit("error","timeout"),i.emitAll("connect_timeout",s)},s),this.subs.push({destroy:function(){clearTimeout(a)}})),this.subs.push(o),this.subs.push(r)),this},Manager.prototype.onopen=function(){debug("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(on_1(e,"data",componentBind(this,"ondata"))),this.subs.push(on_1(e,"ping",componentBind(this,"onping"))),this.subs.push(on_1(e,"pong",componentBind(this,"onpong"))),this.subs.push(on_1(e,"error",componentBind(this,"onerror"))),this.subs.push(on_1(e,"close",componentBind(this,"onclose"))),this.subs.push(on_1(this.decoder,"decoded",componentBind(this,"ondecoded")))},Manager.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},Manager.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},Manager.prototype.ondata=function(e){this.decoder.add(e)},Manager.prototype.ondecoded=function(e){this.emit("packet",e)},Manager.prototype.onerror=function(e){debug("error",e),this.emitAll("error",e)},Manager.prototype.socket=function(e,t){var n,i=this.nsps[e];function o(){~indexof(n.connecting,i)||n.connecting.push(i)}return i||(i=new socket(this,e,t),this.nsps[e]=i,n=this,i.on("connecting",o),i.on("connect",function(){i.id=n.generateId(e)}),this.autoConnect&&o()),i},Manager.prototype.destroy=function(e){e=indexof(this.connecting,e);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},Manager.prototype.packet=function(n){debug("writing packet %j",n);var i=this;n.query&&0===n.type&&(n.nsp+="?"+n.query),i.encoding?i.packetBuffer.push(n):(i.encoding=!0,this.encoder.encode(n,function(e){for(var t=0;t<e.length;t++)i.engine.write(e[t],n.options);i.encoding=!1,i.processPacketQueue()}))},Manager.prototype.processPacketQueue=function(){var e;0<this.packetBuffer.length&&!this.encoding&&(e=this.packetBuffer.shift(),this.packet(e))},Manager.prototype.cleanup=function(){debug("cleanup");for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},Manager.prototype.close=Manager.prototype.disconnect=function(){debug("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Manager.prototype.onclose=function(e){debug("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e,t,n=this;this.backoff.attempts>=this._reconnectionAttempts?(debug("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1):(e=this.backoff.duration(),debug("will wait %dms before reconnect attempt",e),this.reconnecting=!0,t=setTimeout(function(){n.skipReconnect||(debug("attempting reconnect"),n.emitAll("reconnect_attempt",n.backoff.attempts),n.emitAll("reconnecting",n.backoff.attempts),n.skipReconnect)||n.open(function(e){e?(debug("reconnect attempt error"),n.reconnecting=!1,n.reconnect(),n.emitAll("reconnect_error",e.data)):(debug("reconnect success"),n.onreconnect())})},e),this.subs.push({destroy:function(){clearTimeout(t)}}))},Manager.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};var lib=createCommonjsModule(function(e,t){var r=browser$3("socket.io-client"),s=(e.exports=t=n,t.managers={});function n(e,t){"object"===_typeof(e)&&(t=e,e=void 0),t=t||{};var e=url_1(e),n=e.source,i=e.id,o=e.path,o=s[i]&&o in s[i].nsps,o=t.forceNew||t["force new connection"]||!1===t.multiplex||o?(r("ignoring socket cache for %s",n),manager(n,t)):(s[i]||(r("new io instance for %s",n),s[i]=manager(n,t)),s[i]);return e.query&&!t.query&&(t.query=e.query),o.socket(e.path,t)}t.protocol=socket_ioParser.protocol,t.connect=n,t.Manager=manager,t.Socket=socket}),CaptureMediaDevice=function(){function n(e,t){_classCallCheck(this,n),this._localMediaStream=void 0,this._player=e,this._pc=this._player._pc,this._maxBitrate=t.rtc_upload_video_max_bitrate||30,this._frameRate=t.rtc_upload_video_fps||30;e=(t.rtc_upload_video_resolution||"1280x720").split("x");this._frameWidth=e[0],this._frameHeight=e[1],this._cacheReceiveMsg={},this._addLocalMediaStream()}return _createClass(n,[{key:"receiveMsg",value:function(e){var t=e.action;this._cacheReceiveMsg[t]=JSON.parse(JSON.stringify(e))}},{key:"_addLocalMediaStream",value:function(){var t=this;this._localMediaStream||this._createPredefineMediaStream(),this._localMediaStream.getTracks().forEach(function(e){t._pc.addTrack(e,t._localMediaStream)})}},{key:"_createPredefineMediaStream",value:function(){var t=this;this._localMediaStream=new MediaStream;(new(window.AudioContext||window.webkitAudioContext)).createMediaStreamDestination().stream.getAudioTracks().forEach(function(e){t._localMediaStream.addTrack(e)});var e=document.createElement("canvas"),n=e.getContext("2d");n.fillStyle="#ffffff",n.fillRect(0,0,1,1);n=(e.captureStream()||e.mozCaptureStream()).getVideoTracks()[0];this._localMediaStream.addTrack(n)}},{key:"_replaceMediaTrack",value:function(e){var t=this,n=(this._localMediaStream=new MediaStream(e),this._pc.getSenders().find(function(e){e=e.track;return e&&"audio"===e.kind})),e=this._localMediaStream.getAudioTracks(),i=(e.forEach(function(e){n?n.replaceTrack(e).then(function(e){}):t._pc.addTrack(e,t._localMediaStream)}),this._pc.getSenders().find(function(e){e=e.track;return e&&"video"===e.kind}));this._localMediaStream.getVideoTracks().forEach(function(e){i?i.replaceTrack(e).then(function(e){}):t._pc.addTrack(e,t._localMediaStream)}),this._changeResolution()}},{key:"_changeResolution",value:function(){var e,t=this._pc.getSenders(),t=t&&t.find(function(e){e=e.track;return e&&"video"===e.kind});t&&(e=t.getParameters(),this._maxBitrate&&e.encodings.length&&(e.encodings[0].active=!0,e.encodings[0].priority="high",e.encodings[0].maxBitrate=parseInt(1e3*this._maxBitrate)),e.degradationPreference="maintain-resolution",t.setParameters)&&t.setParameters(e).then(function(e){}).catch(function(e){})}},{key:"openMediaDevices",value:function(e,t){var n,i,o,r,s=this,a=e.video,e=e.audio,c={video:!1,audio:!1};"object"===typeCheck(a)&&a.deviceId&&(n=a.width,i=a.height,o=a.frameRate,a=a.deviceId,c.video={},c.video.width=n||this._frameWidth,c.video.height=i||this._frameHeight,c.video.frameRate=o||this._frameRate,a)&&(c.video.deviceId=a),"object"===typeCheck(e)&&e.deviceId&&(n=e.channelCount,i=e.sampleRate,o=e.echoCancellation,a=e.noiseSuppression,r=e.autoGainControl,e=e.deviceId,c.audio={},c.audio.channelCount=n||2,c.audio.sampleRate=i||48e3,c.audio.echoCancellation=o||!0,c.audio.noiseSuppression=a||!0,c.audio.autoGainControl=r||!1,e)&&(c.audio.deviceId=e),navigator.mediaDevices.getUserMedia(_objectSpread2({},c)).then(function(e){s.closeMediaDevices(null),s._replaceMediaTrack(e),t&&t("",e)}).catch(function(e){t&&t(e,"")})}},{key:"closeMediaDevices",value:function(t){this._localMediaStream.getTracks().forEach(function(e){e&&(!t||"Camera"===t&&"video"===e.kind||"Microphone"===t&&"audio"===e.kind)&&e.stop()})}},{key:"mediaDevicesResponseNotify",value:function(e,t){return!(Object.keys(this._cacheReceiveMsg).indexOf(e)<0||!t||"number"!=typeof t.op||"number"!=typeof t.code||(this._cacheReceiveMsg[e].data.op=t.op,this._cacheReceiveMsg[e].data.code=t.code,this._cacheReceiveMsg[e].method="response",this._cacheReceiveMsg[e].data.reason="Success",this._cacheReceiveMsg[e].data.msg="",this._player.sendData(JSON.stringify(this._cacheReceiveMsg[e])),0))}}]),n}(),WebRTCPlayer=function(){function e(){_classCallCheck(this,e),this._webRTCStatsJSON={},this._candidateCache=[],this._setRemoteOfferFlag=!1,this._signalV2Socket=null,this._signalV2Timer=null,this._setOfferFlag=!1,this.cid=null,this._setDataInfo=null,this.mediaParam={rotate:-1,flip:-1}}return _createClass(e,[{key:"create",value:function(e){var t,n=this,i=Math.floor((new Date).getTime()+1e8*Math.random()),o="canvas".concat(i).concat(adapter.browserDetails.version||0),r="video".concat(i),s="audio".concat(i),i="cover".concat(i);return document.querySelector(".HMplayerBox")||((t=document.createElement("div")).setAttribute("class","HMplayerBox"),e.insertBefore(t,e.childNodes[0])),document.querySelector(".HMplayerBox").innerHTML='\n            <canvas id="'.concat(o,'" style="width: 100%; height: 100%; position:absolute; left: 0; top: 0; z-index: 10;"></canvas>\n            <video\n                id="').concat(r,'"\n                ').concat(6==getClientType()?"controls":"",'\n                muted\n                autoplay\n                playsinline\n                webkit-playsinline\n                x5-playsinline\n                x5-video-player-type="h5"\n                x5-video-orientation="landscape"\n                x-webkit-airplay="allow"\n                preload\n                poster="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"\n                style="width: 100%; height: 100%; object-fit: fill;"\n                ></video>\n            <audio id="').concat(s,'" playsinline webkit-playsinline style="position:absolute; z-index:-1; width:50px; height:10px;"></audio>\n            <div id="').concat(i,'" style="position: absolute; top: 0; left: 0; z-index: 11; width: 100%; padding-top: 56.25%; background: #000000;"></div>\n        '),this.oVideoLabel=document.getElementById(r),this.oAudioLabel=document.getElementById(s),this.oVideoLabel.addEventListener("playing",function(e){n.oVideoLabel.controls=!1,eventEmitter.emit("webrtc","webrtc_decode_first_frame_end")}),this.oVideoLabel.addEventListener("loadstart",function(e){eventEmitter.emit("webrtc","webrtc_decode_first_frame_end","loadstart")}),this.oVideoLabel.addEventListener("loadedmetadata",function(e){n.oVideoLabel.controls=!1,eventEmitter.emit("webrtc","webrtc_decode_first_frame_end","loadedmetadata")}),this.oVideoLabel.addEventListener("loadeddata",function(e){n.oVideoLabel.controls=!1,eventEmitter.emit("webrtc","rtc_connect_vibf","loadeddata")}),this.oVideoLabel.addEventListener("canplay",function(e){n.oVideoLabel.controls=!1,eventEmitter.emit("webrtc","webrtc_decode_first_frame_end","canplay")}),{canvasId:o,videoId:r,coverId:i}}},{key:"connect",value:function(e,t,n){this.cid=n;var n=e.webRtcInfo.roomId,i=e.signalV2Url;this._roomId=n,this._setDataInfo=t,this._setRemoteOfferFlag=!1,this._signalV2Socket=null,this._signalV2Timer=null,this._setOfferFlag=!1,this._addPeerConnect(),i?this._connectV2(e,t):this._connectV1(e,t)}},{key:"_connectV1",value:function(e,t){var n=t.webrtc_socket_timeout,n=void 0===n?2e3:n,i=t.webrtc_reconnection_delayMax,i=void 0===i?1:i,t=t.webrtc_reconnection_attempts,t=void 0===t?5:t,e=e.webRtcInfo.signalUrl;eventEmitter.emit("webrtc","begin_connect",e),this._io&&this._io.connected?this._socketSendMessage("join"):this._socketConnect(e,{webrtc_socket_timeout:n,webrtc_reconnection_delayMax:i,webrtc_reconnection_attempts:t})}},{key:"_connectV2",value:function(n,i){var o=this,e=i.rtc_signalv2_signalv1delaytime,e=void 0===e?1e3:e,t=n.signalV2Url;eventEmitter.emit("webrtc","begin_connect",t),this._signalV2Socket?this.sendHandShakeToSignalV2Server():(eventEmitter.on("signalV2Socket",function(e,t){switch(e){case"open":o._setOfferFlag||(eventEmitter.emit("webrtc","signalv2_opened"),o.sendHandShakeToSignalV2Server());break;case"messages":o.handleV2Message(t);break;case"close":o._connectV2(n,i);break;case"reconnect":break;case"failed":o._connectV2(n,i)}}),this._signalV2Socket=new ScreenSocket(t+"&act=1&proto=6","signalV2Socket"),this._signalV2Socket.connect(),clearTimeout(this._signalV2Timer),this._signalV2Timer=setTimeout(function(){o._setOfferFlag||o._connectV1(n,i)},e))}},{key:"handleV2Message",value:function(e){var t,n,i,o,r,s,a;try{null==(a=JSON.parse(e)).head&&null==a.body||(t=a.head,n=a.body,this.cid==t.cid&&"request"==t.type&&("setoffer"==t.method?(i=n.media_description,eventEmitter.emit("webrtc","signalv2_setoffer"),null!=i&&(this._setOfferFlag?this._signalV2Socket&&this._signalV2Socket.close():(this._io&&this._io.close(),this._io=null,o={type:i.type,sdp:i.sdp},this._remoteOffer(o)))):"candidate"==t.method?(s={label:(r=n.candidate_info).label,id:r.id,candidate:r.candidate},this._remoteCandidate(s)):"reconnect"==t.method&&(this._setOfferFlag=!1,this.sendHandShakeToSignalV2Server())))}catch(e){}}},{key:"sendAnswerToSignalV2Server",value:function(e){e={head:{type:"request",method:"setanswer",cid:this.cid},body:{media_description:{type:"answer",sdp:e}}};return this._signalV2Socket.send(JSON.stringify(e))}},{key:"sendHandShakeToSignalV2Server",value:function(){var e;if(this._signalV2Socket)return e={head:{type:"request",method:"handshake",cid:this.cid},body:{sdk_info:{version:SDK_VERSION}}},this._signalV2Socket.send(JSON.stringify(e))}},{key:"_socketConnect",value:function(e,t){var n=this;this._io=lib(e,{transports:["websocket"],reconnectionAttempts:t.webrtc_reconnection_attempts,reconnectionDelayMax:t.webrtc_reconnection_delayMax,timeout:t.webrtc_socket_timeout}),this._io.on("connect",function(){eventEmitter.emit("socket.io","connect");var e=n._pc&&n._pc.connectionState?n._pc.connectionState:n._pc&&n._pc.iceConnectionState?n._pc.iceConnectionState:"";n._pc&&"connected"!=e&&n._socketSendMessage("join"),n._heartTimer&&clearInterval(n._heartTimer),n._heartTimer=setInterval(function(){clearInterval(n._heartTimer),n._socketSendMessage("heartbeat",{time:(new Date).getTime()})},1e4)}),this._io.on("onMessage",function(e){if("offer"===e.type)return n._setOfferFlag?void n._io.close():(n._signalV2Socket&&(eventEmitter.emit("webrtc","signalv2_closed"),n._signalV2Socket.disconnect(),n._signalV2Socket=null),void n._remoteOffer(e.payload));if("candidate"===e.type&&(n._candidateCache.push(e.payload),n._setRemoteOfferFlag))for(;0<n._candidateCache.length;)n._remoteCandidate(n._candidateCache[0]),n._candidateCache.shift()}),this._io.on("disconnect",function(){n._candidateCache=[],n._setRemoteOfferFlag=!1,eventEmitter.emit("socket.io","disconnect")}),this._io.on("reconnectfailed",function(){eventEmitter.emit("socket.io","reconnectFailed")}),this._io.on("reconnect",function(){eventEmitter.emit("socket.io","reconnectSuccess")}),this._io.on("reconnecterror",function(){eventEmitter.emit("socket.io","reconnectError")}),this._io.on("connecttimeout",function(){eventEmitter.emit("socket.io","connectTimeout")})}},{key:"_socketSendMessage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this._io?("join"==e?eventEmitter.emit("webrtc","send_join"):"answer"==e&&eventEmitter.emit("webrtc","send_answer",t),this._io.emit(e,{to:this._roomId,type:e,payload:t})):this._heartTimer&&clearInterval(this._heartTimer)}},{key:"_remoteOffer",value:function(e){var t=this;this._setOfferFlag=!0,eventEmitter.emit("webrtc","receive_offer",JSON.stringify(e)),"new"!==this._pc.iceConnectionState&&/firefox/gi.test(navigator.userAgent)?(this._addPeerConnect(),this._socketSendMessage("join")):this._pc.setRemoteDescription(new RTCSessionDescription({type:e.type,sdp:e.sdp})).then(function(){t._setRemoteOfferFlag=!0,eventEmitter.emit("webrtc","setRemoteDescription_success"),t._creatAnswer()}).catch(function(e){e="error_name:".concat(e.name,"; message:").concat(e.message);eventEmitter.emit("webrtc","setRemoteDescription_failed",e)})}},{key:"_removeNoneed",value:function(r,e){for(var s=e,t=function(){for(var e=/\d+/gi.exec(r[a]),t=new RegExp("(rtpmap|rtcp-fb|fmtp):"+e),n=(s=s.filter(function(e){return!t.test(e)}),new RegExp("apt="+e)),i=s.filter(function(e){return n.test(e)}),o=0;o<i.length;o++)!function(){var e=/\d+/gi.exec(i[o]),t=new RegExp("(rtpmap|fmtp):"+e);s=s.filter(function(e){return!t.test(e)})}()},a=0;a<r.length;a++)t();return s}},{key:"_creatAnswer",value:function(){var o=this;this._pc.createAnswer().then(function(e){var t,n,i;e.sdp=e.sdp.replace("useinbandfec=1","useinbandfec=1;stereo=1"),"true"!==o._setDataInfo.is_filter_sdp_h264_decode&&7==getClientType()&&0<(n=e.sdp.split("\r\n")).filter(function(e){return/VP8\/[0-9]/.test(e)}).length&&(t=n.filter(function(e){return/H264\/[0-9]/.test(e)}),t=(n=o._removeNoneed(t,n)).filter(function(e){return/VP9\/[0-9]/.test(e)}),n=o._removeNoneed(t,n),e.sdp=n.join("\r\n"));try{navigator.userAgent.length<=255&&(i="\r\na=haima_extern_begin\r\na=hm_ua:".concat(btoa(navigator.userAgent),"\r\na=hm_os:").concat(getClientType(),"\r\na=haima_extern_end"),e.sdp=e.sdp.replace(/a=(.*)/,"a=$1".concat(i)))}catch(e){}e.sdp=e.sdp.replace(/(a=rtcp-fb:[0-9]+ )nack\r\n/g,function(e,t){return"".concat(t,"nack\r\n").concat(t,"rrtr\r\n")}),o._pc.setLocalDescription(e).then(function(){for(;0<o._candidateCache.length;)o._remoteCandidate(o._candidateCache[0]),o._candidateCache.shift();eventEmitter.emit("webrtc","setLocalDescription_success",e.sdp.split("\r\n").join(",")),o._io?o._socketSendMessage("answer",e):o.sendAnswerToSignalV2Server(e.sdp)}).catch(function(e){e="error_name:".concat(e.name,"; message:").concat(e.message);eventEmitter.emit("webrtc","setLocalDescription_failed",e)})}).catch(function(e){e="error_name:".concat(e.name,"; message:").concat(e.message);eventEmitter.emit("webrtc","createAnswer_failed",e)})}},{key:"_remoteCandidate",value:function(e){eventEmitter.emit("webrtc","receive_candidate",JSON.stringify(e)),this._pc.addIceCandidate(new RTCIceCandidate({sdpMLineIndex:e.label,sdpMid:e.id,candidate:e.candidate})).then(function(){eventEmitter.emit("webrtc","addIceCandidate_success")}).catch(function(e){e="error_name:".concat(e.name,"; message:").concat(e.message);eventEmitter.emit("webrtc","addIceCandidate_failed",e)})}},{key:"_addPeerConnect",value:function(){this._pc&&(this._pc.close(),this._pc.ontrack=null,this._pc.onicecandidate=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null);try{var t=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;this._pc=new t(null)}catch(e){t={code:0,status:{socket:0,video:0,audio:0},errorMsg:JSON.stringify(e),errorCode:"HMWRTCSDK010"};throw eventEmitter.emit("webrtc","rtc_create_error",t),e}this._captureMediaDevice=new CaptureMediaDevice(this,this._setDataInfo),this._pcOnchangeManage()}},{key:"_pcOnchangeManage",value:function(){var t=this;this._pc.ontrack=function(e){"audio"==e.track.kind?(t.oAudioLabel.srcObject=e.streams[0],t._remoteAudioStream=e.streams[0]):(t.oVideoLabel.srcObject=e.streams[0],t._remoteVideoStream=e.streams[0]),eventEmitter.emit("webrtc","ontrack",e.track.kind),t._pc.id=(new Date).getTime()},this._pc.onicecandidate=function(e){e=e.candidate&&e.candidate.candidate;eventEmitter.emit("webrtc","onIceCandidate_success",e)},this._pc.onconnectionstatechange=function(){eventEmitter.emit("webrtc","connectionState",t._pc.connectionState),/firefox/gi.test(navigator.userAgent)||/opera/gi.test(navigator.userAgent)||t._connectionStateChange(t._pc.connectionState)},this._pc.oniceconnectionstatechange=function(){eventEmitter.emit("webrtc","iceConnectionState",t._pc.iceConnectionState),(/firefox/gi.test(navigator.userAgent)||/opera/gi.test(navigator.userAgent))&&t._connectionStateChange(t._pc.iceConnectionState)},this._pc.onicegatheringstatechange=function(){},this._pc.onsignalingstatechange=function(e){},this._pc.ondatachannel=function(e){eventEmitter.emit("webrtc","rtc_data_channel",e),t._datachannelHandle(e)}}},{key:"_datachannelHandle",value:function(e){var n=this;"HaimaRemoteDevice"===e.channel.label&&(this._mediaDeviceDataChannelInstance=e.channel,this._mediaDeviceDataChannelInstance.binaryType="arraybuffer",this._mediaDeviceDataChannelInstance.onopen=function(){},this._mediaDeviceDataChannelInstance.onmessage=function(e){try{var t=JSON.parse(e.data);n._captureMediaDevice.receiveMsg(t),eventEmitter.emit("webrtc","rtc_data_channel",{type:"media_device_request",data:t})}catch(e){eventEmitter.emit("webrtc","rtc_data_channel",{type:"media_device_request",data:e.message})}},this._mediaDeviceDataChannelInstance.onclose=function(){},this._mediaDeviceDataChannelInstance.onerror=function(){})}},{key:"_connectionStateChange",value:function(e){switch(e){case"connected":this._successCallbackToSDK();break;case"disconnected":this._statusForDisToCon=!0;break;case"failed":this._statusForDisToCon=!1,this._failedCallbackToSDK()}}},{key:"_successCallbackToSDK",value:function(){var i,o=this;eventEmitter.emit("webrtc","peer_connect_success"),this._statusForDisToCon?(this._statusForDisToCon=!1,eventEmitter.emit("webrtc","self_connect_success")):eventEmitter.emit("webrtc","other_connect_success"),this._initSuccessStatus||(i=0,(this._io&&this._io.connected||this._signalV2Socket&&1==this._signalV2Socket.readyState)&&(i=1),this._getTrackEnabled(function(e,t){var n={code:e&&t?1:0,status:{socket:i,video:e?1:0,audio:t?1:0},errorCode:""};clearTimeout(o._reconnect_timeID),e&&t?o._initSuccessStatus||(o._initSuccessStatus=!0,eventEmitter.emit("webrtc","rtc_connect_result",n)):eventEmitter.emit("webrtc","rtc_connect_result",n)}))}},{key:"_getTrackEnabled",value:function(e){var t,n,i=this;this._remoteVideoStream&&this._remoteAudioStream&&(t=!!(t=this._remoteVideoStream.getVideoTracks()[0])&&t.enabled,n=!!(n=this._remoteAudioStream.getAudioTracks()[0])&&n.enabled,t&&n?e(t,n):setTimeout(function(){i._getTrackEnabled(e)},100))}},{key:"_getFirstFrameStatus",value:function(e){var t=this;!this._pc||!this._pc.getReceivers()||this._pc.getReceivers().length<2?setTimeout(function(){t._getFirstFrameStatus(e)},100):e(!0,!0)}},{key:"_failedCallbackToSDK",value:function(){var e=0,e={code:0,status:{socket:e=this._io&&this._io.connected||this._signalV2Socket&&1==this._signalV2Socket.readyState?1:e,video:0,audio:0},errorCode:e?"HMWRTCSDK003":"HMWRTCSDK001,HMWRTCSDK003"};eventEmitter.emit("webrtc","rtc_connect_result",e),this._io&&this._io.close()}},{key:"getWebrtcStats",value:function(e){this._getStandardState(e)}},{key:"_getStandardState",value:function(t){var i=this;this._pc.getStats(null).then(function(e){var n=[];e.forEach(function(e){if(n.push(e),"inbound-rtp"==e.type&&"video"==e.kind){for(var t in e)i._webRTCStatsJSON[t]=e[t];e.packetsReceived&&(i._webRTCStatsJSON.packetsReceived=e.packetsReceived),e.packetsLost&&(i._webRTCStatsJSON.packetsLost=e.packetsLost),e.bytesReceived&&(i._webRTCStatsJSON.bytesReceived=e.bytesReceived),e.framesDecoded&&(i._webRTCStatsJSON.framesDecoded=e.framesDecoded),e.totalDecodeTime&&(i._webRTCStatsJSON.totalDecodeTime=e.totalDecodeTime),e.frameWidth&&(i._webRTCStatsJSON.frameWidth=e.frameWidth),e.frameHeight&&(i._webRTCStatsJSON.frameHeight=e.frameHeight),e.framesReceived&&(i._webRTCStatsJSON.framesReceived=e.framesReceived),/firefox/gi.test(navigator.userAgent)&&(i._webRTCStatsJSON.currentRoundTripTime=e.jitter),i._webRTCStatsJSON.totalFreezesDuration=e.totalFreezesDuration,i._webRTCStatsJSON.freezeCount=e.freezeCount}"track"==e.type&&"video"==e.kind&&(e.frameWidth&&(i._webRTCStatsJSON.frameWidth=e.frameWidth),e.frameHeight&&(i._webRTCStatsJSON.frameHeight=e.frameHeight),e.framesReceived)&&(i._webRTCStatsJSON.framesReceived=e.framesReceived),"candidate-pair"===e.type&&-1<["succeeded","in-progress"].indexOf(e.state)&&(i._webRTCStatsJSON.currentRoundTripTime=e.currentRoundTripTime,i._webRTCStatsJSON.totalRoundTripTime=e.totalRoundTripTime,i._webRTCStatsJSON.responsesReceived=e.responsesReceived)}),t(i._webRTCStatsJSON,n)})}},{key:"disconnect",value:function(){this._remoteVideoStream&&this._remoteVideoStream.getTracks().forEach(function(e){e.stop()}),this._remoteAudioStream&&this._remoteAudioStream.getTracks().forEach(function(e){e.stop()}),this.oAudioLabel&&(this.oAudioLabel.srcObject=null),this.oVideoLabel&&(this.oVideoLabel.srcObject=null),this._candidateCache=[],this._setRemoteOfferFlag=!1,this._pc&&(this._pc.close(),this._pc.ontrack=null,this._pc.onicecandidate=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null),this._io&&(this._io.close(),this._io=null),this._signalV2Socket&&(this._signalV2Socket.disconnect(),this._signalV2Socket=null),this._signalV2Timer&&clearTimeout(this._signalV2Timer),this._reconnect_timeID&&clearTimeout(this._reconnect_timeID),this._heartTimer&&clearInterval(this._heartTimer)}},{key:"enableAudio",value:function(e){e?this.oAudioLabel.play():this.oAudioLabel.pause()}},{key:"openMediaDevices",value:function(e,t){this._captureMediaDevice&&this._captureMediaDevice.openMediaDevices(e,t)}},{key:"closeMediaDevices",value:function(e){this._captureMediaDevice&&this._captureMediaDevice.closeMediaDevices(e)}},{key:"handleReceiveMsg",value:function(e){this._captureMediaDevice&&this._captureMediaDevice.receiveMsg(e)}},{key:"mediaDevicesResponseNotify",value:function(e,t){this._captureMediaDevice&&this._captureMediaDevice.mediaDevicesResponseNotify(e,t)}},{key:"sendData",value:function(e){this._mediaDeviceDataChannelInstance&&"open"===this._mediaDeviceDataChannelInstance.readyState&&this._mediaDeviceDataChannelInstance.send(e)}},{key:"cameraParamsSet",value:function(e){switch(e.rotate){case 0:this.mediaParam.rotate=0;break;case 1:this.mediaParam.rotate=90;break;case 2:this.mediaParam.rotate=180;break;case 3:this.mediaParam.rotate=270}0<=e.flip&&(this.mediaParam.flip=e.flip),this.sendData(JSON.stringify({action:"mediaParam",data:_objectSpread2({},this.mediaParam)}))}}]),e}(),RTC_MovingAverageInit=function(e){var n=0,i=0,o=null,r=e;function t(){return Math.min(n,r)}return o=new Array,{addSample:function(e){var t=++n%r;r<n&&(i-=o[t]),i+=e,o[t]=e},getAverageRoundedDown:function(){return 0==n?0:Math.round(i/t())},size:t,reset:function(){i=n=0,o=[]}}},moving_average=RTC_MovingAverageInit,RTC_SampleCounterInit=function(){var t=0,n=0;return{add:function(e){t+=e,++n},numSamples:function(){return n},sum:function(e){return n<e?0:t},reset:function(){n=t=0}}},sample_counter=RTC_SampleCounterInit,RTC_PerfdogToolInit=function(e,o){var r=0,s=0,a=0,c=0,l=0,d=0,p=e;return{calcJank:function(e,t){var n,i=!1;return d++,l+=e,0<r&&0<--r?null:(t=2*t+p,(n=e>Math.max(t,125))||(i=e>Math.max(t,84)),r=n||i?4:0,o&&(i?(s++,c+=e):n&&(a++,c+=e),1e4<=l)&&(t=" perfdog Jank:"+s,t=(t=(t+=" bigJank:"+a)+" JankDurationMs:"+c+" DrationMs:"+l)+" fps:"+Math.round(1e3*d/l),d=l=c=a=s=0),{was_freeze:n,was_jank:i})},reset:function(){d=l=c=a=s=0}}},perfdog_tool=RTC_PerfdogToolInit,kMinRequiredSamples=1,kMinFrameSamplesToDetectFreeze=3,num_frames_rendered_=0,last_frame_rendered_ms_=0,firstInsertTimerId_=0,followInsertTimerId_=0,firstInsertTimeStamp_=0,render_interframe_delays_=moving_average(3),jank_durations_=sample_counter(),freezes_durations_=sample_counter(),perfdog_tool_=perfdog_tool(8,!1),insertFrameOption_={enable:!1,first_insert_interval:100,following_insert_interval:50,insert_top_limit:0},inserFramecallback_=null;function onStatisFrame(e){var t,n,i,o;0==num_frames_rendered_?last_frame_rendered_ms_=e:0<num_frames_rendered_&&(t=Math.round(e-last_frame_rendered_ms_),i=n=!1,render_interframe_delays_.size()>=kMinFrameSamplesToDetectFreeze&&(o=render_interframe_delays_.getAverageRoundedDown(),null!=(o=perfdog_tool_.calcJank(t,o)))&&(i=o.was_freeze,n=o.was_jank),n&&jank_durations_.add(t),i&&freezes_durations_.add(t),render_interframe_delays_.addSample(t),last_frame_rendered_ms_=e),num_frames_rendered_++}function onInsertFrame(){var e=performance.now();onStatisFrame(e),null!=inserFramecallback_&&inserFramecallback_(e),0==followInsertTimerId_?followInsertTimerId_=setInterval(onInsertFrame,insertFrameOption_.following_insert_interval):0<insertFrameOption_.insert_top_limit&&e-firstInsertTimeStamp_>insertFrameOption_.insert_top_limit&&(0!=followInsertTimerId_&&clearTimeout(followInsertTimerId_),followInsertTimerId_=0)}var videFrameJankStatisInit=function(e){e&&(insertFrameOption_={first_insert_interval:e.rtc_first_frame_interpolation_interval&&0<e.rtc_first_frame_interpolation_interval?e.rtc_first_frame_interpolation_interval:100,following_insert_interval:e.rtc_following_frame_interpolation_interval&&0<e.rtc_following_frame_interpolation_interval?e.rtc_following_frame_interpolation_interval:50,insert_top_limit:e.rtc_frame_interpolation_top_limit&&0<e.rtc_frame_interpolation_top_limit?e.rtc_frame_interpolation_top_limit:0},e.rtc_enable_frame_interpolation&&0<e.rtc_enable_frame_interpolation?insertFrameOption_.enable=!0:insertFrameOption_.enable=!1)},videFrameJankStatisRegInsertFrameCallback=function(e){inserFramecallback_=e},videFrameJankStatisRender=function(e){insertFrameOption_.enable&&(0!=firstInsertTimerId_&&clearTimeout(firstInsertTimerId_),(firstInsertTimerId_=0)!=followInsertTimerId_&&clearTimeout(followInsertTimerId_),followInsertTimerId_=0),onStatisFrame(e),insertFrameOption_.enable&&(firstInsertTimeStamp_=e,firstInsertTimerId_=setTimeout(onInsertFrame,insertFrameOption_.first_insert_interval))},videFrameJankStatisReset=function(){render_interframe_delays_.reset(),jank_durations_.reset(),freezes_durations_.reset(),perfdog_tool_.reset(),(last_frame_rendered_ms_=num_frames_rendered_=0)!=firstInsertTimerId_&&clearTimeout(firstInsertTimerId_),(firstInsertTimerId_=0)!=followInsertTimerId_&&clearTimeout(followInsertTimerId_),firstInsertTimeStamp_=followInsertTimerId_=0},videFrameJankStatisGetJanksCount=function(){return jank_durations_.numSamples()},videFrameJankStatisGetJankDuration=function(){return jank_durations_.sum(kMinRequiredSamples)},videFrameJankStatisGetFreezeCount=function(){return freezes_durations_.numSamples()},videFrameJankStatisGetFreezeDuration=function(){return freezes_durations_.sum(kMinRequiredSamples)},videFrameJankStatisInit_1=videFrameJankStatisInit,videFrameJankStatisRegInsertFrameCallback_1=videFrameJankStatisRegInsertFrameCallback,videFrameJankStatisRender_1=videFrameJankStatisRender,videFrameJankStatisReset_1=videFrameJankStatisReset,videFrameJankStatisGetJanksCount_1=videFrameJankStatisGetJanksCount,videFrameJankStatisGetJankDuration_1=videFrameJankStatisGetJankDuration,videFrameJankStatisGetFreezeCount_1=videFrameJankStatisGetFreezeCount,videFrameJankStatisGetFreezeDuration_1=videFrameJankStatisGetFreezeDuration,VideoFrameCallback=function(){function e(){var t=this;_classCallCheck(this,e),this.videoFrameNo=1,this.video=null,this.currentHandleId=null,this.firstFrameTimeStampDiff=0,this.id="",this.enableVideoFrameCallback=!0;videFrameJankStatisRegInsertFrameCallback_1(function(e){t.callback({code:0,number:t.videoFrameNo++,timestamp:Math.round(t.firstFrameTimeStampDiff+e),isRestart:!1},null)})}return _createClass(e,[{key:"removeRequestVideoFrameCallback",value:function(){var e;this.currentHandleId&&(this.id&&this.video.requestVideoFrameCallback&&this.enableVideoFrameCallback?e=this.video.cancelVideoFrameCallback.bind(this.video):window.requestAnimationFrame&&(e=window.cancelAnimationFrame.bind(window)),e(this.currentHandleId),this.currentHandleId=null,this.video=null),videFrameJankStatisReset_1()}},{key:"requestVideoFrameCallback",value:function(e){var i,o=this,r=(this.id=e,this.removeRequestVideoFrameCallback(),!0);if(this.video=document.getElementById(this.id),this.id&&this.video.requestVideoFrameCallback&&this.enableVideoFrameCallback)i=this.video.requestVideoFrameCallback.bind(this.video);else{if(!window.requestAnimationFrame)return void this.callback({code:2,msg:"the streamType not supported"});i=window.requestAnimationFrame.bind(window)}i?(this.removeRequestVideoFrameCallback(),this.currentHandleId=i(function e(t,n){o.firstFrameTimeStampDiff||(o.firstFrameTimeStampDiff=+new Date-t),o.callback({code:0,number:o.videoFrameNo++,timestamp:Math.round(o.firstFrameTimeStampDiff+t),isRestart:r},n),r=!1,o.currentHandleId&&(videFrameJankStatisRender_1(t),o.currentHandleId=i(e))})):this.callback({code:1,msg:"the browser not supported"})}},{key:"supportRequestVideoFrameCallback",value:function(e){e=document.getElementById(e);return!!(this.enableVideoFrameCallback&&e&&e.requestVideoFrameCallback)}},{key:"enableRequestVideoFrameCallback",value:function(e){this.enableVideoFrameCallback=e}},{key:"callback",value:function(e,t){eventEmitter.emit("VideoFrame","callback",e,t)}}]),e}(),D=function e(t,n){return new e.fn.init(t,n)},document$1=window.document,emptyArray=[],concat=emptyArray.concat,filter$1=emptyArray.filter,slice=emptyArray.slice,classCache={},cssNumber={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},fragmentRE=/^\s*<(\w+|!)[^>]*>/,singleTagRE=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,tagExpanderRE=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rootNodeRE=/^(?:body|html)$/i,methodAttributes=["val","css","html","text","data","width","height","offset"],table=document$1.createElement("table"),tableRow=document$1.createElement("tr"),containers={tr:document$1.createElement("tbody"),tbody:table,thead:table,tfoot:table,td:tableRow,th:tableRow,"*":document$1.createElement("div")},simpleSelectorRE=/^[\w-]*$/,class2type={},toString=class2type.toString,tempParent=document$1.createElement("div"),isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},contains=document$1.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t=t&&t.parentNode;)if(t===e)return!0;return!1};function type(e){return null==e?String(e):class2type[toString.call(e)]||"object"}function isString(e){return"string"==typeof e}function isFunction(e){return"function"==type(e)}function isWindow(e){return null!=e&&e==e.window}function isDocument(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function isObject(e){return"object"==type(e)}function isPlainObject(e){return isObject(e)&&!isWindow(e)&&Object.getPrototypeOf(e)==Object.prototype}function likeArray(e){var t=!!e&&"length"in e&&e.length,n=type(e);return"function"!=n&&!isWindow(e)&&("array"==n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function compact(e){return filter$1.call(e,function(e){return null!=e})}function dasherize$1(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function maybeAddPx(e,t){return"number"!=typeof t||cssNumber[dasherize$1(e)]?t:t+"px"}function uniq(n){return filter$1.call(n,function(e,t){return n.indexOf(e)==t})}function camelize(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})}function classRE(e){return e in classCache?classCache[e]:classCache[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function flatten(e){return 0<e.length?D.fn.concat.apply([],e):e}function isD(e){return e instanceof D}function filtered(e,t){return null==t?D(e):D(e).filter(t)}function funcArg(e,t,n,i){return isFunction(t)?t.call(e,n,i):t}function setAttribute(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function className(e,t){var n=e.className||"",i=n&&void 0!==n.baseVal;if(void 0===t)return i?n.baseVal:n;i?n.baseVal=t:e.className=t}function trim(e){return null==e?"":String.prototype.trim.call(e)}function nodeName(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function css(e,t){if(arguments.length<2){var n,i,o=this[0];if("string"==typeof e)return o?o.style[camelize(e)]||getComputedStyle(o,"").getPropertyValue(e):void 0;if(isArray(e))return o?(n={},i=getComputedStyle(o,""),D.each(e,function(e,t){n[t]=o.style[camelize(t)]||i.getPropertyValue(t)}),n):void 0}var r="";if("string"==type(e))t||0===t?r=dasherize$1(e)+":"+maybeAddPx(e,t):this.each(function(){this.style.removeProperty(dasherize$1(e))});else for(var s in e)e[s]||0===e[s]?r+=dasherize$1(s)+":"+maybeAddPx(s,e[s])+";":this.each(function(){this.style.removeProperty(dasherize$1(s))});return this.each(function(){this.style.cssText+=";"+r})}function hasClass(e){return!!e&&emptyArray.some.call(this,function(e){return this.test(className(e))},classRE(e))}function addClass(n){var i=[];return n?this.each(function(e){var t;"className"in this&&(i=[],t=className(this),funcArg(this,n,e,t).split(/\s+/g).forEach(function(e){D(this).hasClass(e)||i.push(e)},this),i.length)&&className(this,t+(t?" ":"")+i.join(" "))}):this}function removeClass(t){var n=[];return this.each(function(e){if("className"in this){if(void 0===t)return className(this,"");n=className(this),funcArg(this,t,e,n).split(/\s+/g).forEach(function(e){n=n.replace(classRE(e)," ")}),className(this,n.trim())}})}function offset(i){var e;return i?this.each(function(e){var t=D(this),e=funcArg(this,i,e,t.offset()),n=t.offsetParent().offset(),e={top:e.top-n.top,left:e.left-n.left};"static"==t.css("position")&&(e.position="relative"),t.css(e)}):this.length?document$1.documentElement===this[0]||contains(document$1.documentElement,this[0])?{left:(e=this[0].getBoundingClientRect()).left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}:{top:0,left:0}:null}function position(){var e,t,n,i;if(this.length)return e=this[0],n=this.offsetParent(),i=rootNodeRE.test(n[0].nodeName)?{top:0,left:0}:n.offset(),"fixed"===D(e).css("position")?t=e.getBoundingClientRect():(t=this.offset(),i.top+=parseFloat(D(n[0]).css("border-top-width"))||0,i.left+=parseFloat(D(n[0]).css("border-left-width"))||0),{top:t.top-i.top-parseFloat(D(e).css("margin-top"))||0,left:t.left-i.left-parseFloat(D(e).css("margin-left"))||0}}function scrollTop(e){var t;if(this.length)return t="scrollTop"in this[0],void 0===e?t?this[0].scrollTop:(isWindow(this[0])?this[0]:this[0].defaultView).pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}function offsetParent(){return this.map(function(){for(var e=this.offsetParent||document$1.body;e&&!rootNodeRE.test(e.nodeName)&&"static"==D(e).css("position");)e=e.offsetParent;return e})}function attr(n,i){var e;return"string"!=typeof n||1 in arguments?this.each(function(e){if(1===this.nodeType)if(isObject(n))for(var t in n)setAttribute(this,t,n[t]);else setAttribute(this,n,funcArg(this,i,e,this.getAttribute(n)))}):0 in this&&1==this[0].nodeType&&null!=(e=this[0].getAttribute(n))?e:void 0}function removeAttr(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){setAttribute(this,e)},this)})}function val(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=funcArg(this,t,e,this.value)})):this[0]&&(this[0].multiple?D(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)}function find(e){var n=this,t=e?"object"==_typeof(e)?D(e).filter(function(){var t=this;return emptyArray.some.call(n,function(e){return contains(e,t)})}):1==this.length?D(D.qsa(this[0],e)):this.map(function(){return D.qsa(this,e)}):D();return t}function filter(t){return isFunction(t)?this.not(this.not(t)):D(filter$1.call(this,function(e){return D.matches(e,t)}))}function closest(n,i){var o=[],r="object"==_typeof(n)&&D(n);return this.each(function(e,t){for(;t&&!(r?0<=r.indexOf(t):D.matches(t,n));)t=t!==i&&!isDocument(t)&&t.parentNode;t&&o.indexOf(t)<0&&o.push(t)}),D(o)}function parents(e){for(var t=[],n=this;0<n.length;)n=D.map(n,function(e){if((e=e.parentNode)&&!isDocument(e)&&t.indexOf(e)<0)return t.push(e),e});return filtered(t,e)}function parent(e){return filtered(uniq(this.pluck("parentNode")),e)}function index(e){return e?this.indexOf(D(e)[0]):this.parent().children().indexOf(this[0])}D.fn=D.prototype={constuctor:D,length:0,forEach:emptyArray.forEach,reduce:emptyArray.reduce,push:emptyArray.push,sort:emptyArray.sort,splice:emptyArray.splice,indexOf:emptyArray.indexOf,init:function(e,t){var n;if(!e)return this;if("string"==typeof e)if("<"==(e=e.trim())[0]&&fragmentRE.test(e))n=D.fragment(e,RegExp.$1,t),e=null;else{if(void 0!==t)return D(t).find(e);n=D.qsa(document$1,e)}else{if(isFunction(e))return D(document$1).ready(e);if(isD(e))return e;if(isArray(e))n=compact(e);else if(isObject(e))n=[e],e=null;else{if(void 0!==t)return D(t).find(e);n=D.qsa(document$1,e)}}return D.makeArray(n,e,this)},concat:function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=isD(e=arguments[n])?e.toArray():e;return concat.apply(isD(this)?this.toArray():this,t)},pluck:function(t){return D.map(this,function(e){return e[t]})},toArray:function(){return this.get()},get:function(e){return void 0===e?slice.call(this):this[0<=e?e:e+this.length]},size:function(){return this.length},each:function(n){return emptyArray.every.call(this,function(e,t){return!1!==n.call(e,t,e)}),this},map:function(n){return D(D.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return D(slice.apply(this,arguments))},first:function(){var e=this[0];return e&&!isObject(e)?e:D(e)},last:function(){var e=this[this.length-1];return e&&!isObject(e)?e:D(e)},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)}},D.extend=D.fn.extend=function(){var e,t,n,i,o,r=arguments[0]||{},s=1,a=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[s]||{},s++),"object"===_typeof(r)||isFunction(r)||(r={}),s===a&&(r=this,s--);s<a;s++)if(null!=(e=arguments[s]))for(t in e)o=r[t],r!==(n=e[t])&&(c&&n&&(isPlainObject(n)||(i=isArray(n)))?(o=i?(i=!1,o&&isArray(o)?o:[]):o&&isPlainObject(o)?o:{},r[t]=D.extend(c,o,n)):void 0!==n&&(r[t]=n));return r},D.extend({makeArray:function(e,t,n){for(var i=e?e.length:0,o=0;o<i;o++)n[o]=e[o];return n.length=i,n.selector=t||"",n},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},qsa:function(e,t){var n,i="#"==t[0],o=!i&&"."==t[0],r=i||o?t.slice(1):t,s=simpleSelectorRE.test(r);return e.getElementById&&s&&i?(n=e.getElementById(r))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:slice.call(s&&!i&&e.getElementsByClassName?o?e.getElementsByClassName(r):e.getElementsByTagName(t):e.querySelectorAll(t))},fragment:function(e,t,n){var i,o,r;return(i=singleTagRE.test(e)?D(document$1.createElement(RegExp.$1)):i)||(e.replace&&(e=e.replace(tagExpanderRE,"<$1></$2>")),(t=void 0===t?fragmentRE.test(e)&&RegExp.$1:t)in containers||(t="*"),(r=containers[t]).innerHTML=""+e,i=D.each(slice.call(r.childNodes),function(){r.removeChild(this)})),isPlainObject(n)&&(o=D(i),D.each(n,function(e,t){-1<methodAttributes.indexOf(e)?o[e](t):o.attr(e,t)})),i},matches:function(e,t){var n,i;return!(!t||!e||1!==e.nodeType)&&((n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector)?n.call(e,t):((i=!(n=e.parentNode))&&(n=tempParent).appendChild(e),n=~D.qsa(n,t).indexOf(e),i&&tempParent.removeChild(e),n))},each:function(e,t){var n,i;if(likeArray(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(i in e)if(!1===t.call(e[i],i,e[i]))return e;return e},map:function(e,t){var n,i,o,r=[];if(likeArray(e))for(i=0;i<e.length;i++)null!=(n=t(e[i],i))&&r.push(n);else for(o in e)null!=(n=t(e[o],o))&&r.push(n);return flatten(r)}}),D.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){class2type["[object "+t+"]"]=t.toLowerCase()}),D.fn.init.prototype=D.fn;var _zid=1,handlers={},focusinSupported="onfocusin"in window,focus$1={focus:"focusin",blur:"focusout"},hover={mouseenter:"mouseover",mouseleave:"mouseout"},ignoreProperties=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,returnTrue=function(){return!0},returnFalse=function(){return!1},eventMethods={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function zid(e){return e._zid||(e._zid=_zid++)}function compatible(i,o){if(o||!i.isDefaultPrevented){o=o||i,D.each(eventMethods,function(e,t){var n=o[e];i[e]=function(){return this[t]=returnTrue,n&&n.apply(o,arguments)},i[t]=returnFalse});try{i.timeStamp||(i.timeStamp=Date.now())}catch(e){}(void 0!==o.defaultPrevented?o.defaultPrevented:"returnValue"in o?!1===o.returnValue:o.getPreventDefault&&o.getPreventDefault())&&(i.isDefaultPrevented=returnTrue)}return i}function parse(e){e=(""+e).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function matcherFor(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function findHandlers(e,t,n,i){var o;return(t=parse(t)).ns&&(o=matcherFor(t.ns)),(handlers[zid(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||o.test(e.ns))&&(!n||zid(e.fn)===zid(n))&&(!i||e.sel==i)})}function eventCapture(e,t){return e.del&&!focusinSupported&&e.e in focus$1||!!t}function realEvent(e){return hover[e]||focusinSupported&&focus$1[e]||e}function addEvent(i,e,o,r,s,a,c){var t=zid(i),l=handlers[t]||(handlers[t]=[]);e.split(/\s/).forEach(function(e){if("ready"==e)return D(document$1).ready(o);var t=parse(e),n=(t.fn=o,t.sel=s,t.e in hover&&(o=function(e){e=e.relatedTarget;if(!e||e!==this&&!contains(this,e))return t.fn.apply(this,arguments)}),(t.del=a)||o);t.proxy=function(e){var t;if(!(e=compatible(e)).isImmediatePropagationStopped())return e.data=r,!1===(t=n.apply(i,null==e._args?[e]:[e].concat(e._args)))&&(e.preventDefault(),e.stopPropagation()),t},t.i=l.length,l.push(t),"addEventListener"in i&&i.addEventListener(realEvent(t.e),t.proxy,eventCapture(t,c))})}function removeEvent(t,e,n,i,o){var r=zid(t);(e||"").split(/\s/).forEach(function(e){findHandlers(t,e,n,i).forEach(function(e){delete handlers[r][e.i],"removeEventListener"in t&&t.removeEventListener(realEvent(e.e),e.proxy,eventCapture(e,o))})})}function createProxy(e){var t,n={originalEvent:e};for(t in e)ignoreProperties.test(t)||void 0===e[t]||(n[t]=e[t]);return compatible(n,e)}function traverseNode(e,t){t(e);for(var n=0,i=e.childNodes.length;n<i;n++)traverseNode(e.childNodes[n],t)}function domMani(e,t,i,o){var n,r,s=D.map(t,function(e){var t=[];return"array"==(n=type(e))?(e.forEach(function(e){return void 0!==e.nodeType?t.push(e):isD(e)?t=t.concat(e.get()):void(t=t.concat(D.fragment(e)))}),t):"object"==n||null==e?e:D.fragment(e)}),a=1<e.length;return s.length<1?e:e.each(function(e,t){r=o?t:t.parentNode;var n=contains(document$1.documentElement,r);s.forEach(function(e){if(a)e=e.cloneNode(!0);else if(!r)return D(e).remove();i.call(t,e),n&&traverseNode(e,function(e){var t;null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||(t=e.ownerDocument?e.ownerDocument.defaultView:window).eval.call(t,e.innerHTML)})})})}function getAll(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&nodeName(e,t)?D.merge([e],n):n}function cleanData(e){for(var t,n,i=0;void 0!==(n=e[i]);i++)n._zid&&(t=handlers[n._zid])&&t.forEach(function(e){var t=e.e+"."+e.ns.split(" ").join(".");removeEvent(n,t,e.fn,e.sel)})}function remove(){return this.each(function(){1===this.nodeType&&cleanData(getAll(this)),null!=this.parentNode&&this.parentNode.removeChild(this)})}function empty(){return this.each(function(){this.innerHTML=""})}function html(n){return 0 in arguments?this.each(function(e){var t=this.innerHTML;D(this).empty().append(funcArg(this,n,e,t))}):0 in this?this[0].innerHTML:null}function text(t){return 0 in arguments?this.each(function(e){e=funcArg(this,t,e,this.textContent);this.textContent=null==e?"":""+e}):0 in this?this.pluck("textContent").join(""):null}function append(){return domMani(this,arguments,function(e){this.insertBefore(e,null)},!0)}function prepend(){return domMani(this,arguments,function(e){this.insertBefore(e,this.firstChild)},!0)}function after(){return domMani(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!1)}function before(){return domMani(this,arguments,function(e){this.parentNode.insertBefore(e,this)},!1)}function on(t,i,o,r,s){var a,c,n=this;return t&&!isString(t)?(D.each(t,function(e,t){n.on(e,i,o,t,s)}),n):(isString(i)||isFunction(r)||!1===r||(r=o,o=i,i=void 0),void 0!==r&&!1!==o||(r=o,o=void 0),!1===r&&(r=returnFalse),n.each(function(e,n){s&&(a=function(e){return removeEvent(n,e.type,r),r.apply(this,arguments)}),addEvent(n,t,r,o,i,(c=i?function(e){var t=D(e.target).closest(i,n).get(0);if(t&&t!==n)return e=D.extend(createProxy(e),{currentTarget:t,liveFired:n}),(a||r).apply(t,[e].concat(slice.call(arguments,1)))}:c)||a)}))}function off(e,n,t){var i=this;return e&&!isString(e)?(D.each(e,function(e,t){i.off(e,n,t)}),i):(isString(n)||isFunction(t)||!1===t||(t=n,n=void 0),!1===t&&(t=returnFalse),i.each(function(){removeEvent(this,e,t,n)}))}var specialEvents={click:"MouseEvents",mousedown:"MouseEvents",mouseup:"MouseEvents",mousemove:"MouseEvents"};function Event$1(e,t){isString(e)||(e=(t=e).type);var n=document$1.createEvent(specialEvents[e]||"Events"),i=!0;if(t)for(var o in t)"bubbles"==o?i=!!t[o]:n[o]=t[o];return n.initEvent(e,i,!0),compatible(n)}var prefix="",eventPrefix,vendors={Webkit:"webkit",Moz:"",O:"o"},testEl=document$1.createElement("div"),testTransitionProperty=testEl.style.transitionProperty;function normalizeEvent(e){return eventPrefix?eventPrefix+e:e.toLowerCase()}void 0===testEl.style.transform&&D.each(vendors,function(e,t){if(void 0!==testEl.style[e+"TransitionProperty"])return prefix="-"+e.toLowerCase()+"-",eventPrefix=t,!1}),testEl=null,D.fx={off:void 0===eventPrefix&&void 0===testTransitionProperty,speeds:{_default:400,fast:200,slow:600},cssPrefix:prefix,transitionEnd:normalizeEvent("TransitionEnd"),animationEnd:normalizeEvent("AnimationEnd")};var supportedTransforms=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,transform,transitionProperty,transitionDuration,transitionTiming,transitionDelay,animationName,animationDuration,animationTiming,animationDelay,cssReset={};function dasherize(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function anim$2(e,t,n,i,o){var r,s,a,c={},l="",d=this,p=D.fx.transitionEnd,u=!1;if(void 0===t&&(t=D.fx.speeds._default/1e3),void 0===o&&(o=0),D.fx.off&&(t=0),"string"==typeof e)c[animationName]=e,c[animationDuration]=t+"s",c[animationDelay]=o+"s",c[animationTiming]=n||"linear",p=D.fx.animationEnd;else{for(r in s=[],e)supportedTransforms.test(r)?l+=r+"("+e[r]+") ":(c[r]=e[r],s.push(dasherize(r)));l&&(c[transform]=l,s.push(transform)),0<t&&"object"===_typeof(e)&&(c[transitionProperty]=s.join(", "),c[transitionDuration]=t+"s",c[transitionDelay]=o+"s",c[transitionTiming]=n||"linear")}return a=function(e){if(void 0!==e){if(e.target!==e.currentTarget)return;D(e.target).off(p,a)}else D(this).off(p,a);u=!0,D(this).css(cssReset),i&&i.call(this)},0<t&&(this.on(p,a),setTimeout(function(){u||a.call(d)},1e3*(t+o)+25)),this.size()&&this.get(0).clientLeft,this.css(c),t<=0&&setTimeout(function(){d.each(function(){a.call(this)})},0),this}function animate(e,t,n,i,o){return isFunction(t)&&(i=t,t=n=void 0),isFunction(n)&&(i=n,n=void 0),isPlainObject(t)&&(n=t.easing,i=t.complete,o=t.delay,t=t.duration),t=t&&("number"==typeof t?t:D.fx.speeds[t]||D.fx.speeds._default)/1e3,o=o&&parseFloat(o)/1e3,this.anim(e,t,n,i,o)}function origHide$1(){return this.css("display","none")}function anim(e,t,n,i,o){"function"!=typeof t||o||(o=t,t=void 0);n={opacity:n};return i&&(n.scale=i,e.css(D.fx.cssPrefix+"transform-origin","0 0")),e.animate(n,t,null,o)}function hideHelper$1(e,t,n,i){return anim(e,t,0,n,function(){origHide$1.call(D(this)),i&&i.call(this)})}function fadeOut(e,t){return hideHelper$1(this,e,null,t)}transform=prefix+"transform",cssReset[transitionProperty=prefix+"transition-property"]=cssReset[transitionDuration=prefix+"transition-duration"]=cssReset[transitionDelay=prefix+"transition-delay"]=cssReset[transitionTiming=prefix+"transition-timing-function"]=cssReset[animationName=prefix+"animation-name"]=cssReset[animationDuration=prefix+"animation-duration"]=cssReset[animationDelay=prefix+"animation-delay"]=cssReset[animationTiming=prefix+"animation-timing-function"]="";var attrObj={isArray:isArray,trim:trim},FNObj={css:css,attr:attr,remove:remove,append:append,removeClass:removeClass,addClass:addClass,prepend:prepend,after:after,before:before,on:on,off:off,trigger:trigger,val:val,find:find,height:height,width:width,offset:offset,scrollTop:scrollTop,hasClass:hasClass,isShow:isShow,show:show,animate:animate,anim:anim$2,hide:hide,closest:closest,HmDrage:HmDrage,HmTitles:HmTitles,parent:parent,parents:parents,dragDivResize:dragDivResize,Event:Event$1,removeAttr:removeAttr,blur:blur,focus:focus,html:html,empty:empty,filter:filter,text:text,fadeOut:fadeOut,index:index,position:position,offsetParent:offsetParent},$=(D.extend(attrObj),D.fn.extend(FNObj),D);function width(e){if(!e)return this[0].offsetWidth;this.css("width",e)}function height(e){if(!e)return this[0].offsetHeight;this.css("height",e)}function isShow(){return"block"===this.css("display")}function show(e,t){return origShow.call(this),void 0===e?e=0:this.css("opacity",0),anim$1(this,e,1,t)}function origShow(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=defaultDisplay(this.nodeName))})}function hide(e,t){return void 0===e?origHide.call(this):hideHelper(this,e,t)}function defaultDisplay(e){var t,n,i={};return i[e]||(t=document.createElement(e),document.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),i[e]=n="none"==n?"block":n),i[e]}function origHide(){return this.css("display","none")}function hideHelper(e,t,n){return anim$1(e,t,0,function(){origHide.call(D(this)),n&&n.call(this)})}function anim$1(e,t,n,i){return"function"!=typeof t||i||(i=t,t=void 0),e.animate({opacity:n},t,null,i)}function blur(){this[0].blur()}function focus(){this[0].focus()}function trigger(e){this[0].dispatchEvent(new Event$1(e))}function HmTitles(o){$(this).off("mouseenter"),$(this).off("mouseleave");var r=null;$(this).on("mouseenter",function(e){var t,n,i=$(e?e.target:this.element),e=$(this).attr("titles")||"";$(i).hasClass("is_set")||$(i).hasClass("disabled")||!e||(t=$(this).offset(),n=$(o).offset(),$(o).append('<div class="HM-Title-Box">\n                            <a>'.concat(e,"</a>\n                          </div>")),t.left=t.left-n.left,t.top=t.top-n.top,t.left+$(".HM-Title-Box").offset().width+104>n.width&&(t.left=t.left-$(".HM-Title-Box").offset().width),$(".HM-Title-Box").css({left:t.left+"px",top:t.top+50+"px"}),r=setInterval(function(){$(i).hasClass("is_set")&&(clearInterval(r),$(o).find(".HM-Title-Box").remove())},100))}),$(this).on("mouseleave",function(e){clearInterval(r),$(o).find(".HM-Title-Box").remove()})}function HmDrage(m,y,g){$(this).off("mousedown"),$(document).off("mouseup"),$(this).on("mousedown",function(e){var o,t,r,s,a,c,l,d,p,n,u,h,i,f=this;0!=e.button||g&&"down"==g&&!$(e.target).hasClass("dragSpecial")||$(e.target).hasClass("close_btn_i")||$(e.target).hasClass("disabled")||($(e.target).hasClass("HmDrages")||$(e.target).parent().hasClass("HmDrages"))&&(n=$(this).parent().offset(),o=$(".Key_SET_btns").position(),t=$(this).offset(),r=e.pageX-t.left+(m.left||0),s=e.pageY-t.top+(m.top||0),a=e.clientX,c=e.clientY,l="",p={x:d=0,y:0},m.isRotate&&"down"==g&&(d=($(".Key_SET_btns").width()-$(m.containment).width())/2),"parent"==m.containment&&(r=e.pageX-t.left+(n.left||0),s=e.pageY-t.top+(n.top||0)),n=$(this).width()!=$(this)[0].getBoundingClientRect().width,u=n?($(this).width()-$(this)[0].getBoundingClientRect().width)/2:0,h=n?($(this).height()-$(this)[0].getBoundingClientRect().height)/2:0,"down"!=g||$(this).hasClass("is_set")||(y($(this),g),t=$(this).offset(),m.left=$(".Key_SET_btns").offset().left,m.top=$(".Key_SET_btns").offset().top,n=$(this).width()!=$(this)[0].getBoundingClientRect().width,u=n?($(this).width()-$(this)[0].getBoundingClientRect().width)/2:0,h=n?($(this).height()-$(this)[0].getBoundingClientRect().height)/2:0,$(this).css({left:e.pageX-t.width/2-(m.left||0)-u+"px",top:e.pageY-t.width/2-(m.top||0)-h+"px"}),t=$(this).offset(),r=e.pageX-t.left+(m.left||0),s=e.pageY-t.top+(m.top||0)),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1,i=function(e){var t,n,i;a==e.clientX&&c==e.clientY||(l="hasMove",t=Math.round(e.pageX-r),n=Math.round(e.pageY-s),t<(i=getContainment($(f),m.containment,o,d))[0]&&(t=i[0]),n<i[1]&&(n=i[1]),t>i[2]&&(t=i[2]),n>i[3]&&(n=i[3]),t-=u,n-=h,$(f).css({left:t+"px",top:n+"px"}),"toDrawLine"==g&&y&&y($(f),"toDrawLine"),p.x=t,p.y=n,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1)},$(document).on("mousemove",i),$(document).on("mouseup",function(){$(document).off("mousemove",i),$(document).off("mouseup"),$(f).css("left")&&$(f).css("top")||$(f).css({left:"px",top:"px"}),"down"==g&&(p.x=p.x+u,p.y=p.y+h,$(f).css({left:p.x+o.left-d+"px",top:p.y+o.top+"px"})),y&&y($(f),l)}))})}function getContainment(e,t,n,i){var o,r=$(e).css("transform"),r=r.match(/scale\((.*)\)/)?r.match(/scale\((.*)\)/)[1]:1,s=[],r=$(e).width()*r/2;return"parent"==t?(o=$(".KeyBtnBox_SET"),s=[0-r,0-r,(o=$(e).parent().size()?$(e).parent():o).width()-r,o.height()-r]):t instanceof $?(e=$(t).width(),o=$(t).height(),s=[0-r-n.left+i,0-r-n.top,e-r-n.left+i,o-r-n.top]):t.constructor===Array&&(s=t),s}function dragDivResize(i){var o,r,s,a,c,l=10,d=10,p=138,u=function(){var e=window;if(null!=e.pageXOffset)return{x:e.pageXOffset,y:e.pageYOffset};e=e.document;return"CSS1Compat"!=document.compatMode?{x:e.body.scrollLeft,y:e.body.scrollTop}:{x:e.documentElement.scrollLeft,y:e.documentElement.scrollTop}}(),t=this,h="",f="";function n(){for(var e=0;e<t.length;e++)h.style.outline="none";document.body.style.cursor="default"}function e(e){h=e.target||e.srcElement;var t=e.clientX+u.x,e=e.clientY+u.y,n=$(h)[0].getBoundingClientRect().width,i=$(h)[0].getBoundingClientRect().height;r=parseInt(t),s=parseInt(e),0<$(h).offset().left+n-r&&$(h).offset().left+n-r<l||0<$(h).offset().top+i-s&&$(h).offset().top+i-s<l?(($(h).offset().left+n-r<0||$(h).offset().left+n-r>l)&&0<$(h).offset().top+i-s&&$(h).offset().top+i-s<l&&(c=!(a=!1)),0<$(h).offset().left+n-r&&$(h).offset().left+n-r<l&&($(h).offset().top+i-s<0||$(h).offset().top+i-s>l)&&(c=!(a=!0)),0<$(h).offset().left+n-r&&$(h).offset().left+n-r<l&&0<$(h).offset().top+i-s&&$(h).offset().top+i-s<l&&(c=a=!0),$(h).off("mousedown",m),$(h).on("mousedown",m)):(c=a=!1,$(h).off("mousedown",m))}function m(e){i("start"),h=e.target||e.srcElement,f=e.target||e.srcElement;var t=e.clientX+u.x,n=e.clientY+u.y;r=parseInt(t),s=parseInt(n),document.addEventListener?(document.removeEventListener("mousemove",y,!0),document.removeEventListener("mouseup",g,!0),document.addEventListener("mousemove",y,!0),document.addEventListener("mouseup",g,!0)):document.attachEvent&&(h.setCapture(),h.detachEvent("onlosecapeture",g),h.detachEvent("onmouseup",g),h.detachEvent("onmousemove",y),h.attachEvent("onlosecapeture",g),h.attachEvent("onmouseup",g),h.attachEvent("onmousemove",y)),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1}function y(e){e=e||window.event;var t,n=parseInt(e.clientX+u.x),i=parseInt(e.clientY+u.y);(h=h||e.target||e.srcElement)!=document.body&&$(h).hasClass("dragDivResize")?(a&&(o=n-r,t=$(h)[0].offsetWidth+o<d?d:$(h)[0].offsetWidth+o,h.style.width=(t=(t=2*p<t?2*p:t)<.65*p?.65*p:t)+"px",h.style.height=t+"px",r=n),c&&(o=i-s,t=$(h).height()+o<d?d:$(h).height()+o,h.style.width=(t=(t=2*p<t?2*p:t)<.65*p?.65*p:t)+"px",h.style.height=t+"px",s=i),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0):$(h).trigger("mouseup")}function g(e){e=e||window.event,c=a=!1,h=e.target||e.srcElement,$(h).on("mouseout",n),document.removeEventListener?(document.removeEventListener("mousemove",y,!0),document.removeEventListener("mouseup",g,!0)):document.detachEvent&&(h.detachEvent("onlosecapeture",g),h.detachEvent("onmouseup",g),h.detachEvent("onmousemove",y),h.releaseCapture()),$(h).trigger("mouseup"),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,setTimeout(function(){i($(f))})}$(t).off("mouseover"),$(t).off("mousemove"),$(t).on("mouseover",e),$(t).on("mousemove",e)}var SaasSDK=function(){function t(e){_classCallCheck(this,t),this.gGameState=1,this.accessKeyId=e.accessKeyId,this.channelId=e.channelId,this.X86Player=e.X86Player,this.streamType="",this.clientTransId=md5Encrypt(createUID((new Date).getTime())).toString(),this.getNetRequestInfo=[],this.gCurrentRequestCount=1,this.wsMessageList={},this.sendWSMessageCallback={intent:emptyFunction,clipboard:emptyFunction},this.sdkRestartCount=0,this.uploadQueue=!1,this.saasRequest=new SaasRequest(this.accessKeyId,this.channelId),this.logger=new Logger(this.accessKeyId,this.channelId),this._initFrameModel(),this.isSupportRTC=isSupportRTC(),this.flashSurpported=!1,this.rtmpIndex=1,this.pageClosed=!1,this.gReconnecting=!1,this.saasLinkReconnectIndex=0,this.saasLinkTimeOutCount=0,this.VideoFrameCallbackInfo={callback:emptyFunction,isReuqest:!0},this._setClientTransId(),this.supportLiving="unknown",this.connectStatus={cid:!1,saasSocket:!1,saasSocketPingPong:!1,inputSocket:!1,audio:!1,video:!1,streamAddress:!1,firstFrame:!1,statusCode:""},this.isRefsContorl=!1,this.UseResolutionInfo={preResId:-1,resolutionChangeStartTime:0,isAutoResolutionChanged:!1,UseResolutionId:-1,changing:!1},this.startGameParams=null,this.pausePlayerState=!1,this.streamStyle={streamStyleH:720,streamStyleW:1280},this.upDataInfo={uploadOnError:emptyFunction,uploadOnSuccess:emptyFunction,uploadStatus:0,uploadOpTypeList:["upload_image"],uploadMimeTypeList:["image/png","image/jpeg"],uploadOpType:"",uploadFile:null,uploadStartTime:null,uploadImgBuffer:null,uploadDelay:3e3,retryUpload:5,uploadRetryTimer:null},this.downloadInfo={fileListCallback:emptyFunction,fileDownloadCallback:emptyFunction,fileName:"",fileParam:null,time:(new Date).getTime(),imgBold:[]},this.inputOpenStatus=!1,this.sdkAbility=divideBy2("1110010000"),this.currentStreamAddress="",this.cid="",this.masterCid="",this.captureLocalAudio=null,this.bigFileInfo={startCallback:emptyFunction,stopCallback:emptyFunction},this.bigFileDownloadUrl="",this.videoStreamInfo={videoFps:"-1",bitRate:"-1",packetsLostRate:"-1",currentDelayMs:"-1",decodeDelay:"-1",renderDelay:"-1",frameSize:"-1",jitterBuffer:"-1",framesReceived:"-1",receiveFrameSize:"-1",delay:"-1",codecImplementationName:"",codecName:"",frameWidth:"",frameHeight:""},this.isChangeResolution=!1,this.isNeedWaitOperation5Notify=!1,this.isX86CameraStatus=!1,this.customGameScreenDirection="",this._captureMediaDeviceHandler=this._captureMediaDevice.bind(this)}return _createClass(t,[{key:"loggerSend",value:function(e,t){this.logger.send(e,t)}},{key:"applyGame",value:function(e,t,n,i){i&&(this.SaasSDKTips=i,this.saasRequest.setLanguage(this.SaasSDKTips.lang,this.SaasSDKTips.request)),t=this._formatParames(t),"string"==typeof e&&$(e)[0]?this._checkParames(t)&&(void 0!==n&&(this.flashSurpported=n),this.isSupportRTC||this.flashSurpported||3!=getClientType()?(this._emit("sceneChanged","init",""),this.gGameState=2,t.sdkAbility=[this.sdkAbility],this.applyGameParams=t,this.applyGameWrap=e,this.oVideoContainer=$(this.applyGameWrap)[0],this.logger.setGameInfo(t.extraId,t.userInfo.uId,t.pkgName,t.appChannel),this.saasRequest.setUserInfo(t.userInfo),this.netRequestData={packageName:this.applyGameParams.pkgName,uid:this.applyGameParams.userInfo.uId,cid:this.cid||"",transId:this.clientTransId},this._binPageCloseEvent(),this._getDid()):this._showFlashDisableTips()):((i={errorCode:applyFailCode.PARAMS_ERROR,errorMsg:this.SaasSDKTips.applyFailTips.PARAMS_ERROR}).errorMsg="".concat(this.SaasSDKTips.applyFailTips.PARAMS_ERROR,'"DoM"'),this._parameError(i))}},{key:"_binPageCloseEvent",value:function(){function e(){t.pageClosed||(t.loggerSend(loggerEventId.page_closed,"beforeunload"),t.pageClosed=!0)}var t=this;window.addEventListener("beforeunload",e),window.addEventListener("unload",e)}},{key:"_checkParames",value:function(e){var t={errorCode:applyFailCode.PARAMS_ERROR,errorMsg:this.SaasSDKTips.applyFailTips.PARAMS_ERROR},n=e.pkgName,i=e.userInfo,o=e.cToken,r=e.isPortrait,s=e.configInfo,e=e.playingtime;return n&&"string"==typeof n?i&&i.uId&&i.uToken?o&&"string"==typeof o?s&&"string"==typeof s?"boolean"==typeof r?!(isNaN(parseInt(e))||e<0)||(t.errorMsg="".concat(this.SaasSDKTips.applyFailTips.PARAMS_ERROR,'"playingtime"'),this._parameError(t),!1):(t.errorMsg="".concat(this.SaasSDKTips.applyFailTips.PARAMS_ERROR+"rotate"),void this._parameError(t)):(t.errorMsg="".concat(this.SaasSDKTips.applyFailTips.PARAMS_ERROR+"configinfo"),this._parameError(t),!1):(t.errorMsg="".concat(this.SaasSDKTips.applyFailTips.PARAMS_ERROR+"ctoken"),this._parameError(t),!1):(t.errorMsg="".concat(this.SaasSDKTips.applyFailTips.PARAMS_ERROR+"userinfo"),this._parameError(t),!1):(t.errorMsg="".concat(this.SaasSDKTips.applyFailTips.PARAMS_ERROR+"pkg_name"),this._parameError(t),!1)}},{key:"_formatParames",value:function(e){return hasOwnProperty(e,"userInfo")||hasOwnProperty(e,"userinfo")&&(e.userInfo=e.userinfo,e.userInfo.uToken=e.userinfo.utoken),hasOwnProperty(e,"pkg_name")&&(e.pkgName=e.pkg_name),hasOwnProperty(e,"cToken")||hasOwnProperty(e,"c_token")&&(e.cToken=e.c_token),hasOwnProperty(e,"rotate")&&(e.isPortrait=e.rotate),hasOwnProperty(e,"configinfo")&&(e.configInfo=e.configinfo),e}},{key:"_parameError",value:function(e){this.loggerSend(loggerEventId.apply_game_fun_failed,e),this.stopGame(_objectSpread2(_objectSpread2({},e),{},{reason:applyFailReason.NORMAL,stopByApp:stopByApp.app,interval:this._getCurrentGameDuration(this.gameStartTime),statusCode:this.connectStatus.statusCode}))}},{key:"_showFlashDisableTips",value:function(e){e=e||this.SaasSDKTips.UIView.flashDisable,this.stopGame({tips:e,stopByApp:stopByApp.app,interval:this._getCurrentGameDuration(this.gameStartTime),statusCode:this.connectStatus.statusCode}),this._emit("messageUIModel","showToastFlash",e)}},{key:"_initFrameModel",value:function(){var i=this;this.VideoFrameCallback=new VideoFrameCallback,eventEmitter.on("VideoFrame",function(e,t,n){"callback"===e&&(i.VideoFrameCallbackInfo.isReuqest?i.VideoFrameCallbackInfo.callback(t,n):i.VideoFrameCallback.removeRequestVideoFrameCallback())})}},{key:"_getDid",value:function(){var s=this;this.loggerSend(loggerEventId.get_did_start),this.saasRequest.getDid(localStorage.getItem(md5Encrypt("did"))||"",function(e,t,n,i){var o,r;s.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},s.netRequestData),i)),e?0!=n.code?(i={errorCode:n.errorCode,errorMsg:n.errorMsg},s._httpRequestFailed("104",t,i),s.stopGame(_objectSpread2(_objectSpread2({},i),{},{reason:applyFailReason.INTERNAL_ERROR,stopByApp:stopByApp.server,interval:s._getCurrentGameDuration(s.gameStartTime)}))):(i=(e=n.data).countlyUrl,n=e.serverTimestamp,o=e.countlyAppKey,void 0===(e=e.did)||""===e||null==e?(r={errorCode:applyFailCode.GET_DID_DID_ERROR,errorMsg:s.SaasSDKTips.applyFailTips.GET_DID_DID_ERROR,accessKeyId:s.accessKeyId,channelId:s.channelId},s.loggerSend(loggerEventId.init_sdk_fun_failed,r),s.stopGame(_objectSpread2(_objectSpread2({},r),{},{reason:applyFailReason.INTERNAL_ERROR,stopByApp:stopByApp.server,interval:s._getCurrentGameDuration(s.gameStartTime)}))):i?(s.did=e,i&&s.logger.setLoggerInfo(i,o,n,s.did),s.loggerSend(loggerEventId.get_did_succeed,{retryRequestCount:t.retryRequestCount}),localStorage.setItem(md5Encrypt("did"),"".concat(s.did)),s._getConfig()):(r={errorCode:applyFailCode.GET_DID_COUNTLY_ERROR,errorMsg:s.SaasSDKTips.applyFailTips.GET_DID_COUNTLY_ERROR,accessKeyId:s.accessKeyId,channelId:s.channelId},s.loggerSend(loggerEventId.init_sdk_fun_failed,r),s.stopGame(_objectSpread2(_objectSpread2({},r),{},{reason:applyFailReason.INTERNAL_ERROR,stopByApp:stopByApp.server,interval:s._getCurrentGameDuration(s.gameStartTime)})))):(e={errorCode:applyFailCode.GET_DID_TIMEOUT,errorMsg:s.SaasSDKTips.applyFailTips.NETWORK_REQUEST_TIMEOUT},s._httpRequestFailed("104",t,e),s.loggerSend(loggerEventId.init_sdk_fun_failed,_objectSpread2(_objectSpread2({},e),{},{accessKeyId:s.accessKeyId,channelId:s.channelId})),s.stopGame(_objectSpread2(_objectSpread2({},e),{},{reason:applyFailReason.REQUEST_ERROR,stopByApp:stopByApp.server,interval:s._getCurrentGameDuration(s.gameStartTime)})))})}},{key:"_getConfig",value:function(){var r=this,e=this.applyGameParams,t=e.streamType,s=e.pkgName,a=e.appChannel,c=e.accessKeyID,n=e.viewResolutionWidth,e=e.viewResolutionHeight;this.checkStreamingTypes(t),this.loggerSend(loggerEventId.get_config_start,{pkgName:s,appChannel:a}),this.saasRequest.getConfig(s,0,a,n,e,this.applyGameParams.streamingTypes,this.sdkAbility,function(e,t,n,i){var o;r.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},r.netRequestData),i)),e?0!=n.code?(i={errorCode:n.errorCode,errorMsg:n.errorMsg},r._httpRequestFailed("108",t,i,{pkgName:s,appChannel:a}),r.stopGame(_objectSpread2(_objectSpread2({},i),{},{reason:applyFailReason.INTERNAL_ERROR,stopByApp:stopByApp.server,interval:r._getCurrentGameDuration(r.gameStartTime)}))):(r.loggerSend(loggerEventId.get_config_succeed,{pkgName:s,appChannel:a,retryRequestCount:t.retryRequestCount}),r._applySaasConfig(n.data),r._emit("setSaasConfig",r.saasConfig),r.applyGameParams.pinCode?(r.toApplyControlPower(),r.masterCid=r.applyGameParams.cid):(r.cid&&(r.applyGameParams.cid=r.cid),r.applyGameParams.cid||(i=(e=getCacheGameInfo()).cid,n=e.pkgName,o=e.appChannel,e=e.accessKeyID,i&&s===n&&a===o&&c===e&&(r.applyGameParams.cid=i)),setCacheGameInfo("pkgName",s),setCacheGameInfo("appChannel",a),setCacheGameInfo("accessKeyID",c),r._getStreamInfo())):(n={errorCode:applyFailCode.GET_CONFIG_TIMEOUT,errorMsg:r.SaasSDKTips.applyFailTips.NETWORK_REQUEST_TIMEOUT},r._httpRequestFailed("108",t,n,{pkgName:s,appChannel:a}),r.stopGame(_objectSpread2(_objectSpread2({},n),{},{reason:applyFailReason.REQUEST_ERROR,stopByApp:stopByApp.server,interval:r._getCurrentGameDuration(r.gameStartTime)})))})}},{key:"_getStreamInfo",value:function(){var s=this;this.gRetryTimer&&clearTimeout(this.gRetryTimer),this.applyGameParams.onlyApply&&this.sendLogger(loggerEventId.only_apply,JSON.stringify(this.applyGameParams)),this.loggerSend(loggerEventId.get_stream_info_start,{streamType:this.applyGameParams.streamingTypes.join(),clientRequestUrl:encodeURIComponent(location.href)}),(new Date).getTime(),this.saasRequest.getSteamInfo(this.applyGameParams,function(e,t,n,i){if(s.netRequestData.cid=n.data&&String(n.data.cid)||"",s.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},s.netRequestData),i)),e)if(0!=n.code){var i={errorCode:n.errorCode,errorMsg:n.errorMsg},e=(s._httpRequestFailed("211",t,i),_objectSpread2(_objectSpread2({},i),{},{reason:applyFailReason.INTERNAL_ERROR,tips:s.SaasSDKTips.applyFailTips.INTERNAL_ERROR,stopByApp:stopByApp.server,interval:s._getCurrentGameDuration(s.gameStartTime)}));if(10201===n.code)localStorage.removeItem(md5Encrypt("did")),s._sdkRestartGame("getStreamError");else if(10202===n.code)e.tips=n.errorMsg,e.errorCode=n.errorCode,e.reason=applyFailReason.INSTANCE_LIMIT;else if(20303===n.code&&200211016==n.errorCode)e.tips=s.talkInfo.prompt_game_over,e.reason=applyFailReason.IS_END,e.stateChangeReason=n.data.stateChangeReason||"";else if(200211006==n.errorCode)e.tips=s.talkInfo.toast_open_same_game,e.reason=applyFailReason.INSTANCE_LIMIT;else if(n.errorCode){for(var o=0;o<s.setDataInfo.retryErrorcodeInfo.length;++o){var r=s.setDataInfo.retryErrorcodeInfo[o];if(n.errorCode==r.errorCode&&s.gCurrentRequestCount<r.retryMaxTimes)return s.gCurrentRequestCount++,clearTimeout(s.gRetryTimer),void(s.gRetryTimer=setTimeout(function(){s._getStreamInfo()},1e3*r.retryDelayTime))}s.gCurrentRequestCount=1,e.tips=n.errorMsg,e.errorCode=n.errorCode}s.stopGame(e)}else n.data.distanceLimit&&n.data.distanceLimit.distanceLimitExceeded&&s._emit("sceneChanged","distanceLimit",{minDistance:n.data.distanceLimit.minDistance}),s._checkStreamInfo(n,t,"211");else i={errorCode:applyFailCode.GET_STREAM_INFO_TIMEOUT,errorMsg:s.SaasSDKTips.applyFailTips.NETWORK_REQUEST_TIMEOUT},s._httpRequestFailed("211",t,i),s.stopGame(_objectSpread2(_objectSpread2({},i),{},{reason:applyFailReason.REQUEST_ERROR,stopByApp:stopByApp.server,interval:s._getCurrentGameDuration(s.gameStartTime)}))})}},{key:"_checkStreamInfo",value:function(e,t,n){this.gReconnecting=!1;var i=e.data,o=i.apkType,r=i.cid,s=i.msgServInfo,a=i.secretKey,c=i.sign,l=i.streamType,d=i.webRtcInfo,p=i.gsmAddressInfo,u=i.instructionSet,h=e.data.addressInfo;if(this.apkType=o,h=h||p,d&&!h.webRtcInfo&&(h.webRtcInfo=d),h&&(this.supportLiving=!!h.supportLiving),this.logger.setCid(String(r)),r)if(s&&s.socketUrl)if("PooledWithoutRestart"!==o&&("PooledWithRestart"!==o||"ARM"!==u)||h)if("X86"===u&&"WEBRTC"!==l)i={errorCode:applyFailCode.UNSUPPORTED_DEVICE,errorMsg:this.SaasSDKTips.applyFailTips.unsupportedDevice},this._httpRequestFailed(n,t,i),this.stopGame(_objectSpread2(_objectSpread2({},i),{},{reason:applyFailReason.UNSUPPORTED_DEVICE,tips:this.SaasSDKTips.applyFailTips.unsupportedDevice,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)}));else{switch(this.loggerSend(loggerEventId.get_stream_info_succeed,{streamType:l,apkType:o,gameType:u,retryRequestCount:t.retryRequestCount}),this.cid=String(r),this.sign=c,this.logger.setCid(String(r)),this.saasRequest.setSecretKey(a),setCacheGameInfo("cid",String(r)),this.connectStatus.cid=!0,o){case"PooledWithoutRestart":this._startGame(h);break;case"PooledWithRestart":this.applyGameParams.onlyApply||"ARM"===u&&(h.isNeedWaitOperation5Notify=!0,this._startGame(h));break;case"NotPooled":break;default:throw new Error(this.SaasSDKTips.SaasSDK.systemUnknownError)}this._connectSaasLinkTimedOut(),this._saasSocketRelease(),this.SaasSocketUrl=this.concatSaasSocketUrl(s.socketUrl,this.did,String(r),this.applyGameParams.userInfo.uId,this.accessKeyId,c),this._saasSocketConnect(this.SaasSocketUrl,5)}else p={errorCode:applyFailCode.GET_STREAM_INFO_INSTANCE_ERROR,errorMsg:this.SaasSDKTips.applyFailTips.GET_INSTANCE_ERROR},d=applyFailReason.INTERNAL_ERROR,i=this.SaasSDKTips.applyFailTips.GET_INSTANCE_ERROR,20303==e.code&&(d=applyFailReason.IS_END,i=this.talkInfo.prompt_game_over),this._httpRequestFailed(n,t,p),this.stopGame(_objectSpread2(_objectSpread2({},p),{},{reason:d,tips:i,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime),stateChangeReason:e.data.stateChangeReason||""}));else l={errorCode:applyFailCode.GET_STREAM_INFO_SAAS_WEBSOCKET_ERROR,errorMsg:this.SaasSDKTips.applyFailTips.GET_SAAS_WEBSOCKET_ERROR},this._httpRequestFailed(n,t,l),this.stopGame(_objectSpread2(_objectSpread2({},l),{},{reason:applyFailReason.INTERNAL_ERROR,tips:this.SaasSDKTips.applyFailTips.GET_SAAS_WEBSOCKET_ERROR,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)}));else a={errorCode:applyFailCode.GET_STREAM_INFO_CID_ERROR,errorMsg:this.SaasSDKTips.applyFailTips.GET_CID_ERROR},this._httpRequestFailed(n,t,a),this.stopGame(_objectSpread2(_objectSpread2({},a),{},{reason:applyFailReason.INTERNAL_ERROR,tips:this.SaasSDKTips.applyFailTips.GET_CID_ERROR,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)}))}},{key:"checkStreamingTypes",value:function(e){3==getClientType()?this.isSupportRTC&&(this.applyGameParams.streamingTypes=["WEBRTC","RTMP"],"0"!==this.applyGameParams.streamType)||(this.applyGameParams.streamingTypes=["RTMP"]):"0"!==e&&this.isSupportRTC?this.applyGameParams.streamingTypes="1"===e?["WEBRTC"]:["WEBRTC","H5"]:this.applyGameParams.streamingTypes=["H5"]}},{key:"concatSaasSocketUrl",value:function(e,t,n,i,o,r){e="".concat(e,"/websocket?did=").concat(t,"&cid=").concat(n,"&uid=").concat(i,"&appId=").concat(o,"&sign=").concat(r);return 1==this.setDataInfo.openMultiConnect&&(this.linkSt||sessionStorage.getItem("startGameTS")&&(this.linkSt=sessionStorage.getItem("startGameTS")),e=e+"&ts="+this.linkSt),e}},{key:"_saasSocketConnect",value:function(e,t){var n=this,i={url:"",action:"access",startTime:(new Date).getTime(),responseTime:0,time:0,result:"failed",msg:""};i.url=e,eventEmitter.on("saasSocket",function(e,t){switch(e){case"open":"NotPooled"!==n.apkType||n.isGameStarted||n._getStreamAddressTimedOut(),n.connectStatus.saasSocket=!0,n._connectSaasLinkTimedOutRelease(),i.result="success",i.responseTime=(new Date).getTime(),i.time=i.responseTime-i.startTime,n.loggerSend(loggerEventId.saas_socket_opened);break;case"messages":n.connectStatus.saasSocketPingPong=!0,n._saasSocketMsg(t);break;case"close":n.connectStatus.saasSocket=!1,n.connectStatus.saasSocketPingPong=!1,i.msg=t,n.loggerSend(loggerEventId.saas_socket_closed,{errorCode:t.code,errorMsg:""});break;case"Countly":n.loggerSend(t.eventId,t.eventDate);break;case"PingPongTimeOut":n._sdkRestartGame("saasLinkPingPongTimeOut");break;case"failed":n.connectStatus.saasSocket=!1,n.connectStatus.saasSocketPingPong=!1,i.msg=t,n.loggerSend(loggerEventId.saas_socket_failed,{retryCount:t}),n.pauseGame("saas_socket_failed")}n.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},n.netRequestData),i))}),this.loggerSend(loggerEventId.saas_socket_connect,{saasUrl:encodeURIComponent(e)}),this.saasSocket=new SaasSocket(e,t,this.setDataInfo),this.saasSocket.connect()}},{key:"_saasSocketRelease",value:function(){this.saasSocket&&(this.saasSocket.disconnect(),this.saasSocket=null)}},{key:"_saasSocketMsg",value:function(e){var t={ack:void 0,type:void 0,payload:void 0};try{t=JSON.parse(e)}catch(e){this.loggerSend(loggerEventId.saas_socket_message_parse_error,{errorCode:"",errorMsg:e})}if("LINK"==t.source&&1==t.opType)this.loggerSend(loggerEventId.saas_socket_limit_stop),this.pauseGame("saas_socket_limit",this.SaasSDKTips.SaasSDK.linkLimit);else if(0===t.ack){if(1===t.type){e={topPackage:void 0,operation:void 0};try{e=JSON.parse(t.payload)}catch(e){this.loggerSend(loggerEventId.saas_socket_message_parse_error,{errorCode:"",errorMsg:e})}if(e&&"com.tencent.mobileqq"===e.topPackage)return void this._emit("sceneChanged","qqup","");this.loggerSend(loggerEventId.saas_socket_message,{type:t.type,operation:e.operation||"",payload:base64(t.payload)}),this._emit("messageHandler",t)}if(2===t.type){var n,i,o,r,s,a={operation:void 0,errorMsg:"",errorCode:"",data:void 0,code:void 0};try{a=JSON.parse(t.payload)}catch(e){this.loggerSend(loggerEventId.saas_socket_message_parse_error,{errorCode:"",errorMsg:e})}switch(this.loggerSend(loggerEventId.saas_socket_message,{type:t.type,operation:a.operation||"",payload:base64(t.payload)}),a.operation){case 1:this._getStreamAddressTimedOutRelease();var c=a.data.timeStr,l=a.data.index,d=a.data.waitTotalNum,p="",u=[l],p=d?c?this.talkInfo.prompt_wait_man_time_total_num:this.talkInfo.prompt_wait_message_total_num:c?this.talkInfo.prompt_wait_man_time:this.talkInfo.prompt_wait_message;d&&u.push(d),c&&u.push(c),p=mixTips(p,u),this._emit("sceneChanged","wait",{reason:"showQueueInfo",waitingPeople:l,waitingTime:c,waitingTotalNum:d,message:p,time:a.data.time||""}),this._emit("messageUIModel","showToastMessage",p);break;case 2:this.stopGame({reason:applyFailReason.KICK_OFF,errorCode:a.errorCode,errorMsg:a.errorMsg,tips:this.talkInfo.toast_no_input,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)});break;case 3:this.stopGame({reason:applyFailReason.IS_ERROR,errorCode:a.errorCode,errorMsg:a.errorMsg,tips:a.errorMsg||this.talkInfo.prompt_hmcp_error,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)});break;case 4:a.data&&!0===a.data.finishByServer?this.stopGame({reason:applyFailReason.IS_END,errorCode:a.errorCode,errorMsg:a.errorMsg,tips:this.talkInfo.prompt_game_over,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)}):(this._emit("messageUIModel","topToast",a.data&&a.data.finishTip),this._emit("sceneChanged","timeout",{interval:((new Date).getTime()-this.gameStartTime)/1e3||0,message:a.data&&a.data.finishTip}));break;case 5:u=a.data.reconnectStream;if(this.sendLogger(loggerEventId.get_operation_5,"reconnectStream:".concat(u)),this.isChangeResolution)return this.isChangeResolution=!1,void this._startGame(a.data);if("PooledWithoutRestart"===this.apkType)return;u&&(this.isGameStarted=void 0,this.pauseGame("reconnectStream")),!this.isNeedWaitOperation5Notify||u?this._startGame(a.data):(this.isNeedWaitOperation5Notify=!1,3===this.gGameState&&this._manageWebrtcVibf("op5"));break;case 6:this._getStreamAddressTimedOutRelease();var l=a.data.index,c=a.data.waitTotalNum,d=this.talkInfo.toast_wait_choose,p=[l];c&&this.talkInfo.toast_wait_choose_total_num&&(p.push(c),d=this.talkInfo.toast_wait_choose_total_num),d=mixTips(d,p),this._emit("sceneChanged","wait",{reason:"whetherToQueue",message:d,waitingPeople:l,waitingTotalNum:c}),this._emit("messageUIModel","showConfigrm",d);break;case 7:this.stopGame({reason:applyFailReason.QUEUE_LIMIT,errorCode:a.errorCode,errorMsg:a.errorMsg,tips:this.talkInfo.toast_wait_tooMany,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)});break;case 8:this.stopGame({reason:applyFailReason.IS_ERROR,errorCode:a.errorCode,errorMsg:a.errorMsg,tips:this.talkInfo.prompt_crash,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)});break;case 9:this._emit("sceneChanged","wait",{reason:"applyGame",message:this.talkInfo.toast_instance_apply});break;case 10:case 11:case 13:break;case 14:this._getStreamAddressTimedOutRelease();u=mixTips(this.talkInfo.tips_saas_ready_to_stop,[a.data.timeStr]);this._emit("sceneChanged","maintain",{progress:"soon",time:a.data.timeStr,message:mixErrorCodeHtml(mixTips(this.talkInfo.tips_saas_ready_to_stop,[a.data.timeStr]),a.errorMsg,a.errorCode,this.SaasSDKTips.utils.systemUnknownError)}),this._emit("messageUIModel","topToast",u);break;case 15:this._getStreamAddressTimedOutRelease(),this._emit("sceneChanged","maintain",{progress:"start",time:a.data.endTimeText,message:mixErrorCodeHtml(mixTips(this.talkInfo.tips_saas_already_stopped,[a.data.endTimeText]),a.errorMsg,a.errorCode,this.SaasSDKTips.utils.systemUnknownError)});break;case 16:this.stopGame({reason:applyFailReason.MAINTAIN_SERVER,errorCode:a.errorCode,errorMsg:a.errorMsg,tips:this.talkInfo.tips_saas_to_stop,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)});break;case 18:this._emit("sceneChanged","appCrash");break;case 19:this._emit("sceneChanged","appNotForeground");break;case 21:this.stopGame({reason:applyFailReason.INSTANCE_LIMIT,errorCode:a.errorCode,errorMsg:a.errorMsg,tips:this.talkInfo.toast_open_same_game,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)});break;case 22:this.stopGame({reason:applyFailReason.TOKEN_EXPIRE,errorCode:a.errorCode,errorMsg:a.errorMsg,tips:this.talkInfo.tips_forced_offline_action,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)});break;case 35:this._emit("sceneChanged","remainingTime",{time:a.data.ahead,message:a.data.formatter,type:a.data.type,countDown:!!a.data.countDown});p=Math.ceil(a.data.ahead),l="";l=!0===a.data.countDown?(c=this.talkInfo.toast_countdown,mixTips(c=1==a.data.type?a.data.formatter:c,["<strong>"+p+"</strong>"])):mixTips(a.data.formatter,[formatMS(1e3*a.data.ahead,this.SaasSDKTips.utils)]),this._emit("messageUIModel","topToast",l);break;case 36:a.data.playingTime&&(this._emit("sceneChanged","totalTime",{time:a.data.playingTime,message:a.data.tip}),this._emit("messageUIModel","topToast",a.data.tip));break;case 37:a.data.playingTime&&(d=mixTips(this.talkInfo.toast_game_over,[formatMS(1e3*a.data.playingTime,this.SaasSDKTips.utils)]),this._emit("sceneChanged","totalTime",{time:a.data.playingTime,message:d}),this._emit("messageUIModel","topToast",d));break;case 39:this.stopGame({reason:applyFailReason.TOKEN_FAILED,errorCode:a.errorCode,errorMsg:a.errorMsg,tips:a.errorMsg,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)});break;case 40:u=mixTips(this.talkInfo.toast_reminder_no_input,[a.data.ahead]);this._emit("sceneChanged","noInputTimeRemind",{message:u,noInputRemainingTime:a.data.ahead});break;case 41:this._startHangUpReult(a.data);break;case 42:this._hangUpEndReult(a);break;case 43:this._stopHangUpReult(a);break;case 51:0==a.code?(n={result:1,msg:""},this.sendLogger(loggerEventId.start_liveing_success)):(n={result:0,msg:a.errorMsg},this.sendLogger(loggerEventId.start_liveing_error,a.errorCode)),this._emit("sceneChanged","startLiveState",n);break;case 52:0==a.code?(i={result:1,cid:String(a.data.masterId),pinCode:String(a.data.pin)},this.sendLogger(loggerEventId.get_pin_code_success)):(i={result:0,msg:a.errorMsg},this.sendLogger(loggerEventId.get_pin_code_error)),this._emit("sceneChanged","applyPinCode",i);break;case 53:0==a.code?(o={result:1,msg:""},this.sendLogger(loggerEventId.end_liveing_success)):(o={result:0,msg:a.errorMsg},this.sendLogger(loggerEventId.end_liveing_error)),this._emit("sceneChanged","endLiveState",o);break;case 54:0==a.code&&(r={result:1,cid:String(a.data.followerCid)},this.sendLogger(loggerEventId.lost_control),this.sendLogger(loggerEventId.get_control_success),this.stopGame({errorCode:a.errorCode,errorMsg:a.errorMsg,tips:this.SaasSDKTips.SaasSDK.controlLose,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)})),this._emit("sceneChanged","seizingControl",r);break;case 55:0==a.code?(this._startGame(a.data),s={result:1,msg:""},this.sendLogger(loggerEventId.apply_control_power_success)):(s={result:0,msg:this.SaasSDKTips.SaasSDK.controlFail},this.sendLogger(loggerEventId.apply_control_power_error),this.stopGame({errorCode:a.errorCode,errorMsg:a.errorMsg,tips:this.SaasSDKTips.SaasSDK.controlFail,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)})),this._emit("sceneChanged","getControl",s);break;case 58:this.stopGame({reason:applyFailReason.IS_END,errorCode:a.errorCode,errorMsg:a.errorMsg,tips:this.talkInfo.prompt_game_over,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime),stateChangeReason:a.data.stateChangeReason||""});break;case 62:this.sendLogger(loggerEventId.get_operation_62),this.applyGameParams.onlyApply||(this.isGameStarted=void 0,this.pauseGame("reconnectStream"),a.data.isNeedWaitOperation5Notify=!0,this._startGame(a.data))}}}}},{key:"_connectSaasLinkTimedOut",value:function(){var e=this;this.setDataInfo.connectSaasLinkTimeoutList.length?(clearTimeout(this._connectSaasLinkTimedOutTimerId),this.saasLinkReconnectIndex>=this.setDataInfo.connectSaasLinkTimeoutList.length?(this.saasLinkTimeOutCount++,this.saasLinkTimeOutCount<5?this._sdkRestartGame("saasLinkTimeOut"):this.stopGame({reason:applyFailReason.INTERNAL_ERROR,errorCode:applyFailCode.SAAS_WEBSOCKET_CONNECT,tips:this.SaasSDKTips.applyFailTips.SAAS_WEBSOCKET_ERROR,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)})):this._connectSaasLinkTimedOutTimerId=setTimeout(function(){e.connectStatus.saasSocket||(e.saasLinkReconnectIndex++,e._saasSocketRelease(),e._saasSocketConnect(e.SaasSocketUrl,5),e._connectSaasLinkTimedOut())},1e3*this.setDataInfo.connectSaasLinkTimeoutList[this.saasLinkReconnectIndex])):this._getStreamAddressTimedOut()}},{key:"_connectSaasLinkTimedOutRelease",value:function(){this.saasLinkReconnectIndex=0,this._connectSaasLinkTimedOutTimerId&&clearTimeout(this._connectSaasLinkTimedOutTimerId)}},{key:"_getStreamAddressTimedOut",value:function(){var e=this,t=this.setDataInfo.streamer_url_timeout||40;!0===this.applyGameParams.isHotUpdate&&(t=900),clearTimeout(this._getStreamAddressTimedOutTimerId),this._getStreamAddressTimedOutTimerId=setTimeout(function(){e._sdkRestartGame("getStreamTimeOut"),clearTimeout(e._getStreamAddressTimedOutTimerId)},1e3*t)}},{key:"_getStreamAddressTimedOutRelease",value:function(){this._getStreamAddressTimedOutTimerId&&clearTimeout(this._getStreamAddressTimedOutTimerId)}},{key:"_startGame",value:function(t){var n=this;if(!this.isGameStarted)if(this.applyGameParams.onlyApply)this.sendLogger(loggerEventId.play_ready),this._emit("sceneChanged","playReady",{cid:this.cid}),this.startGameParams=t;else if(this.startGameParams=null,this.pausePlayerState)this._emit("sceneChanged","pauseGame");else{this.isGameStarted=!0,this.isNeedWaitOperation5Notify=t.isNeedWaitOperation5Notify,this._getStreamAddressTimedOutRelease(),this._connectSaasLinkTimedOutRelease(),this.connectStatus.streamAddress=!0;var e=t||{},i=e.webRtcInfo,o=e.videoUrl,r=e.inputUrl,s=e.audioUrl,a=e.screenUrl,c=e.screenRecordUrl,l=e.resolutionInfo,d=l.bitRate,p=l.frameRate,u=l.id,h=l.resolution,l=e.supportLiving,f=e.sdkDisplayInfo,m=e.idcName,y=e.idcId,g=e.sToken,_=e.gsmUrl,e=(t||{}).streamType;if(c&&(this.bigFileDownloadUrl=c.replace(/([\w\W]+)\/$/,"$1")),_&&(this.currentStreamAddress=_,e="X86"),("WEBRTC"!=e||r&&g)&&("RTMP"!=e||o&&s&&r&&g)&&(t.gsmUrl||"X86"!=e)){if("X86"===e)this.loggerSend(loggerEventId.video_url_got,base64(JSON.stringify({streamInfo:{gsmUrl:_},streamType:e})));else if("WEBRTC"===e){var c=i||{},g=c.roomId,v=c.signalUrl,c=c.coTurnUrl;if(!g||!v||!c)return C={errorCode:applyFailCode.SAAS_WEBSOCKET_RTCDATE_ERROR,errorMsg:this.SaasSDKTips.applyFailTips.GET_INSTANCE_ERROR},void this.stopGame(_objectSpread2(_objectSpread2({},C),{},{reason:applyFailReason.TOKEN_EXPIRE,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime),statusCode:this.connectStatus.statusCode}));this.currentStreamAddress=i.coTurnUrl,this.loggerSend(loggerEventId.video_url_got,base64(JSON.stringify({streamInfo:{roomId:g,signalUrl:v,coTurnUrl:c},streamType:e})))}else"RTMP"!==e&&"H5"!==e||(this.currentStreamAddress=o,this.loggerSend(loggerEventId.video_url_got,base64(JSON.stringify({streamInfo:{videoUrl:o,audioUrl:s,inputUrl:r},streamType:e}))));if(this.supportLiving=1==l,this._emit("sceneChanged","idcInfo",f||{idcId:y,idcName:m}),this.bigFileInfo.isStartHangUp)this._getHangUpTime();else{var S,b,k,C=_slicedToArray(h.split("x"),2),i=C[0],g=C[1];switch(this.streamStyle={streamStyleW:parseFloat(i),streamStyleH:parseFloat(g)},this._emit("sceneChanged","gameScreenInfo",{width:this.streamStyle.streamStyleW,height:this.streamStyle.streamStyleH}),e){case"WEBRTC":this.player||(this.saasConfig.resolutionInfo=this.saasConfig.webrtcResolutionInfo,this.streamType="WEBRTC",this.player=new WebRTCPlayer,this._playListenWEBRTC(),$(this.applyGameWrap).addClass("isPlayingWrapRTC"));break;case"X86":try{this.player?this.player.calcRemoteAndLocalScreenRatio(h):(this._playListenX86(),this.player=new this.X86Player(eventEmitter,this.SaasSDKTips.X86Player),b=(S=this.player.create(this.oVideoContainer)).canvasId,k=S.videoId,this.canvasId=b,this.videoId=k,this.player.connect({gsmUri:_,cid:parseInt(this.cid),resolution:h,escLongPress:!!this.applyGameParams.EscLongPress,isIgonreInterceptFNKey:this.applyGameParams.isIgonreInterceptFNKey,customRetryConfig:this.setDataInfo.customRetryConfig,sendVideoResolution:this.setDataInfo.rtc_upload_video_resolution,sendVideoFps:this.setDataInfo.rtc_upload_video_fps,isUseTransparentCursor:this.setDataInfo.is_use_transparent_cursor,keyMapContent:this.setDataInfo.x86_key_map_content,retryCount:this.setDataInfo.customRetryConfig,mouseDownMoveDistance:this.setDataInfo.mouse_down_move_distance,mouseDownDelayTime:this.setDataInfo.mouse_down_delay_time,usePointerMove:!!this.applyGameParams.usePointerMove||"true"===this.setDataInfo.use_pointer_move,mouseSlideModeDownDuration:this.setDataInfo.mouse_slide_mode_down_duration,mouseSlideModeDownMoveDistance:this.setDataInfo.mouse_slide_mode_down_move_distance}),this.saasConfig.resolutionInfo=this.saasConfig.webrtcResolutionInfo,this.streamType="X86"),this._emit("sceneChanged","createdPlayer",{playerNode:document.getElementById(this.canvasId)&&document.getElementById(this.canvasId).parentNode,streamStyle:this.streamStyle,gameType:"X86"})}catch(e){return this.loggerSend(loggerEventId.webrtc_connect_failed,e.message),void this.stopGame({reason:applyFailReason.LOAD_GAME_FAILED,errorCode:applyFailCode.x86_rtc_player_error,errorMsg:this.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,tips:this.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)})}break;case"RTMP":if(!this.flashSurpported)return void this._showFlashDisableTips(this.talkInfo.toast_current_flash_version_low);$(this.applyGameWrap).addClass("isPlayingWrap"),this.streamType="RTMP",this.rtmpIndex++,this.player=window.playerRTMP(eventEmitter,this.rtmpIndex),this._playerListenRTMP();break;case"H5":this.streamType="H5",this.player=window.playerH264(eventEmitter),this._playerListenH264();break;default:throw new Error(this.SaasSDKTips.SaasSDK.systemUnknownError)}if(this.gameStartTime=(new Date).getTime(),this._emit("startGameing",this.saasConfig,"reset",this.streamType),this.loggerSend(loggerEventId.start_revolution,{resolutionId:u,resolution:h,peakBitrate:d,frameRate:p}),this._sceneResolution(t),this.UseResolutionInfo.changing)this.UseResolutionInfo.changing=!1;else if(this.UseResolutionInfo.changing=!1,"X86"!=this.streamType){v=this.player.create(this.oVideoContainer,i,g),c=v.canvasId,o=v.videoId,s=v.coverId;this.canvasId=c,this.videoId=o,this.coverId=s,this._emit("sceneChanged","createdPlayer",{playerNode:document.getElementById(this.canvasId)&&document.getElementById(this.canvasId).parentNode,streamStyle:this.streamStyle,gameType:"ARM"});try{var w=this.cid;this.masterCid&&(w=this.masterCid),this.player.connect(t,this.setDataInfo,w)}catch(e){this.loggerSend(loggerEventId.player_connect_error,JSON.stringify(e))}this._inputSocketRelease(),this._inputSocketConnect(r),this._screenSocketRelease(),this._screenSocketConnect(a),isIE()||(this._upDataSocketConnect(a),this._downloadSocketConnect(a)),this.sendPositionPoint("");var T,l={rtc_enable_frame_interpolation:this.setDataInfo.rtc_enable_frame_interpolation,rtc_first_frame_interpolation_interval:this.setDataInfo.rtc_first_frame_interpolation_interval,rtc_following_frame_interpolation_interval:this.setDataInfo.rtc_following_frame_interpolation_interval,rtc_frame_interpolation_top_limit:this.setDataInfo.rtc_frame_interpolation_top_limit},f=(videFrameJankStatisInit_1(l),!0);this.setDataInfo.h5_enable_videoframe_callback&&(f=0<this.setDataInfo.h5_enable_videoframe_callback),this.VideoFrameCallback.enableRequestVideoFrameCallback(f),"WEBRTC"==t.streamType&&(clearInterval(this.playerRetryTimer),T=(new Date).getTime(),this.playerMaxRetryCount=0,this.playerRetryTimer=setInterval(function(){var e=n.setDataInfo.webrtc_frame_wait_time||1e4;5<=n.playerMaxRetryCount?(clearInterval(n.playerRetryTimer),n.stopGame({reason:applyFailReason.LOAD_GAME_FAILED,errorCode:applyFailCode.WEBRTC_CONNECT_TIMEOUT,errorMsg:n.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,tips:n.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,stopByApp:stopByApp.server,interval:n._getCurrentGameDuration(n.gameStartTime)})):(new Date).getTime()-T>=e&&(T=(new Date).getTime(),n.player.disconnect(),n.player.connect(t,n.setDataInfo,n.cid),n.playerMaxRetryCount++)},1e3))}}}else y={errorCode:applyFailCode.SAAS_WEBSOCKET_DATA,errorMsg:this.SaasSDKTips.applyFailTips.GET_INSTANCE_ERROR},this.stopGame(_objectSpread2(_objectSpread2({},y),{},{reason:applyFailReason.TOKEN_EXPIRE,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime),statusCode:this.connectStatus.statusCode}))}}},{key:"_sceneResolution",value:function(n){var i=this,o={list:[],selected:null},r=[];"X86"==this.streamType&&(n.resolution=n.resolutionInfo.id),this.saasConfig.resolutionInfo&&this.saasConfig.resolutionInfo.map(function(e,t){n.resolution!=e.id&&("1"!=e.defaultChoice||paramInObj(i.saasConfig.resolutionInfo,"id",n.resolution))||(o.selected=+e.id),r.push(+e.id),o.list.push({id:+e.id,name:e.name,bitRate:e.peakBitRate})}),this.resolutionList=r,this._emit("sceneChanged","resolutionList",o),this._emit("messageUIModel","startGame",o),this.UseResolutionInfo.UseResolutionId=o.selected}},{key:"_playerRelease",value:function(){clearInterval(this.collectDelayDataTimer),clearInterval(this.gX86PlayerDataChannelPingPongTimerId),this.removeRequestVideoFrame(!0),this.player&&(clearInterval(this.playerRetryTimer),this.player.disconnect(),this.player=null),$(".HMplayerBox").size()&&!isIE10()&&$(".HMplayerBox").remove()}},{key:"sendPositionPoint",value:function(e){}},{key:"_playerListenRTMP",value:function(){var i=this;eventEmitter.on("RTMP",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";switch(e){case"video_error":t&&t.code?i._sdkRestartGame("video_connect_failed"):(i.loggerSend(loggerEventId.video_stream_connect_failed,t),i.stopGame({reason:applyFailReason.INTERNAL_ERROR,errorCode:applyFailCode.VIDEO_STREAME_CONNECT_FAILED,errorMsg:i.SaasSDKTips.applyFailTips.GAME_START_ERROR,stopByApp:stopByApp.server,interval:i._getCurrentGameDuration(i.gameStartTime)}));break;case"video_connect":case"video_ready":break;case"video_connect_failed":i._sdkRestartGame("video_connect_failed");break;case"video_connected":i.loggerSend(loggerEventId.video_stream_connected,t);break;case"flash_disabled":i._showFlashDisableTips();break;case"audio_error":case"audio_connected":break;case"play":i._manageWebrtcVibf(t);break;case"autoSwitchBitRate":i._emit("messageUIModel","autoSwitchBitRate",t),i.UseResolutionInfo.isAutoResolutionChanged=!0;break;case"sendFrameDelayCountly":var n="",n=(t.detailInfo?[t.delay_ms,t.max_delay_ms,t.max_delay_ts,t.min_delay_ms,t.min_delay_ts,t.detailInfo]:[t.delay_ms,t.max_delay_ms,t.max_delay_ts,t.min_delay_ms,t.min_delay_ts]).join(",");i.loggerSend(loggerEventId.frame_delay_info,n)}})}},{key:"_playerListenH264",value:function(){var n=this,i={url:"",action:"video",startTime:(new Date).getTime(),responseTime:0,time:0,result:"failed",msg:""};eventEmitter.on("H264",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";switch(e){case"video_connect":i.startTime=(new Date).getTime(),i.url=t,n.loggerSend(loggerEventId.video_stream_connect,encodeURIComponent(t)+",viewResolution:"+n.streamStyle.streamStyleH+"x"+n.streamStyle.streamStyleW);break;case"video_connected":n.connectStatus.video=!0,i.result="success",i.responseTime=(new Date).getTime(),i.time=i.responseTime-i.startTime,n.loggerSend(loggerEventId.video_stream_connected,t);break;case"video_ready":n._manageWebrtcVibf(t);break;case"video_closed":break;case"video_error":i.msg=t,n.loggerSend(loggerEventId.video_stream_connect_failed,t),3!==n.gGameState&&4!==n.gGameState&&5!==n.gGameState&&6!==n.gGameState&&7!==n.gGameState&&n.stopGame({reason:applyFailReason.INTERNAL_ERROR,errorCode:applyFailCode.VIDEO_STREAME_CONNECT_FAILED,errorMsg:n.SaasSDKTips.applyFailTips.INTERNAL_ERROR,stopByApp:stopByApp.server,interval:n._getCurrentGameDuration(n.gameStartTime)});break;case"video_transferable_object_not_support":n.loggerSend(loggerEventId.device_un_support,t);break;case"video_data_success":n.loggerSend(loggerEventId.video_get_data_success,t);break;case"video_decode_failed":n.loggerSend(loggerEventId.video_decode_failed,t),n.stopGame({reason:applyFailReason.INTERNAL_ERROR,errorCode:"",errorMsg:n.SaasSDKTips.applyFailTips.INTERNAL_ERROR,stopByApp:stopByApp.server,interval:n._getCurrentGameDuration(n.gameStartTime)});break;case"audio_connect":n.loggerSend(loggerEventId.audio_stream_connect,t);break;case"audio_connected":n.connectStatus.audio=!0,n.loggerSend(loggerEventId.audio_stream_connected,t);break;case"audio_ready":break;case"audio_error":n.loggerSend(loggerEventId.audio_stream_connect_failed,t)}n.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},n.netRequestData),i))})}},{key:"_playListenX86",value:function(){var r=this;eventEmitter.on("x86player",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";switch(e){case"icecandidate":r.loggerSend(loggerEventId.webrtc_x86_localIcecandidate,t.candidate);break;case"track":r.loggerSend(loggerEventId.webrtc_x86_track);break;case"negotiationneeded":break;case"iceConnectionState":r.loggerSend(loggerEventId.webrtc_x86_iceConnectionState,t),"connected"===t&&r.player.getWebrtcStats(function(e){r.loggerSend(loggerEventId.webrtc_x86_currentUseRemoteIcecandidate,JSON.stringify(e.remoteCandidate))}),"failed"===t&&r._sdkRestartGame("iceConnectionState");break;case"icegatheringstatechange":r.loggerSend(loggerEventId.webrtc_x86_icegatheringstatechange,t);break;case"signalingstatechange":r.loggerSend(loggerEventId.webrtc_x86_signalingstatechange,t);break;case"connectionstatechange":r.loggerSend(loggerEventId.webrtc_x86_connectionstatechange,t),"failed"===t&&r._sdkRestartGame("connectionstatechange",loggerEventId.webrtc_connect_failed,applyFailCode.x86_rtc_connection_state_failed);break;case"createOfferError":r.loggerSend(loggerEventId.webrtc_x86_createOfferError,t),r.stopGame({reason:applyFailReason.LOAD_GAME_FAILED,errorCode:applyFailCode.x86_rtc_create_offer_error,errorMsg:r.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,tips:r.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,stopByApp:stopByApp.server,interval:r._getCurrentGameDuration(r.gameStartTime)});break;case"createAnswerError":r.loggerSend(loggerEventId.webrtc_create_answer_error,t),r.stopGame({reason:applyFailReason.LOAD_GAME_FAILED,errorCode:applyFailCode.x86_rtc_create_answer_error,errorMsg:r.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,tips:r.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,stopByApp:stopByApp.server,interval:r._getCurrentGameDuration(r.gameStartTime)});break;case"getRemoteSdpBegin":r.loggerSend(loggerEventId.webrtc_x86_getRemoteSdpBegin,t);break;case"getRemoteSdpSuccess":r.loggerSend(loggerEventId.webrtc_x86_getRemoteSdpSuccess,t),r.loggerSend(loggerEventId.webrtc_signal_server_success),r.loggerSend(loggerEventId.webrtc_send_join),r.loggerSend(loggerEventId.webrtc_receive_offer);break;case"getRemoteSdpError":var n=applyFailCode.x86_rtc_get_remote_sdp_error;t&&t.response&&t.response.ret&&t.response.ret.result&&(n=t.response.ret.result),r.loggerSend(loggerEventId.webrtc_signal_server_disconnect),r.loggerSend(loggerEventId.webrtc_x86_getRemoteSdpError,JSON.stringify(t)),r._sdkRestartGame("getRemoteSdpError",loggerEventId.webrtc_x86_getRemoteSdpError,n);break;case"setRemoteDescriptionError":r.loggerSend(loggerEventId.webrtc_x86_setRemoteDescriptionError,t),r.stopGame({reason:applyFailReason.LOAD_GAME_FAILED,errorCode:applyFailCode.x86_rtc_set_remote_desc_error,errorMsg:r.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,tips:r.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,stopByApp:stopByApp.server,interval:r._getCurrentGameDuration(r.gameStartTime)});break;case"dataChannelError":r.loggerSend(loggerEventId.webrtc_x86_dataChannel,"error: "+JSON.stringify(t)),r._sdkRestartGame("dataChannelError",loggerEventId.webrtc_connect_failed,applyFailCode.x86_rtc_data_channel_error);break;case"sendLocalSdpBegin":r.loggerSend(loggerEventId.webrtc_x86_sendLocalSdpBegin,t);break;case"sendLocalSdpSuccess":r.loggerSend(loggerEventId.webrtc_x86_sendLocalSdpSuccess,t),r.loggerSend(loggerEventId.webrtc_send_answer),r.loggerSend(loggerEventId.webrtc_receive_candidate);break;case"sendLocalSdpError":var n=applyFailCode.streaming_sdk_candidate_error;t&&t.response&&t.response.ret&&t.response.ret.result&&(n=t.response.ret.result),r.loggerSend(loggerEventId.webrtc_signal_server_disconnect),r._sdkRestartGame("sendLocalSdpError",loggerEventId.webrtc_x86_sendLocalSdpError,n);break;case"dataChannelOpen":r._manageWebrtcVibf(t),r._delay_losetTimer(),r.loggerSend(loggerEventId.webrtc_x86_dataChannel,"open"),r.gX86PlayerDataChannelPingPongTimerId=setInterval(function(){r.player.sendData("ping:"+Date.now())},r.setDataInfo.ping_interval_time||6e4),r.loggerSend(loggerEventId.webrtc_connect_success),r.setDataInfo.set_mouse_move_ratio&&r.setMouseMoveRatio(r.setDataInfo.set_mouse_move_ratio),r.player&&r.player.setVirtualConfig&&(r.player.setVirtualConfig(r.setDataInfo.x86_key_map_content),r.player.showVirtualGamepad());break;case"dataChannelMsg":if((t.notify||t.IMEStatus||t.stateType||t.sdkData||t.resetNoInputTimer)&&r.loggerSend(loggerEventId.webrtc_x86_dataChannel,"msg:".concat(base64(JSON.stringify(t)))),t.pingPong)-1<(n=t.pingPong).indexOf("pong:")&&(n=n.split(":")[1],r.inputPingPongDelay=Date.now()-parseFloat(n),r.loggerSend(loggerEventId.input_socket_ping_pong_delay_time,r.inputPingPongDelay),r.inputPingPongDelay>=r.setDataInfo.ping_delay_time)&&r.loggerSend(loggerEventId.input_socket_ping_pong_delay_max,r.inputPingPongDelay);else if(t.cursorInfo)r._emit("sceneChanged","cursorInfo",t.cursorInfo);else if(t.IMEStatus)"STATUS_SHOW"===(n=t.IMEStatus).statusType?(r.loggerSend(loggerEventId.input_socket_start_im),r._emit("sceneChanged","inputFocusNotify","startIM")):"STATUS_HIDE"===n.statusType&&(r.loggerSend(loggerEventId.input_socket_stop_im),r._emit("sceneChanged","inputFocusNotify","stopIM"));else if(t.notify){var i=t.notify;switch(i.type){case"GAME_QUIT":r.loggerSend(loggerEventId.webrtc_x86_dataChannelNotify,i.type),r.stopGame({reason:applyFailReason.IS_END,errorCode:"",errorMsg:"",tips:r.talkInfo.prompt_game_over,stopByApp:stopByApp.server,interval:r._getCurrentGameDuration(r.gameStartTime)});break;case"NO_INPUT_TIMEOUT":r.loggerSend(loggerEventId.webrtc_x86_dataChannelNotify,i.type),r.stopGame({reason:applyFailReason.KICK_OFF,errorCode:"",errorMsg:"",tips:r.talkInfo.toast_no_input,stopByApp:stopByApp.server,interval:r._getCurrentGameDuration(r.gameStartTime)});break;case"GET_CONTROL":r._openCaptureMediaDevice(),r._emit("sceneChanged","gameControl",{state:"got",cid:i.cid});break;case"LOST_CONTROL":r._releaseCaptureMediaDevice(),r._emit("sceneChanged","gameControl",{state:"loses",cid:i.cid})}}else if(t.stateType){var o=t.stateType;if(!o)return;switch(o.type){case 1:break;case 3:case 5:r.loggerSend(loggerEventId.webrtc_x86_dataChannelNotify,o.type),r.stopGame({reason:applyFailReason.IS_END,errorCode:"",errorMsg:"",tips:r.talkInfo.prompt_game_over,stopByApp:stopByApp.server,interval:r._getCurrentGameDuration(r.gameStartTime)})}}else t.mediaDevicesRequest?(r.loggerSend(loggerEventId.x86_media_devices_request,JSON.stringify(t.mediaDevicesRequest)),r._emit("sceneChanged","mediaDeviceRequestNotify",{action:t.mediaDevicesRequest.action,data:t.mediaDevicesRequest.data})):(t.sdkData&&r._emit("sceneChanged","gameExtraData",t),t.clipBoard&&r._emit("sceneChanged","clipBoard",{data:base64ToStr(t.clipBoard.data)}));break;case"mediaDevicesResponse":n=JSON.parse(t.sdkAction);r.loggerSend(loggerEventId.x86_media_devices_response,t.sdkAction),"Camera"===n.action&&(r.isX86CameraStatus=1===n.data.op);break;case"cameraInfo":r.loggerSend(loggerEventId.x86_media_devices_camera_capabilities,t)}})}},{key:"_playListenWEBRTC",value:function(){var i=this;eventEmitter.on("webrtc",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n={url:"",action:"webrtc",startTime:(new Date).getTime(),responseTime:0,time:0,result:"failed",msg:""};switch(e){case"begin_connect":n.url=t,n.startTime=(new Date).getTime(),i.loggerSend(loggerEventId.webrtc_begin_connect,encodeURIComponent(t)+",viewResolution:"+i.streamStyle.streamStyleH+"x"+i.streamStyle.streamStyleW);break;case"send_join":i.loggerSend(loggerEventId.webrtc_send_join,t);break;case"receive_offer":i.loggerSend(loggerEventId.webrtc_receive_offer,t);break;case"receive_candidate":i.loggerSend(loggerEventId.webrtc_receive_candidate,t);break;case"setRemoteDescription_success":i.loggerSend(loggerEventId.webrtc_setRemoteDes_success,t);break;case"setRemoteDescription_failed":i.loggerSend(loggerEventId.webrtc_setRemoteDes_error,n.msg=t);break;case"setLocalDescription_success":i.loggerSend(loggerEventId.webrtc_setLocalDes_success,t);break;case"send_answer":i.loggerSend(loggerEventId.webrtc_send_answer,t);break;case"setLocalDescription_failed":i.loggerSend(loggerEventId.webrtc_setLocalDes_error,n.msg=t);break;case"createAnswer_failed":i.loggerSend(loggerEventId.webrtc_create_answer_error,n.msg=t);break;case"addIceCandidate_success":i.loggerSend(loggerEventId.webrtc_addIceCandidate_success);break;case"addIceCandidate_failed":i.loggerSend(loggerEventId.webrtc_addIceCandidate_error,n.msg=t);break;case"onIceCandidate_success":i.loggerSend(loggerEventId.webrtc_send_candidate,t);break;case"ontrack":i.loggerSend(loggerEventId.webrtc_ontrack,t);break;case"connectionState":i.loggerSend(loggerEventId.webrtc_connect_status,"peer_connect_status: ".concat(t));break;case"iceConnectionState":i.loggerSend(loggerEventId.webrtc_connect_status,"peer_iceConnect_status: ".concat(t));break;case"peer_connect_success":i.connectStatus.video=!0,i.connectStatus.audio=!0,n.result="success",n.responseTime=(new Date).getTime(),n.time=n.responseTime-n.startTime,i.loggerSend(loggerEventId.webrtc_connect_success),i._delay_losetTimer();break;case"self_connect_success":i.loggerSend(loggerEventId.webrtc_self_connect_success);break;case"other_connect_success":i.loggerSend(loggerEventId.webrtc_no_self_connect_success);break;case"webrtc_decode_first_frame_end":i.loggerSend(loggerEventId.webrtc_decode_first_frame_end,t);break;case"rtc_connect_vibf":break;case"rtc_connect_result":i._manageWebrtcConnectResult(t);break;case"webrtc_receive_audio":i.loggerSend(loggerEventId.webrtc_receive_audio);break;case"signalv2_opened":i.loggerSend(loggerEventId.signalv2_opened);break;case"signalv2_closed":i.loggerSend(loggerEventId.signalv2_closed);break;case"signalv2_setoffer":i.loggerSend(loggerEventId.signalv2_setoffer);break;case"rtc_data_channel":if("event"===t.type)return void i.loggerSend(loggerEventId.webrtc_datachannel_receive,t.data.channel.label);if("media_device_request"===t.type)return i.loggerSend(loggerEventId.webrtc_datachannel_receive,t.data),i._emit("sceneChanged","mediaDeviceRequestNotify",{action:t.data.action,data:t.data.data}),i.player.handleReceiveMsg(t.data),void("Camera"===t.data.action&&(i.isX86CameraStatus=1===t.data.data.op));break;case"rtc_create_error":i.loggerSend(loggerEventId.webrtc_connect_failed,JSON.stringify(t)),i.stopGame({reason:applyFailReason.LOAD_GAME_FAILED,errorCode:applyFailCode.WEBRTC_CONNECT_TIMEOUT,errorMsg:i.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,tips:i.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,stopByApp:stopByApp.server,interval:i._getCurrentGameDuration(i.gameStartTime)})}i.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},i.netRequestData),n))}),eventEmitter.on("socket.io",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n={url:"",action:"webrtc",startTime:(new Date).getTime(),responseTime:0,time:0,result:"failed",msg:""};switch(e){case"connect":n.result="success",n.responseTime=(new Date).getTime(),n.time=n.responseTime-n.startTime,i.loggerSend(loggerEventId.webrtc_signal_server_success,t);break;case"disconnect":i.loggerSend(loggerEventId.webrtc_signal_server_disconnect,t);break;case"reconnectFailed":i.loggerSend(loggerEventId.webrtc_socket_reconnect,"signalServer_reconn_failed");break;case"reconnectSuccess":i.loggerSend(loggerEventId.webrtc_socket_reconnect,"signalServer_reconnect_success");break;case"reconnectError":i.loggerSend(loggerEventId.webrtc_socket_reconnect,"signalServer_reconn_error");break;case"connectTimeout":i.loggerSend(loggerEventId.webrtc_signal_server_timeout,"signalServer_timeout")}i.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},i.netRequestData),n))}),eventEmitter.on("datachannel",function(e,t){switch(e){case"sendCountly":i.loggerSend(t.eventId,t.eventData);break;case"sceneChanged":i._emit("sceneChanged",t.sceneId,t.sceneData)}})}},{key:"_delay_losetTimer",value:function(){var M=this,D=[],A=0,B=0,K=0,N=0,L=0,F={packetsSent:0,retransmittedPacketsSent:0,bytesSent:0,headerBytesSent:0,retransmittedBytesSent:0,framesEncoded:0,totalEncodedBytesTarget:0,framesSent:0},$=0,j=0,U="-1",H=[];clearInterval(this.collectDelayDataTimer),this.collectDelayDataTimer=setInterval(function(){try{M.player?M.player.getWebrtcStats(function(e,t,n){var i=e.packetsLost,o=e.packetsReceived,r=e.bytesReceived,s=e.framesDecoded,a=e.googRenderDelayMs,c=e.googTargetDelayMs,l=(e.googFrameRateOutput,e.googInterframeDelayMax),d=(e.googCurrentDelayMs,e.jitterBufferDelay),p=e.framesReceived,u=e.googJitterBufferMs,h=e.jitterBufferEmittedCount,f=e.jitterBufferTargetDelay,m=e.frameWidth,y=e.frameHeight,g=e.googCodecName,_=e.codecImplementationName,v=e.decoderImplementation,S=e.encoderImplementation,b=e.totalDecodeTime,k=e.totalRoundTripTime,e=e.responsesReceived,C=t.googFrameRateInput,w=void 0===C?-1:C,C=t.googAvgEncodeMs,T=void 0===C?-1:C,C=t.googFrameRateSent,E=void 0===C?-1:C,t=r-K,I="-1",C=(0<t&&(I=t.toFixed(3)),((k-$)/(e-j)*1e3).toFixed(0)),R=(isNaN(Number(C))&&(C=U),((b-L)/(s-N)*1e3).toFixed(2)),x=s-N,P=-1;0<x&&(P=parseInt(String(t/x)));var t=i-A,O=null,O=(t/(o-B+t)*100).toFixed(2),t=((isNaN(O)||O<0)&&(O=0),!u&&d&&h&&(1e3*d/h).toFixed(2),c),u=(!t&&f&&h&&(t=(f/h).toFixed(2)),A=i,B=o,K=r,N=s,L=b,$=k,j=e,U=C,videFrameJankStatisGetJanksCount_1()),d=videFrameJankStatisGetFreezeCount_1(),c=videFrameJankStatisGetJankDuration_1()+videFrameJankStatisGetFreezeDuration_1();3==M.gGameState&&(M.setDataInfo.report_delay_interval_times&&1<=M.setDataInfo.report_delay_interval_times&&(D.length>=M.setDataInfo.report_delay_interval_times&&(M.loggerSend(loggerEventId.collect_delay_data,D.join()),D=[]),(f=[]).push((new Date).getTime()),f.push(numToString(C)),f.push(numToString(R)),f.push(numToString(a)),f.push(numToString(t)),f.push(numToString(t)),f.push(numToString(P)),f.push(numToString(x)),f.push(numToString(x)),f.push(numToString(I)),f.push(numToString(M.inputPingPongDelay)),f.push(numToString(l)),f.push(numToString(O)),f.push("0"),f.push("0"),f.push("0-0-0-0"),f.push("0","0","0","0","0","0","0"),f.push("0"),f.push("0"),f.push("0"),f.push("0"),f.push("0"),f.push(numToString(u)),f.push(numToString(d)),f.push("0"),f.push("0"),f.push(numToString(c)),D.push(f.join("|"))),M.videoStreamInfo.videoFps=numToString(x),M.videoStreamInfo.bitRate=numToString(I),M.videoStreamInfo.packetsLostRate=numToString(O),M.videoStreamInfo.currentDelayMs=numToString(-1),M.videoStreamInfo.decodeDelay=numToString(R),M.videoStreamInfo.renderDelay=numToString(a),M.videoStreamInfo.frameSize=numToString(P),M.videoStreamInfo.jitterBuffer=numToString(-1),M.videoStreamInfo.framesReceived=numToString(p),M.videoStreamInfo.receiveFrameSize=numToString(r),M.videoStreamInfo.delay=numToString(C),M.videoStreamInfo.codecImplementationName=_||v||S||"",M.videoStreamInfo.codecName=g||"",M.videoStreamInfo.frameWidth=numToString(m),M.videoStreamInfo.frameHeight=numToString(y),M._emit("sceneChanged","delay",{delay:M.videoStreamInfo.delay}),M._emit("sceneChanged","packetsLost",{packetsLost:M.videoStreamInfo.packetsLostRate}),M._emit("messageUIModel","FrameDelay",{delay:M.videoStreamInfo.delay,packetsLost:M.videoStreamInfo.packetsLostRate}),M._emit("sceneChanged","videoStreamInfo",M.videoStreamInfo)),M.isX86CameraStatus?M.setDataInfo.report_delay_interval_times&&1<=M.setDataInfo.report_delay_interval_times&&(H.length>=M.setDataInfo.report_delay_interval_times&&(M.loggerSend(loggerEventId.webrtc_x86_up_video_collection,H.join()),H=[]),n.forEach(function(e){var t;"video"===e.kind&&"outbound-rtp"===e.type&&0<e.bytesSent&&(t=(new Date).getTime()+"|"+(e.packetsSent-F.packetsSent)+"|"+(e.retransmittedPacketsSent-F.retransmittedPacketsSent)+"|"+(8*(e.bytesSent-F.bytesSent)/1024/1024).toFixed(4)+"|"+(8*(e.headerBytesSent-F.headerBytesSent)/1024).toFixed(4)+"|"+(e.retransmittedBytesSent-F.retransmittedBytesSent)+"|"+(e.framesEncoded-F.framesEncoded)+"|"+x+"|"+(e.totalEncodeTime?(e.totalEncodeTime/e.framesEncoded).toFixed(4):-1)+"|"+(e.totalEncodedBytesTarget-F.totalEncodedBytesTarget||-1)+"|"+(e.framesSent-F.framesSent||-1)+"|"+(e.hugeFramesSent||-1)+"|"+I+"|"+e.pliCount+"|"+e.nackCount+"|"+(e.frameWidth||-1)+"|"+(e.frameHeight||-1)+"|"+(e.framesPerSecond||-1)+"|"+(e.qpSum/e.framesEncoded).toFixed(4)+"|"+w+"|"+T+"|"+E,H.push(t),F=e)})):H=[]}):clearInterval(M.collectDelayDataTimer)}catch(e){clearInterval(M.collectDelayDataTimer)}},1e3)}},{key:"_manageWebrtcVibf",value:function(e){clearInterval(this.playerRetryTimer),"op5"!==e&&(this.gGameState=3),this.isNeedWaitOperation5Notify||(this.videoId&&autoPlayVideo(this.videoId),document.getElementById(this.coverId)&&document.getElementById(this.coverId).remove(),this.firstFrameEvent(e))}},{key:"_manageWebrtcConnectResult",value:function(e){1==e.code?this._manageWebrtcVibf(e):(this.connectStatus&&(this.connectStatus.video=!1,this.connectStatus.audio=!1),this.loggerSend(loggerEventId.webrtc_connect_failed,JSON.stringify(e)),this._sdkRestartGame("webrtc_connect_failed"))}},{key:"_inputSocketConnect",value:function(e){var n=this,i={url:"",action:"input",startTime:(new Date).getTime(),responseTime:0,time:0,result:"failed",msg:""};eventEmitter.on("inputSocket",function(e,t){switch(e){case"open":n.connectStatus.inputSocket=!0,n.inputOpenStatus=!0,i.result="success",i.responseTime=(new Date).getTime(),i.time=i.responseTime-i.startTime,n._emit("messageUIModel","setInputSocket",n.inputSocket),n.loggerSend(loggerEventId.input_socket_opened);break;case"messages":break;case"delay":n.inputPingPongDelay=t,n.loggerSend(loggerEventId.input_socket_ping_pong_delay_time,{pingpongCost:t});break;case"delayMax":n.inputPingPongDelay=t,n.loggerSend(loggerEventId.input_socket_ping_pong_delay_max);break;case"startIm":n._emit("messageUIModel","startIm"),n._emit("sceneChanged","inputFocusNotify",t),n.loggerSend(loggerEventId.input_socket_start_im);break;case"stopIm":n._emit("messageUIModel","stopIm"),n._emit("sceneChanged","inputFocusNotify",t),n.loggerSend(loggerEventId.input_socket_stop_im);break;case"close":n.connectStatus.inputSocket=!1,i.msg=t,n.loggerSend(loggerEventId.input_socket_closed,{errorCode:t.code,errorMsg:""}),n.loggerSend(loggerEventId.input_socket_connect_failed,{errorCode:t.code,errorMsg:""}),n.inputDisconnectTimer=setTimeout(function(){4!==n.gGameState&&5!==n.gGameState&&n.inputOpenStatus&&n._sdkRestartGame("input_disconnect")},3e3)}n.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},n.netRequestData),i))}),i.url=e,this.loggerSend(loggerEventId.input_socket_connect,{inputUrl:encodeURIComponent(e)}),this.inputSocket=new InputSocket(e,this.setDataInfo.ping_interval_time,this.setDataInfo.ping_delay_time),this.inputSocket.connect()}},{key:"_inputSocketRelease",value:function(){clearTimeout(this.inputDisconnectTimer),this.inputSocket&&(this.inputSocket.disconnect(),this.inputSocket=null)}},{key:"_screenSocketConnect",value:function(e){var n=this;eventEmitter.on("screenSocket",function(e,t){switch(e){case"open":n.screenSocket.send(JSON.stringify({bid:n.accessKeyId,cid:n.cid,mid:"W"+Date.now(),data:"",type:"getSensorList"})),n.loggerSend(loggerEventId.screen_socket_opened),n.screenSocket.send("START_RECORD");break;case"messages":n._screenSocketState(t);break;case"close":n.loggerSend(loggerEventId.screen_socket_closed,{errorCode:t.code,errorMsg:""});break;case"reconnect":n.loggerSend(loggerEventId.screen_socket_reconnect);break;case"failed":n.loggerSend(loggerEventId.screen_socket_closed)}}),this.loggerSend(loggerEventId.screen_socket_connect,{type:"screenSocket",screenUrl:encodeURIComponent(e)}),this.screenSocket=new ScreenSocket(e,"screenSocket"),this.screenSocket.connect()}},{key:"_screenSocketState",value:function(e){var t,n=this;try{if(e instanceof Blob)(t=new FileReader).readAsArrayBuffer(e),t.onload=function(e){e.target.readyState==FileReader.DONE&&n.armCapCallback(e.target.result)};else{var i,o,r,s=JSON.parse(e);if(0==s.orientation||s.orientation)this._emit("screenMessageRotate",e);else switch(s.type){case"share_link":this._emit("sceneChanged","share"),this.loggerSend(loggerEventId.rom_share_link);break;case"open_camera":this._emit("sceneChanged","openCamera"),this.loggerSend(loggerEventId.rom_open_camera,s);break;case"open_gallery":this._emit("sceneChanged","openGallery"),this.loggerSend(loggerEventId.rom_open_gallery,s);break;case"screen_cap":s.image_name&&this._emit("sceneChanged","newFileAppear",{image_name:s.image_name}),this.loggerSend(loggerEventId.rom_inform_cap,s);break;case"image_list":this._emit("sceneChanged","fileList",{list:s.fileNames}),this.downloadInfo.fileListCallback(s.fileNames),this.loggerSend(loggerEventId.rom_inform_capList,s.fileNames.join());break;case"download_file":this._bigFileEvent(s);break;case"clipboard":hasOwnProperty(s,"code")?((i=0==s.code)?this.loggerSend(loggerEventId.wsmessage_send_successed,base64("mid: "+s.mid)):this.loggerSend(loggerEventId.wsmessage_send_failed,base64("mid: "+s.mid+" code: "+s.code)),delete this.wsMessageList[s.mid],"{}"==JSON.stringify(this.wsMessageList)&&(clearInterval(this.wsMessageTimer),this.wsMessageTimer=null),this.sendWSMessageCallback[s.type](s.mid,i,s.message)):(this._emit("sceneChanged","wsmessage",s),this.loggerSend(loggerEventId.wsmessage_send_recevied,base64("type:clipboard, mid:"+s.mid)));break;case"android_share":case"weixin_share":case"qq_share":case"weibo_share":this._emit("sceneChanged","agentShare",s);break;case"gps":this._emit("sceneChanged","gps",s);break;case"storage":this._emit("sceneChanged","storage",s);break;case"intent":hasOwnProperty(s,"code")?((o=1e3==s.code)?this.loggerSend(loggerEventId.wsmessage_send_successed,"mid: "+s.mid):this.loggerSend(loggerEventId.wsmessage_send_failed,"mid: "+s.mid+" code: "+s.code),delete this.wsMessageList[s.mid],"{}"==JSON.stringify(this.wsMessageList)&&(clearInterval(this.wsMessageTimer),this.wsMessageTimer=null),this.sendWSMessageCallback[s.type](s.mid,o,s.message)):((r=JSON.parse(JSON.stringify(s))).code=1e3,this.screenSocket.send(JSON.stringify(r)),this._emit("sceneChanged","intent",s),this.loggerSend(loggerEventId.wsmessage_send_recevied,"type:intent, mid:"+s.mid));break;case"sensor":s.data=[s.data],this._emit("sceneChanged","sensorList",s),this.loggerSend(loggerEventId.sensor_received);break;case"getSensorList":s.data&&(this._emit("sceneChanged","sensorList",s),this.loggerSend(loggerEventId.sensor_list_received));break;default:this._uploadAudio(s)}}}catch(e){}}},{key:"_uploadAudio",value:function(e){var t=e.cmd;switch(e.parm,t){case 0:this.sendLogger(loggerEventId.audio_connect_open);break;case 1:return this.sendLogger(loggerEventId.audio_start_msg,JSON.stringify(e)),void eventEmitter.emit("webrtc","rtc_data_channel",{type:"media_device_request",data:{action:"Microphone",data:{op:1,ext:""}}});case 2:return this.sendLogger(loggerEventId.audio_end_msg_timeout,JSON.stringify(e)),void eventEmitter.emit("webrtc","rtc_data_channel",{type:"media_device_request",data:{action:"Microphone",data:{op:0,ext:""}}});case 3:this.sendLogger(loggerEventId.audio_connect_error,JSON.stringify(e)),this.captureLocalAudio&&this.captureLocalAudio.stop()}}},{key:"_upDataSocketConnect",value:function(e){var i=this;e+="&act=1&proto=4",eventEmitter.on("upDataSocket",function(e,t){switch(e){case"open":i.uploadQueue&&(i.uploadQueue=!1,i.waitUploadFile(i.upDataInfo));break;case"messages":try{var n=JSON.parse(t);i._upDateFile(n)}catch(e){}}}),this.loggerSend(loggerEventId.screen_socket_connect,{type:"upDataSocket",screenUrl:encodeURIComponent(e)}),this.upDataSocket=new ScreenSocket(e,"upDataSocket"),this.upDataSocket.connect()}},{key:"_downloadSocketConnect",value:function(e){var n=this;e+="&act=1&proto=5",eventEmitter.on("downloadSocket",function(e,t){switch(e){case"open":n.offFileSocketFn();break;case"messages":n.fileSocketState(t);break;case"close":n.offFileSocketFn(),n.loggerSend(loggerEventId.screen_socket_closed,{errorCode:t.code,errorMsg:""})}}),this.loggerSend(loggerEventId.screen_socket_connect,{type:"downloadSocket",screenUrl:encodeURIComponent(e)}),this.downloadSocket=new ScreenSocket(e,"downloadSocket"),this.downloadSocket.connect()}},{key:"_screenSocketRelease",value:function(){this.screenSocket&&(this.screenSocket.disconnect(),this.screenSocket=null),this.upDataSocket&&(this.upDataSocket.disconnect(),this.upDataSocket=null),this.downloadSocket&&(this.offFileSocketFn(),this.downloadSocket.disconnect(),this.downloadSocket=null)}},{key:"_upDateFile",value:function(e){var t=this;if("upload_image"===e.type)if(-1===e.code)this._emit("sceneChanged","upload",this.SaasSDKTips.SaasSDK.unknownError),this.upDataInfo.uploadOnError(this.upDataInfo.uploadOpType,this.SaasSDKTips.SaasSDK.unknownError);else if(e.code in this.SaasSDKTips.uploadErrorMessage)this._emit("sceneChanged","upload",this.SaasSDKTips.uploadErrorMessage[e.code]),this.upDataInfo.uploadOnError(this.upDataInfo.uploadOpType,this.SaasSDKTips.uploadErrorMessage[e.code]);else{var n=this.upDataInfo.uploadImgBuffer.byteLength,i=0,o=81920,r=0;if(0===e.code){for(this.upDataInfo.uploadStatus=3,this.upDataInfo.retryUpload=5,this.upDataInfo.uploadRetryTimer&&clearTimeout(this.upDataInfo.uploadRetryTimer);i<n;)this.upDataSocket.send(this.upDataInfo.uploadImgBuffer.slice(i,o)),o=(i=o)+81920,r=1;this.upDataSocket.send(JSON.stringify({type:this.upDataInfo.uploadOpType,code:"end",fileName:this.upDataInfo.uploadFile.name})),this.upDataInfo.uploadStatus=4,this.loggerSend(loggerEventId.upload_image_end),this.upDataInfo.uploadRetryTimer=setInterval(function(){4!==t.upDataInfo.uploadStatus?clearTimeout(t.upDataInfo.uploadRetryTimer):t.upDataInfo.retryUpload<=0?(t._emit("sceneChanged","upload",t.SaasSDKTips.uploadErrorMessage[1007]),t.upDataInfo.uploadOnError(t.upDataInfo.uploadOpType,t.SaasSDKTips.uploadErrorMessage[1007]),clearTimeout(t.upDataInfo.uploadRetryTimer)):4===t.upDataInfo.uploadStatus&&(t.upDataSocket.send(JSON.stringify({type:t.upDataInfo.uploadOpType,code:"end",fileName:t.upDataInfo.uploadFile.name})),t.upDataInfo.retryUpload=t.upDataInfo.retryUpload-1)},this.upDataInfo.uploadDelay)}else 1===e.code&&(this.upDataInfo.uploadStatus=0,this.upDataInfo.retryUpload=5,this.upDataInfo.uploadRetryTimer&&clearTimeout(this.upDataInfo.uploadRetryTimer),this.upDataInfo.uploadOnSuccess(this.upDataInfo.uploadOpType,this.upDataInfo.uploadFile),this.loggerSend(loggerEventId.upload_image_success),this.loggerSend(loggerEventId.upload_image_state,{file_segment_coefficient:r,file_segment_size:81920,file_size:this.upDataInfo.uploadFile.size,upload_cost:(new Date).valueOf()-this.upDataInfo.uploadStartTime}))}}},{key:"getFileList",value:function(e){e&&e.size&&(20<e.size||e.size<=0)&&(e.size=20);var t={type:"image_list",limit:e&&e.size||20,offset:e&&e.offset||0};return e&&e.callback&&(this.downloadInfo.fileListCallback=e.callback),this.loggerSend(loggerEventId.sdk_get_capList,String(e)),!!this.screenSocket&&this.screenSocket.send(JSON.stringify(t))}},{key:"downLoadFile",value:function(e,t){var n;return isIE()?(t&&t({success:!1,msg:this.SaasSDKTips.downloadErrorMessage.noSupport}),this._emit("sceneChanged","downLoadFileInfo",{success:!1,msg:this.SaasSDKTips.downloadErrorMessage.noSupport}),this.loggerSend(loggerEventId.downLoad_file_stop,this.SaasSDKTips.downloadErrorMessage.noSupport),!1):e&&"string"==typeof e?!(!this.downloadSocket||this.downloadSocket.ws&&1!=this.downloadSocket.ws.readyState)&&(this.downloadInfo.fileName?(t&&t({success:!1,fileName:e,msg:this.SaasSDKTips.downloadErrorMessage.has_task}),this._emit("sceneChanged","downLoadFileInfo",{success:!1,fileName:e,msg:this.SaasSDKTips.downloadErrorMessage.has_task}),this.loggerSend(loggerEventId.downLoad_file_stop,e+this.SaasSDKTips.downloadErrorMessage.has_task),!1):(n={type:"download_image",code:"start",fileName:e},this.downloadInfo.fileName=e,t&&(this.downloadInfo.fileDownloadCallback=t),this.downloadInfo.time=(new Date).getTime(),this.loggerSend(loggerEventId.downLoad_file_state,this.downloadInfo.fileName),this.loggerSend(loggerEventId.downLoad_file_start,this.downloadInfo.fileName),this.downloadSocket.send(JSON.stringify(n)))):(t&&t({success:!1,msg:this.SaasSDKTips.downloadErrorMessage.download_name_empty}),this._emit("sceneChanged","downLoadFileInfo",{success:!1,msg:this.SaasSDKTips.downloadErrorMessage.download_name_empty}),this.loggerSend(loggerEventId.downLoad_file_stop,this.SaasSDKTips.downloadErrorMessage.download_name_empty),!1)}},{key:"cancelDownload",value:function(e){return isIE()?(this._emit("sceneChanged","cancelDownLoadFail",{success:!1,msg:this.SaasSDKTips.downloadErrorMessage.noSupport}),this.loggerSend(loggerEventId.downLoad_file_stop,this.SaasSDKTips.downloadErrorMessage.noSupport),!1):e?this.cancelDownLoadFile(e):(this._emit("sceneChanged","cancelDownLoadFail",{success:!1,msg:this.SaasSDKTips.downloadErrorMessage.cancel_name_empty}),this.loggerSend(loggerEventId.downLoad_file_stop,e+this.SaasSDKTips.downloadErrorMessage.cancel_name_empty),!1)}},{key:"cancelDownLoadFile",value:function(e,t){return!(!this.downloadSocket||this.downloadSocket.ws&&1!=this.downloadSocket.ws.readyState)&&(t||this.downloadInfo.fileName||!e?(t={type:"download_image",code:"cancel",fileName:e},this.loggerSend(loggerEventId.downLoad_file_cancel,e),this.downloadSocket.send(JSON.stringify(t))):(this._emit("sceneChanged","cancelDownLoadFail",{success:!1,msg:this.SaasSDKTips.downloadErrorMessage.no_task}),this.loggerSend(loggerEventId.downLoad_file_stop,this.SaasSDKTips.downloadErrorMessage.no_task),!1))}},{key:"fileSocketState",value:function(e){var t,n,i=this;0==(e="string"==typeof e?JSON.parse(e):e).code?(this.downloadInfo.imgBold=[],this.downloadInfo.fileParam=e,this.downloadInfo.time=(new Date).getTime(),this.loggerSend(loggerEventId.downLoad_file_state,this.downloadInfo.fileName),sessionStorage.setItem("fileName",this.downloadInfo.fileName)):1==e.code?(sessionStorage.removeItem("fileName"),this.downloadInfo.fileName&&(this.downloadInfo.time=(new Date).getTime(),this.loggerSend(loggerEventId.downLoad_file_state,this.downloadInfo.fileName),this.loggerSend(loggerEventId.downLoad_file_end,this.downloadInfo.fileName),n=new Blob(this.downloadInfo.imgBold,{type:"image/jpeg"}),(t=new FileReader).readAsArrayBuffer(n),t.onload=function(e){if(e.target.readyState==FileReader.DONE){try{var t,n=e.target.result;cryptoJs.MD5(cryptoJs.lib.WordArray.create(n)).toString()==i.downloadInfo.fileParam.md5sum?(i.loggerSend(loggerEventId.downLoad_file_success,i.downloadInfo.fileName),t={success:!0,fileBold:n,fileType:i.downloadInfo.fileParam.mimeType,fileSize:i.downloadInfo.fileParam.fileSize,fileName:i.downloadInfo.fileName},i.downloadInfo.fileDownloadCallback(t),i._emit("sceneChanged","downLoadFileInfo",t)):(i._sceneChangedDownLoadFileInfo(i.SaasSDKTips.downloadErrorMessage.download_file_error,!0),i.loggerSend(loggerEventId.downLoad_file_error,i.downloadInfo.fileName))}catch(e){i._sceneChangedDownLoadFileInfo(i.SaasSDKTips.downloadErrorMessage.download_file_error,!0),i.loggerSend(loggerEventId.downLoad_file_error,i.downloadInfo.fileName)}i.downloadInfo.imgBold=[],i.downloadInfo.fileName="",i.downloadInfo.fileParam=null}})):2==e.code?this._sceneChangedDownLoadFileInfo(this.SaasSDKTips.downloadErrorMessage.user_cancel,!0):-1==e.code?this._sceneChangedDownLoadFileInfo(this.SaasSDKTips.downloadErrorMessage.turned_off,!0):10001==e.code||10002==e.code?this._sceneChangedDownLoadFileInfo(this.SaasSDKTips.downloadErrorMessage.image_not_found,!0):10005==e.code?this._sceneChangedDownLoadFileInfo(this.SaasSDKTips.downloadErrorMessage.download_limit,!0):"blob"==typeCheck(e)&&((n=sessionStorage.getItem("fileName"))&&!this.downloadInfo.fileName?this.cancelDownLoadFile(n,!0):this.downloadInfo.imgBold.push(e))}},{key:"offFileSocketFn",value:function(){this.downloadInfo.fileName&&(this.downloadInfo.fileDownloadCallback({success:!1,fileName:this.downloadInfo.fileName,msg:this.SaasSDKTips.downloadErrorMessage.link_close}),this._sceneChangedDownLoadFileInfo(this.SaasSDKTips.downloadErrorMessage.link_close),this.cancelDownLoadFile(this.downloadInfo.fileName),this.loggerSend(loggerEventId.downLoad_file_error,this.downloadInfo.fileName+"socket"))}},{key:"_sceneChangedDownLoadFileInfo",value:function(e,t){this.downloadInfo.fileName&&(this._emit("sceneChanged","downLoadFileInfo",{success:!1,fileName:this.downloadInfo.fileName,msg:e}),t&&this.downloadInfo.fileDownloadCallback({success:!1,fileName:this.downloadInfo.fileName,msg:e}),this.downloadInfo.fileName="",this.downloadInfo.fileParam=null)}},{key:"_bigFileEvent",value:function(e){var n,t,i,o,r=this;if("download_file"==e.event||"create_file"==e.event)try{this.bigFileDownloadUrl&&(t=JSON.parse(e.data),i=this.bigFileDownloadUrl.replace("?","/"+t.name+"?"),o={name:t.name,size:t.size,url:i+t.path+"/"+t.name,duration:t.duration,type:t.type,fileState:"create_file"==e.event?0:1},this._emit("sceneChanged","newBigFile",o),t.name)&&"download_file"==e.event&&(this.screenSocket.send(JSON.stringify({type:"download_file",event:"ack",fileName:t.path+"/"+t.name})),this.loggerSend(loggerEventId.big_file_inform,JSON.stringify(t)))}catch(e){}else"download_file_list"==e.event&&(i=e.data,n=[],i.map(function(e){var e=JSON.parse(e),t=r.bigFileDownloadUrl.replace("?","/"+e.name+"?");n.push({name:e.name,size:e.size,url:t+e.path+"/"+e.name,duration:e.duration,type:e.type})}),this.loggerSend(loggerEventId.big_file_list,JSON.stringify(n)),n.length)&&this.bigFileInfo.getFileListCallback(n)}},{key:"_emit",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];eventEmitter.emit.apply(eventEmitter,[e].concat(n))}},{key:"pauseGame",value:function(e,t){switch(this.gGameState=4,this.loggerSend(loggerEventId.stop_game_fun_Call,e),e){case"hidden":this.gReconnecting=!1,this.loggerSend(loggerEventId.visibility_change_hidden);break;case"offline":this.gReconnecting=!1,this.gGameState=6,this.loggerSend(loggerEventId.client_network_status,"false")}this._getStreamAddressTimedOutRelease(),this._connectSaasLinkTimedOutRelease(),this.isChangeResolution=!1,this.inputOpenStatus=!1,this.gameStopStatus=!0,this.saasRequest.httpRequestRelease(),"reconnectStream"!==e&&this._saasSocketRelease(),this._inputSocketRelease(),this._screenSocketRelease(),this._playerRelease(),this.captureLocalAudio&&(this.captureLocalAudio.release(),this.captureLocalAudio=null),"saas_socket_limit"===e&&this._stopGameEvent({reason:applyFailReason.LINK_LIMIT,tips:this.SaasSDKTips.applyFailTips.GAME_STOPPED||t,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime),statusCode:this.connectStatus.statusCode}),"saas_socket_failed"===e&&this._stopGameEvent({reason:applyFailReason.NORMAL,tips:this.SaasSDKTips.applyFailTips.GAME_STOPPED||t,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime),statusCode:this.connectStatus.statusCode}),this._releaseCaptureMediaDevice()}},{key:"_stopGameEvent",value:function(e){var t=e.reason,n=e.errorCode,n=void 0===n?"":n,i=e.errorMsg,i=void 0===i?"":i,o=e.tips,o=void 0===o?"":o,r=e.stopByApp,r=void 0===r?"":r,s=e.interval,s=void 0===s?"":s,a=e.statusCode,a=void 0===a?"":a,e=e.stateChangeReason,e=void 0===e?"":e,a=("instance_error"==(t=toLine(t))&&(t="instance_err"),this.loggerSend(loggerEventId.sdk_error_code,{version:"1.0",statusCode:a,stopByApp:r,errorCode:n,errorMsg:i}),this._getStreamAddressTimedOutRelease(),this._connectSaasLinkTimedOutRelease(),this.gGameState=5,this.cid?"-"+this.cid:""),r=0<=(n=""+n).indexOf(this.cid);this._emit("sceneChanged","stop",{interval:s,reason:t,errorCode:n,stateChangeReason:e,cid:this.cid,message:"".concat(o||i,"\n            ").concat(n||this.cid?" [ "+n+(r?"":n?a:this.cid)+" ]":"")})}},{key:"restartGame",value:function(e){if(!this.gReconnecting){switch(this.gReconnecting=!0,this.isGameStarted=void 0,this.UseResolutionInfo.changing=!1,this.sdkAbility=divideBy2("1110010001"),e){case"visible":this.loggerSend(loggerEventId.visibility_change_visible);break;case"online":this.loggerSend(loggerEventId.client_network_status,"true")}this.loggerSend(loggerEventId.sdk_reconnect,e+",gGameState:"+this.gGameState),this._emit("sceneChanged","reconnectingStatus",{message:this.SaasSDKTips.applyFailTips.CONNECTING}),this._playerRelease(),this.applyGame(this.applyGameWrap,this.applyGameParams,this.flashSurpported)}}},{key:"_sdkRestartGame",value:function(e,t,n){this._saasSocketRelease(),this._connectSaasLinkTimedOutRelease(),this._inputSocketRelease(),this._screenSocketRelease(),this.isChangeResolution=!1,this.sdkRestartCount++,5<this.sdkRestartCount?(this.loggerSend(loggerEventId.restart_game_failed,e),t&&this.loggerSend(t),this.stopGame({reason:applyFailReason.LOAD_GAME_FAILED,errorCode:n||applyFailCode.internal_error,errorMsg:this.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,tips:this.SaasSDKTips.applyFailTips.LOAD_GAME_FAILED,stopByApp:stopByApp.server,interval:this._getCurrentGameDuration(this.gameStartTime)})):this.restartGame(e)}},{key:"firstFrameEvent",value:function(e){this.connectStatus.firstFrame=!0,this.sdkRestartCount=0,this.loggerSend(loggerEventId.video_first_frame_time,e),this.VideoFrameCallback.supportRequestVideoFrameCallback(this.videoId)?this.loggerSend(loggerEventId.video_support_freamcallback,""):this.loggerSend(loggerEventId.video_not_support_freamcallback,""),this.VideoFrameCallbackInfo.isReuqest&&this.VideoFrameCallback.requestVideoFrameCallback(this.videoId);var e={cid:this.cid,cur_rate:this.UseResolutionInfo.UseResolutionId,videoState:"play",videoId:this.videoId},t=document.getElementById(this.videoId);t&&(e.videoState=t.paused?"pause":"play"),this._emit("sceneChanged","vibf",e),this._emit("sceneChanged","play",e),["WEBRTC","X86"].indexOf(this.streamType)<0&&this._emit("sceneChanged","videoStreamInfo",this.videoStreamInfo)}},{key:"_openCaptureMediaDevice",value:function(){this.setDataInfo.open_media_device_capture&&"X86"===this.streamType&&this.player.openMediaDevices&&(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(this._captureMediaDevice(),navigator.mediaDevices.addEventListener("devicechange",this._captureMediaDeviceHandler)):this.logger.send(loggerEventId.x86_media_devices_response,""))}},{key:"_captureMediaDevice",value:function(){var n=this,e=JSON.parse(this.setDataInfo.open_media_device_capture);this.player.openMediaDevices(e,function(e,t){e?n.logger.send(loggerEventId.x86_media_devices_response,e.message):(e=t.getVideoTracks()[0],t=t.getAudioTracks()[0],e="videoLabel:".concat(e?e.label:"",",audioLabel:").concat(t?t.label:""),n.logger.send(loggerEventId.x86_media_devices_response,e))})}},{key:"_releaseCaptureMediaDevice",value:function(){this.closeMediaDevices(null);try{navigator.mediaDevices&&navigator.mediaDevices.removeEventListener("devicechange",this._captureMediaDeviceHandler)}catch(e){}}},{key:"stopAll",value:function(){this.stopGame({reason:applyFailReason.LOG_OUT,tips:this.SaasSDKTips.applyFailTips.GAME_STOPPED,stopByApp:stopByApp.app,interval:this._getCurrentGameDuration(this.gameStartTime),statusCode:this.connectStatus.statusCode})}},{key:"stopGame",value:function(e,t,n){this.pauseGame("stop"),this._stopGameEvent(e),setCacheGameInfo("cid",""),this.releaseCid(t,n)}},{key:"listen",value:function(e,t){eventEmitter.on(e,t)}},{key:"enterQueue",value:function(){var o=this;this.cid&&(this.loggerSend(loggerEventId.enter_queue),this.loggerSend(loggerEventId.cloud_service_start,"enter_queue"),this.saasRequest.cloudService(this.applyGameParams,this.cid,this.sign,1,0,"",function(e,t,n,i){o.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},o.netRequestData),i)),e?o.loggerSend(loggerEventId.cloud_service_succeed):o.loggerSend(loggerEventId.cloud_service_failed,n.message)}))}},{key:"outQueue",value:function(){this.loggerSend(loggerEventId.out_queue),this.endGame()}},{key:"changeResolution",value:function(){var s=this,e=arguments.length<=0?void 0:arguments[0],a=(t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t],t=/^([1-9]+)(\d*)$/i.test(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:"",n=/^([1-9]+)(\d*)$/i.test(arguments.length<=2?void 0:arguments[2])?arguments.length<=2?void 0:arguments[2]:"";"function"!==typeCheck(a)&&(a=emptyFunction),this.loggerSend(loggerEventId.manual_resolution_changed_start,this.UseResolutionInfo.UseResolutionId+":"+resInfoCurBitrate(this.UseResolutionInfo.UseResolutionId,this.saasConfig.resolutionInfo)+","+e+":"+resInfoCurBitrate(e,this.saasConfig.resolutionInfo)),this.cid&&(!e||""==e||null==e||!(e!=this.UseResolutionInfo.UseResolutionId||t&&n)||this.isChangeResolution||-1==this.resolutionList.indexOf(+e)?a&&a(!1):(this.UseResolutionInfo.resolutionChangeStartTime=Date.now(),this.UseResolutionInfo.preResId=this.UseResolutionInfo.UseResolutionId,this.UseResolutionInfo.UseResolutionId=e,this._emit("sceneChanged","crst",{method:this.UseResolutionInfo.isAutoResolutionChanged?1:0,source:this.UseResolutionInfo.preResId,des:this.UseResolutionInfo.UseResolutionId}),"X86"==this.streamType||"WEBRTC"==this.streamType&&this.setDataInfo.keep_on_flow?this.UseResolutionInfo.changing=!0:this._playerRelease(),this.isChangeResolution=!0,this.isGameStarted=void 0,this.loggerSend(loggerEventId.cloud_service_start,"change_resolution"),t&&n&&(this.applyGameParams.viewResolutionWidth=t,this.applyGameParams.viewResolutionHeight=n),this.saasRequest.cloudService(this.applyGameParams,this.cid,this.sign,0,2,e,function(e,t,n,i){s.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},s.netRequestData),i));var o=null,o=s.UseResolutionInfo.isAutoResolutionChanged?loggerEventId.auto_resolution_changed_done:loggerEventId.manual_resolution_changed_done,r=s.UseResolutionInfo.preResId+":"+resInfoCurBitrate(s.UseResolutionInfo.preResId,s.saasConfig.resolutionInfo)+","+s.UseResolutionInfo.UseResolutionId+":"+resInfoCurBitrate(s.UseResolutionInfo.UseResolutionId,s.saasConfig.resolutionInfo)+","+(Date.now()-s.UseResolutionInfo.resolutionChangeStartTime);s.loggerSend(o,r),s._emit("sceneChanged","cred",{result:1,cur_rate:s.UseResolutionInfo.UseResolutionId,method:s.UseResolutionInfo.isAutoResolutionChanged?1:0}),s.UseResolutionInfo.isAutoResolutionChanged=!1,a&&a(e,n,i),0!=n.code?setTimeout(function(){var e={errorCode:n.errorCode||applyFailCode.CHANGE_RESOLUTION_TIMEOUT,errorMsg:n.errorMsg||s.SaasSDKTips.applyFailTips.NETWORK_REQUEST_TIMEOUT};s.stopGame(_objectSpread2(_objectSpread2({},e),{},{reason:applyFailReason.INTERNAL_ERROR,stopByApp:stopByApp.server,interval:s._getCurrentGameDuration(s.gameStartTime)}))},3e3):e?s.loggerSend(loggerEventId.cloud_service_succeed):(s.isChangeResolution=!1,s.loggerSend(loggerEventId.cloud_service_failed,n.message))})))}},{key:"applyControlReconnect",value:function(){var o=this;this._playerRelease(),this.isGameStarted=void 0,this.sign=sessionStorage.getItem("sign"),this.saasRequest.setSecretKey(sessionStorage.getItem("secretKey")),this.saasRequest.cloudService(this.applyGameParams,this.cid,this.sign,0,1,"",function(e,t,n,i){o.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},o.netRequestData),i)),e?o.loggerSend(loggerEventId.cloud_service_succeed):o.loggerSend(loggerEventId.cloud_service_failed,n.message)})}},{key:"releaseCid",value:function(o,e){var r=this;this.cid&&(this.loggerSend(loggerEventId.release_cid_start),this.saasRequest.releaseCid(this.cid,"string"==typeof o||"number"==typeof o?o:e,function(e,t,n,i){r.getNetRequestInfo.push(_objectSpread2(_objectSpread2({},r.netRequestData),i)),r.cid="",e?(r.loggerSend(loggerEventId.release_cid_succeed),"function"==typeof o&&o(n.data)):(i={errorCode:applyFailCode.RELEASE_CID_TIMEOUT,errorMsg:r.SaasSDKTips.applyFailTips.NETWORK_REQUEST_TIMEOUT},r._httpRequestFailed("202",t,i))}))}},{key:"getGameArchiveStatus",value:function(e){var o=this,r=e.pkgName,s=e.userInfo,t=e.appChannel,a=e.ifCanPlay;this.saasRequest.getGameArchiveStatus(r,s,t,function(e,t,n,i){o.getNetRequestInfo.push(_objectSpread2({packageName:r,uid:s.uId,cid:"",transId:o.clientTransId},i)),e&&0==n.code?a({code:0,ifCanPlay:n.data.ifCanPlay,errorMessage:""}):a({code:1,ifCanPlay:"",errorMessage:"".concat(n.errorMsg,"[").concat(n.code,"]")})})}},{key:"gameArchived",value:function(e){var o=this,r=e.pkgName,s=e.userInfo,t=e.appChannel,a=e.hasArchive;this.saasRequest.hasGameArchived(r,s,t,function(e,t,n,i){o.getNetRequestInfo.push(_objectSpread2({packageName:r,uid:s.uId,cid:"",transId:o.clientTransId},i)),e&&0==n.code?a({code:0,hasArchive:n.data.hasArchive,errorMessage:""}):a({code:1,hasArchive:"",errorMessage:"".concat(n.errorMsg,"[").concat(n.code,"]")})})}},{key:"updateGameUID",value:function(o,r){var s=this;return this.cid?o&&o.userInfo&&o.userInfo.uId&&o.userInfo.uToken?(o.sdkAbility=[divideBy2("1110010000")],o.cid=this.cid,void this.saasRequest.updateUID(this.applyGameParams,o,function(e,t,n,i){e&&0===n.code&&(o.playingtime=o.playingTime/1e3,e=o.userInfo,s.applyGameParams=_objectSpread2(_objectSpread2(_objectSpread2({},s.applyGameParams),o),{},{userInfo:e}),s.sign=n.data.sign,s.saasRequest.setUserInfo(o.userInfo),s.logger.setGameInfo(s.applyGameParams.extraId,o.userInfo.uId,s.applyGameParams.pkgName,s.applyGameParams.appChannel)),r({msg:n.errorMsg||n.msg,code:n.errorCode||n.code})})):(r({code:-100,msg:this.SaasSDKTips.SaasSDK.PARAMS_ERROR}),!1):(r({code:-100,msg:this.SaasSDKTips.SaasSDK.gameNotStart}),!1)}},{key:"checkPlayingGame",value:function(e){var o=this,r=e.userInfo,s=e.playingGame;this.saasRequest.checkPlayingGame(r,function(e,t,n,i){o.getNetRequestInfo.push(_objectSpread2({packageName:"",uid:r.uId,cid:"",transId:o.clientTransId},i)),e&&0==n.code?s({code:0,playingGame:n.data.channelInfoList,errorMessage:""}):s({code:1,playingGame:"",errorMessage:"".concat(n.errorMsg,"[").concat(n.code,"]")})})}},{key:"releasePlayingGame",value:function(e,o){e&&e.userInfo&&e.userInfo.uId&&e.userInfo.uToken&&e.pkgName&&e.cid&&e.cToken&&hasOwnProperty(e,"playingtime")?this.saasRequest.releasePlayingGame(e,function(e,t,n,i){e&&0==n.code?o({code:0,msg:n.msg}):o({code:1,msg:n.msg})}):o&&o({code:-100,msg:this.SaasSDKTips.SaasSDK.PARAMS_ERROR})}},{key:"getCid",value:function(){return{cid:this.cid||""}}},{key:"getCloudPlayStatusCode",value:function(){if(this.connectStatus.statusCode="",this.connectStatus.streamAddress){if(this.connectStatus.video&&!this.connectStatus.firstFrame)return this.connectStatus.statusCode=applyFailCode.CONNECT_VIDEO_NOT_MSG;if(!this.connectStatus.video&&this.connectStatus.audio)return this.connectStatus.statusCode=applyFailCode.CONNECT_ONLY_AUDIO_OK;if(!this.connectStatus.video&&!this.connectStatus.audio&&this.connectStatus.inputSocket)return this.connectStatus.statusCode=applyFailCode.CONNECT_ONLY_INPUT_OK;if(!this.connectStatus.video&&!this.connectStatus.audio&&!this.connectStatus.inputSocket)return this.connectStatus.statusCode=applyFailCode.CONNECT_ALL_FAILED}else{if(!this.connectStatus.cid)return this.connectStatus.statusCode=applyFailCode.NO_CID;if(!this.connectStatus.saasSocket)return this.connectStatus.statusCode=applyFailCode.CONNECT_WS_SAAS_FAILED;if(!this.connectStatus.saasSocketPingPong)return this.connectStatus.statusCode=applyFailCode.WS_SAAS_PING_PONG_ERROR;if(this.connectStatus.saasSocketPingPong)return this.connectStatus.statusCode=applyFailCode.WS_SAAS_PING_PONG_SECCESS}return this.connectStatus.statusCode}},{key:"sendMessage",value:function(e){return!(!this.saasSocket||"string"!=typeof e||!this.cid)&&("X86"===this.streamType?(this.player.sendDataToGame&&this.player.sendDataToGame(Number(this.cid),this.applyGameParams.userInfo.uId,e),!0):this.saasSocket.send(JSON.stringify({uid:this.applyGameParams.userInfo.uId,to:"m_".concat(this.cid),from:this.cid,mid:"W".concat((new Date).getTime()),type:1,ack:0,payload:e})))}},{key:"reportFinishInfo",value:function(e){this.loggerSend(loggerEventId.app_report_finish_info,e)}},{key:"getNetInfo",value:function(){return this.getNetRequestInfo}},{key:"enableAudio",value:function(e){"RTMP"==this.streamType&&(e=!e),this.player&&this.player.enableAudio(e)}},{key:"endGame",value:function(e,t){this.stopGame({reason:applyFailReason.NORMAL,tips:this.SaasSDKTips.applyFailTips.GAME_STOPPED,stopByApp:stopByApp.app,interval:this._getCurrentGameDuration(this.gameStartTime),statusCode:this.connectStatus.statusCode},e,t)}},{key:"bringUpApp",value:function(){this.inputSocket.send('udcmd:"call=startapp&pkgname='.concat(this.applyGameParams.pkgName,'"'))}},{key:"getStreamingDomain",value:function(){var e;return this.currentStreamAddress&&1<(e=this.currentStreamAddress.split(":")).length&&(this.currentStreamAddress=e[1],1<this.currentStreamAddress.split("//").length&&(this.currentStreamAddress=this.currentStreamAddress.split("//")[1]),this.currentStreamAddress=this.currentStreamAddress.split(":")[0],this.currentStreamAddress=this.currentStreamAddress.split("?")[0],this.currentStreamAddress=this.currentStreamAddress.split("/")[0]),this.currentStreamAddress}},{key:"isSupportLiving",value:function(){if(5!=this.gGameState)return this.supportLiving}},{key:"startLiving",value:function(e,t){return"unknown"!=this.supportLiving&&(5!=this.gGameState?!0!==this.supportLiving?this.SaasSDKTips.SaasSDK.supportLiving:(this.loggerSend(loggerEventId.start_liveing,encodeURIComponent(e+","+t)),this.saasRequest.toStartLiving({roomId:e,streamerUrl:t,cid:this.cid},function(){}),!0):void 0)}},{key:"endLiving",value:function(e){return"unknown"!=this.supportLiving&&(5!=this.gGameState?!0!==this.supportLiving?this.SaasSDKTips.SaasSDK.supportLiving:(this.loggerSend(loggerEventId.end_liveing,e),this.saasRequest.toEndLiving({roomId:e,cid:this.cid},function(e,t,n){}),!0):void 0)}},{key:"getPinCode",value:function(){var o=this;return"unknown"!=this.supportLiving&&(5!=this.gGameState?(this.loggerSend(loggerEventId.get_pin_code),this.saasRequest.toGetPinCode({cid:this.cid},function(e,t,n,i){e&&0==n.code&&n.data||(e={result:0,msg:n.msg},o.sendLogger(loggerEventId.get_pin_code_error),o._emit("sceneChanged","applyPinCode",e))}),!0):void 0)}},{key:"toApplyControlPower",value:function(){var o=this;this.checkStreamingTypes(this.applyGameParams.streamType);var e,t=getCacheGameInfo().cid,t={masterId:this.applyGameParams.cid,followCid:t||"",pin:this.applyGameParams.pinCode,ext:this.applyGameParams.userInfo.uId,accessKeyId:this.accessKeyId,streamingTypes:this.applyGameParams.streamingTypes,joinMode:this.applyGameParams.joinMode||0};this.applyGameParams.richData&&"object"!==typeCheck(this.applyGameParams.richData)&&(this.applyGameParams.richData=null),t.richData=this.applyGameParams.richData||null,this.applyGameParams.viewResolutionWidth&&(e="",this.applyGameParams.viewResolutionWidth||this.applyGameParams.viewResolutionHeight)&&(e=getViewResolutionStr(this.applyGameParams.viewResolutionWidth,this.applyGameParams.viewResolutionHeight))&&(t.viewResolution=e),this.applyGameParams.bitRate&&(0<(e=parseInt(this.applyGameParams.bitRate))?21474e5<e&&(e=21474e5):e=-1,t.bitRate=e),this.loggerSend(loggerEventId.apply_control_power),this.saasRequest.toApplyControlPower(t,function(e,t,n,i){e&&0==n.code&&n.data?(o._applySaasConfig(n.data.config),"PooledWithoutRestart"!=n.data.apkType&&(n.data.apkType="NotPooled"),n.data.gsmAddressInfo&&(n.data.apkType="PooledWithoutRestart"),o._checkStreamInfo(n,t,"221")):(e={errorCode:n.code,errorMsg:n.msg},o._httpRequestFailed("221",t,e),o.stopGame(_objectSpread2(_objectSpread2({},e),{},{reason:applyFailReason.REQUEST_ERROR,stopByApp:stopByApp.server,interval:o._getCurrentGameDuration(o.gameStartTime)})))})}},{key:"startHangUp",value:function(e,t){var i=this;if(5==this.gGameState)return!1;var n={cid:this.cid,hangupType:1,hangupTimeSeconds:e.hangUpTime};this.bigFileInfo.firstHangUpInfo||(this.bigFileInfo.firstHangUpInfo=e),this.bigFileInfo.startCallback=t||emptyFunction,this.loggerSend(loggerEventId.start_hang_up,JSON.stringify(e)),this.saasRequest.startHuangUp(n,function(e,t,n){e&&0==n.code||i.bigFileInfo.startCallback({state:0,message:n.msg||""})})}},{key:"stopHangUp",value:function(e){var i=this;if(5==this.gGameState)return!1;var t={cid:this.cid};this.bigFileInfo.stopCallback=e||emptyFunction,this.loggerSend(loggerEventId.end_hang_up),this.saasRequest.stopHuangUp(t,function(e,t,n){e&&0==n.code&&!n.data.code||i.bigFileInfo.stopCallback({state:0,message:n.msg||""})})}},{key:"_getHangUpTime",value:function(){var r=this,e={cid:this.cid};this.gRetryTimer&&clearTimeout(this.gRetryTimer),this.loggerSend(loggerEventId.get_hang_up_time),this.saasRequest.getHangUpTime(e,function(e,t,n){if(n.errorCode)for(var i=0;i<r.setDataInfo.retryErrorcodeInfo.length;++i){var o=r.setDataInfo.retryErrorcodeInfo[i];if(n.errorCode==o.errorCode&&r.gCurrentRequestCount<o.retryMaxTimes)return r.gCurrentRequestCount++,clearTimeout(r.gRetryTimer),void(r.gRetryTimer=setTimeout(function(){r._getHangUpTime()},1e3*o.retryDelayTime))}r.gCurrentRequestCount=1,!e||0!=n.code||n.data.hangupStatusResponse.code?r._startHangUpReult({message:n.msg,flag:!1,search:!0}):r._startHangUpReult({message:n.msg,flag:!0,search:!0})})}},{key:"getBigFileList",value:function(e){if(5==this.gGameState)return!1;this.bigFileInfo.getFileListCallback=e||emptyFunction,this.loggerSend(loggerEventId.get_big_file_list),this.screenSocket.send(JSON.stringify({type:"download_file",event:"download_file_list"}))}},{key:"_startHangUpReult",value:function(e){var t={};e.flag?t=e.search?{state:1,message:""}:(this.bigFileInfo.firstHangUpInfo.Cutoff&&!this.bigFileInfo.isStartHangUp&&(this._playerRelease(),this.bigFileInfo.isStartHangUp=!0),{state:1,hangupTimeSeconds:e.hangupTimeSeconds}):(t={state:0,message:e.message||""},this.bigFileInfo.firstHangUpInfo=null),this.bigFileInfo.startCallback(t)}},{key:"_stopHangUpReult",value:function(e){var t={state:1,message:e.message||"",gameTimerOver:!1};1==e.code&&(t.gameTimerOver=!0),e.data.flag||(t.state=0,t.message=e.message||""),this.loggerSend(loggerEventId.hang_up_time_end,JSON.stringify(e)),this.bigFileInfo.stopCallback(t),this.bigFileInfo.isStartHangUp&&this._sdkRestartGame("stopHangUp"),this.bigFileInfo.isStartHangUp=!1,this.bigFileInfo.firstHangUpInfo=null}},{key:"_hangUpEndReult",value:function(e){this.loggerSend(loggerEventId.hang_up_time_end,JSON.stringify(e));var t={state:2,message:"",gameTimerOver:!1};1==e.code&&(t.gameTimerOver=!0),this.bigFileInfo.isStartHangUp&&this._sdkRestartGame("hangUpTimeEnd"),this.bigFileInfo.isStartHangUp=!1,this.bigFileInfo.firstHangUpInfo=null,this.bigFileInfo.startCallback(t)}},{key:"_applySaasConfig",value:function(e){var t=e.interactiveTalkInfo,n=e.setDataInfo;this.talkInfo=indexBy(t,"k","v"),this.setDataInfo=indexBy(n,"k","v"),this.setDataInfo.retryPingPongPeriod&&(this.setDataInfo.retryPingPongPeriod=this.setDataInfo.retryPingPongPeriod.split(",")),this.setDataInfo.customRetryConfig&&(this.setDataInfo.customRetryConfig=this.setDataInfo.customRetryConfig.split(","),this.saasRequest.setRetryCount(this.setDataInfo.customRetryConfig)),this.setDataInfo.connectSaasLinkTimeoutList?this.setDataInfo.connectSaasLinkTimeoutList=this.setDataInfo.connectSaasLinkTimeoutList.split(","):this.setDataInfo.connectSaasLinkTimeoutList=[10,15,15],this.setDataInfo.retryErrorcodeInfo?this.setDataInfo.retryErrorcodeInfo=JSON.parse(this.setDataInfo.retryErrorcodeInfo):this.setDataInfo.retryErrorcodeInfo=[],"true"==this.setDataInfo.keep_on_flow?this.setDataInfo.keep_on_flow=!0:this.setDataInfo.keep_on_flow=!1,this.saasConfig=Object.assign({},e,this.talkInfo,this.setDataInfo,indexBy(e.switchInfo,"name","enable"))}},{key:"uploadFile",value:function(n){var i=this;this.setDataInfo.cloud_rom_ack_timeout&&(this.upDataInfo.uploadDelay=Number(this.setDataInfo.cloud_rom_ack_timeout)),"function"==typeof n.onError&&(this.upDataInfo.uploadOnError=function(e,t){n.onError(e,t),i.upDataInfo.uploadStatus=0,i.upDataInfo.retryUpload=5,i.loggerSend(loggerEventId.upload_image_error),i.upDataInfo.uploadRetryTimer&&clearTimeout(i.upDataInfo.uploadRetryTimer)}),"function"==typeof n.onSuccess&&(this.upDataInfo.uploadOnSuccess=n.onSuccess),0!==this.upDataInfo.uploadStatus?(this._emit("sceneChanged","upload",this.SaasSDKTips.uploadErrorMessage[1002]),n.onError(n.opType,this.SaasSDKTips.uploadErrorMessage[1002])):(this.upDataInfo.uploadStatus=1,hasOwnProperty(n,"file")?hasOwnProperty(n,"opType")?-1===this.upDataInfo.uploadOpTypeList.indexOf(n.opType)?(this._emit("sceneChanged","upload",this.SaasSDKTips.uploadErrorMessage[1003]),this.upDataInfo.uploadOnError(n.opType,this.SaasSDKTips.uploadErrorMessage[1003])):(this.upDataInfo.uploadOpType=n.opType,5242880<n.file.size||n.file.size<1024?(this._emit("sceneChanged","upload",this.SaasSDKTips.uploadErrorMessage[1006]),this.upDataInfo.uploadOnError(n.opType,this.SaasSDKTips.uploadErrorMessage[1006])):(this.upDataInfo.uploadFile=n.file,!this.upDataSocket||this.upDataSocket.ws&&1!=this.upDataSocket.ws.readyState?(this.uploadQueue=!0,n.onError(n.opType,this.SaasSDKTips.uploadErrorMessage[10009])):this.waitUploadFile(this.upDataInfo))):(this._emit("sceneChanged","upload",this.SaasSDKTips.uploadErrorMessage[1001]),this.upDataInfo.uploadOnError(n.opType,this.SaasSDKTips.uploadErrorMessage[1001])):(this._emit("sceneChanged","upload",this.SaasSDKTips.uploadErrorMessage[1e3]),this.upDataInfo.uploadOnError(n.opType,this.SaasSDKTips.uploadErrorMessage[1e3])))}},{key:"waitUploadFile",value:function(n){var i=this;try{var e=new FileReader;e.onloadend=function(e){i.upDataInfo.uploadImgBuffer=e.target.result;var t,e=isImage(new Uint8Array(i.upDataInfo.uploadImgBuffer.slice(0,11)));-1===i.upDataInfo.uploadMimeTypeList.indexOf(e)?(i._emit("sceneChanged","upload",i.SaasSDKTips.uploadErrorMessage[1004]),i.upDataInfo.uploadOnError(n.uploadOpType,i.SaasSDKTips.uploadErrorMessage[1004])):(t={bid:i.accessKeyId,cid:i.cid,type:n.uploadOpType,code:"start",fileName:n.uploadFile.name,fileSize:i.upDataInfo.uploadImgBuffer.byteLength,mimeType:e,md5sum:cryptoJs.MD5(cryptoJs.lib.WordArray.create(i.upDataInfo.uploadImgBuffer)).toString()},i.loggerSend(loggerEventId.upload_image_start),i.upDataInfo.uploadStartTime=(new Date).valueOf(),i.upDataSocket&&i.upDataSocket.send(JSON.stringify(t))?(i.upDataInfo.uploadStatus=2,i.upDataInfo.uploadRetryTimer=setInterval(function(){if(2!==i.upDataInfo.uploadStatus)clearTimeout(i.upDataInfo.uploadRetryTimer);else if(i.upDataInfo.retryUpload<=0)i._emit("sceneChanged","upload",i.SaasSDKTips.uploadErrorMessage[1007]),i.upDataInfo.uploadOnError(n.uploadOpType,i.SaasSDKTips.uploadErrorMessage[1007]),clearTimeout(i.upDataInfo.uploadRetryTimer);else if(2===i.upDataInfo.uploadStatus){if(!i.upDataSocket.send(JSON.stringify(t)))return n.uploadOnError(n.uploadOpType,i.SaasSDKTips.uploadErrorMessage[10009]),!1;i.upDataInfo.retryUpload=i.upDataInfo.retryUpload-1}},i.upDataInfo.uploadDelay)):n.uploadOnError(n.uploadOpType,i.SaasSDKTips.uploadErrorMessage[10009]))},e.readAsArrayBuffer(n.uploadFile)}catch(e){this.upDataInfo.uploadStatus=0}}},{key:"_getCurrentGameDuration",value:function(e){e=e||this.gameStartTime;return e?((new Date).getTime()-e)/1e3:0}},{key:"_setClientTransId",value:function(){var e=getCacheGameInfo().transUid,t="",t=e?"".concat(e):(setCacheGameInfo("transUid",e=md5Encrypt(createUID((new Date).getTime())).toString()),"".concat(e));this.logger.setClientTransId(t),this.saasRequest.setClientTransId(t)}},{key:"resetInputTimer",value:function(){return 3==this.gGameState&&("X86"===this.streamType?this.player.resetInputTimer():this.inputSocket.send("resetInputTimer"),!0)}},{key:"sendWSMessage",value:function(t){var n=this;if(3==this.gGameState){if(!hasOwnProperty(t,"type")||!hasOwnProperty(t,"data"))return t&&t.callback&&t.callback(t.mid,!1,this.SaasSDKTips.SaasSDK.dataOrTypeMissed),this.loggerSend(loggerEventId.wsmessage_send_failed,"mid: ".concat(t.mid," type or data missed")),!1;if("function"==typeof t.callback?this.sendWSMessageCallback[t.type]=t.callback:this.sendWSMessageCallback[t.type]=emptyFunction,!t.mid)return this.sendWSMessageCallback[t.type]("",!1,this.SaasSDKTips.SaasSDK.midMissed),this.loggerSend(loggerEventId.wsmessage_send_failed,"mid missed"),!1;if(!this.screenSocket)return this.sendWSMessageCallback[t.type](t.mid,!1,this.SaasSDKTips.SaasSDK.socketNotConnected),this.loggerSend(loggerEventId.wsmessage_send_failed,"mid: ".concat(t.mid," ws not connected")),!1;var i=t.type;if(["clipboard","gps","intent"].indexOf(i)<0)return this.sendWSMessageCallback[t.type](t.mid,!1,this.SaasSDKTips.SaasSDK.invalidType),this.loggerSend(loggerEventId.wsmessage_send_failed,"mid: ".concat(t.mid," invalid message type: ").concat(i)),!1;if("clipboard"===i){this.loggerSend(loggerEventId.wsmessage_send_started,base64("mid: ".concat(t.mid)));var e=t.data;if(!(e instanceof Array))return this.sendWSMessageCallback[t.type](t.mid,!1,this.SaasSDKTips.SaasSDK.invalidData),this.loggerSend(loggerEventId.wsmessage_send_failed,base64("mid: ".concat(t.mid," type: ").concat(i," invalid message data"))),!1;for(var o=0;o<e.length;o++){var r=e[o];if(!hasOwnProperty(r,"itemType")||!hasOwnProperty(r,"itemData"))return this.sendWSMessageCallback[t.type](t.mid,!1,this.SaasSDKTips.SaasSDK.invalidData),this.loggerSend(loggerEventId.wsmessage_send_failed,base64("mid: ".concat(t.mid," type: ").concat(i," invalid message item"))),!1;if(1024<r.itemData.length)return this.sendWSMessageCallback[t.type](t.mid,!1,this.SaasSDKTips.SaasSDK.invalidData),this.loggerSend(loggerEventId.wsmessage_send_failed,base64("mid: ".concat(t.mid," type: ").concat(i," item length exceeded"))),!1}var s={type:i,cid:this.cid,bid:this.accessKeyId,mid:t.mid,data:{code:"paste",dataType:0,data:e}};return this.wsMessageList[s.mid]=Date.now(),this.wsMessageTimer||(this.wsMessageTimer=setInterval(function(){for(var e in n.wsMessageList)1e4<Date.now()-n.wsMessageList[e]&&(n.sendWSMessageCallback[t.type](e,!1,n.SaasSDKTips.SaasSDK.sendTimeout),delete n.wsMessageList[e],n.loggerSend(loggerEventId.wsmessage_send_failed,"mid: ".concat(t.mid," type: ").concat(i," timeout")));"{}"==JSON.stringify(n.wsMessageList)&&(clearInterval(n.wsMessageTimer),n.wsMessageTimer=null)},1e3)),this.screenSocket.send(JSON.stringify(s))}if("gps"===i)return s=t.data,/^\d+\.\d+$/.test(s.longitude)&&/^\d+\.\d+$/.test(s.latitude)?(s={type:i,cid:this.cid,bid:this.accessKeyId,mid:t.mid,data:s},this.screenSocket.send(JSON.stringify(s))):(this.sendWSMessageCallback[t.type](t.mid,!1,this.SaasSDKTips.SaasSDK.invalidData),this.loggerSend(loggerEventId.wsmessage_send_failed,"mid: ".concat(t.mid," type: ").concat(i," invalid message data")),!1);if("intent"===i)return this.loggerSend(loggerEventId.wsmessage_send_started,"mid: ".concat(t.mid)),s=t.data,s={type:i,cid:this.cid,bid:this.accessKeyId,mid:t.mid,data:s},this.wsMessageList[s.mid]=Date.now(),this.wsMessageTimer||(this.wsMessageTimer=setInterval(function(){for(var e in n.wsMessageList)1e4<Date.now()-n.wsMessageList[e]&&(n.sendWSMessageCallback[t.type](e,!1,n.SaasSDKTips.SaasSDK.sendTimeout),delete n.wsMessageList[e],n.loggerSend(loggerEventId.wsmessage_send_failed,"mid: ".concat(t.mid," type: ").concat(i," timeout")));"{}"==JSON.stringify(n.wsMessageList)&&(clearInterval(n.wsMessageTimer),n.wsMessageTimer=null)},1e3)),this.screenSocket.send(JSON.stringify(s))}return!1}},{key:"sendLogger",value:function(e,t){this.logger&&this.loggerSend(e,t)}},{key:"sendMessageToRom",value:function(e){"X86"===this.streamType&&this.player.sendInputDataToInstance?this.player.sendInputDataToInstance(e):"string"==typeof e&&this.inputSocket&&this.inputSocket.send(e)}},{key:"requestVideoFrame",value:function(e){this.VideoFrameCallbackInfo.callback=e||emptyFunction,this.VideoFrameCallbackInfo.isReuqest=!0,this.VideoFrameCallback.requestVideoFrameCallback(this.videoId)}},{key:"removeRequestVideoFrame",value:function(e){e||(this.VideoFrameCallbackInfo.isReuqest=!1),this.VideoFrameCallback.removeRequestVideoFrameCallback()}},{key:"getCapture",value:function(e){return e.zoom<=1&&.01<=e.zoom||(e.zoom=.3),this.armCapCallback=e.callback||emptyFunction,3==this.gGameState&&(this.screenSocket.send("cap:"+e.zoom),!0)}},{key:"controlPowerDistribute",value:function(e,i){var t,n,o=this,r={code:1,controlInfos:[],errorMsg:""};"object"!==typeCheck(e)?(r.errorMsg=this.SaasSDKTips.SaasSDK.paramTypeError,i&&i(r)):(t=e.cid,n=e.controlInfos,"string"!==typeCheck(t)&&"number"!==typeCheck(t)?(r.errorMsg=this.SaasSDKTips.SaasSDK.cidTypeError,i&&i(r)):"array"!==typeCheck(n)?(r.errorMsg=this.SaasSDKTips.SaasSDK.infoTypeError,i&&i(r)):(this.loggerSend(loggerEventId.x86_control_power_distribute_start),this.saasRequest.controlPowerDistribute(e,function(e,t,n){e?(0===n.code?o.loggerSend(loggerEventId.x86_control_power_distribute_succeed,JSON.stringify(n.data.controlInfos)):(r.errorMsg=n.msg||o.SaasSDKTips.SaasSDK.assignmentFailed,o.loggerSend(loggerEventId.x86_control_power_distribute_failed,JSON.stringify(n))),r.code=n.code,r.controlInfos=n.data&&n.data.controlInfos||[]):(r.errorMsg=o.SaasSDKTips.SaasSDK.assignmentFailed,o.loggerSend(loggerEventId.x86_control_power_distribute_failed,JSON.stringify(n))),i&&i(r)})))}},{key:"controlPowerQuery",value:function(e,i){var o=this,r={code:1,controlInfos:[],errorMsg:""};"string"!==typeCheck(e)&&"number"!==typeCheck(e)?(r.errorMsg=this.SaasSDKTips.SaasSDK.cidTypeError,i&&i(r)):(this.loggerSend(loggerEventId.x86_control_power_query_start),this.saasRequest.controlPowerQuery(e,function(e,t,n){e?(0===n.code?o.loggerSend(loggerEventId.x86_control_power_query_succeed,JSON.stringify(n.data.controlInfos)):(r.errorMsg=n.msg||o.SaasSDKTips.SaasSDK.queryFailed,o.loggerSend(loggerEventId.x86_control_power_query_failed,JSON.stringify(n))),r.code=n.code,r.controlInfos=n.data&&n.data.controlInfos||[]):(r.errorMsg=o.SaasSDKTips.SaasSDK.queryFailed,o.loggerSend(loggerEventId.x86_control_power_query_failed,JSON.stringify(n))),i&&i(r)}))}},{key:"captureGameImage",value:function(e,i){var o=this,r={code:1,errorMsg:""};this.loggerSend(loggerEventId.x86_capture_game_image_start),this.saasRequest.captureGameImage(e,function(e,t,n){e?(0===n.code?o.loggerSend(loggerEventId.x86_capture_game_image_succeed,JSON.stringify(n.data.controlInfos)):(r.errorMsg=n.msg||o.SaasSDKTips.SaasSDK.screenshotFailed,o.loggerSend(loggerEventId.x86_capture_game_image_failed,JSON.stringify(n))),r.code=n.code):(r.errorMsg=o.SaasSDKTips.SaasSDK.screenshotFailed,o.loggerSend(loggerEventId.x86_capture_game_image_failed,JSON.stringify(n))),i&&i(r)})}},{key:"updateStandbyDuration",value:function(e,i){var o=this,r={code:1,errorCode:"",errorMsg:""};this.loggerSend(loggerEventId.x86_update_standby_duration_start),this.saasRequest.updateStandbyDuration(e,this.cid,function(e,t,n){e?(0===n.code?o.loggerSend(loggerEventId.x86_update_standby_duration_succeed):(e={errorCode:n.errorCode,errorMsg:n.errorMsg},r=_objectSpread2(_objectSpread2({},r),e),o._httpRequestFailed("235",t,e)),r.code=n.code):(e={errorCode:"",errorMsg:o.SaasSDKTips.SaasSDK.updateStandbyDurationFailed},r=_objectSpread2(_objectSpread2({},r),e),o._httpRequestFailed("235",t,e)),i&&i(r)})}},{key:"sendInputSwitch",value:function(){this.player&&this.player.sendInputSwitch()}},{key:"enableVibrate",value:function(e){this.player&&this.player.enableVibrate&&this.player.enableVibrate(e)}},{key:"setMouseMode",value:function(e){this.player&&this.player.setMouseMode&&this.player.setMouseMode(e)}},{key:"getMouseMode",value:function(){if(this.player&&this.player.getMouseMode)return this.player.getMouseMode()}},{key:"setMouseMoveRatio",value:function(e){this.player&&0<parseFloat(e)&&this.player.setMouseMoveRatio(parseFloat(e))}},{key:"getMouseMoveRatio",value:function(){if(this.player&&this.player.getMouseMoveRatio)return this.player.getMouseMoveRatio()}},{key:"setVirtualKeys",value:function(e){this.player&&this.player.setVirtualKeys&&this.player.setVirtualKeys(e)}},{key:"getVirtualKeys",value:function(){if(this.player&&this.player.getVirtualKeys)return this.player.getVirtualKeys()}},{key:"setFullKeyboardState",value:function(e){this.player&&this.player.setFullKeyboardState&&this.player.setFullKeyboardState(e)}},{key:"getFullKeyboardState",value:function(){if(this.player&&this.player.getFullKeyboardState)return this.player.getFullKeyboardState()}},{key:"resizeAllKeysLayout",value:function(){this.player&&this.player.resizeAllKeysLayout&&this.player.resizeAllKeysLayout()}},{key:"sendDataToClipBoard",value:function(e){this.player&&this.player.sendDataToClipBoard&&this.player.sendDataToClipBoard(e)}},{key:"openMediaDevices",value:function(e,t){this.player&&this.player.openMediaDevices&&this.player.openMediaDevices(e,t)}},{key:"closeMediaDevices",value:function(e){this.player&&this.player.closeMediaDevices&&this.player.closeMediaDevices(e)}},{key:"mediaDevicesResponseNotify",value:function(e,t){this.player&&this.player.mediaDevicesResponseNotify&&this.player.mediaDevicesResponseNotify(e,t)}},{key:"cameraParamsSet",value:function(e){this.player&&this.player.cameraParamsSet&&this.player.cameraParamsSet(e)}},{key:"sendSensorData",value:function(e){return"object"===typeCheck(e)&&(e={bid:this.accessKeyId,cid:this.cid,data:e,type:"sensor"},this.screenSocket.send(JSON.stringify(e)))}},{key:"startPlayer",value:function(){if(5==this.gGameState)return!1;if(this.applyGameParams.onlyApply)this.applyGameParams.onlyApply=!1,this.sendLogger(loggerEventId.app_start_palyer);else{if(!this.pausePlayerState)return!1;this.pausePlayerState=!1}return this.startGameParams?(this._startGame(this.startGameParams),this.startGameParams=null):this._sdkRestartGame("startPalyer"),!0}},{key:"pausePlayer",value:function(){return 3==this.gGameState&&(this.pausePlayerState=!0,this.isGameStarted=void 0,this.pauseGame("pause"),this._emit("sceneChanged","pauseGame"),!0)}},{key:"removeCacheCid",value:function(){setCacheGameInfo("cid","")}},{key:"_httpRequestFailed",value:function(e,t,n,i){n={errorCode:n.errorCode,errorMsg:n.errorMsg,httpStatusCode:t.statusCode,httpMsg:t.message,timeoutMS:t.timeout,retryRequestCount:t.retryRequestCount};i&&isObject$2(i)&&(n=_objectSpread2(_objectSpread2({},n),i));this.loggerSend(loggerEventId[{104:"get_did_failed",108:"get_config_failed",211:"get_stream_info_failed",202:"release_cid_failed",201:"cloud_service_start",112:"get_game_archive_status",113:"game_archived",217:"check_playing_game",221:"check_playing_game",235:"x86_update_standby_duration_failed"}[e]],n)}},{key:"getMouseCoordinate",value:function(){if(this.player&&this.player.getCurrentMouseCoordinate)return this.player.getCurrentMouseCoordinate()}}]),t}();function listenObjectChange(t,i){var n;return"function"!=typeof Proxy?(n={},Object.defineProperty(t,"Obj",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){n=e,i(t)}}),t):new Proxy(t,{set:function(e,t,n){return e[t]=n,i(e),!0}})}var KeyCodeToName={"-2":"FIRE",8:"Back",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",20:"Caps",32:"",33:"PgUp",34:"PgDn",35:"End",36:"Home",37:"",38:"",39:"",40:"",45:"Ins",46:"Del",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"WIN",92:"WIN",96:"S0",97:"S1",98:"S2",99:"S3",100:"S4",101:"S5",102:"S6",103:"S7",104:"S8",105:"S9",106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"",190:"",191:"?",192:"~",219:"[",220:"|",221:"]",222:"",888:"JOYPAD",9999:""},CanNotKeyCodeToName={112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Lock",145:"ScLo",93:"Menu",27:"Esc"},KeyType={normal:0,trace:1,stick:2,fire:3,sight:4,gravity:5,Mind:7,RClick:8,fn:6,space:9,gesture:10};function BtnBoxGroup(e){return"<div class=\"KeyBtnBox_SHOW\">\n                <svg id='svgLine_SHOW' style='position:absolute; top:0; left:0;' height='100%' width='100%'>\n                    <defs>\n                        <marker id='markerArrow_end_SHOW' markerWidth='13' markerHeight='13' refx='6' refy='3' orient='auto'>\n                            <path d='M3,0 L6,3 L3,6 L3,0' style='fill:rgba(255,255,255,0.7); opacity:1' />\n                        </marker>\n                    </defs>\n                </svg>\n            </div>\n            <div class=\"KeyBtnBox_SET\">\n                <svg id='svgLine_SET' style='position:absolute; top:0; left:0;' height='100%' width='100%'>\n                    <defs>\n                        <marker id='markerArrow_start_SET' markerHeight='10' markerWidth='10' orient='auto' refx='0' refy='3' >\n                            <path d='M3,0 L0,3 L3,6 L3,0' style='fill:rgba(255,255,255,0.7); opacity:1' />\n                        </marker>\n                        <marker id='markerArrow_end_SET' markerWidth='13' markerHeight='13' refx='6' refy='3' orient='auto'>\n                            <path d='M3,0 L6,3 L3,6 L3,0' style='fill:rgba(255,255,255,0.7); opacity:1' />\n                        </marker>\n                    </defs>\n                </svg>\n            </div>\n            <div class=\"HMPopBox\">\n                <div class=\"HMwaiting\">\n                    <div class=\"waiting\">\n                        <em></em><em></em><em></em>\n                        <div class=\"notice\">".concat(e.loading,'</div>\n                    </div>\n                </div>\n                <div class="configrm_box">\n                    <div class="configrm_icon">\n                        <a class="icon warn" href="javascript:;"></a>\n                    </div>\n                    <div class="wordInfo"></div>\n                    <div class="btns"><div class="queue_confirm">').concat(e.continue,'</div><div class="cancle_btn">').concat(e.cancel,'</div></div>\n                </div>\n                <div class="toastMessage">\n                    <div>\n                        <a class="icon warn" href="javascript:;"></a>\n                    </div>\n                    <div class="wordInfo"></div>\n                </div>\n            </div>\n        ')}function key_SetHtmlFn(e,t){return'<div class="Key_SET_btns HmDrages">\n                <div class="operationBox">\n                    <div class="programmeBox">\n                        <div class="programmeName">\n                            <p class="programmeNameText"></p><span class="select_programmeName_icon"></span>\n                        </div>\n                        <div class="programmeList">\n                        </div>\n                    </div>\n                    <div class="opacityBox">\n                        <div style="cursor:pointer;">'.concat(t.transparency,'</div>\n                        <div class="opacityShowBox">\n                            <div class="opacityValue"></div>\n                            <div class="opacityValueLineBox">\n                                <div class="opacityValueLine">\n                                    <div class="opacityValueShow"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="keyboardUnabletoBox">\n                        <input type="button" class="keyboardUnabletoUse" value="').concat(t.guide,'" />\n                    </div>\n                    <div class="saveBox">\n                        <input type="button" class="keyboardClose btn" value="').concat(t.close,'" />\n                        <input type="button" class="keyboardSave btn" value="').concat(t.save,'" />\n                    </div>\n                </div>\n                <div class="keyBtnBox">\n                    <div class="btnbox joypadBg">\n                        <span  titles="').concat(t.dragArrow,'" class="titles dragSpecial HmDrages type_').concat(KeyType.stick,'" data-key_type="').concat(KeyType.stick,'" data-key_code="888">\n                            <b class="btnTooltip">').concat(t.controlDirection,'</b>\n                        </span>\n                    </div>\n                    <div class="btnbox keyprompt_imgBg">\n                        <span class="keyprompt_img titles" titles="').concat(t.clickScreen,'"></span>\n                    </div>\n                    <div class="btnbox sightBg titles" titles=\'').concat(e?"":t.experienceReticle,"'>\n                       ").concat(e?'<span  titles="'.concat(t.dragShooter,'" tabindex="1" class="dragSpecial HmDrages titles type_').concat(KeyType.sight,'" data-key_type="').concat(KeyType.sight,'" data-key_code="192">\n                            <div class="sensitiveShowBox">\n                                <div class="sensitiveValue">30%</div>\n                                <div class="sensitiveValueLineBox">\n                                    <div class="sensitiveValueLine">\n                                        <div class="sensitiveValueShow"></div>\n                                    </div>\n                                </div>\n                                <div class="sensitiveText">').concat(t.sensitivity,'</div>\n                            </div>\n                            <span class="sightInput">\n                                <i class="textBtn" contentEditable="false">~</i>\n                            </span>\n                            <b class="btnTooltip">').concat(t.enterKeysControlGame,"</b>\n                        </span>"):"",'\n                    </div>\n                    <div class="btnbox fireBg titles" titles=\'').concat(e?"":t.experienceFire,"'>\n                       ").concat(e?'<span  titles="'.concat(t.dragFire,'" class="titles dragSpecial HmDrages type_').concat(KeyType.fire,'" data-key_type="').concat(KeyType.fire,'" data-key_code="-2">\n                            <b class="btnTooltip">').concat(t.leftFire,"</b>\n                        </span>"):"",'\n                    </div>\n                    <div class="btnbox RightClickBg">\n                        <span  titles="').concat(t.dragDirection,'" class="titles dragSpecial HmDrages type_').concat(KeyType.RClick,'"  data-key_type="').concat(KeyType.RClick,'" data-key_code="9999" name="RClick">\n                            <b class="btnTooltip">').concat(t.rightControl,'</b>\n                        </span>\n                    </div>\n                    <div class="btnbox mindBg">\n                        <span  titles="').concat(t.dragSkill,'" class="titles dragSpecial HmDrages type_').concat(KeyType.Mind,'" data-key_type="').concat(KeyType.Mind,'">\n                        </span>\n                    </div>\n                    <div class="btnbox gestureBg">\n                        <span  titles="').concat(t.gesture,'" class="titles dragSpecial HmDrages type_').concat(KeyType.gesture,'" data-key_type="').concat(KeyType.gesture,'">\n                            <b class="btnTooltip">').concat(t.swipeBtn,'</b>\n                        </span>\n                    </div>\n                </div>\n                <div class="tipSwitch">\n                    <div class="check_tip_box">\n                        <div class="check_box selected"></div>\n                        <div class="check_tip">').concat(t.turnOnReminders,'</div>\n                    </div>\n                    <div class="explain">\n                        <input type="button" class="keyboardClear" value="').concat(t.clearAll,'" />\n                        <input type="button" class="keyboardReset" value="').concat(t.reset,'" />\n                    </div>\n                </div>\n            </div>\n            <div class="sdkPopBox">\n                <div class="changeProgrammeName ProgrammeChangeBox">\n                    <span class="closeSdkPopBox"></span>\n                    <p class="changeName_P">').concat(t.saveNewPlan,'</p>\n                    <div class="ProgrammeNameInput">\n                        <input type="text" class="changeProgrammeInput">\n                    </div>\n                    <div class="ProgrammeNameBtn">\n                        <div class="notsaveProgrammeName ProgrammeNameBtn1">').concat(t.notSave,'</div>\n                        <div class="ProgrammeNameBtnline"></div>\n                        <div class="saveProgrammeName ProgrammeNameBtn2">').concat(t.save,'</div>\n                    </div>\n                </div>\n                <div class="addProgrammeName ProgrammeChangeBox">\n                    <span class="closeSdkPopBox"></span>\n                    <p class="changeName_P">').concat(t.newProjectName,'</p>\n                    <div class="ProgrammeNameInput">\n                        <input type="text" class="newProgrammeName" >\n                    </div>\n                    <div class="ProgrammeNameBtn">\n                        <div class="addsaveProgrammeBtnNot ProgrammeNameBtn1">').concat(t.notSave,'</div>\n                        <div class="ProgrammeNameBtnline"></div>\n                        <div class="addsaveProgrammeBtnYes ProgrammeNameBtn2">').concat(t.save,'</div>\n                    </div>\n                </div>\n                <div class="saveProgramme ProgrammeChangeBox">\n                    <span class="closeSdkPopBox"></span>\n                    <p class="editName_P" style="margin: 20px 0 40px;text-align: center;">').concat(t.saveChange,'</p>\n                    <div class="ProgrammeNameBtn">\n                        <div class="saveProgrammeBtnNot ProgrammeNameBtn1">').concat(t.notSave,'</div>\n                        <div class="ProgrammeNameBtnline"></div>\n                        <div class="saveProgrammeBtnYes ProgrammeNameBtn2">').concat(t.save,'</div>\n                    </div>\n                </div>\n                <div class="resetProgramme ProgrammeChangeBox">\n                    <span class="closeSdkPopBox"></span>\n                    <p class="changeName_P resetProgrammeText" style="margin: 20px 0 40px;text-align: center;">').concat(t.defaultPlan,'</p>\n                    <div class="ProgrammeNameBtn">\n                        <div class="resetProgrammeBtnNot ProgrammeNameBtn1">').concat(t.cancel,'</div>\n                        <div class="ProgrammeNameBtnline"></div>\n                        <div class="resetProgrammeBtnYes ProgrammeNameBtn2">').concat(t.restore,'</div>\n                    </div>\n                </div>\n            </div>\n            <div class="keyboard_mask">\n            <div class="hmw_dialog">\n                <div class="hmw_head">\n                    <div class="hmw_close">x</div>\n                    <div class="hmw_title">').concat(t.description,'</div>\n                </div>\n                <div class="hmw_body ').concat(t.guideImgName,'">\n                    <p class="img1" style="display:block;"></p>\n                    <p class="img2"></p>\n                    <p class="img3"></p>\n                    <p class="img4"></p>\n                    <p class="img5"></p>\n                </div>\n                <div class="hmw_foot"><span class="active" data-index="0">').concat(t.arrowKeys,'</span><span data-index="1">').concat(t.customButton,'</span><span data-index="2">').concat(t.rightWalk,'</span><span data-index="3">').concat(t.smartCasting,'</span><span data-index="4">').concat(t.frontSightFire,"</span>\n                </div>\n            </div>\n        </div>\n        ")}var UIView=function(){function o(e,t,n,i){_classCallCheck(this,o),this.wrap=e,this.isInited=!1,this.options=t,this.UserKeyList=[],this.UIModel=n,this.UIViewTips=i.UIView,KeyCodeToName[32]=this.UIViewTips.space,KeyCodeToName[9999]=this.UIViewTips.right,this.isGameStop=!1,this.gInUseInfo={InUseResolutionId:0,testedBitrate:-1,curResId:0,preResId:0,resList:[],resNameMap:{},minBitrate:0,isAutoResolutionChanged:!1,isResolutionChanging:!1,resolutionChangeStartTime:null},this.keyScaling=1,this.keyScalingCriticalSize=1920,this.keyboardOpacity=.7,this.sightCode=192,this.isDelayFull=!0,this.KeyInitObj={type0:{width:48,fontSize:14,tips:"",color:"#fff"},type2:{width:138,fontSize:14,tips:"",color:"#fff"},type3:{width:85,fontSize:14,tips:"",color:"#fff"},type4:{width:140,fontSize:14,tips:"",color:"#fff"},type7:{width:68,fontSize:14,tips:"",color:"#fff"},type8:{width:138,fontSize:14,tips:"",color:"#fff"},type9:{width:48,fontSize:14,tips:"",color:"#fff"},type10:{width:48,endEditWidth:28,endWidth:11,fontSize:14,tips:"",color:"#fff"}};e=$(this.wrap)[0];this.FullScarn=e.requestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen,this.compressionRatio=9/16,this.isEditKey=!1,this.havePointerLock="pointerLockElement"in document,this.saasConfig={},this.init()}return _createClass(o,[{key:"init",value:function(){this.addKeyPositionBox(),this.addToolbar()}},{key:"_emit",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];eventEmitter.emit.apply(eventEmitter,[e].concat(n))}},{key:"setInfoApply",value:function(e,t,n){this.saasConfig=e,n&&(this.streameType=n),this.InitGetKeyboardOpacity(),this.setHMPopBoxImage(),this.listenGWin(),"reset"==t&&(this.compressionRatio=this.UIModel.compressionRatio,$(".KeyPositionBox").css({paddingTop:100*this.compressionRatio+"%"}),this.addToolbar())}},{key:"setResolutionSelected",value:function(e){this.addToolbar(e.selected)}},{key:"changeResolutionText",value:function(e){$(".resolution_btn.selected").html($(".resolution_btn[data-id="+e.id+"]").html())}},{key:"removeListenGWin",value:function(){$(document).off("click", ".fullscreen_btn"),$(document).off("click", ".delayFullBtn"),$(document).off("click", ".resolution_btns_menu .resolution_btn"),$(document).off("click", ".keyboardSave"),$(document).off("click", ".programmeName"),$(document).off("click", ".programmeList .programmeList_Name p"),$(document).off("click", ".newProgramme"),$(document).off("click", ".check_tip_box"),$(document).off("click", ".addsaveProgrammeBtnNot"),$(document).off("click", ".addsaveProgrammeBtnYes"),$(document).off("click", ".closeSdkPopBox"),$(document).off("click", ".deleatProgramme"),$(document).off("click", ".keyboardClear"),$(document).off("click", ".keyboardReset"),$(document).off("click", ".resetProgrammeBtnNot"),$(document).off("click", ".resetProgrammeBtnYes"),$(document).off("click", ".keyboardUnabletoUse"),$(document).off("click", ".hmw_dialog .hmw_close"),$(document).off("click", ".hmw_dialog .hmw_foot span"),$(document).off("click", ".keyboardClose"),$(document).off("click", ".saveProgrammeBtnNot,.notsaveProgrammeName"),$(document).off("click", ".saveProgrammeBtnYes"),$(document).off("click", ".saveProgrammeName"),$(document).off("click",".keyboard_setting"),$(document).off("click",".resolution_btns"),$(document).off("click",".resolution_btns_menu .resolution_btn")}},{key:"listenGWin",value:function(){var o,n,r=this;this.isInited||(this.isInited=!0,$(document).on("click",".keyboard_setting",function(){return r.ShowkeyMouse()}),$(document).on("click",".webFullScreen_btn",function(){return r.webPageFullScreenFn()}),$(document).on("click",".fullscreen_btn",function(){return r.fullScreenFn()}),$(document).on("click",".delayFullBtn",function(){return r.showDelayData()}),$(window).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(e){var t;isIE10()||(t=document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.fullscreenElement||document.msFullscreenElement,r.FullScarn&&!t?$(r.wrap).hasClass("exit")&&($(document).off("mousemove"),$(".fullscreen_btn").attr("title",r.UIViewTips.fullScreen),$(".delayDataFullShow").hide(500),$(r.wrap).removeClass("exit"),r.UIModel.resizeDone()):($(r.wrap).addClass("exit"),r.isDelayFull&&$(".delayDataFullShow").show(500),$(".fullscreen_btn").attr("title",r.UIViewTips.exitFullScreen)))}),$(this.wrap).on("contextmenu",function(e){e.preventDefault()}),$(document).on("click",".resolution_btns",function(){r.UIModel.isChangeResolution||($(".KeyBtnBox_SET").isShow()?r.showHMToast(r.UIViewTips.completeSet,".KeyBtnBox_SET"):$(".resolution_btns_menu").show())}),$(document).on("click",".resolution_btns_menu .resolution_btn",function(e){$(e.target).hasClass("disable")||(r.switchResolution($(e.target).attr("data-id"),$(e.target).html()),$(".resolution_btns_menu").hide())}),$(document).on("click",".keyboardSave",function(){var e=r.UIModel.hasChange();if(r.changeKeyList&&!e)r.changeKeyList=!1,r.hideEditKeyAndSave();else if(e){for(var e=r.UIModel.getMapList(),t=[],n=(e.map(function(e){e.keysName&&t.push(e.keysName)}),""),i=1;i<6;i++)if(t.indexOf(mixTips(r.UIViewTips.customPlan,[i]))<0){n=mixTips(r.UIViewTips.customPlan,[i]);break}0==e.length?(r.fast_keys=!0,$(".newProgramme").trigger("click")):r.UserKeyList.default?5<=r.userCustomKeysNameLength?r.showHMToast(r.UIViewTips.onlySave5,".KeyBtnBox_SET","editKey"):($(".sdkPopBox").show(),$(".changeProgrammeName .changeName_P").html(mixTips(r.UIViewTips.saveNewPlan,[r.UserKeyList.keysName])),$(".changeProgrammeInput").val(n),$(".changeProgrammeName").show()):$(".saveProgrammeBtnYes").trigger("click")}else r.closeKeyBoard()}),$(document).on("click",".programmeName",function(){$(".programmeList").isShow()?($(".programmeName").removeClass("select"),$(".programmeList").hide()):($(".programmeName").addClass("select"),$(".programmeList").show())}),$(document).on("click",function(e){$(e.target).parents(".programmeBox").hasClass("programmeBox")||($(".programmeName").removeClass("select"),$(".programmeList").hide()),!$(e.target).hasClass("resolution_btn")&&$(".resolution_btns_menu").isShow()&&$(".resolution_btns_menu").hide()}),$(document).on("click",".programmeList .programmeList_Name p",function(e){r.changeKeyList=!0;var e=$(e.target).parent().attr("data-index"),t=($(".programmeList .programmeList_Name").show(),$(".programmeList .programmeList_Name").eq(e).hide(),r.UIModel.switchKeyMap(e,!1),$(".programmeName").removeClass("select"),$(".programmeList").hide(),r.UIModel.getMapList());$(".programmeNameText").html(t[e].keysName)}),$(document).on("click",".newProgramme",function(){$(".sdkPopBox").show(),$(".addProgrammeName").show()}),$(document).on("click",".addsaveProgrammeBtnNot",function(){$(".closeSdkPopBox").trigger("click"),$(".newProgrammeName").val("")}),$(document).on("click",".addsaveProgrammeBtnYes",function(){var e;$(".newProgrammeName").val().trim()?(e=$(".newProgrammeName").val().trim().replace(/\s+/g,""),r.fast_keys||(r.UserKeyList=null),r.UIModel.setKeyMapList("add",e,function(e){e.Success?($(".closeSdkPopBox").trigger("click"),r.fast_keys?($(".keyboardSave").trigger("click"),r.fast_keys=!1):$(".newProgrammeName").val("")):r.showHMToast(e.message,".KeyBtnBox_SET","editKey")},r.UserKeyList)):r.showHMToast(r.UIViewTips.pleaseInput,".KeyBtnBox_SET","editKey")}),$(document).on("click",".closeSdkPopBox",function(e){$(".sdkPopBox").hide(),$(".sdkPopBox > div").hide(),$(".newProgrammeName").val(""),$(".changeProgrammeInput").val("")}),$(document).on("click",".deleatProgramme",function(e){e=$(e.target).parent().attr("data-index");r.UIModel.setKeyMapList("delete",e,function(e){r.addProgrammeList()})}),$(document).on("click",".keyboardClear",function(){r.UIModel.setKeyBtn("empty")}),$(document).on("click",".keyboardReset",function(){r.UserKeyList.default?$(".resetProgrammeText").html(r.UIViewTips.defaultPlan):$(".resetProgrammeText").html(r.UIViewTips.lastSavePlan),$(".sdkPopBox").show(),$(".resetProgramme").show()}),$(document).on("click",".resetProgrammeBtnNot",function(){$(".closeSdkPopBox").trigger("click")}),$(document).on("click",".resetProgrammeBtnYes",function(){$(".closeSdkPopBox").trigger("click"),r.UIModel.setKeyBtn("reset"),r.UIModel.sendCountly(loggerEventId.keyboard_setting_reset)}),$(document).on("click",".keyboardUnabletoUse",function(){$(".keyboard_mask").show()}),$(document).on("click",".hmw_dialog .hmw_close",function(){$(".keyboard_mask").hide()}),$(document).on("click",".hmw_dialog .hmw_foot span",function(e){$(".hmw_foot span").removeClass("active"),$(e.target).addClass("active"),$(".hmw_dialog .hmw_body p").hide(),$(".hmw_dialog .hmw_body p").eq($(e.target).attr("data-index")).show()}),$(document).on("click",".keyboardClose",function(){!r.UserKeyList.keys||r.UserKeyList.default?r.UIModel.hasChange()&&r.UserKeyList.length?$(".keyboardSave").trigger("click"):r.hideEditKeyNotSave():($(".sdkPopBox").show(),$(".saveProgramme").show())}),$(document).on("click",".saveProgrammeBtnNot,.notsaveProgrammeName",function(){$(".closeSdkPopBox").trigger("click"),r.hideEditKeyNotSave()}),$(document).on("click",".saveProgrammeBtnYes",function(){r.UserKeyList.keysName?r.hideEditKeyAndSave():($(".sdkPopBox").show(),$(".saveProgramme").hide(),$(".addProgrammeName").show(),r.fast_keys=!0)}),$(document).on("click",".saveProgrammeName",function(e){var t;$(".changeProgrammeInput").val().trim()?(t=$(".changeProgrammeInput").val().trim().replace(/\s+/g,""),r.UIModel.setKeyMapList("add",t,function(e){e.Success?($(".changeProgrammeInput").val(""),$(".keyboardSave").trigger("click")):r.showHMToast(e.message,".KeyBtnBox_SET","editKey")},r.UserKeyList),$(".closeSdkPopBox").trigger("click")):r.showHMToast(r.UIViewTips.pleaseInput,".KeyBtnBox_SET","editKey")}),o=0,$(document).on("mousedown",".sensitiveValueShowEvent",function(e){var t=e||window.event,n=t.clientY-$(".sensitiveValueLineEvent")[0].offsetTop,i=0;$(".sensitiveShowBoxEvent")[0].onmousemove=function(e){t.stopPropagation();e=e||window.event;(o=$(".sensitiveValueLineBoxEvent").height()-(e.clientY-n))<.75?o=.75:o>$(".sensitiveValueLineBoxEvent").height()&&(o=$(".sensitiveValueLineBoxEvent").height()),i=parseInt(o/$(".sensitiveValueLineBoxEvent").height()*100),$(".sensitiveValueLineEvent").height(o),$(".sensitiveValueEvent").html(i+"%"),window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()},$(".sensitiveShowBoxEvent")[0].onmouseup=function(e){r.ModelSetKeyBtn("parame",{sightScale:i}),$(".sensitiveShowBoxEvent")[0].onmousemove=null},$(".sensitiveShowBoxEvent")[0].onmouseleave=function(e){r.ModelSetKeyBtn("parame",{sightScale:i}),$(".sensitiveShowBoxEvent")[0].onmousemove=null}}),n=0,$(document).on("mousedown",".opacityValueShow",function(e){var e=e||window.event,t=e.clientY-$(".opacityValueLine")[0].offsetTop;e.stopPropagation(),$(".opacityShowBox")[0].onmousemove=function(e){e=e||window.event;(n=$(".opacityValueLineBox").height()-(e.clientY-t))<0?n=0:n>$(".opacityValueLineBox").height()&&(n=$(".opacityValueLineBox").height()),$(".opacityValueLine").height(n),$(".opacityValue").html(parseInt(n/$(".opacityValueLineBox").height()*100)+"%"),window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),r.keyboardOpacity=parseInt($(".opacityValue").text())/100,$(".KeyBtnBox_SHOW span").css({opacity:r.keyboardOpacity}),r.localStorageSaveKeyboardOpacity()},$(".opacityShowBox")[0].onmouseup=function(e){$(".opacityShowBox")[0].onmousemove=null},$(".opacityShowBox")[0].onmouseleave=function(e){$(".opacityShowBox")[0].onmousemove=null}}),$(document).on("click",".SHOWbox_SpecialBtn .close_btn_i",function(e){e=e.target||e.srcElement;r.ModelSetKeyBtn("delete",$(e).parent(),"resize")}),$(document).on("click",".custom_key .close_btn_i",function(e){e=e.target||e.srcElement;1==$(".KeyBtnBox_SET .Mindbtn").length&&$(e).parent().hasClass("Mindbtn")&&setTimeout(function(){r.ModelSetKeyBtn("delete",$(".KeyBtnBox_SET .spaceBtn"))},10),r.ModelSetKeyBtn("delete",$(e).parent())}),$(document).on("dblclick",".custom_key",function(e){e=e.target||e.srcElement;$(e).hasClass("custom_key")||(e=$(e).parents(".custom_key")),$(e).hasClass("spaceBtn")||r.ModelSetKeyBtn("delete",$(e))}),$(document).on("mouseenter",".KeyBtnBox_SET .custom_key,.KeyBtnBox_SET .SHOWbox_SpecialBtn.type_4",function(){$(this).focus()}),$(document).on("mouseleave",".KeyBtnBox_SET .custom_key,.KeyBtnBox_SET .SHOWbox_SpecialBtn.type_4",function(){$(this).blur()}),$(document).on("click",".check_tip_box",function(){$(".check_box").hasClass("selected")?(r.ShowOrHideBtn(!1),localStorage.setItem("showBtn",!1)):(localStorage.setItem("showBtn",!0),r.ShowOrHideBtn(!0))}))}},{key:"toolbarListen",value:function(){var n,i,o,r=this;this.options.toolbarDomId||($(this.wrap).off("mousemove"),i=n=null,o=!1,$(this.wrap).on("mousemove",function(e){var t,e=e.clientY;$(r.wrap).hasClass("exit")?(t=window.innerHeight)-e<=15?(clearTimeout(i),clearTimeout(n),n=setTimeout(function(){o=!0,$(r.wrap).hasClass("exit")&&$(r.wrap).find(".toolbar").css("bottom","0")},500)):40<=t-e&&o&&(clearTimeout(i),clearTimeout(n),i=setTimeout(function(){o=!1,$(r.wrap).hasClass("exit")&&$(r.wrap).find(".toolbar").css("bottom","-40px")},1e3)):($(r.wrap).off("mousemove"),clearTimeout(i))}))}},{key:"hideEditKeyAndSave",value:function(){var t=this;this.UIModel.hideEditKeyAndSave(function(e){$(".closeSdkPopBox").trigger("click"),e.success?t.isEditKey=!1:t.showHMToast(e.message,".KeyBtnBox_SET","editKey")})}},{key:"hideEditKeyNotSave",value:function(){this.isEditKey=!1,this.UIModel.hideEditKeyNotSave()}},{key:"closeKeyBoard",value:function(){this.isEditKey=!1,this.UIModel.hideEditKeyNotSave(),$(".KeyBtnBox_SET").hide(),$(".KeyBtnBox_SHOW").show()}},{key:"localStorageSaveKeyboardOpacity",value:function(){var e,t={},n=this.options.pkgName;t[n]=this.keyboardOpacity,localStorage.keyboardOpacity?((e=JSON.parse(localStorage.keyboardOpacity))[n]=this.keyboardOpacity,localStorage.keyboardOpacity=JSON.stringify(e)):localStorage.keyboardOpacity=JSON.stringify(t)}},{key:"showHMToast",value:function(e,t,n){var i;this.options.isHideToolBar&&"editKey"!=n||("editKey"==n&&(n=!1),this.wrap&&e&&((i=t&&"X86"!=this.streameType?$(t):$(this.wrap)).find(".HM_toast").remove(),i.prepend("<div class='HM_toast ".concat(n?"C_ccc":"","'>").concat(e,"</div>")),setTimeout(function(){i.find(".HM_toast").first().fadeOut(function(){$(this).remove()})},3e3)))}},{key:"setDelayDataTooBar",value:function(e){var t="",n="";5<parseInt(e.packetsLost)?n="#FF5050":parseInt(e.packetsLost)<1&&(n="#6EFF7D"),200<parseInt(e.delay)?t="#FF5050":parseInt(e.delay)<100&&(t="#6EFF7D"),$(".delayDataTooBar .delayNode").html("".concat(this.UIViewTips.delay,'<i style="color:').concat(t,';">').concat(e.delay,"ms</i>")),$(".delayDataTooBar .lostPackets").html("".concat(this.UIViewTips.packetLoss,'<i style="color:').concat(n,';">').concat(e.packetsLost,"%</i>")),$(".delayDataFullShow .delayNode").html("".concat(this.UIViewTips.delay,'<i style="color:').concat(t,';">').concat(e.delay,"ms</i>")),$(".delayDataFullShow .lostPackets").html("".concat(this.UIViewTips.packetLoss,'<i style="color:').concat(n,';">').concat(e.packetsLost,"%</i>"))}},{key:"setHMPopBoxImage",value:function(){var e,t="";try{this.saasConfig?this.saasConfig.introImageInfo&&0<this.saasConfig.introImageInfo.length&&this.saasConfig.introImageInfo[0].url&&(t=this.saasConfig.introImageInfo[0].url):!this.options.backgroundUrl||"jpg"!==(e=this.options.backgroundUrl.split(".").pop().toLowerCase())&&"png"!==e||(t=this.options.backgroundUrl)}catch(e){}t&&$(".HMPopBox").css({backgroundImage:"url(".concat(t,")")})}},{key:"showLoading",value:function(e){this.options.isHideToolBar||(e?(this.UIModel.sendCountly(loggerEventId.show_loading_view),$(".HMPopBox").show(),$(".HMPopBox >div").hide(),$(".HMPopBox .HMwaiting").show()):(this.UIModel.sendCountly(loggerEventId.hide_loading_view),this.hideLoading()))}},{key:"hideLoading",value:function(){$(".HMPopBox").hide(),$(".HMPopBox >div").hide()}},{key:"showGameOver",value:function(e){this.options.isHideToolBar||($(".HMPopBox").isShow()||$(".HMPopBox").show(),$(".HMPopBox >div").hide(),$(".HMPopBox .toastMessage .wordInfo").html(e),this.UIModel.sendCountly(loggerEventId.show_error_page,encodeURIComponent(e)),$(".HMPopBox .toastMessage").show())}},{key:"showToastMessage",value:function(e){this.options.isHideToolBar||($(".HMPopBox").isShow()||$(".HMPopBox").show(),$(".HMPopBox >div").hide(),$(".HMPopBox .toastMessage").show(),$(".HMPopBox .toastMessage .wordInfo").html(e),this.UIModel.sendCountly(loggerEventId.show_error_page,encodeURIComponent(e)))}},{key:"showToastFlash",value:function(e){this.options.isHideToolBar||($(".HMPopBox").isShow()||$(".HMPopBox").show(),$(".HMPopBox").append('<div class="flashToastBox">\n            <div class="flashTextBox">\n                <span>'.concat(e||this.UIViewTips.flashDisable,'</span>\n            </div>\n            <a class="flashCloseBtn"></a>\n            <div class="flahsDownloadBtn">\n                <a href="http://www.adobe.com/go/getflash" target="_blank">').concat(this.UIViewTips.clickOpen,"</a>\n            </div>\n            </div>")),$(".flashCloseBtn").on("click",function(){$(".flashToastBox").hide()}))}},{key:"showConfigrm",value:function(e){this.options.isHideToolBar||this.wrap&&e&&(e=Object.assign({},{message:"",btnName1:this.UIViewTips.continue,btnName2:this.UIViewTips.cancel,hasCancleBtn:!1,hsaIcon:!1,configrm:function(){},cancle:function(){}},e),$(".HMPopBox >div").hide(),$(".HMPopBox .configrm_box").show(),e.hasCancleBtn?$(".HMPopBox .configrm_box .btns .cancel").show():$(".HMPopBox .configrm_box .btns .cancel").hide(),e.hsaIcon?($(".HMPopBox .configrm_box .configrm_icon").show(),$(".HMPopBox .configrm_box .btns").hide()):($(".HMPopBox .configrm_box .configrm_icon").hide(),$(".HMPopBox .configrm_box .btns").show()),$(".HMPopBox .configrm_box .wordInfo").html(e.message),$(".HMPopBox .configrm_box .wordInfo").html(e.message),$(".HMPopBox .configrm_box .btns .queue_confirm").html(e.btnName1),$(".HMPopBox .configrm_box .btns .cancel").html(e.btnName2),$(".HMPopBox").off("click",".queue_confirm").on("click",".queue_confirm",function(){$(".HMPopBox").hide(),e.configrm()}),$(".HMPopBox").off("click",".cancle_btn").on("click",".cancle_btn",function(){$(".HMPopBox").hide(),e.cancle()}))}},{key:"InitGetKeyboardOpacity",value:function(){var e,t=this.options.pkgName;localStorage.keyboardOpacity&&(e=JSON.parse(localStorage.keyboardOpacity))[t]?this.keyboardOpacity=e[t]:this.keyboardOpacity=this.options.keyboardOpacity||this.saasConfig.keyboardOpacity||this.keyboardOpacity,this.localStorageSaveKeyboardOpacity()}},{key:"addKeyPositionBox",value:function(){var e=BtnBoxGroup(this.UIViewTips),e=($(".KeyBtnBox_SHOW").size()||$(".KeyPositionBox").append(e),key_SetHtmlFn(this.havePointerLock,this.UIViewTips));$(".KeyBtnBox_SET").append(e)}},{key:"addProgrammeList",value:function(){var i=this,e=($(".programmeList").empty(),this.UIModel.getMapList()),o=0;this.userCustomKeysNameLength=0,e.map(function(e,t){var n="";e.selected&&(o=t,n="select"),e.default||i.userCustomKeysNameLength++,$(".programmeList").append("<div class=programmeList_Name "+n+" data-index="+t+"><p>"+e.keysName+"</p>"+(e.default?"":"<span class=deleatProgramme></span>")+"</div>")}),$(".programmeList .programmeList_Name").eq(o).hide(),$(".programmeNameText").html(e[o]?e[o].keysName:""),this.userCustomKeysNameLength<5&&$(".programmeList").append("<div class=newProgramme>".concat(this.UIViewTips.newPlan,"</div>")),$(".programmeList").hide(),$(".programmeName").removeClass("select")}},{key:"addToolbar",value:function(n){var i=this,e=($(".KeyPositionBox .player-toolbar.toolbar").remove(),""),o=(this.streameType&&"X86"!=this.streameType&&(e=1==this.saasConfig.toolbarKeyboardButtonHidden||!0===this.options.isIgonreKeyboardEvent?"":'<a class=keyboard_setting title="'.concat(this.UIViewTips.simulation,'"><img class="keyboard_icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAEAAAAABHXVY9AAAAo0lEQVQ4Eb2T2w2AIAxFxTiROgZhDWdyDcIY6kroJblJIfChVU2aFmxPH6QmhLB1L34DWDHG45JdwzXGTJeMBO7OuVUD9N4vAPYaSC02A2KenOldm/AMyEuNTjMkwFo737HpK3UGZLtwAJznli1BtP9rmVUyc2sc/E9dbVm2SMdSSx+Z7L+WZdayOp5rPt9UiMXGLjLzEw0G4tKjYKkhT0BlzAk88FpsUBFNdgAAAABJRU5ErkJggg==" /><i>').concat(this.UIViewTips.keyMouse,"</i></a>")),""),r="",t=(this.saasConfig.resolutionInfo&&this.saasConfig.resolutionInfo.map(function(e,t){n!=e.id&&("1"!=e.defaultChoice||paramInObj(i.saasConfig.resolutionInfo,"id",n))||(r='<a class="resolution_btn selected" >'.concat(e.name,"</a>")),o+="<a class=resolution_btn ".concat("1"==e.defaultChoice&&0==i.gInUseInfo.InUseResolutionId?"disabled":""," data-id=").concat(e.id,">").concat(e.name,"</a>")}),o='<div class="resolution_btns">\n                                '.concat(r,'\n                                <div class="resolution_btns_menu">\n                                <div class="arrow-down">\n                                    </div>\n                                    ').concat(o,"\n                                </div>\n                            </div>"),1==this.saasConfig.toolbarFullScreenButtonHidden?"":'<a class="fullscreen_btn" title="'.concat(this.UIViewTips.fullScreen,'"></a>')),s=('<a class="phone_btn '.concat(this.UIModel.isRotate?"phone_rotate_s":"phone_rotate_h",'" id="rotate" title="menu">').concat(this.UIViewTips.rotate,"</a>"),'<a class="webFullScreen_btn" title="'.concat(this.UIViewTips.webFullScreen,'"></a>')),a='<div class="delayDataTooBar"><span class="delayNode">'.concat(this.UIViewTips.delay,'0ms</span><span class="lostPackets">').concat(this.UIViewTips.packetLoss,'0%</span><span class="delayFullBtn select ').concat(this.isDelayFull?"selected":"",'">').concat(this.UIViewTips.displayInGame,"</span></div>");$(".KeyPositionBox").append("<div ".concat(this.options.isHideToolBar?"style=display:none;":"",' class="player-toolbar toolbar"></div>')),$(".KeyPositionBox .toolbar").append(e),$(".KeyPositionBox .toolbar").append(o),$(".KeyPositionBox .toolbar").append(t),$(".KeyPositionBox .toolbar").append(s),$(".KeyPositionBox .toolbar").append(a),$(".delayDataFullShow").remove(),$(".KeyPositionBox").append('\n                <div class="delayDataFullShow">\n                    <span class="delayNode">\n                        '.concat(this.UIViewTips.delay,'<i style="color:#6EFF7D;"></i>\n                    </span>\n                    <span class="lostPackets">\n                        ').concat(this.UIViewTips.packetLoss,'<i style="color:#6EFF7D;"></i>\n                    </span>\n                </div>\n        '))}},{key:"positionToolbar",value:function(){var e=$(this.wrap).find(".toolbar"),t=this.options.toolbarDomId?$(this.options.toolbarDomId):e;$(this.options.toolbarDomId).size()||this.options.isHideToolBar||($(this.wrap).hasClass("exit")&&this.FullScarn?t.css({position:"fixed",bottom:"0px"}):t.css({position:"absolute",bottom:-t.height()})),this.options.isHideToolBar?e.hide():e.show()}},{key:"getRotateVideoCoordinate",value:function(e,t){var n=t*this.compressionRatio,e=(e-n)/2;return{lt:[e,0],rb:[e+n,t],width:n,height:t}}},{key:"drawPoint",value:function(e,t,n,i,o,r,s,a){var c="";this.isEditKey&&(c="Hm_Drag HmDrages"),s="new"==a?"":""==s?this.UIViewTips.space:KeyCodeToName[a]||"",t.append('\n                <span\n                    class="circle custom_key '.concat(c," ").concat(e,'"\n                    data-key_code="').concat(a,'"\n                    data-key_id="').concat(e,'"\n                    data-key_type="').concat(n,'"\n                    contentEditable="false"\n                    tabindex="1"\n                    style="\n                        opacity:').concat(this.isEditKey?"1":this.keyboardOpacity,";\n                        transform:scale(").concat(this.keyScaling,");\n                        top:").concat(o-this.KeyInitObj.type0.width/2,"px;\n                        left:").concat(i-this.KeyInitObj.type0.width/2,"px;\n                        width:").concat(this.KeyInitObj.type0.width,"px;\n                        height:").concat(this.KeyInitObj.type0.width,"px;\n                        /*3PX*/\n                        line-height: ").concat(this.KeyInitObj.type0.width-6,"px;\n                        font-size:").concat(this.KeyInitObj.type0.fontSize,"px;\n                        color:").concat(this.KeyInitObj.type0.color,' ;\n                    ">\n                    ').concat(this.isEditKey?'<b class="btnTooltip">'.concat(this.UIViewTips.setClick,'</b>\n                                    <i class="textBtn">').concat(s,'</i>\n                                    <i class="close_btn_i"></i>'):s,"\n                </span>\n            ")),this.isEditKey&&!s&&$("."+e).focus()}},{key:"drawMindPoint",value:function(e,t,n,i,o,r,s,a){var c="",l=this.UIViewTips.liftPress;this.isEditKey&&(c="Hm_Drag HmDrages",l=this.UIViewTips.enterKeysControlSkill),s="new"==a?"":KeyCodeToName[a],t.append('\n                <span\n                    class="Mindbtn custom_key is_set '.concat(c," ").concat(e,'"\n                    tabindex="1"\n                    contentEditable="false"\n                    data-key_id="').concat(e,'"\n                    data-key_type="').concat(n,'"\n                    data-key_code="').concat(a,'"\n                    style="\n                        opacity:').concat(this.isEditKey?"1":this.keyboardOpacity,";\n                        transform:scale(").concat(this.keyScaling,");\n                        top:").concat(o-this.KeyInitObj.type7.width/2,"px;\n                        left:").concat(i-this.KeyInitObj.type7.width/2,"px;\n                        width:").concat(this.KeyInitObj.type7.width,"px;\n                        height:").concat(this.KeyInitObj.type7.width,"px;\n                        line-height: ").concat(this.KeyInitObj.type7.width,"px;\n                        font-size:").concat(this.KeyInitObj.type7.fontSize,"px ;\n                        color:").concat(this.KeyInitObj.type7.color,' ;\n                    ">\n                    <b class="btnTooltip">').concat(l,'</b>\n                    <i class="textBtn">').concat(s,'</i>\n                    <i class="close_btn_i"></i>\n                </span>\n            ')),this.isEditKey&&!s&&$("."+e).focus()}},{key:"drawGesturePoint",value:function(e,t,n,i,o,r,s,a,c){var l=this.isEditKey?"HmDrages Gesture_Drag":"",d=this.isEditKey?"":"edit_done",p=this.KeyInitObj.type10||{},u=p.width,p=this.isEditKey?p.endEditWidth:p.endWidth;r="new"==s?"":KeyCodeToName[s],t.append('\n                <span\n                    class="Gesturebtn custom_key is_set '.concat(l," ").concat(e,' start"\n                    tabindex="1"\n                    contentEditable="false"\n                    data-key_id="').concat(e,'"\n                    data-key_type="').concat(n,'"\n                    data-key_code="').concat(s,'"\n                    style="\n                        opacity:').concat(this.isEditKey?"1":this.keyboardOpacity,";\n                        transform:scale(").concat(this.keyScaling,");\n                        top:").concat(o-u/2,"px;\n                        left:").concat(i-u/2,"px;\n                        width:").concat(u,"px;\n                        height:").concat(u,"px;\n                        line-height: ").concat(u-6,"px;\n                        font-size:").concat(this.KeyInitObj.type10.fontSize,"px ;\n                        color:").concat(this.KeyInitObj.type10.color,' ;\n                    ">\n                    ').concat(this.isEditKey?'<b class="btnTooltip">'.concat(this.UIViewTips.InputSwipe,'</b>\n                                    <i class="textBtn">').concat(r,'</i>\n                                    <i class="close_btn_i"></i>'):r,'\n                </span>\n                <span\n                    class="Gesturebtn custom_key end is_set ').concat(l," ").concat(d,'"\n                    tabindex="1"\n                    contentEditable="false"\n                    data-key_id="').concat(e,'"\n                    data-key_type="').concat(n,'"\n                    data-key_code="').concat(s,'"\n                    style="\n                        opacity:').concat(this.isEditKey?"1":this.keyboardOpacity,";\n                        transform:scale(").concat(this.keyScaling,");\n                        top:").concat(c-p/2,"px;\n                        left:").concat(a-p/2,"px;\n                        font-size:").concat(this.KeyInitObj.type10.fontSize,"px ;\n                        color:").concat(this.KeyInitObj.type10.color,' ;\n                    ">\n                    ').concat(this.isEditKey?this.UIViewTips.end:"","\n                </span>\n            ")),this.isEditKey&&!r&&$("."+e).focus()}},{key:"drawSvgLine",value:function(e,t,n,i,o){$("#".concat(e)).remove();var r=this.isEditKey?$("#svgLine_SET"):$("#svgLine_SHOW"),s=this.isEditKey?"#markerArrow_start_SET":"",a=this.isEditKey?"#markerArrow_end_SET":"#markerArrow_end_SHOW",c=$(document.createElementNS("http://www.w3.org/2000/svg","path")),l=Math.sqrt(Math.abs(Math.pow(o-n,2))+Math.abs(Math.pow(i-t,2))),d=this.KeyInitObj.type10||{},p=d.width,d=this.isEditKey?d.endEditWidth:d.endWidth,p=1-(l-p/2*this.keyScaling)/l,d=(l-d/2*this.keyScaling)/l,l=n+(o-n)*p,u=t+(i-t)*d,o=n+(o-n)*d;c.attr({id:e,class:"btnPath",d:"M".concat(t+(i-t)*p,",").concat(l," L").concat(u,",").concat(o),stroke:"rgba(255,255,255,0.7)","stroke-width":"1","marker-start":"url(".concat(s,")"),"marker-end":"url(".concat(a,")"),style:"opacity:".concat(this.isEditKey?"1":this.keyboardOpacity)}),r.append(c)}},{key:"addCancelBtn",value:function(e,t,n,i,o,r,s){var a="";this.isEditKey&&(a="Hm_Drag HmDrages"),r=KeyCodeToName[s],t.append('\n                    <span\n                        class="circle circle_btn spaceBtn is_set custom_key '.concat(a,'"\n                        name="cancel"\n                        data-key_code="').concat(s,'"\n                        data-key_type="').concat(n,'"\n                        data-key_id="').concat(e,'"\n                        style="opacity:').concat(this.isEditKey?"1":this.keyboardOpacity,";\n                        transform:scale(").concat(this.keyScaling,");\n                        top:").concat(o-this.KeyInitObj.type9.width/2,"px;\n                        left:").concat(i-this.KeyInitObj.type9.width/2,"px;\n                        width:").concat(this.KeyInitObj.type9.width,"px;\n                        height:").concat(this.KeyInitObj.type9.width,"px;\n                        /*3PX*/\n                        line-height: ").concat(this.KeyInitObj.type9.width-6,"px;\n                        font-size:").concat(this.KeyInitObj.type9.fontSize,"px ;\n                        color:").concat(this.KeyInitObj.type9.color,' ;\n                        "\n                    >\n                        <b class="btnTooltip" contentEditable="false">').concat(this.UIViewTips.cancelRelease,'</b>\n                        <i class="textBtn" style="line-height:').concat(this.KeyInitObj.type9.width-10,'px;" contentEditable="false">').concat(r,"</i>\n                    </span>\n                "))}},{key:"addSpecialBtn",value:function(e,t,n,i,o,r,s){var a="";this.isEditKey&&(a="Hm_Drag HmDrages"),r=KeyCodeToName[s],t.append('\n                    <span\n                        class="'.concat("SHOWbox_SpecialBtn type_"+n," ").concat(a,'"\n                        data-key_id="').concat(e,'"\n                        data-key_type="').concat(n,'"\n                        data-key_code="').concat(s,'"\n                        style="\n                            opacity:').concat(this.isEditKey?"1":this.keyboardOpacity,";\n                            transform:scale(").concat(this.keyScaling,");\n                            top:").concat(o-this.KeyInitObj["type"+n].width/2,"px;\n                            left:").concat(i-this.KeyInitObj["type"+n].width/2,"px;\n                            width:").concat(this.KeyInitObj["type"+n].width,"px;\n                            height:").concat(this.KeyInitObj["type"+n].width,"px;\n                            font-size:").concat(this.KeyInitObj["type"+n].fontSize,"px;\n                            color:").concat(this.KeyInitObj["type"+n].color,' ;\n                        ">\n                        ').concat(4==n?'<i class="sightInputShow">'.concat(r,"</i>"):"",'\n                        <b class="btnTooltip">\n                            ').concat(2==n?this.UIViewTips.controlDirection:3==n?this.UIViewTips.leftFire:4==n?this.UIViewTips.switchLock:this.UIViewTips.rightGo,"\n                        </b>\n                </span>\n                    "))}},{key:"addSpecialBtnEdit",value:function(e,t,n,i,o,r,s){r=KeyCodeToName[s],t.append('\n                    <span\n                        class="'.concat("SHOWbox_SpecialBtn type_"+n," ").concat("Hm_Drag HmDrages").concat(2==n||8==n?" dragDivResize":"",'"\n                        data-key_id="').concat(e,'"\n                        data-key_type="').concat(n,'"\n                        data-key_code="').concat(s,'"\n                        ').concat(4==n?'tabindex = "1"':"",'\n                        style="\n                            opacity:').concat(this.isEditKey?"1":this.keyboardOpacity,";\n                            transform:scale(").concat(this.keyScaling,");\n                            top:").concat(o-this.KeyInitObj["type"+n].width/2,"px;\n                            left:").concat(i-this.KeyInitObj["type"+n].width/2,"px;\n                            width:").concat(this.KeyInitObj["type"+n].width,"px;\n                            height:").concat(this.KeyInitObj["type"+n].width,"px;\n                            font-size:").concat(this.KeyInitObj["type"+n].fontSize,"px;\n                            color:").concat(this.KeyInitObj["type"+n].color,' ;\n                        ">\n                        ').concat(4==n?'<div class="sensitiveShowBox sensitiveShowBoxEvent">\n                                            <div class="sensitiveValue sensitiveValueEvent">30%</div>\n                                            <div class="sensitiveValueLineBox sensitiveValueLineBoxEvent">\n                                                <div class="sensitiveValueLine sensitiveValueLineEvent">\n                                                    <div class="sensitiveValueShow sensitiveValueShowEvent"></div>\n                                                </div>\n                                            </div>\n                                            <div class="sensitiveText">'.concat(this.UIViewTips.sensitivity,'</div>\n                                        </div>\n                                        <span class="sightInput">\n                                            <i class="textBtn" contentEditable="false">').concat(r,"</i>\n                                        </span>"):"",'\n                        <b class="btnTooltip">\n                            ').concat(2==n?this.UIViewTips.controlDirection:3==n?this.UIViewTips.leftFire:4==n?this.UIViewTips.switchLock:this.UIViewTips.rightGo,'\n                        </b>\n                    <i class="close_btn_i"></i>\n                </span>'))}},{key:"KeyRendering",value:function(){var e,t=null,n=(this.UIModel.isRotate?(t=$(".KeyPositionBox").height(),this.keyScalingCriticalSize=1080):(t=$(".KeyPositionBox").width(),this.keyScalingCriticalSize=1920),this.keyScaling=t/this.keyScalingCriticalSize,$(".KeyBtnBox_SET")),t=(this.isEditKey?($(".KeyBtnBox_SET").show(),$(".KeyBtnBox_SHOW").hide(),n=$(".KeyBtnBox_SET"),t=Math.ceil(100*this.keyboardOpacity),$(".opacityValueLine").height(t+"%"),$(".opacityValue").html(t+"%"),$(".Key_SET_btns").attr("style")||(this.keyBoxOffset=$(".Key_SET_btns").offset()),$(".dragSpecial.disabled").removeClass("disabled")):($(".KeyBtnBox_SHOW").show(),$(".KeyBtnBox_SET").hide(),n=$(".KeyBtnBox_SHOW")),n.find(".circle").remove(),n.find(".Mindbtn").remove(),n.find(".SHOWbox_SpecialBtn").remove(),n.find(".Gesturebtn").remove(),$("#svgLine_SET").find(".btnPath").remove(),$("#svgLine_SHOW").find(".btnPath").remove(),$(".dragSpecial").removeAttr("style").removeClass("is_set").css({left:"",top:""}).attr({"data-key_id":""}),$(".dragSpecial.type_4").attr({"data-key_code":"192"}),$(".KeyPositionBox").width()||1067),i=$(".KeyPositionBox").height()||600,o=(this.VerticalScreen=this.getRotateVideoCoordinate(t,i),$(this.wrap).hasClass("exit")),r=(n.css({top:0,left:0}),isIE10()&&$(".KeyBtnBox_LISTEN").addClass("opacity001"),$(".KeyBtnBox_LISTEN").css({top:0,left:0,width:"100%",height:"100%"}),this.UIModel.isRotate?(n.css({width:this.VerticalScreen.width,height:this.VerticalScreen.height,left:this.VerticalScreen.lt[0]}),$(".KeyBtnBox_SET .Key_SET_btns").css({marginLeft:(parseFloat(this.VerticalScreen.width)-$(".KeyBtnBox_SET .Key_SET_btns").width())/2})):(n.css({width:t,height:i,left:0}),$(".KeyBtnBox_SET .Key_SET_btns").css({marginLeft:""})),o&&!this.UIModel.isRotate&&this.FullScarn&&(t=getCompressionCss(this.compressionRatio),n.css(t),$(".KeyBtnBox_LISTEN").css(t)),n.width()),s=n.height(),a=this.UserKeyList.keys;for(e in this.KeyInitObj.type2.width=this.UserKeyList.directionSize||138,this.KeyInitObj.type8.width=this.UserKeyList.rightClick||138,a){var c,l=a[e],d=1,p=Math.round(l.pos_x*r),u=Math.round(l.pos_y*s),h=l.id;0==l.type?(this.drawPoint(h,n,l.type,p,u,d,l.name,l.value),d++):6==l.type?window.IsBoss&&this.drawPoint(h,n,l.type,p,u,d,l.name,l.value):7==l.type?this.drawMindPoint(h,n,l.type,p,u,1,l.name,l.value):9==l.type?this.addCancelBtn(h,n,l.type,p,u,l.name,l.value):2==l.type||3==l.type||4==l.type||8==l.type?this.isEditKey?(this.addSpecialBtnEdit(h,n,l.type,p,u,l.name,l.value),4==l.type&&($(".sensitiveValueEvent").html(this.UserKeyList.sightScale+"%"),$(".sensitiveValueLineEvent").height($(".sensitiveValueLineBoxEvent").height()*this.UserKeyList.sightScale/100),$(".dragSpecial.type_"+l.type+" .textBtn").html(l.name)),$(".dragSpecial.type_"+l.type).addClass("disabled")):this.addSpecialBtn(h,n,l.type,p,u,l.name,l.value):10==l.type&&(d=Math.round(l.pos_x2*r),c=Math.round(l.pos_y2*s),this.drawGesturePoint(h,n,l.type,p,u,l.name,l.value,d,c),this.drawSvgLine(h,p,u,d,c))}n.find(".Mindbtn").length&&!n.find(".spaceBtn").length?this.UIModel.setKeyBtn("add",{name:"",pos_x:.9,pos_y:.2,type:9,value:32}):!n.find(".Mindbtn").length&&n.find(".spaceBtn").length&&this.ModelSetKeyBtn("delete",n.find(".spaceBtn")),"true"==localStorage.getItem("showBtn")||null==localStorage.getItem("showBtn")||null==localStorage.getItem("showBtn")?this.ShowOrHideBtn(!0):this.ShowOrHideBtn(!1),this.isEditKey&&this._binKeyEvent(n)}},{key:"_binKeyEvent",value:function(l){var d=this,e=(l.off("click"),l.on("click",function(e){var t=e.target;!$(t).hasClass("KeyBtnBox_SET")&&"svgLine_SET"!==$(t).attr("id")||d.isDragDivResizeIng||(l.find(".circle").each(function(e){$(e).find(".textBtn").html()||$(e).remove()}),d.UIModel.setKeyBtn("add",{pos_x:e.offsetX/l.width(),pos_y:e.offsetY/l.height(),type:0}))}),l.off("mousedown"),l.on("mousedown",".KeyBtnBox_SET .custom_key.circle",function(e){var t=$(e.target).parents(".custom_key").length?$(e.target).parents(".custom_key"):"";!$(e.target).parents(".custom_key").hasClass("spaceBtn")&&t&&2===e.button&&($(e.target).parents(".custom_key").find(".textBtn").html(d.UIViewTips.right),$(e.target).parents(".custom_key").attr("data-key_code","9999"),d.ModelSetKeyBtn("set",$(e.target).parents(".custom_key")))}),$(".titles").HmTitles(".KeyPositionBox"),$(".Hm_Drag").HmDrage({containment:"parent"},function(e,t){t&&d.ModelSetKeyBtn("set",e)}),$(".Gesture_Drag").HmDrage({containment:"parent"},function(e,t){var n,i,o,r,s,a,c;t&&"toDrawLine"!==t&&d.ModelSetKeyBtn("set",e),"toDrawLine"===t&&(t=e.attr("data-key_id"),n=d.UserKeyList.keys[t],o=e.offset().width/2/d.keyScaling,r=e.offset().height/2/d.keyScaling,i=e[0]&&-1<e[0].className.indexOf("end"),c=parseInt(e.css("left"),10),e=parseInt(e.css("top"),10),c=(c+o)/$(".KeyBtnBox_SET").offset().width,o=(e+r)/$(".KeyBtnBox_SET").offset().height,e=l.width(),r=l.height(),s=Math.round((i?n.pos_x:c)*e),a=Math.round((i?n.pos_y:o)*r),c=Math.round((i?c:n.pos_x2)*e),e=Math.round((i?o:n.pos_y2)*r),d.drawSvgLine(t,s,a,c,e))},"toDrawLine"),Math.abs(parseInt($(".Key_SET_btns").css("marginLeft")?$(".Key_SET_btns").css("marginLeft"):0))+($(".KeyBtnBox_SET").width()-680)/2),t=[-e,0,e,$(".KeyBtnBox_SET").height()-196-55];this.UIModel.isRotate&&(t=[e,0,e,$(".KeyBtnBox_SET").height()-196-55]),$(".Key_SET_btns").HmDrage({left:this.keyBoxOffset.left,top:this.keyBoxOffset.top,containment:t}),$(".dragSpecial").HmDrage({left:$(".Key_SET_btns").offset().left,top:$(".Key_SET_btns").offset().top,containment:$(".KeyBtnBox_SET"),isRotate:this.UIModel.isRotate},function(e,t){var n;"down"==t?$(e).hasClass("is_set")||($(e).addClass("is_set"),$(e).css("transform","scale(".concat(d.keyScaling,")"))):(n=$(e).attr("data-key_type"),d.ModelSetKeyBtn("add",$(e)),"hasMove"==t&&7!=n&&10!=n?(d.ModelSetKeyBtn("set",$(".KeyBtnBox_SET .SHOWbox_SpecialBtn.type_"+n)),$(e).hasClass("type_2")&&d.UIModel.sendCountly(loggerEventId.keyboard_setting_set_game_pad)):7==n&&"hasMove"!=t?d.ModelSetKeyBtn("delete",$(".KeyBtnBox_SET .Mindbtn").eq($(".KeyBtnBox_SET .Mindbtn").size()-1),"resize"):10==n&&"hasMove"!=t?d.ModelSetKeyBtn("delete",$(".KeyBtnBox_SET .Gesturebtn").eq($(".KeyBtnBox_SET .Gesturebtn").size()-1),"resize"):d.ModelSetKeyBtn("delete",$(".KeyBtnBox_SET .SHOWbox_SpecialBtn.type_"+n),"resize"))},"down"),$(".dragDivResize").dragDivResize(function(e){"start"==e?d.isDragDivResizeIng=!0:(d.isDragDivResizeIng=!1,$(e).hasClass("type_2")?d.ModelSetKeyBtn("set",$(e),{directionSize:$(e).width()}):$(e).hasClass("type_8")&&d.ModelSetKeyBtn("set",$(e),{rightClick:$(e).width()}))}),$(document).on("keydown",".KeyBtnBox_SET .custom_key,.KeyBtnBox_SET .SHOWbox_SpecialBtn.type_4",function(e){var t,n=e.target||e.srcElement,i=e.keyCode||e.which||e.charCode,e=KeyCodeToName[e.keyCode];if(i){if(8===i)i=e="";else if(!e)return t=d.UIViewTips.notSet,CanNotKeyCodeToName[i]&&(t=mixTips(d.UIViewTips.cannotSet,[CanNotKeyCodeToName[i]])),void d.showHMToast(t,".KeyBtnBox_SET","editKey");32==i&&(e=d.UIViewTips.space),$(n).find(".textBtn").html(e),$(n).attr("data-key_code",i),d.ModelSetKeyBtn("set",$(n))}})}},{key:"ModelSetKeyBtn",value:function(e,t,n){switch(e){case"parame":return void this.UIModel.setKeyBtn(e,t);case"add":var i=t.offset().width/2,o=t.offset().height/2,r=parseInt(t.css("left"),10),s=parseInt(t.css("top"),10),r=(r+i)/$(".KeyBtnBox_SET").offset().width,i=(s+o)/$(".KeyBtnBox_SET").offset().height,s=t.attr("data-key_type"),o=t.attr("data-key_code"),o={name:KeyCodeToName[o],pos_x:r,pos_y:i,type:s,value:o};return 10==s&&(s=1<(s=.1+r)?s-.2:s,r=1<(r=.1+i)?r-.2:r,Object.assign(o,{pos_x2:s,pos_y2:r})),void this.UIModel.setKeyBtn(e,o);case"set":var i=t.attr("data-key_id"),s=KeyCodeToName[t.attr("data-key_code")],r=t.offset().width/2,o=t.offset().height/2,a=parseInt(t.css("left"),10),c=parseInt(t.css("top"),10),l=t.width()!=t[0].getBoundingClientRect().width,d=l?(t.width()-t[0].getBoundingClientRect().width)/2:0,l=l?(t.height()-t[0].getBoundingClientRect().height)/2:0,p=parseInt(t.css("border-width"),10)||0,c=c+l+p,l=(a+d+p+r-p)/$(".KeyBtnBox_SET").offset().width,a=(c+o-p)/$(".KeyBtnBox_SET").offset().height,d=t.attr("data-key_type"),r={id:i,name:s,pos_x:l,pos_y:a,type:d,value:t.attr("data-key_code")};return 10==d&&(c=t[0]&&-1<t[0].className.indexOf("end"),o=this.UserKeyList.keys[i],Object.assign(r,{pos_x:c?o.pos_x:l,pos_y:c?o.pos_y:a,pos_x2:c?l:o.pos_x2,pos_y2:c?a:o.pos_y2})),void this.UIModel.setKeyBtn(e,r,n);case"delete":p="";"resize"==n&&(2==t.attr("data-key_type")?p="directionSize":8==t.attr("data-key_type")&&(p="rightClick")),this.UIModel.setKeyBtn(e,{id:t.attr("data-key_id")},p)}}},{key:"UIModelObjectChange",value:function(e){try{this.UserKeyList=JSON.parse(JSON.stringify(e)),this.KeyRendering(),this.addProgrammeList()}catch(e){this.UserKeyList={},this.KeyRendering(),this.addProgrammeList()}}},{key:"ShowOrHideBtn",value:function(e){e?($(".check_tip_box .check_box").addClass("selected"),$(".KeyBtnBox_SHOW span").each(function(e){"auto"!=$(this).css("left")&&$(this).css("visibility","visible")}),$("#svgLine_SHOW").show()):($(".check_tip_box .check_box").removeClass("selected"),$(".KeyBtnBox_SHOW span").css("visibility","hidden"),$("#svgLine_SHOW").hide())}},{key:"ShowkeyMouse",value:function(){!0!==this.options.isIgonreKeyboardEvent&&(this.UIModel.sendCountly(loggerEventId.toolbar_keyboard_btn_clicked),this.isEditKey?(this.isEditKey=!1,this.hideEditKeyNotSave(),$(".KeyBtnBox_SHOW").show(),$(".KeyBtnBox_SET").hide()):($(".Key_SET_btns").removeAttr("style"),this.UIModel.sendCountly(loggerEventId.set_stop_mouse_send_flag,!0),this.isEditKey=!0,this.UIModel.toEditKey(),$(".KeyBtnBox_SHOW").hide(),$(".KeyBtnBox_SET").show()))}},{key:"webPageFullScreenFn",value:function(){$(".KeyBtnBox_SET").isShow()?this.showHMToast(this.UIViewTips.completeSet,".KeyBtnBox_SET","editKey"):($(this.wrap).hasClass("scran")?($(this.wrap).removeClass("fullScran"),$(this.wrap).removeClass("scran").removeAttr("style"),$(".webFullScreen_btn").attr("title",this.UIViewTips.webFullScreen),$("html, body").css({width:"",height:""}),$(".HMW_bgCover").remove(),$(this.wrap).hasClass("exit")&&this.fullScreenFn()):($(this.wrap).addClass("scran"),$(this.wrap).addClass("fullScran"),$(this.wrap).css("z-index",2),$("html, body").css({width:"100%",height:"100%",margin:"0px",padding:"0px"}),$("body").append("<div class='HMW_bgCover'></div>"),$(".webFullScreen_btn").attr("title",this.UIViewTips.exitWebFullScreen)),setTimeout(function(){$(window).trigger("resize")},50))}},{key:"fullScreenFn",value:function(e){$(".KeyBtnBox_SET").isShow()?this.showHMToast(this.UIViewTips.completeSet,".KeyBtnBox_SET","editKey"):this.FullScarn?"undefined"===typeCheck(e)?$(this.wrap).hasClass("exit")?this._exitFullScreen():this._goToFullScreen():e?this._goToFullScreen():this._exitFullScreen():($(this.wrap).hasClass("scran")?($(document).off("mousemove"),$(this.wrap).removeClass("scran").removeAttr("style"),$(this.wrap).removeClass("exit"),this.UIModel.sendCountly(loggerEventId.exit_fullscreen),$(".fullscreen_btn").attr("title",this.UIViewTips.fullScreen)):(this.UIModel.sendCountly(loggerEventId.fullscreen),$(this.wrap).addClass("scran"),$(this.wrap).addClass("exit"),$(".fullscreen_btn").attr("title",this.UIViewTips.exitFullScreen)),setTimeout(function(){$(window).trigger("resize")},50))}},{key:"_exitFullScreen",value:function(){$(document).off("mousemove"),$(".fullscreen_btn").attr("title",this.UIViewTips.fullScreen),$(".delayDataFullShow").hide(500),$(this.wrap).removeClass("exit"),this.UIModel.sendCountly(loggerEventId.exit_fullscreen),toExitFullscreen()}},{key:"_goToFullScreen",value:function(){this.UIModel.sendCountly(loggerEventId.fullscreen),this.toolbarListen(),$(this.wrap).addClass("exit"),$(".fullscreen_btn").attr("title",this.UIViewTips.exitFullScreen),this.isDelayFull&&$(".delayDataFullShow").show(500),toRequestFullscreen($(this.wrap)[0])}},{key:"showDelayData",value:function(){this.isDelayFull=!this.isDelayFull,$(".delayFullBtn")[this.isDelayFull?"addClass":"removeClass"]("selected"),$(this.wrap).hasClass("exit")&&$(".delayDataFullShow")[this.isDelayFull?"show":"hide"](500)}},{key:"switchResolution",value:function(e,n){var i=this;if($(".KeyBtnBox_SET").isShow())return this.showHMToast(this.UIViewTips.completeSet,".KeyBtnBox_SET","editKey"),!1;e!=this.UIModel.UseResolutionInfo.UseResolutionId&&(this.showHMToast(this.saasConfig.toast_doing_change_rate,".KeyPositionBox",!0),this.UIModel.switchResolution(e,function(e,t){e?($(".resolution_btn.selected").html(n),i.showHMToast(mixTips(i.saasConfig.toast_current_change_rate,[$(".resolution_btn.selected").html()]),".KeyPositionBox",!0)):t&&i.showHMToast(t,".KeyPositionBox",!0)}))}},{key:"stopGame",value:function(e){this.isGameStop=!0,this.showToastMessage(e.message||e.tips),this.removeListenGWin()}}]),o}(),GetMousePositionPoint=function(){function r(e){var t,n,i,o=this;_classCallCheck(this,r),e&&(this.wrap=e,t=(e=this.wrap.getBoundingClientRect()).top,n=e.right,i=e.bottom,e=e.left,this.x=e,this.y=t,this.width=n-e,this.height=i-t,this.mousedown=function(e){return o._mouseEvent(e,"down")},this.mousemove=function(e){return o._mouseEvent(e,"move")},this.mouseup=function(e){return o._mouseEvent(e,"up")},this.mouseleave=function(e){return o._mouseEvent(e,"leave")},this.wheel=function(e){return o._mouseEvent(e,"wheel")},this._addListener())}return _createClass(r,[{key:"_addListener",value:function(){this.wrap.addEventListener("mousedown",this.mousedown),this.wrap.addEventListener("mousemove",this.mousemove),this.wrap.addEventListener("mouseup",this.mouseup),this.wrap.addEventListener("mouseleave",this.mouseleave),this.wrap.addEventListener("wheel",this.wheel)}},{key:"removeListener",value:function(){this.wrap&&(this.wrap.removeEventListener("mousedown",this.mousedown),this.wrap.removeEventListener("mousemove",this.mousemove),this.wrap.removeEventListener("mouseup",this.mouseup),this.wrap.removeEventListener("mouseleave",this.mouseleave),this.wrap.removeEventListener("wheel",this.wheel))}},{key:"_mouseEvent",value:function(e,t){e.preventDefault();var n=e.button;this.callback(t,e,n)}},{key:"sendPositionPoint",value:function(e){this.callback=e}},{key:"_translateX",value:function(e){e-=this.x;return(e=(e=e<0?0:e)>this.width?this.width:e)/this.width}},{key:"_translateY",value:function(e){e-=this.y;return(e=(e=e<0?0:e)>this.height?this.height:e)/this.height}}]),r}(),sightMousePositionPoint=function(){function n(e){var t=this;_classCallCheck(this,n),e&&(this.wrap=e,this.mousedown=function(e){return t._mouseEvent(e,"down")},this.mousemove=function(e){return t._mouseEvent(e,"move")},this.mouseup=function(e){return t._mouseEvent(e,"up")},this._addListener())}return _createClass(n,[{key:"_addListener",value:function(){this.wrap.addEventListener("mousedown",this.mousedown),this.wrap.addEventListener("mousemove",this.mousemove),this.wrap.addEventListener("mouseup",this.mouseup)}},{key:"removeListener",value:function(){this.wrap&&(this.wrap.removeEventListener("mousedown",this.mousedown),this.wrap.removeEventListener("mousemove",this.mousemove),this.wrap.removeEventListener("mouseup",this.mouseup))}},{key:"_mouseEvent",value:function(e,t){e.preventDefault(),this.callback(t,e)}},{key:"sendPositionPoint",value:function(e){this.callback=e}}]),n}(),UIModel=function(){function a(e,t,n,i,o){var r=this;if(_classCallCheck(this,a),this.cpLock=!1,this.enableAudio=i,this.isFistClicked=!1,this.wrap=$(e),this.UIModelTips=o.UIModel,"string"==typeof e){if(this.SaasSDK=n,this.options=t,this.UseKeyList={},this.keyboardSet=!1,this.editKeyList={},this.isRotate=t.rotate,this.defaultLength=0,this.rightClickLong=!1,this.sightToRight={x:0,y:0},this.UseResolutionInfo={preResId:-1,resolutionChangeStartTime:0,isAutoResolutionChanged:!1,UseResolutionId:-1},this.lastMouseCoordinate={x:0,y:0},this.resolutionInfo={userSelectId:"",isChange:!1},this.mousePrev={},this.stickPrev={x:"",y:""},this.touchLength=0,this.oldTouchLength=0,this.stickLastPoint="",this.compressionRatio=9/16,this.isCancelBtn=!1,this.mindKeyDown=!1,this.sdkAutoMove=!1,this.is_moving=!1,this.mindOrigin={},this.mindUp={},this.isHavePointerLock=!1,this.rightClick={},this.isChangeResolution=!1,this.IS_NoTriggerKeyCode=[8,9,13,27,37,38,39,40],this.NonCustomList={},localStorage.selectKey)try{var s=JSON.parse(localStorage.selectKey);this.selectKeyIndex=JSON.parse(s[t.pkgName])}catch(e){this.selectKeyIndex={index:0,default:!0}}else this.selectKeyIndex={index:0,default:!0};this.mouseKeeping=0,this.gAutorotate=0,this.havePointerLock="pointerLockElement"in document,this.oriStyle="";i=$(this.wrap)[0];this.FullScarn=i.requestFullscreen||i.webkitRequestFullScreen||i.mozRequestFullScreen||i.msRequestFullscreen,this.sightCode="null",this.temporaryKeyIndex="-",this.stickHoldKeys={87:!1,65:!1,83:!1,68:!1},this.keySpecialType=KeyType,this.isEditKey=!1,this.interceptKeyList=[27,113],this.keyboardHoldArray=new Array(256),this.KeyMap=[],this.addHMUIBox(),this.gUIView=new UIView(e,t,this,o),this.UseKeyList=listenObjectChange(this.UseKeyList,function(e){r.KeyMapChange(e.Obj)}),this.editKeyList=listenObjectChange(this.editKeyList,function(e){r.KeyMapChange(e.Obj)})}}return _createClass(a,[{key:"_emit",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];eventEmitter.emit.apply(eventEmitter,[e].concat(n))}},{key:"sendCountly",value:function(e,t){this.SaasSDK.loggerSend(e,t)}},{key:"setInfoApply",value:function(e,t,n){var i;e&&(this.saasConfig=e,i=(e=this.SaasSDK.streamStyle).streamStyleH,e=e.streamStyleW,this.compressionRatio=i/e,this.resizeDone(),this.gUIView&&this.gUIView.setInfoApply(this.saasConfig,t,n),t||(this.saasConfig.key_map_content&&""!=this.saasConfig.key_map_content&&""!=this.saasConfig.key_map_content&&""!=this.saasConfig.key_map_content&&null!=this.saasConfig.key_map_content&&"null"!=this.saasConfig.key_map_content&&(this.defaultKeymap=!0,this.KeyMap=this.setNewArrayForKeyMap(this.saasConfig.key_map_content,this.UIModelTips.officialPlan,!0)),1!=this.saasConfig.toolbarKeyboardButtonHidden?this.getLocalKeyMap():this.getKeymapDefaultbyScreen(),this.mouseHandler(),this.havePointerLock&&this._pointerLockChange(),this.listenGWin(),this.getMapList()))}},{key:"gUIViewFn",value:function(e,t){this.gUIView&&this.gUIView[e](t)}},{key:"resetVideo",value:function(){if(!this.gUIView){$(this.wrap).css("minWidth","900px");var e=$(this.wrap),t=$(this.wrap).find(".KeyPositionBox"),n=t.find(".toolbar"),t=(e.css({width:"",left:0,top:0,position:"relative"}),t.offset()),i=$(window).scrollTop(),o=window.innerHeight,r=window.innerWidth,s=o-(i+t.top+t.height),a="",c=(a||0!=$(".webNormalScreen_btn").length||(a=e.attr("style")),0);if((c=!this.options.isHideToolBar&&n.size()?n.height():c)<=s&&o>t.height+c){if($(this.wrap).hasClass("is-safari-fullscreen"))return;e.attr("style",a),e.hasClass("scran")&&(n=r*this.compressionRatio,e.css({top:(o-n-c)/2,left:0}))}else{var s=(o-i-t.top-c)/this.compressionRatio;r<s||(e.css({width:s+"px"}),e.hasClass("scran")&&e.css({top:0,left:(r-s)/2}))}$(this.wrap).hasClass("exit")&&(a=window.innerHeight,(n=window.innerWidth)*this.compressionRatio>a?(i=(n-(o=a/this.compressionRatio))/2,c=((t=a)-t)/2,$(".HMplayerBox").css({top:c,left:i,width:o,height:t}),$(".KeyBtnBox_LISTEN").css({top:c,left:i,width:o,height:t})):(r=((e=n)-e)/2,c=(a-(s=n*this.compressionRatio))/2,$(".HMplayerBox").css({top:c,left:r,width:e,height:s}),$(".KeyBtnBox_LISTEN").css({top:c,left:r,width:e,height:s})))}}},{key:"addHMUIBox",value:function(){$(this.wrap).addClass("posRel");$(".KeyPositionBox").size()||$(this.wrap).prepend('<div class="KeyPositionBox">\n                                    <div class="KeyBtnBox_LISTEN"></div>\n                                </div>')}},{key:"messageUIModel",value:function(e,t){var n=this;switch(e){case"FrameDelay":this.gUIView.setDelayDataTooBar(t);break;case"setInputSocket":this.inputSocket=t;break;case"startGame":this.gUIView.setResolutionSelected(t),this.UseResolutionInfo.UseResolutionId=t.selected,this.isRotate&&this.switchScreen(90);break;case"startIm":if((this.isStartIM=!0)===this.options.isIgonreKeyboardEvent)return;this.inputMethod(),this.onInputStartIMEvent();break;case"stopIm":if(!(this.isStartIM=!1)===this.options.isIgonreKeyboardEvent)return;this.onInputStopIMEvent();break;case"autoSwitchBitRate":this._autoSwitchBitRate(t);break;case"topToast":this.callShowHMToast(t,this.wrap);break;case"showConfigrm":this.gUIView.showConfigrm({message:t,btnName1:this.UIModelTips.continue,btnName2:this.UIModelTips.cancel,hasCancleBtn:!0,hsaIcon:!1,configrm:function(){n._emit("ModelCallSaasSDK","enterQueue"),n._emit("sceneChanged","wait",{reason:"enterQueue"})},cancle:function(){n._emit("ModelCallSaasSDK","outQueue")}}),this._emit("sceneChanged","askn");break;case"showToastMessage":this.gUIView.showToastMessage(t);break;case"showToastFlash":this.gUIView.showToastFlash(t)}}},{key:"onInputStopIMEvent",value:function(){$(".input_Wrap").css({display:"none"}),$(".input_Wrap").remove()}},{key:"onInputStartIMEvent",value:function(){var e,t,n=this,i=($(".input_Wrap").css({display:"block",opacity:"0.01",bottom:"",left:"10px",top:"10px",filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=10)"}),document.getElementById("input_textview"));i&&(i.focus(),t=function(e){!n.cpLock&&n.inputSocket&&(n.InputSend("textIM:"+$("#input_textview").val()),$("#input_textview").val(""))},i.removeEventListener("compositionstart",e=function(e){n.cpLock&&(n.cpLock=!1,n._trigger(e.target,"input"))}),i.addEventListener("compositionstart",function(){n.cpLock=!0}),i.removeEventListener("compositionend",e),i.addEventListener("compositionend",e),i.removeEventListener("input",t),i.addEventListener("input",t))}},{key:"inputMethod",value:function(){var e=$(this.wrap);$(".input_Wrap").length<1&&e.append("<div class='input_Wrap'><input id='input_textview' class='input_textview' style='max-width:97.5%;height:1px;' autocomplete='off' onkeydown='this.onkeyup();' onkeyup='this.size=(this.value.length>20?this.value.length:20);'  /></div>"),$(".input_Wrap").css({position:"absolute",bottom:"8px","margin-right":"8px","max-width":"97.4%",width:"auto",display:"none"})}},{key:"_trigger",value:function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}},{key:"toEditKey",value:function(){this.isEditKey=!0,this.editKeyList.Obj=JSON.parse(JSON.stringify(this.UseKeyList.Obj)),$(".KeyBtnBox_LISTEN").hide()}},{key:"setKeyMapAndSave",value:function(e,t){var n=this.checkCanSaveKeyMap(e);t&&"function"==typeof t&&t(n),n.success&&($(".KeyBtnBox_LISTEN").show(),this.sendCountly(loggerEventId.set_stop_mouse_send_flag,!1),this.sendCountly(loggerEventId.keyboard_setting_save),this.isEditKey=!1,"-"!=this.temporaryKeyIndex&&(this.selectKeyIndex.index=this.temporaryKeyIndex,this.temporaryKeyIndex="-"),t=0,hasOwnProperty(e,"index")&&this.KeyMap.length>=e.index&&(t=e.index),this.KeyMap[t]=e,this.KeyMap[this.selectKeyIndex.index]=this.editKeyList.Obj,this.saveLocalKeymap(),this.saveLocalKeymapIndex(),this.UseKeyList.Obj=JSON.parse(JSON.stringify(e)))}},{key:"hideEditKeyNotSave",value:function(e){this.isEditKey=!1,this.setKeyBtn("reset"),this.KeyMap=this.changeSelectedKeyMap(this.KeyMap,this.selectKeyIndex.index),this.UseKeyList.Obj=this.KeyMap[this.selectKeyIndex.index]||{},$(".KeyBtnBox_LISTEN").show(),this.sendCountly(loggerEventId.set_stop_mouse_send_flag,!1)}},{key:"hideEditKeyAndSave",value:function(e){var t=this.checkCanSaveKeyMap();e&&"function"==typeof e&&e(t),t.success&&($(".KeyBtnBox_LISTEN").show(),this.sendCountly(loggerEventId.set_stop_mouse_send_flag,!1),this.sendCountly(loggerEventId.keyboard_setting_save),this.isEditKey=!1,"-"!=this.temporaryKeyIndex&&(this.selectKeyIndex.index=this.temporaryKeyIndex,this.temporaryKeyIndex="-"),this.KeyMap[this.selectKeyIndex.index]=this.editKeyList.Obj,this.saveLocalKeymap(),this.saveLocalKeymapIndex(),this.UseKeyList.Obj=JSON.parse(JSON.stringify(this.editKeyList.Obj)))}},{key:"checkCanSaveKeyMap",value:function(e){var t,n={success:!0,message:""},i={},o=null,o=(e||this.editKeyList.Obj).keys,r=null;try{r=Object.values(o).map(function(e){return e.type+""})}catch(e){return n={success:!1,message:this.UIModelTips.INVALID_PARAM}}for(t in o){var s=o[t];if("new"==s.value)return n={success:!1,message:this.UIModelTips.pleaseSet};if(!KeyCodeToName[s.value])return n={success:!1,message:this.UIModelTips.onlyEnNum};if("9999"==s.value&&hasOwnProperty(i,"9999"))return n={success:!1,message:this.UIModelTips.cannotRepeat+KeyCodeToName[s.value]};if(s.value&&hasOwnProperty(i,s.value))return n={success:!1,message:this.UIModelTips.cannotRepeat+KeyCodeToName[s.value]};if(s.value&&hasOwnProperty(this.stickHoldKeys,s.value)&&-1<r.indexOf("2"))return n={success:!1,message:this.UIModelTips.cannotRepeat+KeyCodeToName[s.value]};if("10"==s.type){var a=Math.abs(s.pos_x2-s.pos_x),c=Math.abs(s.pos_y2-s.pos_y);if(a<.05&&c<.05)return n={success:!1,message:this.UIModelTips.swipeLimit}}if(-1<r.indexOf("4")&&-1<r.indexOf("7"))return n={success:!1,message:this.UIModelTips.notSupportSmart};if(-1<r.indexOf("4")&&-1<r.indexOf("8"))return n={success:!1,message:this.UIModelTips.notSupportRight};if(-1<r.indexOf("8")&&-1<r.indexOf("2"))return n={success:!1,message:this.UIModelTips.notSupportArrow};i[s.value]=!0}return n}},{key:"getMapList",value:function(){var i=this,o=[];return this.KeyMap.map(function(e,t){var n=i.formatKeyMapToUse(e).keys;o.push({default:e.default,directionSize:e.directionSize,keys:n,keysName:e.keysName,origin:e.origin,rightClick:e.rightClick,selected:e.selected,sightOrigin:e.sightOrigin,sightScale:e.sightScale})}),this.KeyMap}},{key:"changeSelectedKeyMap",value:function(e,t){for(var n in e)e[n].selected=!1;return e.length>=t&&e.length?e[t].selected=!0:this.selectKeyIndex={index:0,default:!0},e}},{key:"switchKeyMap",value:function(e,t){for(var n in t||(this.temporaryKeyIndex=e),this.KeyMap)this.KeyMap[n].selected=!1;this.KeyMap[this.temporaryKeyIndex].selected=!0,this.editKeyList.Obj=JSON.parse(JSON.stringify(this.KeyMap[e]))}},{key:"getLocalKeyMap",value:function(){if(localStorage.pkgnamekeyMapSet)try{var e=JSON.parse(localStorage.pkgnamekeyMapSet);if(e[this.options.pkgName]){this.KeyMap=this.clearLocalKeyMap(this.KeyMap);var t,n=this.setNewArrayForKeyMap(e[this.options.pkgName],"1");for(t in n)this.KeyMap.push(n[t]);this.setSelectKeyMAap()}this.getKeymapDefaultbyScreen()}catch(e){this.getKeymapDefaultbyScreen()}else this.getKeymapDefaultbyScreen()}},{key:"getKeymapDefaultbyScreen",value:function(){this.KeyMap[this.selectKeyIndex.index]?this.UseKeyList.Obj=this.KeyMap[this.selectKeyIndex.index]||{}:this.KeyMap.length?(this.UseKeyList.Obj=this.KeyMap[0],this.selectKeyIndex.index=0,this.selectKeyIndex.default=this.KeyMap[0].default):this.UseKeyList.Obj={},this.keyboardListener()}},{key:"setSelectKeyMAap",value:function(){var e,t=0,n=0,i=JSON.parse(JSON.stringify(this.selectKeyIndex));for(e in this.KeyMap)this.KeyMap[e].selected=!1,this.KeyMap[e].default==i.default&&(t==i.index&&(this.KeyMap[e].selected=!0,n=t,0==i.default)&&(n=t+this.defaultLength),t++);(0==n||n>=this.KeyMap.length)&&(this.KeyMap[n=0].selected=!0),this.selectKeyIndex.index=n,this.KeyMap[n].default?this.selectKeyIndex.default=!0:this.selectKeyIndex.default=!1,this.saveLocalKeymapIndex()}},{key:"clearLocalKeyMap",value:function(e){var t,n=[];for(t in e){var i=e[t];i.default&&n.push(i)}return n}},{key:"hasChange",value:function(){var e=null,e="-"!=this.temporaryKeyIndex?this.KeyMap[this.temporaryKeyIndex]:this.UseKeyList.Obj;return JSON.stringify(this.editKeyList.Obj)!=JSON.stringify(e)}},{key:"setNewArrayForKeyMap",value:function(e,t,n){var i,o=[],r=0;try{if(e=JSON.parse(e),$.isArray(e))for(var s in e){var a=e[s];n&&(a.default=!0),a.default&&r++,a.keys=this.addKeyMapId(a.keys),o.push(a)}else n&&r++,i=this.addKeyMapId(e.keys),o.push({keys:i,keysName:t,selected:!1,default:!!n,opacity:"70",sightScale:30,directionSize:"138",rightClick:"138",origin:this.KeyMap.length?this.KeyMap[0].origin:[.5,.6],sightOrigin:this.KeyMap.length?this.KeyMap[0].sightOrigin:[.65,.35]});n&&(this.defaultLength=r)}catch(e){}return o}},{key:"addKeyMapId",value:function(e){var t={};try{for(var n in e){var i=getRandomString(),o=e[n];(t[i]=o).id||(o.id=i)}}catch(e){}return t}},{key:"formatKeyMapToUse",value:function(e){var t,n={};for(t in e.keys)n[e.keys[t].id]={id:e.keys[t].id,name:e.keys[t].name,pos_x:e.keys[t].pos_x,pos_y:e.keys[t].pos_y,type:e.keys[t].type,value:e.keys[t].value},10==e.keys[t].type&&Object.assign(n[e.keys[t].id],{pos_x2:e.keys[t].pos_x2,pos_y2:e.keys[t].pos_y2});return e.keys=n,e}},{key:"getSpecialMap",value:function(e,t,n){for(var i in t)if(t[i].type==e){if(!n)return t[i];if(t[i].value==n)return t[i]}return!1}},{key:"indexByValueKay",value:function(e){var t={};if(t=e.keys?indexBy(e.keys,"value"):indexBy(JSON.parse(e.content).keys,"value"),e.extKeys&&window.IsBoss)for(var n in e.extKeys)t[e.extKeys[n].value]=e.extKeys[n];if(e.extKeys1)for(var i in e.extKeys1)t[e.extKeys1[i].value]=e.extKeys1[i];if(e.extKeys2)for(var o in e.extKeys2)t[e.extKeys2[o].value]=e.extKeys2[o];return t}},{key:"setKeyMapList",value:function(e,t,n,i){switch(e){case"add":var o=!1;if(this.KeyMap.map(function(e){e.keysName==t&&(o=!0)}),o)return void(n&&"function"==typeof n&&n({message:this.UIModelTips.nameRepeat,Success:!1}));this.temporaryKeyIndex="-",this.temporaryKeyIndex=this.KeyMap.length,this.selectKeyIndex.index=this.KeyMap.length,this.selectKeyIndex.default=!1;var r={keys:i?i.keys:{},keysName:t,selected:!1,default:!1,opacity:"70",sightScale:i&&i.sightScale?i.sightScale:30,directionSize:i&&i.directionSize?i.directionSize:"138",rightClick:i&&i.rightClick?i.rightClick:"138",origin:this.KeyMap.length?this.KeyMap[0].origin:[.5,.6],sightOrigin:this.KeyMap.length?this.KeyMap[0].sightOrigin:[.65,.35]},s=this.checkCanSaveKeyMap(r);return(n&&"function"==typeof n&&n(s),s.success)?(this.KeyMap[this.selectKeyIndex.index]=r,this.KeyMap=this.changeSelectedKeyMap(this.KeyMap,this.selectKeyIndex.index),this.editKeyList.Obj=JSON.parse(JSON.stringify(this.KeyMap[this.selectKeyIndex.index])),this.saveLocalKeymapIndex(),this.saveLocalKeymap(),void(n&&"function"==typeof n&&n({message:"",Success:!0}))):void 0;case"delete":return(!t||t>this.KeyMap.length-1)&&n({message:this.UIModelTips.indexError,Success:!1}),this.KeyMap.splice(t,1),this.selectKeyIndex.index>=t&&this.selectKeyIndex.index--,this.saveLocalKeymapIndex(),this.saveLocalKeymap(),void(n&&"function"==typeof n&&n({message:"",Success:!0}));case"save":this.KeyMap=t,this.saveLocalKeymapIndex(),this.saveLocalKeymap()}}},{key:"setKeyBtn",value:function(e,t,n){switch(e){case"parame":return this.isEditKey?this.editKeyList.Obj=Object.assign({},this.editKeyList.Obj,t):this.UseKeyList.Obj=Object.assign({},this.UseKeyList.Obj,t),void("function"==typeof n&&n({Success:!0}));case"add":var i=getRandomString();return"function"==typeof n?(t.pos_x&&!isNaN(t.pos_x)||n({Success:!1,message:this.UIModelTips.INVALID_PARAM+"pos_x"}),void(t.pos_y&&!isNaN(t.pos_y)||n({Success:!1,message:this.UIModelTips.INVALID_PARAM+"pos_y"}))):(this.isEditKey?(this.editKeyList.Obj.keys[i]={id:i,name:t.name||"",pos_x:t.pos_x,pos_y:t.pos_y,type:t.type||0,value:t.value||"new"},10==t.type&&Object.assign(this.editKeyList.Obj.keys[i],{pos_x2:t.pos_x2,pos_y2:t.pos_y2}),4==t.type&&(this.editKeyList.Obj.sightScale=30),this.editKeyList.Obj=Object.assign({},this.editKeyList.Obj,{keys:this.editKeyList.Obj.keys})):(this.UseKeyList.Obj.keys[i]={id:i,name:t.name||"",pos_x:t.pos_x,pos_y:t.pos_y,type:t.type||0,value:t.value||"new"},10==t.type&&Object.assign(this.UseKeyList.Obj.keys[i],{pos_x2:t.pos_x2,pos_y2:t.pos_y2}),this.UseKeyList.Obj=Object.assign({},this.UseKeyList.Obj,{keys:this.UseKeyList.Obj.keys})),"function"==typeof n&&n({Success:!0}),i);case"set":i={};return"function"==typeof n?(t.id||n({Success:!1,message:this.UIModelTips.INVALID_PARAM+"ID"}),t.name||n({Success:!1,message:this.UIModelTips.INVALID_PARAM+"name"}),t.pos_x&&!isNaN(t.pos_x)||n({Success:!1,message:this.UIModelTips.INVALID_PARAM+"pos_x"}),t.pos_y&&!isNaN(t.pos_y)||n({Success:!1,message:this.UIModelTips.INVALID_PARAM+"pos_y"}),t.type&&!isNaN(t.type)||n({Success:!1,message:this.UIModelTips.INVALID_PARAM+"type"}),void(t.value&&!isNaN(t.value)||n({Success:!1,message:this.UIModelTips.INVALID_PARAM+"value"}))):(n&&(i=n),this.isEditKey?this.editKeyList.Obj=Object.assign({},this.editKeyList.Obj,{keys:this.modifyKeyMapObject(this.editKeyList.Obj.keys,e,t)},i):this.UseKeyList.Obj=Object.assign({},this.UseKeyList.Obj,{keys:this.modifyKeyMapObject(this.UseKeyList.Obj.keys,e,t)},i),"function"==typeof n&&n({Success:!0}),t.id);case"delete":return"function"==typeof n?void(t.id||n({Success:!1,message:this.UIModelTips.INVALID_PARAM+"ID"})):(this.isEditKey?(n&&delete this.editKeyList.Obj[n],this.editKeyList.Obj=Object.assign({},this.editKeyList.Obj,{keys:this.modifyKeyMapObject(this.editKeyList.Obj.keys,e,t)})):this.UseKeyList.Obj=Object.assign({},this.UseKeyList.Obj,{keys:this.modifyKeyMapObject(this.UseKeyList.Obj.keys,e,t)}),"function"==typeof n&&n({Success:!0}),t.id);case"empty":return this.editKeyList.Obj=Object.assign({},this.editKeyList.Obj,{keys:{},opacity:"70",sightScale:30,directionSize:"138",rightClick:"138",origin:this.KeyMap.length?this.KeyMap[0].origin:[.5,.6],sightOrigin:this.KeyMap.length?this.KeyMap[0].sightOrigin:[.65,.35]}),this.sendCountly(loggerEventId.keyboard_setting_clear_all),void("function"==typeof n&&n({Success:!0}));case"reset":i=null,i="-"!=this.temporaryKeyIndex?this.KeyMap[this.temporaryKeyIndex]:this.UseKeyList.Obj;this.editKeyList.Obj=Object.assign({},this.editKeyList.Obj,{keys:i.keys}),"function"==typeof n&&n({Success:!0})}}},{key:"modifyKeyMapObject",value:function(e,t,n){for(var i in e=JSON.parse(JSON.stringify(e)))e[i].id==n.id&&("set"==t?(delete e[i],e[n.id]=n):"delete"==t&&delete e[i]);return e}},{key:"saveLocalKeymap",value:function(){var e,t={},n=this.options.pkgName,i=[],o=JSON.parse(JSON.stringify(this.KeyMap));for(e in o){var r,s=o[e],a=[];for(r in s.keys)delete s.keys[r].id,s.keys[r].type=+s.keys[r].type,s.keys[r].value=+s.keys[r].value,a.push(s.keys[r]);s.keys=a,o[e].default||i.push(s)}var c=JSON.stringify(i);if(t[n]=c,localStorage.pkgnamekeyMapSet)try{var l=JSON.parse(localStorage.pkgnamekeyMapSet);l[n]=c,localStorage.pkgnamekeyMapSet=JSON.stringify(l)}catch(e){}else localStorage.pkgnamekeyMapSet=JSON.stringify(t)}},{key:"saveLocalKeymapIndex",value:function(){var e={},t=this.options.pkgName,n=JSON.parse(JSON.stringify(this.selectKeyIndex));if(this.KeyMap[n.index]&&this.KeyMap[n.index].default?n.default=!0:(n.default=!1,n.index=n.index-this.defaultLength),e[t]=JSON.stringify(n),localStorage.selectKey)try{var i=JSON.parse(localStorage.selectKey);i[t]=JSON.stringify(n),localStorage.selectKey=JSON.stringify(i)}catch(e){}else localStorage.selectKey=JSON.stringify(e)}},{key:"KeyMapChange",value:function(e){if(e){var t,n=this.formatKeyMapToUse(e);for(t in n.keys)4==n.keys[t].type&&(this.sightCode=n.keys[t].value);!0!==this.options.isIgonreKeyboardEvent&&this.gUIView.UIModelObjectChange(n)}}},{key:"listen",value:function(e,t){eventEmitter.on(e,t)}},{key:"getConfigurableKeyList",value:function(){return KeyCodeToName}},{key:"listenGWin",value:function(){var e=this,t=null;$(window).on("resize",function(){clearTimeout(t),t=setTimeout(function(){$(window).trigger("resizeDone")},150)}),$(window).on("resizeDone",function(){e.resizeDone()}),$(window).trigger("resize"),$(window).on("blur",function(){e.resetAllDownKey(),$(document).trigger("mouseup")})}},{key:"resizeDone",value:function(){var o=this;this.isRotate||$(this.wrap).css("minWidth","900px"),clearTimeout(this.fixTimer),this.fixTimer=setTimeout(function(){o.fixRectangle()},2),clearTimeout(this.resizeDone_timer),this.resizeDone_timer=setTimeout(function(){var e,t,n=$(".HMplayerBox"),i=$(".KeyPositionBox").offset();o.isRotate?(n.width(i.height),n.height(i.height),t=(i.width-i.height)/2,n.css("left",t+"px"),(t=$(o.wrap).hasClass("exit"))&&o.FullScarn&&((e=o.getRotateVideoCoordinate(i.width,i.height)).width=e.height,n.css(e),n.css("top",e.lt[1])),t||(clearTimeout(o.scrollBarTimer),o.scrollBarTimer=setTimeout(function(){var e=$(".KeyPositionBox").offset(),e=(n.width(e.height),n.height(e.height),(e.width-e.height)/2);n.css("left",e+"px"),o.gUIView.KeyRendering(),o.gUIView.positionToolbar()},5))):(n.width(i.width),n.height(i.height),n.css("left","0px"),n.css("top","0px"),e=$(o.wrap).hasClass("exit"),$(".HMPopBox").isShow()&&$(".HMPopBox").css({top:0,left:0,width:"100%",height:"100%"}),e&&o.FullScarn&&(t=getCompressionCss(o.compressionRatio),n.css(t),$(".HMPopBox").isShow())&&$(".HMPopBox").css(t)),$(".Key_SET_btns").removeAttr("style"),o.gUIView.KeyRendering(),o.gUIView.positionToolbar(),o._emit("sceneChanged","resizeDone")},100)}},{key:"fixRectangle",value:function(){var e=$(this.wrap).find(".KeyPositionBox"),t=this.options.toolbarDomId?$(this.options.toolbarDomId):e.find(".toolbar"),e=($(this.wrap).css({width:""}),e.offset()),n=$(window).scrollTop(),i=window.innerHeight,o=window.innerWidth,r=(!this.isRotate&&o<900&&(o=900),$(this.wrap).hasClass("scran")),s=o*this.compressionRatio,a=$(this.wrap).hasClass("exit");this.isRotate?$(".HMplayerBox").find("video").eq(0).css("object-fit","contain"):e.height=s,r&&(e.top=0,e.left=0,this.isRotate)&&(e.height=i);var c=i-(n+e.top+e.height),l=(this.oriStyle||r||(this.oriStyle=$(this.wrap).attr("style")),0);(l=t.size()?t.height():l)<=c&&i>e.height+l?($(this.wrap).attr("style",this.oriStyle),r&&(t=(i-s-l)/2,$(this.wrap).css("z-index",2),this.isRotate?$(this.wrap).css({top:0,left:0,width:Math.round(o),height:Math.round(i-l)}):$(this.wrap).css({top:t,left:0,width:Math.round(o),height:Math.round(s)}))):($(this.wrap).css({height:""}),(t=(c=i-n-e.top-l)/this.compressionRatio)<o?($(this.wrap).css({width:Math.round(t)+"px"}),a&&this.FullScarn&&$(this.wrap).css({width:"100%"}),r&&!a&&(s=(o-t)/2,$(this.wrap).css({width:Math.round(t)+"px",height:Math.round(c)+"px"}),$(this.wrap).css({top:0,left:s}))):this.isRotate&&$(this.wrap).css({top:0,left:0,width:Math.round(o),height:Math.round(i-l)}))}},{key:"callShowHMToast",value:function(e,t,n){this.gUIView.showHMToast(e,t,n)}},{key:"keyboardListener",value:function(){var t=this;!0!==this.options.isIgonreKeyboardEvent&&($(document).off("keydown keyup"),$(document).on("keydown keyup",function(e){return t.keyEventHandler(e)}))}},{key:"keyEventHandler",value:function(e){var t,n=this,i={};for(t in this.UseKeyList.Obj.keys){var o=this.UseKeyList.Obj.keys[t];i[o.value]=o}if(this.isEditKey)return!0;if(0<=this.interceptKeyList.indexOf(e.keyCode))this.interceptKeyHanler(e);else if(8===e.keyCode&&"textarea"!=e.target.type&&"text"!=e.target.type&&e.preventDefault(),9===e.keyCode&&e.preventDefault(),(93!==e.keyCode||(e.preventDefault(),!this.isStartIM))&&hasOwnProperty(keyTypes,e.type)){var r=e.keyCode;if(!hasOwnProperty(i,e.keyCode))for(var s in KeyCodeToName)KeyCodeToName[s]==KeyCodeToName[e.keyCode]&&s!=e.keyCode&&(r=s);if("keydown"===e.type){var a=!1;if(i&&(a=this.getSpecialMap(this.keySpecialType.sight,i)),e.keyCode==this.sightCode&&this.havePointerLock&&a){if(!this.isEditKey&&!this.sdkAutoMove&&this.isEditKey)return;if(this.isStartIM)return;if(this.keyboardHoldArray[this.sightCode])return;this.keyboardHoldArray[e.keyCode]=1;a=$(this.wrap)[0];if(document.pointerLockElement!=a)return void a.requestPointerLock();if(document.pointerLockElement==a)return void document.exitPointerLock()}if(this.keyboardHoldArray[e.keyCode])return;this.keyboardHoldArray[e.keyCode]=1}else if(this.keyboardHoldArray[e.keyCode]=0,e.keyCode==this.sightCode&&this.havePointerLock)return;if(44==e.keyCode&&this.isEditKey)this.callShowHMToast(this.UIModelTips.notSet,".KeyBtnBox_SET","editKey");else{var c,a=this.getSpecialMap(this.keySpecialType.stick,i);if(!this.isStartIM&&hasOwnProperty(this.stickHoldKeys,e.keyCode)&&a)return this.handleKeyStick(i,e.keyCode,e.type),!0;if(!this.isStartIM&&i&&hasOwnProperty(i,r)){var l=i[e.keyCode],a="keydown"==e.type?1:2;if(7==l.type){if(this.mindOrigin.pos_y&&1==a)return;if(1!=a)return this.mindOrigin.value!=e.keyCode?void 0:(this.mindKeyDown=!1,this.mindUp.pos_x?this.mouseEventHandler(mouseType.up,{offsetX:this.mindUp.pos_x,offsetY:this.mindUp.pos_y}):this.inputMouseSend(a,{pos_x:l.pos_x,pos_y:l.pos_y},"keyboard"),void(this.mindOrigin={}));this.mindUp={},this.mindKeyDown=!0,this.mindOrigin=l}else{if(9==l.type)return this.mindKeyDown&&(this.isCancelBtn=!0,this.inputMouseSend(3,{pos_x:l.pos_x,pos_y:l.pos_y},"keyboard"),setTimeout(function(){n.inputMouseSend(2,{pos_x:l.pos_x,pos_y:l.pos_y},"keyboard")},100),this.mindKeyDown=!1),void(this.isCancelBtn=!1);if(10==l.type)return void this.gestureKeyStick(i,e.keyCode,e.type)}this.inputMouseSend(a,{pos_x:l.pos_x,pos_y:l.pos_y},"keyboard")}else 0<this.mouseKeeping||e.keyCode&&!this.isEditKey&&-1!=this.IS_NoTriggerKeyCode.indexOf(e.keyCode)&&(c=(a=keyTypes[e.type])+":"+e.keyCode,"keyDown"==a?(this.NonCustomList[e.keyCode]=!0,this.InputSend(c)):(this.NonCustomList[e.keyCode]&&this.InputSend(c),this.NonCustomList[e.keyCode]=!1))}}}},{key:"gestureKeyStick",value:function(e,t,n){e=e[t];if(!e)return!1;if("keydown"==n){var t=Number(this.saasConfig.GuesterTotalTime||"300"),n=Number(this.saasConfig.GuesterIntervalTime||"10"),i=t/n,o=(e.pos_x2-e.pos_x)/i,r=(e.pos_y2-e.pos_y)/i,s=e.pos_x,a=e.pos_y,c=s,l=a,d=[];d.push({mode:mouseType.down,pos_x:e.pos_x,pos_y:e.pos_y});for(var p=1;p<=i;p++)d.push({mode:mouseType.move,pos_x:s,pos_y:a,pos_x_prev:c,pos_y_prev:l}),c=s,l=a,s+=o,a+=r;d.push({mode:mouseType.up,pos_x:c,pos_y:l}),this.chainSend(d,n)}}},{key:"handleKeyStick",value:function(e,t,n){var i=this,o=this.getSpecialMap(this.keySpecialType.stick,e);if(!o)return!1;var r=(this.KeyMap[this.selectKeyIndex.index]&&this.KeyMap[this.selectKeyIndex.index].directionSize||$(".SHOWbox_SpecialBtn.type_2").width())/$(this.wrap).width()/1.5,s=parseFloat(this.saasConfig.keymap_stick_radius_x||this.saasConfig.keymap_stick_radius||r)||.03,a=parseFloat(this.saasConfig.keymap_stick_radius_y||this.saasConfig.keymap_stick_radius||r)||.03;if(s<.03&&(s=.03),a<.03&&(a=.03),1==this.saasConfig.keymap_stick_asclick)this.handkeKeyStickForClickType(e,o,t,n,s,a);else{var c,l,d,p={x:o.pos_x,y:o.pos_y},u=("keyup"==n?this.stickHoldKeys[t]=!1:"keydown"==n&&(this.stickHoldKeys[t]=!0),this.stickLastPoint||(this.stickLastPoint={x:p.x,y:p.y}),!1),h=0,f={x:0,y:0},m=(e=this.saasConfig.keymap_stick_step_radom&&0<this.saasConfig.keymap_stick_step_radom.indexOf(",")?(r=this.saasConfig.keymap_stick_step_radom.split(","),c=parseFloat(r[0]),parseFloat(r[1])):c=0,this.getRandomNumber(c,e));for(l in this.stickHoldKeys)!0===this.stickHoldKeys[l]&&(u=!0,h+=1,d=this.getStickOffset(o,l,s,a,0),f.x+=d.x,f.y+=d.y);this.touchLength=h;var y,g,_,v={x:p.x+f.x,y:p.y+f.y},S=5,b=0,k=0,C=[],w=(w=parseFloat(this.saasConfig.keymap_stick_rate))?Math.abs(w):1;if("keyup"!=n||u){if("keydown"==n||"keyup"==n&&u){clearTimeout(this.touchLengthTimer);for(var T=1;T<=S;T++)g=void 0,1===(g=y=T)&&"keydown"==n&&u&&1===h&&C.push({mode:mouseType.down,pos_x:i.stickLastPoint.x,pos_y:i.stickLastPoint.y}),k=1!=w&&g<S?(b=(v.x-i.stickLastPoint.x)/S*g*w+i.stickLastPoint.x,(v.y-i.stickLastPoint.y)/S*g*w+i.stickLastPoint.y):(b=(v.x-i.stickLastPoint.x)/S*g+i.stickLastPoint.x,(v.y-i.stickLastPoint.y)/S*g+i.stickLastPoint.y),y%2==0?(b+=+m,k+=+m):(b-=+m,k-=+m),C.push({mode:mouseType.move,pos_x:b,pos_y:k}),g==S&&(C.push({mode:mouseType.move,pos_x:b,pos_y:k}),C.push({mode:mouseType.move,pos_x:b,pos_y:k}))}}else clearTimeout(this.touchLengthTimer),C.push({mode:mouseType.move,pos_x:this.stickLastPoint.x,pos_y:this.stickLastPoint.y}),C.push({mode:mouseType.up,pos_x:this.stickLastPoint.x,pos_y:this.stickLastPoint.y});1==this.touchLength&&2==this.oldTouchLength?(v={x:this.stickLastPoint.x,y:this.stickLastPoint.y},this.touchLengthTimer=setTimeout(function(){var n;i.isRotate?(n=[],$.each(C,function(e,t){n[e]={mode:t.mode,pos_x:t.pos_y,pos_y:1-t.pos_x}}),i.chainSend(n,10)):i.chainSend(C,10),v={x:p.x+f.x,y:p.y+f.y},i.stickLastPoint=v},parseFloat(this.saasConfig.keymap_stick_delay_time)||50)):this.isRotate?(_=[],$.each(C,function(e,t){_[e]={mode:t.mode,pos_x:t.pos_y,pos_y:1-t.pos_x}}),this.chainSend(_,10)):this.chainSend(C,10),this.oldTouchLength=this.touchLength,this.stickLastPoint=v}}},{key:"handkeKeyStickForClickType",value:function(e,t,n,i,o,r){this.stickHoldKeys[n]="keydown"==i;n=this.getStickClickOffset(n,t,o,r);"keydown"==i?this.inputMouseSend(mouseType.down,{pos_x:n.x,pos_y:n.y},"keyboard"):"keyup"==i&&this.inputMouseSend(mouseType.up,{pos_x:n.x,pos_y:n.y},"keyboard")}},{key:"chainSend",value:function(e,n){var i=this;n=n||1e3,$.each(e,function(e,t){i.sleep(n),i.stickMouseInputSend(t.mode,t.pos_x,t.pos_y)})}},{key:"stickMouseInputSend",value:function(e,t,n){this.stickPrev.x&&3==e?this.inputMouseSend(e,{pos_x:t,pos_y:n,pos_x_prev:this.stickPrev.x,pos_y_prev:this.stickPrev.y}):this.inputMouseSend(e,{pos_x:t,pos_y:n}),this.stickPrev=2==e?{x:"",y:""}:{x:t,y:n}}},{key:"sleep",value:function(e){for(var t=(new Date).getTime(),n=0;n<1e7&&!((new Date).getTime()-t>e);n++);}},{key:"getStickClickOffset",value:function(e,t,n,i){switch({87:"up",65:"left",83:"down",68:"right"}[e]){case"up":return{x:t.pos_x,y:t.pos_y-i/this.compressionRatio};case"down":return{x:t.pos_x,y:t.pos_y+i/this.compressionRatio};case"left":return{x:t.pos_x-n,y:t.pos_y};case"right":return{x:t.pos_x+n,y:t.pos_y};default:return{x:0,y:0}}}},{key:"getStickOffset",value:function(e,t,n,i,o){var r=parseFloat(o);switch({87:"up",65:"left",83:"down",68:"right"}[t]){case"up":return{x:0+r,y:-i/this.compressionRatio};case"down":return{x:0+r,y:i/this.compressionRatio};case"left":return{x:-n,y:0+r};case"right":return{x:n,y:0+r};default:return{x:0,y:0}}}},{key:"getRandomNumber",value:function(e,t){return isNaN(e)||isNaN(t)?0:(t=t-e,(e+Math.random()*t).toFixed(4))}},{key:"interceptKeyHanler",value:function(e){if(113==e.keyCode&&"keydown"===e.type)return"true"==localStorage.getItem("showBtn")||null==localStorage.getItem("showBtn")||null==localStorage.getItem("showBtn")?(this.gUIView.ShowOrHideBtn(!1),localStorage.setItem("showBtn","false")):(this.gUIView.ShowOrHideBtn(!0),localStorage.setItem("showBtn","true")),!0}},{key:"screenRotate",value:function(e){try{var t=JSON.parse(e);if(0==t.orientation||t.orientation){var n=t.orientation,i=(this.isRotate=0!==n,0);switch(n){case 0:i=0;break;case 1:i=270;break;case 2:i=180;break;case 3:i=90}this.switchScreen(i)}}catch(e){}}},{key:"switchScreen",value:function(e){var t=$(".KeyPositionBox").height(),n=$(".KeyPositionBox").width(),i=$(".HMplayerBox");this.gAutorotate=e,$(i).css("transform","rotate("+e+"deg)"),this.isRotate?(i.width(t),i.height(t),i.css("left",(n-t)/2+"px"),i.css("transform-origin","inherit")):(i.width(n),i.height(t),i.css("left","0px")),this.resizeDone(),this.gUIView.KeyRendering()}},{key:"resetAllDownKey",value:function(){for(var e in this.stickLastPoint&&this.inputMouseSend(mouseType.up,{pos_x:this.stickLastPoint.x,pos_y:this.stickLastPoint.y}),this.stickLastPoint=null,this.NonCustomList)this.NonCustomList[e]&&this.InputSend("keyUp:"+e);this.NonCustomList={};var t,n,i,o,r={};for(t in this.UseKeyList.Obj.keys){var s=this.UseKeyList.Obj.keys[t];r[s.value]=s}for(n in this.keyboardHoldArray)this.keyboardHoldArray[n]&&this.UseKeyList.Obj.keys[n]&&0==this.UseKeyList.Obj.keys[n].type&&(i=this.UseKeyList.Obj.keys[n],this.keyboardHoldArray[n]=0,this.isRotate?this.inputMouseSend(2,{pos_x:i.pos_y,pos_y:1-i.pos_x}):this.inputMouseSend(2,{pos_x:i.pos_x,pos_y:i.pos_y}));if(1==this.saasConfig.keymap_stick_asclick&&r){var a,c=this.getSpecialMap(this.keySpecialType.stick,r);for(a in this.stickHoldKeys)this.stickHoldKeys[a]&&this.handkeKeyStickForClickType(r,c,a,"keyup")}for(o in this.stickHoldKeys)this.stickHoldKeys[o]=!1}},{key:"handleKeyFire",value:function(e,t,n){if(!n)return!1;n=this.getSpecialMap(this.keySpecialType.fire,n);n&&0===e?this.inputMouseSend(t,{pos_x:n.pos_x,pos_y:n.pos_y}):this.rightClickKeyMap&&2===e&&(this.pointerLockRightClick=!0,this.inputMouseSend(t,{pos_x:this.rightClickKeyMap.pos_x,pos_y:this.rightClickKeyMap.pos_y}))}},{key:"_pointerLockChange",value:function(){var r,s,a,c,l,d,p,u,h,f=this;!0!==this.options.isIgonreKeyboardEvent&&(u=l=!1,h={x:p=d=c=a=s=r=0,y:0},document.addEventListener("pointerlockchange",function(){var e,o={};for(e in f.UseKeyList.Obj.keys){var t=f.UseKeyList.Obj.keys[e];o[t.value]=t}document.pointerLockElement==$(f.wrap)[0]?(f.sightToRight.x=f.KeyMap.length&&f.KeyMap[f.selectKeyIndex.index].sightOrigin[0]||.65,f.sightToRight.y=f.KeyMap.length&&f.KeyMap[f.selectKeyIndex.index].sightOrigin[1]||.35,l=!1,f.pointerLockRightClick=!1,f.inputMouseSend(mouseType.down,{pos_x:f.sightToRight.x,pos_y:f.sightToRight.y}),d=f.sightToRight.x,p=f.sightToRight.y,h={x:f.sightToRight.x,y:f.sightToRight.y},r=f.sightToRight.x,s=f.sightToRight.y,c=a=0,f.sightMousePositionPoint&&f.sightMousePositionPoint.removeListener(),f.sightMousePositionPoint=new sightMousePositionPoint(document),f.sightMousePositionPoint.sendPositionPoint(function(e,t){switch(e){case"move":if(!u){f.isRotate?(a+=t.movementY/window.screen.width,c+=t.movementX/window.screen.height):(a+=t.movementX/window.screen.width,c+=t.movementY/window.screen.height);var n=a*(0==f.UseKeyList.Obj.sightScale?1/30:f.UseKeyList.Obj.sightScale/30),i=c*(0==f.UseKeyList.Obj.sightScale?1/30:f.UseKeyList.Obj.sightScale/30);if(r=f.sightToRight.x+n,1<=(s=f.sightToRight.y+i)&&(s=.9999),.95<(r=1<=r?.9999:r)||r<.4)return u=!0,f.inputMouseSend(mouseType.up,{pos_x:d,pos_y:p}),c=a=0,setTimeout(function(){f.inputMouseSend(mouseType.down,{pos_x:f.sightToRight.x,pos_y:f.sightToRight.y}),d=f.sightToRight.x,p=f.sightToRight.y,h={x:f.sightToRight.x,y:f.sightToRight.y},u=!1},40),!1;if(.95<s||s<.1)return u=!0,f.inputMouseSend(mouseType.up,{pos_x:d,pos_y:p}),c=a=0,setTimeout(function(){f.inputMouseSend(mouseType.down,{pos_x:f.sightToRight.x,pos_y:f.sightToRight.y}),d=f.sightToRight.x,p=f.sightToRight.y,h={x:f.sightToRight.x,y:f.sightToRight.y},u=!1},40),!1;d=r,p=s,f.inputMouseSend(mouseType.move,{pos_x:r,pos_y:s,pos_x_prev:h.x,pos_y_prev:h.y}),h={x:r,y:s}}break;case"down":0!=t.button&&1!=t.button&&2!=t.button||(l=!0,f.handleKeyFire(t.button,mouseType.down,o));break;case"up":(f.pointerLockRightClick||f.rightClickLong)&&2==t.button?(f.pointerLockRightClick=!1,f.inputMouseSend(mouseType.up,{pos_x:f.rightClickKeyMap.pos_x,pos_y:f.rightClickKeyMap.pos_y})):f.is_moving?(f.inputMouseSend(mouseType.up,{pos_x:f.lastMouseCoordinate.x,pos_y:f.lastMouseCoordinate.y}),f.is_moving=!1):0!=t.button&&1!=t.button&&2!=t.button||!l||(l=!1,f.handleKeyFire(t.button,mouseType.up,o))}}),f.isHavePointerLock=!0):(f.inputMouseSend(mouseType.up,{pos_x:r,pos_y:s}),l&&f.handleKeyFire(0,mouseType.up,o),a=c=0,f.isHavePointerLock=!1,f.sightMousePositionPoint&&f.sightMousePositionPoint.removeListener())},!1))}},{key:"mouseHandler",value:function(){var A,B=this;1!=this.options.isIgonreMouseEvent&&(this.rightClickLong=!1,A=null,this.getTouchPositionPoint&&this.getTouchPositionPoint.removeListener(),this.getTouchPositionPoint=new GetMousePositionPoint($(".KeyBtnBox_LISTEN")[0]),this.getTouchPositionPoint.sendPositionPoint(function(e,t,n){var i,o={};for(i in B.UseKeyList.Obj.keys){var r=B.UseKeyList.Obj.keys[i];o[r.value]=r}var s=B.UseKeyList.Obj.rightClick||138,a=!1,c=null;switch(o&&(a=B.getSpecialMap(B.keySpecialType.RClick,o),c=o[9999],B.rightClickKeyMap=B.getSpecialMap(B.keySpecialType.normal,o,"9999")),e){case"down":if(B.isFistClicked||(B.isFistClicked=!0,B.enableAudio(!0)),(2!==t.button||!a&&!c)&&0!=t.button)return!1;if(0!==t.button&&2!==t.button||!B.is_moving)if(0!==t.button||B.is_moving||(B.is_moving=!0),2!==t.button||B.rightClickLong||(B.rightClickLong=!0),a&&2===t.button){if(!0===B.options.isIgonreKeyboardEvent)return;A&&(clearInterval(A),B.mouseEventHandler(mouseType.up,{offsetX:B.rightClick.x,offsetY:B.rightClick.y})),B.sdkAutoMove=!0;var l=t||window.event,d=B.rightClickCoordinate(l,c,s,!0),p=(B.mouseEventHandler(mouseType.down,{offsetX:d.btnOriginX,offsetY:d.btnOriginY}),$.each(d.payloads,function(e,t){B.sleep(5),B.mouseEventHandler(mouseType.move,{offsetX:t.btnX,offsetY:t.btnY}),e==d.payloads.length-1&&(B.rightClick.x=t.btnX,B.rightClick.y=t.btnY)}),0),u=43*(d.z/B.bevel(d.boxWidth/2,d.boxHeight/2));A=setInterval(function(){if(u<=++p){if(B.rightClickLong)return!1;B.mouseEventHandler(mouseType.up,{offsetX:B.rightClick.x,offsetY:B.rightClick.y}),clearInterval(A),A=null,B.sdkAutoMove=!1}},100)}else if(c&&2===t.button){if(!0===B.options.isIgonreKeyboardEvent)return;B.inputMouseSend(1,{pos_x:c.pos_x,pos_y:c.pos_y},"keyboard")}else B.mouseEventHandler(mouseType.down,t);break;case"move":if(B.mindKeyDown&&!B.isCancelBtn)B.mindMove(t);else if(B.is_moving||B.rightClickLong){if((2!==t.button||!a)&&0!=t.button)return!1;if(B.rightClickLong&&a){if(!0===B.options.isIgonreKeyboardEvent)return;a&&(clearInterval(A),B.sdkAutoMove=!1,l=t||window.event,l=B.rightClickCoordinate(l,c,s),B.rightClick.x=l.push_x,B.rightClick.y=l.push_y,B.mouseEventHandler(mouseType.move,{button:2,offsetX:l.push_x,offsetY:l.push_y}))}else B.mouseEventHandler(mouseType.move,t)}break;case"up":if((2!==t.button||!a&&!c)&&0!=t.button)return!1;if((0!==t.button||B.is_moving)&&(2!==t.button||B.rightClickLong))if(0===t.button&&B.is_moving&&(B.is_moving=!1),2===t.button&&B.rightClickLong&&(B.rightClickLong=!1),2===t.button&&a){if(!0===B.options.isIgonreKeyboardEvent)return;B.sdkAutoMove||(B.mouseEventHandler(mouseType.up,{offsetX:B.rightClick.x,offsetY:B.rightClick.y}),clearInterval(A))}else if(c&&2===t.button){if(!0===B.options.isIgonreKeyboardEvent)return;B.inputMouseSend(2,{pos_x:c.pos_x,pos_y:c.pos_y})}else B.mouseEventHandler(mouseType.up,t);break;case"leave":B.isHavePointerLock||!B.is_moving&&!B.rightClickLong||(B.inputMouseSend(mouseType.up,{pos_x:B.lastMouseCoordinate.x,pos_y:B.lastMouseCoordinate.y}),B.is_moving=!1,B.rightClickLong=!1);break;case"wheel":try{if(!B.saasConfig.mouseWheel)return;var h,f,m,y,g=t.offsetX,_=t.offsetY,v=0<t.deltaY,S=JSON.parse(B.saasConfig.mouseWheel),b=S.leftPointPosition,k=S.rightPointPosition,C=S.radius,w=S.moveStep,T=S.moveDistance,E=S.moveDelay,I=1920,R=1080,x=$(".HMplayerBox").width(),P=$(".HMplayerBox").height();C&&(h=g-Math.floor(x/(I/C)),f=_,m=g+Math.floor(x/(I/C)),y=_),b&&k&&(h=Math.floor(x/(I/b.x)),f=Math.floor(P/(R/b.y)),m=Math.floor(x/(I/k.x)),y=Math.floor(P/(R/k.y)));for(var O=0;O<=w;O++){var M={index:"mouseWheelRightPoint",offsetX:v?m-O*T:m+O*T,offsetY:y},D={index:"mouseWheelLeftPoint",offsetX:v?h+O*T:h-O*T,offsetY:f};0===O?(B.mouseEventHandler(mouseType.down,M),B.mouseEventHandler(mouseType.down,D)):(B.sleep(E),B.mouseEventHandler(mouseType.move,M),B.mouseEventHandler(mouseType.move,D),O===w&&(B.mouseEventHandler(mouseType.up,D),B.mouseEventHandler(mouseType.up,M)))}}catch(e){}}}))}},{key:"rightClickCoordinate",value:function(e,t,n,i){var o,r,s=e.clientX,a=e.clientY,e=$(".KeyBtnBox_LISTEN").width(),c=$(".KeyBtnBox_LISTEN").height(),l=e/2+$(".KeyBtnBox_LISTEN").offset().left,d=c/2+$(".KeyBtnBox_LISTEN").offset().top,p=t.pos_x*e,u=t.pos_y*c,t=Math.abs(s-l),h=Math.abs(a-d),f=this.bevel(t,h),m=Math.acos(h/f),t=t/($(".KeyBtnBox_LISTEN").height()/2),h=h/($(".KeyBtnBox_LISTEN").height()/2),y=Math.round(1e4*Math.abs(Math.cos(m)))/1e4,g=Math.round(1e4*Math.abs(Math.sin(m)))/1e4,_=n*t*$(".KeyBtnBox_LISTEN").width()/3e3*2,v=n*h*$(".KeyBtnBox_LISTEN").width()/3e3*2;if(i){for(var S=[],b=1;b<=5;b++)r=o=void 0,o=_/5*b,r=v/5*b,S.push({btnX:(0<s-l?o*g:0-o*g)+p,btnY:(0<a-d?r*y:0-r*y)+u});return{payloads:S,btnOriginX:p,btnOriginY:u,z:f,boxWidth:e,boxHeight:c}}return{push_x:g=(0<s-l?_*g:0-_*g)+p,push_y:y=(0<a-d?v*y:0-v*y)+u,btnOriginX:p,btnOriginY:u}}},{key:"mindMove",value:function(e){var e=e||window.event,t=e.clientX-$(".KeyBtnBox_LISTEN").offset().left,e=e.clientY-$(".KeyBtnBox_LISTEN").offset().top,n=$(".KeyBtnBox_LISTEN").width(),i=$(".KeyBtnBox_LISTEN").height(),o=this.UseKeyList.Obj.keys&&this.UseKeyList.Obj.origin[1]||.5,r=this.UseKeyList.Obj.keys&&this.UseKeyList.Obj.origin[1]||.6,o=n*o+$(".KeyBtnBox_LISTEN").offset().left,r=i*r+$(".KeyBtnBox_LISTEN").offset().top,n=this.mindOrigin.pos_x*n,i=this.mindOrigin.pos_y*i,s=Math.abs(t-o),a=Math.abs(e-r),c=this.bevel(s,a),c=Math.acos(a/c),s=s/($(".KeyBtnBox_LISTEN").height()/2),a=a/($(".KeyBtnBox_LISTEN").height()/2),l=Math.abs(Math.cos(c)),c=Math.abs(Math.sin(c)),s=68*$(".KeyBtnBox_LISTEN").width()/1e3*s*1.75,a=68*$(".KeyBtnBox_LISTEN").width()/1e3*a*1.75;this.mindUp={pos_x:c=(0<t-o?s*c:0-s*c)+n,pos_y:l=(0<e-r?a*l:0-a*l)+i},this.mouseEventHandler(mouseType.move,{offsetX:c,offsetY:l})}},{key:"bevel",value:function(e,t){return Math.sqrt(e*e+t*t)}},{key:"getClickCoordinate",value:function(e){var t=e.offsetX,n=e.offsetY;return e.target||(e.target=$(".KeyBtnBox_LISTEN")[0]),{left:t/$(".KeyBtnBox_LISTEN").offset().width,top:n/$(".KeyBtnBox_LISTEN").offset().height}}},{key:"getRotateVideoCoordinate",value:function(e,t){var n=t*this.compressionRatio,e=(e-n)/2;return{lt:[e,0],rb:[e+n,t],width:n,height:t}}},{key:"mouseEventHandler",value:function(e,t,n){var i=$(".KeyBtnBox_LISTEN");if($(t.target).hasClass("fp-fullscreen"))return!0;if($(t.target).hasClass("toolbar_listen")&&(t.offsetY=t.pageY-$(t.currentTarget).offset().top),$(t.target).hasClass("player-toolbar"))return!0;var o=i.width()||1067,i=i.height()||600,r=t||event,s=0,a=0;if(this.isRotate){o=this.getRotateVideoCoordinate(o,i);if(r.offsetX>o.lt[0]&&r.offsetX<o.rb[0]&&r.offsetY>o.lt[1]&&r.offsetY<o.rb[1])var i=r.offsetY-o.lt[1],c=o.width-(r.offsetX-o.lt[0]),s=i/o.height,a=c/o.width;else{if(!(e==mouseType.up&&0<this.mouseKeeping))return;s=1<this.lastMouseCoordinate.x?1:this.lastMouseCoordinate.x,a=1<this.lastMouseCoordinate.y?1:this.lastMouseCoordinate.y}}else{i=this.getClickCoordinate(r);if(!i)return;s=1<i.left?1:i.left,a=1<i.top?1:i.top,s=i.left<0?0:i.left,a=i.top<0?0:i.top}0!=t.button&&2!=t.button||(this.lastMouseCoordinate={x:s,y:a});c=t.index||"default";this.inputMouseSend(e,{pos_x:s,pos_y:a,pos_x_prev:this.mousePrev[c]?this.mousePrev[c].x:"",pos_y_prev:this.mousePrev[c]?this.mousePrev[c].y:""}),this.mousePrev[c]=2==e?{x:"",y:""}:{x:s,y:a}}},{key:"inputMouseSend",value:function(e,t,n){if((isNaN(t.pos_x)||t.pos_x<0)&&(t.pos_x=0),(isNaN(t.pos_y)||t.pos_y<0)&&(t.pos_y=0),this.gAutorotate)switch(this.gAutorotate){case 0:break;case 90:var i;"keyboard"==n&&(i=t.pos_x,t.pos_x=t.pos_y,t.pos_y=1-i);break;case 180:case 270:t.pos_x=1-t.pos_x,t.pos_y=1-t.pos_y;break;case-270:break;case-180:case-90:t.pos_x=1-t.pos_x,t.pos_y=1-t.pos_y}1<t.pos_x&&(t.pos_x=1),t.pos_x<0&&(t.pos_x=0),1<t.pos_y&&(t.pos_y=1),t.pos_y<0&&(t.pos_y=0);var o="mouse:"+e+":"+t.pos_x.toFixed(4)+","+t.pos_y.toFixed(4);if((t.pos_x_prev||t.pos_y_prev)&&3==e&&(o=o+":"+t.pos_x_prev.toFixed(4)+","+t.pos_y_prev.toFixed(4)),e===mouseType.down&&++this.mouseKeeping,e===mouseType.up&&0<this.mouseKeeping&&--this.mouseKeeping,this.isEditKey&&!this.sdkAutoMove&&this.isEditKey)return!1;this.InputSend(o)}},{key:"InputSend",value:function(e){this.inputSocket&&this.inputSocket.send(e)}},{key:"fullScreen",value:function(e){this.gUIView.fullScreenFn(e)}},{key:"webPageFullScreenFn",value:function(){this.gUIView.webPageFullScreenFn()}},{key:"showDelayData",value:function(){this.gUIView.showDelayData()}},{key:"showKeyboardSet",value:function(){this.gUIView.ShowkeyMouse()}},{key:"switchResolution",value:function(e,n){var i=this;this.isEditKey&&!this.UseResolutionInfo.isAutoResolutionChanged?(this.callShowHMToast(this.UIModelTips.completeSet,".KeyBtnBox_SET","editKey"),n&&n(!1,this.UIModelTips.completeSet)):e!=this.UseResolutionInfo.UseResolutionId&&(this.isChangeResolution&&!this.UseResolutionInfo.isAutoResolutionChanged?(this.callShowHMToast(this.UIModelTips.waiting,".KeyBtnBox_SET"),n&&n(!1,this.UIModelTips.waiting)):(this.isFistClicked=!1,this.isChangeResolution=!0,this.SaasSDK.changeResolution(e,function(e,t){i.isChangeResolution=!1,i.UseResolutionInfo.isAutoResolutionChanged=!1,i.UseResolutionInfo=i.SaasSDK.UseResolutionInfo,e?(n&&n(e),i.callShowHMToast(mixTips(i.saasConfig.toast_current_change_rate,[$(".resolution_btns").find('.resolution_btn[data-id="'+i.UseResolutionInfo.UseResolutionId+'"]').html()]),".KeyPositionBox",!0)):(i.callShowHMToast(t,".KeyPositionBox",!0),n&&n(e,t))})))}},{key:"_autoSwitchBitRate",value:function(e){var t,n,i;this.saasConfig.flagAutoSwitchBitRate&&"0"!=this.saasConfig.flagAutoSwitchBitRate?(e=1e3*Math.floor(e.bytesPerSecond/1e3)*8,(t=resInfoCurBitrate(this.UseResolutionInfo.UseResolutionId,this.saasConfig.resolutionInfo))<=e&&(e=Math.floor(.8*t)),i=this.saasConfig.bw_check_peakRateCoefficient||1,n=e/i>1e3*this.saasConfig.minimumBitRate*8,this.sendCountly(loggerEventId.low_bitrate_detected,[this.UseResolutionInfo.UseResolutionId,t,e/i].join(",")),(e=this.saasConfig.resolutionInfo[this.saasConfig.resolutionInfo.length-1]).id==this.UseResolutionInfo.UseResolutionId?(n&&(i=hasOwnProperty(this.saasConfig,"toast_speed_lower_bitrate")?this.saasConfig.toast_speed_lower_bitrate:this.UIModelTips.pleaseDownload,this.callShowHMToast(i,this.wrap,!0)),this._emit("sceneChanged","crtp",{minimum:1,delay_less_minimum:n?1:0})):(this.sendCountly(loggerEventId.auto_resolution_changed_start,this.UseResolutionInfo.UseResolutionId+":"+t+","+e.id+":"+e.bitRate+","+this.saasConfig.switchBR_duration+","+this.saasConfig.switchBR_frozentime+","+this.saasConfig.switchBR_threshold+","+this.saasConfig.frameDelayInfo_interval),this.UseResolutionInfo.isAutoResolutionChanged=!0,this.gUIView.switchResolution(e.id,e.name),this._emit("sceneChanged","crtp",{minimum:0,delay_less_minimum:n?1:0}))):this.callShowHMToast(this.saasConfig.toast_suggest_change_rate,this.wrap,!0)}},{key:"stopGame",value:function(e){this.isGameStop=!0,this.gUIView.stopGame(e),this.getTouchPositionPoint&&this.getTouchPositionPoint.removeListener(),$(window).off("blur"),$(document).off("keydown keyup"),$(window).off("resize"),$(window).off("resizeDone")}}]),a}();function loadPlayer(e,t,n){var i=document.createElement("script"),o=document.getElementsByTagName("head");o||t(!1),i.id=n,i.src=e,i.onload=function(){t(!0)},i.onerror=function(){t(!1)},o[0].appendChild(i)}function removePlayer(e){var t=document.head,e=document.getElementById(e);t&&e&&t.removeChild(e)}var x86player=createCommonjsModule(function(module,exports){!function(e){module.exports=e()}((self,function(){function __webpack_require__(e){var t=__webpack_module_cache__[e];return void 0!==t||(t=__webpack_module_cache__[e]={exports:{}},__webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__)),t.exports}var _Mathpow=Math.pow,_Mathfloor=Math.floor,_Mathmin=Math.min,_StringfromCharCode=String.fromCharCode,_Mathceil=Math.ceil,__webpack_modules__={817:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){for(var t=e,n=t.lib.BlockCipher,i=t.algo,l=[],o=[],r=[],s=[],a=[],c=[],d=[],p=[],u=[],h=[],f=[],m=0;m<256;m++)f[m]=m<128?m<<1:283^m<<1;for(var y=0,g=0,m=0;m<256;m++){var _=(_=g^g<<1^g<<2^g<<3^g<<4)>>>8^255&_^99,v=f[o[l[y]=_]=y],S=f[v],b=f[S],k=257*f[_]^16843008*_;r[y]=k<<24|k>>>8,s[y]=k<<16|k>>>16,a[y]=k<<8|k>>>24,c[y]=k,d[_]=(k=16843009*b^65537*S^257*v^16843008*y)<<24|k>>>8,p[_]=k<<16|k>>>16,u[_]=k<<8|k>>>24,h[_]=k,y?(y=v^f[f[f[b^v]]],g^=f[f[g]]):y=g=1}var C=[0,1,2,4,8,16,32,64,128,27,54],i=i.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e,t=this._keyPriorReset=this._key,n=t.words,i=t.sigBytes/4,o=4*(1+(this._nRounds=6+i)),r=this._keySchedule=[],s=0;s<o;s++)s<i?r[s]=n[s]:(e=r[s-1],s%i?6<i&&4==s%i&&(e=l[e>>>24]<<24|l[255&e>>>16]<<16|l[255&e>>>8]<<8|l[255&e]):(e=l[(e=e<<8|e>>>24)>>>24]<<24|l[255&e>>>16]<<16|l[255&e>>>8]<<8|l[255&e],e^=C[0|s/i]<<24),r[s]=r[s-i]^e);for(var a=this._invKeySchedule=[],c=0;c<o;c++)s=o-c,e=c%4?r[s]:r[s-4],a[c]=c<4||s<=4?e:d[l[e>>>24]]^p[l[255&e>>>16]]^u[l[255&e>>>8]]^h[l[255&e]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,s,a,c,l)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,d,p,u,h,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,i,o,r,s,a){for(var c=this._nRounds,l=e[t]^n[0],d=e[t+1]^n[1],p=e[t+2]^n[2],u=e[t+3]^n[3],h=4,f=1;f<c;f++)var m=i[l>>>24]^o[255&d>>>16]^r[255&p>>>8]^s[255&u]^n[h++],y=i[d>>>24]^o[255&p>>>16]^r[255&u>>>8]^s[255&l]^n[h++],g=i[p>>>24]^o[255&u>>>16]^r[255&l>>>8]^s[255&d]^n[h++],_=i[u>>>24]^o[255&l>>>16]^r[255&d>>>8]^s[255&p]^n[h++],l=m,d=y,p=g,u=_;m=(a[l>>>24]<<24|a[255&d>>>16]<<16|a[255&p>>>8]<<8|a[255&u])^n[h++],y=(a[d>>>24]<<24|a[255&p>>>16]<<16|a[255&u>>>8]<<8|a[255&l])^n[h++],g=(a[p>>>24]<<24|a[255&u>>>16]<<16|a[255&l>>>8]<<8|a[255&d])^n[h++],_=(a[u>>>24]<<24|a[255&l>>>16]<<16|a[255&d>>>8]<<8|a[255&p])^n[h++],e[t]=m,e[t+1]=y,e[t+2]=g,e[t+3]=_},keySize:8});return t.AES=n._createHelper(i),e.AES};"object"===i(t)?e.exports=t=o(n(8194),n(8725),n(3849),n(2276),n(6076)):(n=[n(8194),n(8725),n(3849),n(2276),n(6076)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},6076:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){function r(e,t,n){var i,o=this._iv;o?(i=o,this._iv=void 0):i=this._prevBlock;for(var r=0;r<n;r++)e[t+r]^=i[r]}function o(e){return"string"==typeof e?f:h}var t,n,s,i,a,c,l,d,p,u,h,f;e.lib.Cipher||(t=(e=e).lib,n=t.Base,s=t.WordArray,i=t.BufferedBlockAlgorithm,(a=e.enc).Utf8,c=a.Base64,l=e.algo.EvpKDF,d=t.Cipher=i.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(i){return{encrypt:function(e,t,n){return o(t).encrypt(i,e,t,n)},decrypt:function(e,t,n){return o(t).decrypt(i,e,t,n)}}}}),t.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),a=e.mode={},p=t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=a.CBC=((a=p.extend()).Encryptor=a.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;r.call(this,e,t,i),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),a.Decryptor=a.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=e.slice(t,t+i);n.decryptBlock(e,t),r.call(this,e,t,i),this._prevBlock=o}}),a),a=(e.pad={}).Pkcs7={pad:function(e,t){for(var t=4*t,n=t-e.sigBytes%t,i=[],o=0;o<n;o+=4)i.push(n<<24|n<<16|n<<8|n);t=s.create(i,n);e.concat(t)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},t.BlockCipher=d.extend({cfg:d.cfg.extend({mode:p,padding:a}),reset:function(){d.reset.call(this);var e,t=this.cfg,n=t.iv,t=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=t.createEncryptor:(e=t.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(t,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),u=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),p=(e.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,e=e.salt,e=e?s.create([1398893684,1701076831]).concat(e).concat(t):t;return e.toString(c)},parse:function(e){var t,e=c.parse(e),n=e.words;return 1398893684==n[0]&&1701076831==n[1]&&(t=s.create(n.slice(2,4)),n.splice(0,4),e.sigBytes-=16),u.create({ciphertext:e,salt:t})}},h=t.SerializableCipher=n.extend({cfg:n.extend({format:p}),encrypt:function(e,t,n,i){i=this.cfg.extend(i);var o=e.createEncryptor(n,i),t=o.finalize(t),o=o.cfg;return u.create({ciphertext:t,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(n,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),a=(e.kdf={}).OpenSSL={execute:function(e,t,n,i){i=i||s.random(8);e=l.create({keySize:t+n}).compute(e,i),n=s.create(e.words.slice(t),4*n);return e.sigBytes=4*t,u.create({key:e,iv:n,salt:i})}},f=t.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:a}),encrypt:function(e,t,n,i){n=(i=this.cfg.extend(i)).kdf.execute(n,e.keySize,e.ivSize),i.iv=n.iv,e=h.encrypt.call(this,e,t,n.key,i);return e.mixIn(n),e},decrypt:function(e,t,n,i){i=this.cfg.extend(i),t=this._parse(t,i.format);n=i.kdf.execute(n,e.keySize,e.ivSize,t.salt);return i.iv=n.iv,h.decrypt.call(this,e,t,n.key,i)}}))};"object"===i(t)?e.exports=t=o(n(8194),n(2276)):(n=[n(8194),n(2276)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},8194:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var i=function(){var l,n,e,t,i,d,o,r,s,a,c,p;function u(){}return l=Math,n=Object.create||function(e){return u.prototype=e,e=new u,u.prototype=null,e},t=(e={}).lib={},i=t.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},d=t.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null==t?4*e.length:t},toString:function(e){return(e||r).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,o=e.sigBytes;if(this.clamp(),i%4)for(var r,s=0;s<o;s++)r=255&n[s>>>2]>>>24-s%4*8,t[i+s>>>2]|=r<<24-(i+s)%4*8;else for(s=0;s<o;s+=4)t[i+s>>>2]=n[s>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=_Mathceil(t/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t,n,i=[],o=0;o<e;o+=4)t=987654071*(n=function(e){var t=987654321,n=4294967295;return function(){return((((t=36969*(65535&t)+(t>>16)&n)<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n)/4294967296+.5)*(.5<l.random()?1:-1)}}(4294967296*(t||l.random())))(),i.push(0|4294967296*n());return new d.init(i,e)}}),o=e.enc={},r=o.Hex={stringify:function(e){for(var t,n=e.words,i=e.sigBytes,o=[],r=0;r<i;r++)t=255&n[r>>>2]>>>24-r%4*8,o.push((t>>>4).toString(16)),o.push((15&t).toString(16));return o.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new d.init(n,t/2)}},s=o.Latin1={stringify:function(e){for(var t,n=e.words,i=e.sigBytes,o=[],r=0;r<i;r++)t=255&n[r>>>2]>>>24-r%4*8,o.push(_StringfromCharCode(t));return o.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new d.init(n,t)}},a=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(s.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return s.parse(unescape(encodeURIComponent(e)))}},c=t.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=a.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,i=t.sigBytes,o=this.blockSize,r=i/(4*o),s=(e?_Mathceil(r):l.max((0|r)-this._minBufferSize,0))*o,e=_Mathmin(4*s,i);if(s){for(var a=0;a<s;a+=o)this._doProcessBlock(n,a);var c=n.splice(0,s);t.sigBytes-=e}return new d.init(c,e)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),t.Hasher=c.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new p.HMAC.init(n,t).finalize(e)}}}),p=e.algo={},e};"object"===n(t)?e.exports=t=i():void 0!==(t="function"==typeof(i=i)?i.apply(t,[]):i)&&(e.exports=t)},8725:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return f=e.lib.WordArray,e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp();for(var o=[],r=0;r<n;r+=3)for(var s=255&t[r>>>2]>>>24-r%4*8,a=255&t[r+1>>>2]>>>24-(r+1)%4*8,c=255&t[r+2>>>2]>>>24-(r+2)%4*8,l=0;l<4&&r+.75*l<n;l++)o.push(i.charAt(63&(s<<16|a<<8|c)>>>6*(3-l)));var d=i.charAt(64);if(d)for(;o.length%4;)o.push(d);return o.join("")},parse:function(e){var t=e.length,n=this._map;if(!(i=this._reverseMap))for(var i=this._reverseMap=[],o=0;o<n.length;o++)i[n.charCodeAt(o)]=o;for(var r,s,a=n.charAt(64),c=(a&&-1!==(a=e.indexOf(a))&&(t=a),e),l=t,d=i,p=[],u=0,h=0;h<l;h++)h%4&&(r=d[c.charCodeAt(h-1)]<<h%4*2,s=d[c.charCodeAt(h)]>>>6-h%4*2,p[u>>>2]|=(r|s)<<24-u%4*8,u++);return f.create(p,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64;var f};"object"===i(t)?e.exports=t=o(n(8194)):(n=[n(8194)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},3651:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return o=e.lib.WordArray,(t=e.enc).Utf16=t.Utf16BE={stringify:function(e){for(var t,n=e.words,i=e.sigBytes,o=[],r=0;r<i;r+=2)t=65535&n[r>>>2]>>>16-r%4*8,o.push(_StringfromCharCode(t));return o.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return o.create(n,2*t)}},t.Utf16LE={stringify:function(e){for(var t,n=e.words,i=e.sigBytes,o=[],r=0;r<i;r+=2)t=s(65535&n[r>>>2]>>>16-r%4*8),o.push(_StringfromCharCode(t));return o.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>1]|=s(e.charCodeAt(i)<<16-i%2*16);return o.create(n,2*t)}},e.enc.Utf16;function s(e){return 4278255360&e<<8|16711935&e>>>8}var o,t};"object"===i(t)?e.exports=t=o(n(8194)):(n=[n(8194)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},2276:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).lib,i=n.Base,d=n.WordArray,n=t.algo,o=n.MD5,r=n.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=n.hasher.create(),o=d.create(),r=o.words,s=n.keySize,a=n.iterations;r.length<s;){c&&i.update(c);var c=i.update(e).finalize(t);i.reset();for(var l=1;l<a;l++)c=i.finalize(c),i.reset();o.concat(c)}return o.sigBytes=4*s,o}}),t.EvpKDF=function(e,t,n){return r.create(n).compute(e,t)},e.EvpKDF;var t,n,i,d,o,r};"object"===i(t)?e.exports=t=o(n(8194),n(8545),n(8839)):(n=[n(8194),n(8545),n(8839)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},3355:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return t=e.lib.CipherParams,n=e.enc.Hex,e.format.Hex={stringify:function(e){return e.ciphertext.toString(n)},parse:function(e){e=n.parse(e);return t.create({ciphertext:e})}},e.format.Hex;var t,n};"object"===i(t)?e.exports=t=o(n(8194),n(6076)):(n=[n(8194),n(6076)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},8839:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){var t,a;t=e.lib.Base,a=e.enc.Utf8,e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=a.parse(t));var n=e.blockSize,i=4*n;(t=t.sigBytes>i?e.finalize(t):t).clamp();for(var e=this._oKey=t.clone(),t=this._iKey=t.clone(),o=e.words,r=t.words,s=0;s<n;s++)o[s]^=1549556828,r[s]^=909522486;e.sigBytes=t.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}})};"object"===i(t)?e.exports=t=o(n(8194)):(n=[n(8194)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},2837:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e};"object"===i(t)?e.exports=t=o(n(8194),n(8363),n(4527),n(3651),n(8725),n(3849),n(8545),n(2155),n(7211),n(2205),n(4292),n(2362),n(4418),n(8839),n(9324),n(2276),n(6076),n(2515),n(4623),n(1407),n(9708),n(3152),n(1927),n(5207),n(149),n(8007),n(8349),n(3355),n(817),n(464),n(6560),n(6943),n(5617)):(n=[n(8194),n(8363),n(4527),n(3651),n(8725),n(3849),n(8545),n(2155),n(7211),n(2205),n(4292),n(2362),n(4418),n(8839),n(9324),n(2276),n(6076),n(2515),n(4623),n(1407),n(9708),n(3152),n(1927),n(5207),n(149),n(8007),n(8349),n(3355),n(817),n(464),n(6560),n(6943),n(5617)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},4527:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return"function"==typeof ArrayBuffer&&(t=e.lib.WordArray,o=t.init,(t.init=function(e){if((e=(e=e instanceof ArrayBuffer?new Uint8Array(e):e)instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e)instanceof Uint8Array){for(var t=e.byteLength,n=[],i=0;i<t;i++)n[i>>>2]|=e[i]<<24-i%4*8;o.call(this,n,t)}else o.apply(this,arguments)}).prototype=t),e.lib.WordArray;var t,o};"object"===i(t)?e.exports=t=o(n(8194)):(n=[n(8194)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},3849:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){var t=Math;function E(e,t,n,i,o,r,s){e=e+(t&n|~t&i)+o+s;return(e<<r|e>>>32-r)+t}function I(e,t,n,i,o,r,s){e=e+(t&i|n&~i)+o+s;return(e<<r|e>>>32-r)+t}function R(e,t,n,i,o,r,s){e=e+(t^n^i)+o+s;return(e<<r|e>>>32-r)+t}function x(e,t,n,i,o,r,s){e=e+(n^(t|~i))+o+s;return(e<<r|e>>>32-r)+t}for(var n=e,i=(r=n.lib).WordArray,o=r.Hasher,r=n.algo,P=[],s=0;s<64;s++)P[s]=0|4294967296*t.abs(t.sin(s+1));return r=r.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,o=e[i];e[i]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var r=this._hash.words,s=e[t+0],a=e[t+1],c=e[t+2],l=e[t+3],d=e[t+4],p=e[t+5],u=e[t+6],h=e[t+7],f=e[t+8],m=e[t+9],y=e[t+10],g=e[t+11],_=e[t+12],v=e[t+13],S=e[t+14],b=e[t+15],k=E(r[0],T=r[1],w=r[2],C=r[3],s,7,P[0]),C=E(C,k,T,w,a,12,P[1]),w=E(w,C,k,T,c,17,P[2]),T=E(T,w,C,k,l,22,P[3]);k=E(k,T,w,C,d,7,P[4]),C=E(C,k,T,w,p,12,P[5]),w=E(w,C,k,T,u,17,P[6]),T=E(T,w,C,k,h,22,P[7]),k=E(k,T,w,C,f,7,P[8]),C=E(C,k,T,w,m,12,P[9]),w=E(w,C,k,T,y,17,P[10]),T=E(T,w,C,k,g,22,P[11]),k=E(k,T,w,C,_,7,P[12]),C=E(C,k,T,w,v,12,P[13]),w=E(w,C,k,T,S,17,P[14]),k=I(k,T=E(T,w,C,k,b,22,P[15]),w,C,a,5,P[16]),C=I(C,k,T,w,u,9,P[17]),w=I(w,C,k,T,g,14,P[18]),T=I(T,w,C,k,s,20,P[19]),k=I(k,T,w,C,p,5,P[20]),C=I(C,k,T,w,y,9,P[21]),w=I(w,C,k,T,b,14,P[22]),T=I(T,w,C,k,d,20,P[23]),k=I(k,T,w,C,m,5,P[24]),C=I(C,k,T,w,S,9,P[25]),w=I(w,C,k,T,l,14,P[26]),T=I(T,w,C,k,f,20,P[27]),k=I(k,T,w,C,v,5,P[28]),C=I(C,k,T,w,c,9,P[29]),w=I(w,C,k,T,h,14,P[30]),k=R(k,T=I(T,w,C,k,_,20,P[31]),w,C,p,4,P[32]),C=R(C,k,T,w,f,11,P[33]),w=R(w,C,k,T,g,16,P[34]),T=R(T,w,C,k,S,23,P[35]),k=R(k,T,w,C,a,4,P[36]),C=R(C,k,T,w,d,11,P[37]),w=R(w,C,k,T,h,16,P[38]),T=R(T,w,C,k,y,23,P[39]),k=R(k,T,w,C,v,4,P[40]),C=R(C,k,T,w,s,11,P[41]),w=R(w,C,k,T,l,16,P[42]),T=R(T,w,C,k,u,23,P[43]),k=R(k,T,w,C,m,4,P[44]),C=R(C,k,T,w,_,11,P[45]),w=R(w,C,k,T,b,16,P[46]),k=x(k,T=R(T,w,C,k,c,23,P[47]),w,C,s,6,P[48]),C=x(C,k,T,w,h,10,P[49]),w=x(w,C,k,T,S,15,P[50]),T=x(T,w,C,k,p,21,P[51]),k=x(k,T,w,C,_,6,P[52]),C=x(C,k,T,w,l,10,P[53]),w=x(w,C,k,T,y,15,P[54]),T=x(T,w,C,k,a,21,P[55]),k=x(k,T,w,C,f,6,P[56]),C=x(C,k,T,w,b,10,P[57]),w=x(w,C,k,T,u,15,P[58]),T=x(T,w,C,k,v,21,P[59]),k=x(k,T,w,C,d,6,P[60]),C=x(C,k,T,w,g,10,P[61]),w=x(w,C,k,T,c,15,P[62]),T=x(T,w,C,k,m,21,P[63]),r[0]=0|r[0]+k,r[1]=0|r[1]+T,r[2]=0|r[2]+w,r[3]=0|r[3]+C},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes,o=(t[i>>>5]|=128<<24-i%32,_Mathfloor(n/4294967296));t[15+(64+i>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t[14+(64+i>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r,o=this._hash,s=o.words,a=0;a<4;a++)r=s[a],s[a]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return o},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),n.MD5=o._createHelper(r),n.HmacMD5=o._createHmacHelper(r),e.MD5};"object"===i(t)?e.exports=t=o(n(8194)):(n=[n(8194)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},2515:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e.mode.CFB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;r.call(this,e,t,i,n),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=e.slice(t,t+i);r.call(this,e,t,i,n),this._prevBlock=o}}),t),e.mode.CFB;function r(e,t,n,i){var o,r=this._iv;r?(o=r.slice(0),this._iv=void 0):o=this._prevBlock,i.encryptBlock(o,0);for(var s=0;s<n;s++)e[t+s]^=o[s]}var t};"object"===i(t)?e.exports=t=o(n(8194),n(6076)):(n=[n(8194),n(6076)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},1407:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e.mode.CTRGladman=(t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=this._iv,r=this._counter,s=(o&&(r=this._counter=o.slice(0),this._iv=void 0),0===((o=r)[0]=c(o[0]))&&(o[1]=c(o[1])),r.slice(0));n.encryptBlock(s,0);for(var a=0;a<i;a++)e[t+a]^=s[a]}}),t.Decryptor=n,t),e.mode.CTRGladman;function c(e){var t,n,i;return 255==(255&e>>24)?(n=255&e>>8,i=255&e,255==(t=255&e>>16)?(t=0,255==n?(n=0,255==i?i=0:++i):++n):++t,e=0,e=(e+=t<<16)+(n<<8)+i):e+=16777216,e}var t,n};"object"===i(t)?e.exports=t=o(n(8194),n(6076)):(n=[n(8194),n(6076)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},4623:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e.mode.CTR=(t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=this._iv,r=this._counter,s=(o&&(r=this._counter=o.slice(0),this._iv=void 0),r.slice(0));n.encryptBlock(s,0),r[i-1]=0|r[i-1]+1;for(var a=0;a<i;a++)e[t+a]^=s[a]}}),t.Decryptor=n,t),e.mode.CTR;var t,n};"object"===i(t)?e.exports=t=o(n(8194),n(6076)):(n=[n(8194),n(6076)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},3152:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e.mode.ECB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t),e.mode.ECB;var t};"object"===i(t)?e.exports=t=o(n(8194),n(6076)):(n=[n(8194),n(6076)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},9708:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e.mode.OFB=(t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=this._iv,r=this._keystream;o&&(r=this._keystream=o.slice(0),this._iv=void 0),n.encryptBlock(r,0);for(var s=0;s<i;s++)e[t+s]^=r[s]}}),t.Decryptor=n,t),e.mode.OFB;var t,n};"object"===i(t)?e.exports=t=o(n(8194),n(6076)):(n=[n(8194),n(6076)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},1927:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,t=4*t,t=t-n%t,n=n+t-1;e.clamp(),e.words[n>>>2]|=t<<24-n%4*8,e.sigBytes+=t},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923};"object"===i(t)?e.exports=t=o(n(8194),n(6076)):(n=[n(8194),n(6076)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},5207:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(n){return n.pad.Iso10126={pad:function(e,t){t*=4,t-=e.sigBytes%t;e.concat(n.lib.WordArray.random(t-1)).concat(n.lib.WordArray.create([t<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126};"object"===i(t)?e.exports=t=o(n(8194),n(6076)):(n=[n(8194),n(6076)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},149:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(n){return n.pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971};"object"===i(t)?e.exports=t=o(n(8194),n(6076)):(n=[n(8194),n(6076)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},8349:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding};"object"===i(t)?e.exports=t=o(n(8194),n(6076)):(n=[n(8194),n(6076)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},8007:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return e.pad.ZeroPadding={pad:function(e,t){t*=4;e.clamp(),e.sigBytes+=t-(e.sigBytes%t||t)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(255&t[n>>>2]>>>24-n%4*8);)n--;e.sigBytes=n+1}},e.pad.ZeroPadding};"object"===i(t)?e.exports=t=o(n(8194),n(6076)):(n=[n(8194),n(6076)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},9324:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).lib,i=n.Base,g=n.WordArray,n=t.algo,o=n.SHA1,_=n.HMAC,r=n.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,i=this.cfg,o=_.create(i.hasher,e),r=g.create(),s=g.create([1]),a=r.words,c=s.words,l=i.keySize,d=i.iterations;a.length<l;){n=o.update(t).finalize(s),o.reset();for(var p=n.words,u=p.length,h=n,f=1;f<d;f++){h=o.finalize(h),o.reset();for(var m=h.words,y=0;y<u;y++)p[y]^=m[y]}r.concat(n),c[0]++}return r.sigBytes=4*l,r}}),t.PBKDF2=function(e,t,n){return r.create(n).compute(e,t)},e.PBKDF2;var t,n,i,g,o,_,r};"object"===i(t)?e.exports=t=o(n(8194),n(8545),n(8839)):(n=[n(8194),n(8545),n(8839)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},5617:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).lib.StreamCipher,i=t.algo,o=[],s=[],c=[],i=i.RabbitLegacy=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],o=this._b=0;o<4;o++)a.call(this);for(o=0;o<8;o++)i[o]^=n[7&o+4];if(t){var e=t.words,t=e[0],e=e[1],t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),e=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8),r=t>>>16|4294901760&e,s=e<<16|65535&t;for(i[0]^=t,i[1]^=r,i[2]^=e,i[3]^=s,i[4]^=t,i[5]^=r,i[6]^=e,i[7]^=s,o=0;o<4;o++)a.call(this)}},_doProcessBlock:function(e,t){var n=this._X;a.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)o[i]=16711935&(o[i]<<8|o[i]>>>24)|4278255360&(o[i]<<24|o[i]>>>8),e[t+i]^=o[i]},blockSize:4,ivSize:2}),t.RabbitLegacy=n._createHelper(i),e.RabbitLegacy;function a(){for(var e=this._X,t=this._C,n=0;n<8;n++)s[n]=t[n];for(t[0]=0|t[0]+1295307597+this._b,t[1]=0|t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0),t[2]=0|t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0),t[3]=0|t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0),t[4]=0|t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0),t[5]=0|t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0),t[6]=0|t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0),t[7]=0|t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0),this._b=t[7]>>>0<s[7]>>>0?1:0,n=0;n<8;n++){var i=e[n]+t[n],o=65535&i,r=i>>>16;c[n]=((o*o>>>17)+o*r>>>15)+r*r^(0|(4294901760&i)*i)+(0|(65535&i)*i)}e[0]=0|c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16),e[1]=0|c[1]+(c[0]<<8|c[0]>>>24)+c[7],e[2]=0|c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16),e[3]=0|c[3]+(c[2]<<8|c[2]>>>24)+c[1],e[4]=0|c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16),e[5]=0|c[5]+(c[4]<<8|c[4]>>>24)+c[3],e[6]=0|c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16),e[7]=0|c[7]+(c[6]<<8|c[6]>>>24)+c[5]}var t,n,i,o,s,c};"object"===i(t)?e.exports=t=o(n(8194),n(8725),n(3849),n(2276),n(6076)):(n=[n(8194),n(8725),n(3849),n(2276),n(6076)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},6943:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).lib.StreamCipher,i=t.algo,o=[],s=[],a=[],i=i.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);for(var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],n=this._b=0;n<4;n++)c.call(this);for(n=0;n<8;n++)o[n]^=i[7&n+4];if(t){var t=t.words,r=t[0],t=t[1],r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8),s=r>>>16|4294901760&t,a=t<<16|65535&r;for(o[0]^=r,o[1]^=s,o[2]^=t,o[3]^=a,o[4]^=r,o[5]^=s,o[6]^=t,o[7]^=a,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)o[i]=16711935&(o[i]<<8|o[i]>>>24)|4278255360&(o[i]<<24|o[i]>>>8),e[t+i]^=o[i]},blockSize:4,ivSize:2}),t.Rabbit=n._createHelper(i),e.Rabbit;function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)s[n]=t[n];for(t[0]=0|t[0]+1295307597+this._b,t[1]=0|t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0),t[2]=0|t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0),t[3]=0|t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0),t[4]=0|t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0),t[5]=0|t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0),t[6]=0|t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0),t[7]=0|t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0),this._b=t[7]>>>0<s[7]>>>0?1:0,n=0;n<8;n++){var i=e[n]+t[n],o=65535&i,r=i>>>16;a[n]=((o*o>>>17)+o*r>>>15)+r*r^(0|(4294901760&i)*i)+(0|(65535&i)*i)}e[0]=0|a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16),e[1]=0|a[1]+(a[0]<<8|a[0]>>>24)+a[7],e[2]=0|a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16),e[3]=0|a[3]+(a[2]<<8|a[2]>>>24)+a[1],e[4]=0|a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16),e[5]=0|a[5]+(a[4]<<8|a[4]>>>24)+a[3],e[6]=0|a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16),e[7]=0|a[7]+(a[6]<<8|a[6]>>>24)+a[5]}var t,n,i,o,s,a};"object"===i(t)?e.exports=t=o(n(8194),n(8725),n(3849),n(2276),n(6076)):(n=[n(8194),n(8725),n(3849),n(2276),n(6076)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},6560:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return i=(t=e).lib.StreamCipher,o=t.algo,r=o.RC4=i.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,i=this._S=[],o=0;o<256;o++)i[o]=o;for(var o=0,r=0;o<256;o++){var s=o%n,s=255&t[s>>>2]>>>24-s%4*8,r=(r+i[o]+s)%256,s=i[o];i[o]=i[r],i[r]=s}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=n.call(this)},keySize:8,ivSize:0}),t.RC4=i._createHelper(r),o=o.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;0<e;e--)n.call(this)}}),t.RC4Drop=i._createHelper(o),e.RC4;function n(){for(var e=this._S,t=this._i,n=this._j,i=0,o=0;o<4;o++){var n=(n+e[t=(t+1)%256])%256,r=e[t];e[t]=e[n],e[n]=r,i|=e[(e[t]+e[n])%256]<<24-8*o}return this._i=t,this._j=n,i}var t,i,o,r};"object"===i(t)?e.exports=t=o(n(8194),n(8725),n(3849),n(2276),n(6076)):(n=[n(8194),n(8725),n(3849),n(2276),n(6076)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},4418:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).lib,i=n.WordArray,o=n.Hasher,n=t.algo,E=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),I=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),R=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),x=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),P=i.create([0,1518500249,1859775393,2400959708,2840853838]),O=i.create([1352829926,1548603684,1836072691,2053994217,0]),n=n.RIPEMD160=o.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,o=e[i];e[i]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}for(var r,s,a,c,l,d,p=this._hash.words,u=P.words,h=O.words,f=E.words,m=I.words,y=R.words,g=x.words,_=r=p[0],v=s=p[1],S=a=p[2],b=c=p[3],k=l=p[4],n=0;n<80;n+=1)d=0|(d=T(d=(d=0|r+e[t+f[n]])+(n<16?(s^a^c)+u[0]:n<32?C(s,a,c)+u[1]:n<48?((s|~a)^c)+u[2]:n<64?w(s,a,c)+u[3]:(s^(a|~c))+u[4])|0,y[n]))+l,r=l,l=c,c=T(a,10),a=s,s=d,d=0|(d=T(d=(d=0|_+e[t+m[n]])+(n<16?(v^(S|~b))+h[0]:n<32?w(v,S,b)+h[1]:n<48?((v|~S)^b)+h[2]:n<64?C(v,S,b)+h[3]:(v^S^b)+h[4])|0,g[n]))+k,_=k,k=b,b=T(S,10),S=v,v=d;d=0|p[1]+a+b,p[1]=0|p[2]+c+k,p[2]=0|p[3]+l+_,p[3]=0|p[4]+r+v,p[4]=0|p[0]+s+S,p[0]=d},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[14+(64+i>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o,i=this._hash,r=i.words,s=0;s<5;s++)o=r[s],r[s]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);return i},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),t.RIPEMD160=o._createHelper(n),t.HmacRIPEMD160=o._createHmacHelper(n),e.RIPEMD160;function C(e,t,n){return e&t|~e&n}function w(e,t,n){return e&n|t&~n}function T(e,t){return e<<t|e>>>32-t}var t,n,i,o,E,I,R,x,P,O};"object"===i(t)?e.exports=t=o(n(8194)):(n=[n(8194)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},8545:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).lib,i=n.WordArray,o=n.Hasher,n=t.algo,d=[],n=n.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],o=n[1],r=n[2],s=n[3],a=n[4],c=0;c<80;c++){d[c]=c<16?0|e[t+c]:(l=d[c-3]^d[c-8]^d[c-14]^d[c-16])<<1|l>>>31;var l=(i<<5|i>>>27)+a+d[c];l+=c<20?1518500249+(o&r|~o&s):c<40?1859775393+(o^r^s):c<60?(o&r|o&s|r&s)-1894007588:(o^r^s)-899497514,a=s,s=r,r=o<<30|o>>>2,o=i,i=l}n[0]=0|n[0]+i,n[1]=0|n[1]+o,n[2]=0|n[2]+r,n[3]=0|n[3]+s,n[4]=0|n[4]+a},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(64+i>>>9<<4)]=_Mathfloor(n/4294967296),t[15+(64+i>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=o._createHelper(n),t.HmacSHA1=o._createHmacHelper(n),e.SHA1;var t,n,i,o,d};"object"===i(t)?e.exports=t=o(n(8194)):(n=[n(8194)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},7211:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).lib.WordArray,i=t.algo,o=i.SHA256,i=i.SHA224=o.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}}),t.SHA224=o._createHelper(i),t.HmacSHA224=o._createHmacHelper(i),e.SHA224;var t,n,i,o};"object"===i(t)?e.exports=t=o(n(8194),n(2155)):(n=[n(8194),n(2155)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},2155:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){var i=Math,t=e,n=(r=t.lib).WordArray,o=r.Hasher,r=t.algo,s=[],f=[];function a(e){return 0|4294967296*(e-(0|e))}for(var c=2,l=0;l<64;)!function(e){for(var t=i.sqrt(e),n=2;n<=t;n++)if(!(e%n))return;return 1}(c)||(l<8&&(s[l]=a(_Mathpow(c,.5))),f[l]=a(_Mathpow(c,1/3)),l++),c++;var m=[],r=r.SHA256=o.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],o=n[1],r=n[2],s=n[3],a=n[4],c=n[5],l=n[6],d=n[7],p=0;p<64;p++){m[p]=p<16?0|e[t+p]:(((u=m[p-15])<<25|u>>>7)^(u<<14|u>>>18)^u>>>3)+m[p-7]+(((u=m[p-2])<<15|u>>>17)^(u<<13|u>>>19)^u>>>10)+m[p-16];var u=i&o^i&r^o&r,h=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&c^~a&l)+f[p]+m[p],d=l,l=c,c=a,a=0|s+h,s=r,r=o,o=i,i=0|h+(((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+u)}n[0]=0|n[0]+i,n[1]=0|n[1]+o,n[2]=0|n[2]+r,n[3]=0|n[3]+s,n[4]=0|n[4]+a,n[5]=0|n[5]+c,n[6]=0|n[6]+l,n[7]=0|n[7]+d},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(64+i>>>9<<4)]=_Mathfloor(n/4294967296),t[15+(64+i>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});return t.SHA256=o._createHelper(r),t.HmacSHA256=o._createHmacHelper(r),e.SHA256};"object"===i(t)?e.exports=t=o(n(8194)):(n=[n(8194)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},2362:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){for(var t=e,d=(o=t.lib).WordArray,i=o.Hasher,n=t.x64.Word,o=t.algo,E=[],I=[],R=[],r=1,s=0,a=0;a<24;a++){E[r+5*s]=(a+1)*(a+2)/2%64;var c=(2*r+3*s)%5,r=s%5,s=c}for(r=0;r<5;r++)for(s=0;s<5;s++)I[r+5*s]=s+(2*r+3*s)%5*5;for(var l=1,p=0;p<24;p++){for(var u,h=0,f=0,m=0;m<7;m++)1&l&&((u=(1<<m)-1)<32?f^=1<<u:h^=1<<u-32),128&l?l=113^l<<1:l<<=1;R[p]=n.create(h,f)}for(var x=[],y=0;y<25;y++)x[y]=n.create();return o=o.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new n.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,i=this.blockSize/2,o=0;o<i;o++){var r=e[t+2*o],s=e[t+2*o+1],r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);(k=n[o]).high^=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),k.low^=r}for(var a=0;a<24;a++){for(var c=0;c<5;c++){for(var l=0,d=0,p=0;p<5;p++)l^=(k=n[c+5*p]).high,d^=k.low;var u=x[c];u.high=l,u.low=d}for(c=0;c<5;c++)for(var h=x[(c+4)%5],f=x[(c+1)%5],m=f.high,f=f.low,l=h.high^(m<<1|f>>>31),d=h.low^(f<<1|m>>>31),p=0;p<5;p++)(k=n[c+5*p]).high^=l,k.low^=d;for(var y=1;y<25;y++){var g=(k=n[y]).high,_=k.low,v=E[y],g=(d=v<32?(l=g<<v|_>>>32-v,_<<v|g>>>32-v):(l=_<<v-32|g>>>64-v,g<<v-32|_>>>64-v),x[I[y]]);g.high=l,g.low=d}var S=x[0],b=n[0];for(S.high=b.high,S.low=b.low,c=0;c<5;c++)for(p=0;p<5;p++){var k=n[y=c+5*p],C=x[y],w=x[(c+1)%5+5*p],T=x[(c+2)%5+5*p];k.high=C.high^~w.high&T.high,k.low=C.low^~w.low&T.low}k=n[0],S=R[a];k.high^=S.high,k.low^=S.low}},_doFinalize:function(){var e=this._data,t=e.words,n=(this._nDataBytes,8*e.sigBytes),i=32*this.blockSize;t[n>>>5]|=1<<24-n%32,t[(_Mathceil((1+n)/i)*i>>>5)-1]|=128,e.sigBytes=4*t.length,this._process();for(var o=this._state,r=this.cfg.outputLength/8,s=[],a=0;a<r/8;a++){var c=o[a],l=c.high,c=c.low,l=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8);s.push(16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)),s.push(l)}return new d.init(s,r)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}}),t.SHA3=i._createHelper(o),t.HmacSHA3=i._createHmacHelper(o),e.SHA3};"object"===i(t)?e.exports=t=o(n(8194),n(8363)):(n=[n(8194),n(8363)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},4292:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).x64,i=n.Word,o=n.WordArray,n=t.algo,r=n.SHA512,n=n.SHA384=r.extend({_doReset:function(){this._hash=new o.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=16,e}}),t.SHA384=r._createHelper(n),t.HmacSHA384=r._createHmacHelper(n),e.SHA384;var t,n,i,o,r};"object"===i(t)?e.exports=t=o(n(8194),n(8363),n(2205)):(n=[n(8194),n(8363),n(2205)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},2205:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){function t(){return o.create.apply(o,arguments)}for(var n=e,i=n.lib.Hasher,o=(s=n.x64).Word,r=s.WordArray,s=n.algo,te=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],ne=[],a=0;a<80;a++)ne[a]=t();return s=s.SHA512=i.extend({_doReset:function(){this._hash=new r.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(K,N){for(var e=this._hash.words,t=e[0],n=e[1],i=e[2],o=e[3],r=e[4],s=e[5],a=e[6],e=e[7],L=t.high,c=t.low,F=n.high,l=n.low,$=i.high,d=i.low,j=o.high,p=o.low,U=r.high,u=r.low,H=s.high,h=s.low,G=a.high,f=a.low,V=e.high,m=e.low,y=L,g=c,_=F,v=l,S=$,b=d,W=j,k=p,C=U,w=u,z=H,T=h,q=G,J=f,Y=V,X=m,E=0;E<80;E++){var I,R,x=ne[E];E<16?(R=x.high=0|K[N+2*E],I=x.low=0|K[N+2*E+1]):(D=(B=ne[E-15]).high,B=B.low,M=(O=ne[E-2]).high,O=O.low,R=(R=(R=((D>>>1|B<<31)^(D>>>8|B<<24)^D>>>7)+(A=ne[E-7]).high+((I=(B=(B>>>1|D<<31)^(B>>>8|D<<24)^(B>>>7|D<<25))+A.low)>>>0<B>>>0?1:0))+((M>>>19|O<<13)^(M<<3|O>>>29)^M>>>6)+((I+=D=(O>>>19|M<<13)^(O<<3|M>>>29)^(O>>>6|M<<26))>>>0<D>>>0?1:0))+(A=ne[E-16]).high+((I+=B=A.low)>>>0<B>>>0?1:0),x.high=R,x.low=I);var P,O=C&z^~C&q,M=w&T^~w&J,D=y&_^y&S^_&S,A=(g>>>28|y<<4)^(g<<30|y>>>2)^(g<<25|y>>>7),B=te[E],x=B.high,Q=B.low,Z=Y+((C>>>14|w<<18)^(C>>>18|w<<14)^(C<<23|w>>>9))+((P=X+((w>>>14|C<<18)^(w>>>18|C<<14)^(w<<23|C>>>9)))>>>0<X>>>0?1:0),ee=A+(g&v^g&b^v&b),Y=q,X=J,q=z,J=T,z=C,T=w,C=0|W+(Z=Z+O+((P+=M)>>>0<M>>>0?1:0)+x+((P+=Q)>>>0<Q>>>0?1:0)+R+((P+=I)>>>0<I>>>0?1:0))+((w=0|k+P)>>>0<k>>>0?1:0),W=S,k=b,S=_,b=v,_=y,v=g,y=0|Z+(((y>>>28|g<<4)^(y<<30|g>>>2)^(y<<25|g>>>7))+D+(ee>>>0<A>>>0?1:0))+((g=0|P+ee)>>>0<P>>>0?1:0)}c=t.low=c+g,t.high=L+y+(c>>>0<g>>>0?1:0),l=n.low=l+v,n.high=F+_+(l>>>0<v>>>0?1:0),d=i.low=d+b,i.high=$+S+(d>>>0<b>>>0?1:0),p=o.low=p+k,o.high=j+W+(p>>>0<k>>>0?1:0),u=r.low=u+w,r.high=U+C+(u>>>0<w>>>0?1:0),h=s.low=h+T,s.high=H+z+(h>>>0<T>>>0?1:0),f=a.low=f+J,a.high=G+q+(f>>>0<J>>>0?1:0),m=e.low=m+X,e.high=V+Y+(m>>>0<X>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[30+(128+i>>>10<<5)]=_Mathfloor(n/4294967296),t[31+(128+i>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),n.SHA512=i._createHelper(s),n.HmacSHA512=i._createHmacHelper(s),e.SHA512};"object"===i(t)?e.exports=t=o(n(8194),n(8363)):(n=[n(8194),n(8363)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},464:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return n=(t=e).lib,i=n.WordArray,n=n.BlockCipher,o=t.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],h=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],m=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],r=o.DES=n.extend({_doReset:function(){for(var e,t=this._key.words,n=[],i=0;i<56;i++)n[i]=1&t[(e=l[i]-1)>>>5]>>>31-e%32;for(var o=this._subKeys=[],r=0;r<16;r++){for(var s=o[r]=[],a=h[r],i=0;i<24;i++)s[0|i/6]|=n[(u[i]-1+a)%28]<<31-i%6,s[4+(0|i/6)]|=n[28+(u[i+24]-1+a)%28]<<31-i%6;for(s[0]=s[0]<<1|s[0]>>>31,i=1;i<7;i++)s[i]>>>=4*(i-1)+3;s[7]=s[7]<<5|s[7]>>>27}var c=this._invSubKeys=[];for(i=0;i<16;i++)c[i]=o[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),d.call(this,1,1431655765);for(var i=0;i<16;i++){for(var o=n[i],r=this._lBlock,s=this._rBlock,a=0,c=0;c<8;c++)a|=f[c][((s^o[c])&m[c])>>>0];this._lBlock=s,this._rBlock=r^a}var l=this._lBlock;this._lBlock=this._rBlock,this._rBlock=l,d.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2}),t.DES=n._createHelper(r),o=o.TripleDES=n.extend({_doReset:function(){var e=this._key.words;this._des1=r.createEncryptor(i.create(e.slice(0,2))),this._des2=r.createEncryptor(i.create(e.slice(2,4))),this._des3=r.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),t.TripleDES=n._createHelper(o),e.TripleDES;function d(e,t){t=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=t,this._lBlock^=t<<e}function p(e,t){t=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=t,this._rBlock^=t<<e}var t,n,i,o,l,u,h,f,m,r};"object"===i(t)?e.exports=t=o(n(8194),n(8725),n(3849),n(2276),n(6076)):(n=[n(8194),n(8725),n(3849),n(2276),n(6076)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},8363:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o=function(e){return t=e.lib,o=t.Base,r=t.WordArray,(t=e.x64={}).Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null==t?8*e.length:t},toX32:function(){for(var e,t=this.words,n=t.length,i=[],o=0;o<n;o++)e=t[o],i.push(e.high),i.push(e.low);return r.create(i,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}}),e;var t,o,r};"object"===i(t)?e.exports=t=o(n(8194)):(n=[n(8194)],void 0!==(t="function"==typeof(o=o)?o.apply(t,n):o)&&(e.exports=t))},4673:function(e){e.exports=function(e,t){for(var n=Array(arguments.length-1),r=0,i=2,s=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise(function(i,o){n[r]=function(e){if(s)if(s=!1,e)o(e);else{for(var t=Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){s&&(s=!1,o(e))}})}},3393:function(e,t){t.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;1<--t%4&&"="===e.charAt(t);)++n;return _Mathceil(3*e.length)/4-n};for(var l=Array(64),c=Array(123),n=0;n<64;)c[l[n]=n<26?n+65:n<52?n+71:n<62?n-4:43|n-59]=n++;t.encode=function(e,t,n){for(var i,o,r=null,s=[],a=0,c=0;t<n;)o=e[t++],0==c?(s[a++]=l[o>>2],i=(3&o)<<4,c=1):1==c?(s[a++]=l[i|o>>4],i=(15&o)<<2,c=2):2==c&&(s[a++]=l[i|o>>6],s[a++]=l[63&o],c=0),8191<a&&((r=r||[]).push(_StringfromCharCode.apply(String,s)),a=0);return c&&(s[a++]=l[i],s[a++]=61,1==c)&&(s[a++]=61),r?(a&&r.push(_StringfromCharCode.apply(String,s.slice(0,a))),r.join("")):_StringfromCharCode.apply(String,s.slice(0,a))};var d="invalid encoding";t.decode=function(e,t,n){for(var i,o,r=n,s=0,a=0;a<e.length&&!(61===(o=e.charCodeAt(a++))&&1<s);){if(void 0===(o=c[o]))throw Error(d);0==s?(i=o,s=1):1==s?(t[n++]=i<<2|(48&o)>>4,i=o,s=2):2==s?(t[n++]=(15&i)<<4|(60&o)>>2,i=o,s=3):3==s&&(t[n++]=(3&i)<<6|o,s=0)}if(1==s)throw Error(d);return n-r},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},8938:function(e){function t(t,n){function c(e){if("string"!=typeof e){var t="return "+l();if(e){for(var n=Object.keys(e),i=Array(n.length+1),o=Array(n.length),r=0;r<n.length;)i[r]=n[r],o[r]=e[n[r++]];return i[r]=t,Function.apply(null,i).apply(null,o)}return Function(t)()}for(var s=Array(arguments.length-1),a=0;a<s.length;)s[a]=arguments[++a];if(a=0,e=e.replace(/%([%dfijs])/g,function(e,t){var n=s[a++];return"d"===t||"f"===t?+n+"":"i"===t?_Mathfloor(n)+"":"j"===t?JSON.stringify(n):"s"===t?n+"":"%"}),a!==s.length)throw Error("parameter count mismatch");return d.push(e),c}function l(e){return"function "+(e||n||"")+"("+(t&&t.join(",")||"")+"){\n  "+d.join("\n  ")+"\n}"}"string"==typeof t&&(n=t,t=void 0);var d=[];return c.toString=l,c}(e.exports=t).verbose=!1},5909:function(e){function t(){this._listeners={}}(e.exports=t).prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}},5667:function(e,t,n){function r(n,i,o){return"function"==typeof i?(o=i,i={}):i||(i={}),o?!i.xhr&&a&&a.readFile?a.readFile(n,function(e,t){return e&&"undefined"!=typeof XMLHttpRequest?r.xhr(n,i,o):e?o(e):o(null,i.binary?t:t.toString("utf8"))}):r.xhr(n,i,o):s(r,this,n,i)}e.exports=r;var s=n(4673),a=n(9047)("fs");r.xhr=function(e,n,i){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState){if(0!==o.status&&200!==o.status)return i(Error("status "+o.status));if(n.binary){if(!(e=o.response))for(var e=[],t=0;t<o.responseText.length;++t)e.push(255&o.responseText.charCodeAt(t));return i(null,"undefined"==typeof Uint8Array?e:new Uint8Array(e))}return i(null,o.responseText)}},n.binary&&("overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.responseType="arraybuffer"),o.open("GET",e),o.send()}},7279:function(e){function t(e){var i,o,r,s,t,l=Math.LN2,d=Math.log;return"undefined"==typeof Float32Array?(e.writeFloatLE=_.bind(null,S),e.writeFloatBE=_.bind(null,b),e.readFloatLE=v.bind(null,k),e.readFloatBE=v.bind(null,C)):(r=new Float32Array([-0]),s=new Uint8Array(r.buffer),t=128===s[3],e.writeFloatLE=t?f:m,e.writeFloatBE=t?m:f,e.readFloatLE=t?y:g,e.readFloatBE=t?g:y),"undefined"==typeof Float64Array?(e.writeDoubleLE=u.bind(null,S,0,4),e.writeDoubleBE=u.bind(null,b,4,0),e.readDoubleLE=h.bind(null,k,0,4),e.readDoubleBE=h.bind(null,C,4,0)):(i=new Float64Array([-0]),o=new Uint8Array(i.buffer),t=128===o[7],e.writeDoubleLE=t?n:a,e.writeDoubleBE=t?a:n,e.readDoubleLE=t?c:p,e.readDoubleBE=t?p:c),e;function n(e,t,n){i[0]=e,t[n]=o[0],t[n+1]=o[1],t[n+2]=o[2],t[n+3]=o[3],t[n+4]=o[4],t[n+5]=o[5],t[n+6]=o[6],t[n+7]=o[7]}function a(e,t,n){i[0]=e,t[n]=o[7],t[n+1]=o[6],t[n+2]=o[5],t[n+3]=o[4],t[n+4]=o[3],t[n+5]=o[2],t[n+6]=o[1],t[n+7]=o[0]}function c(e,t){return o[0]=e[t],o[1]=e[t+1],o[2]=e[t+2],o[3]=e[t+3],o[4]=e[t+4],o[5]=e[t+5],o[6]=e[t+6],o[7]=e[t+7],i[0]}function p(e,t){return o[7]=e[t],o[6]=e[t+1],o[5]=e[t+2],o[4]=e[t+3],o[3]=e[t+4],o[2]=e[t+5],o[1]=e[t+6],o[0]=e[t+7],i[0]}function u(e,t,n,i,o,r){var s,a,c=i<0?1:0;0===(i=c?-i:i)?(e(0,o,r+t),e(0<1/i?0:2147483648,o,r+n)):isNaN(i)?(e(0,o,r+t),e(2146959360,o,r+n)):17976931348623157e292<i?(e(0,o,r+t),e((2146435072|c<<31)>>>0,o,r+n)):i<22250738585072014e-324?(e((s=i/5e-324)>>>0,o,r+t),e((c<<31|s/4294967296)>>>0,o,r+n)):(a=_Mathfloor(d(i)/l),e(4503599627370496*(s=i*_Mathpow(2,-(a=1024===a?1023:a)))>>>0,o,r+t),e((c<<31|a+1023<<20|1048575&1048576*s)>>>0,o,r+n))}function h(e,t,n,i,o){t=e(i,o+t),e=e(i,o+n),i=2*(e>>31)+1,o=2047&e>>>20,n=4294967296*(1048575&e)+t;return 2047==o?n?NaN:1/0*i:0==o?5e-324*i*n:i*_Mathpow(2,o-1075)*(n+4503599627370496)}function f(e,t,n){r[0]=e,t[n]=s[0],t[n+1]=s[1],t[n+2]=s[2],t[n+3]=s[3]}function m(e,t,n){r[0]=e,t[n]=s[3],t[n+1]=s[2],t[n+2]=s[1],t[n+3]=s[0]}function y(e,t){return s[0]=e[t],s[1]=e[t+1],s[2]=e[t+2],s[3]=e[t+3],r[0]}function g(e,t){return s[3]=e[t],s[2]=e[t+1],s[1]=e[t+2],s[0]=e[t+3],r[0]}function _(e,t,n,i){var o=Math.round,r=t<0?1:0;0===(t=r?-t:t)?e(0<1/t?0:2147483648,n,i):isNaN(t)?e(2143289344,n,i):e(34028234663852886e22<t?(2139095040|r<<31)>>>0:t<11754943508222875e-54?(r<<31|o(t/1401298464324817e-60))>>>0:(r<<31|(e=_Mathfloor(d(t)/l))+127<<23|8388607&o(t*_Mathpow(2,-e)*8388608))>>>0,n,i)}function v(e,t,n){e=e(t,n),t=2*(e>>31)+1,n=255&e>>>23,e&=8388607;return 255==n?e?NaN:1/0*t:0==n?1401298464324817e-60*t*e:t*_Mathpow(2,n-150)*(8388608+e)}}function S(e,t,n){t[n]=255&e,t[n+1]=255&e>>>8,t[n+2]=255&e>>>16,t[n+3]=e>>>24}function b(e,t,n){t[n]=e>>>24,t[n+1]=255&e>>>16,t[n+2]=255&e>>>8,t[n+3]=255&e}function k(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function C(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},9047:function _(module){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},5375:function(e,t){var o=t.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},i=t.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=o(e),e="";n&&(e=t.shift()+"/");for(var i=0;i<t.length;)".."===t[i]?0<i&&".."!==t[i-1]?t.splice(--i,2):n?t.splice(i,1):++i:"."===t[i]?t.splice(i,1):++i;return e+t.join("/")};t.resolve=function(e,t,n){return n||(t=i(t)),!o(t)&&(e=(e=n?e:i(e)).replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t}},6435:function(e){e.exports=function(t,n,e){var i=e||8192,o=null,r=i;return function(e){if(e<1||i>>>1<e)return t(e);i<r+e&&(o=t(i),r=0);e=n.call(o,r,r+=e);return 7&r&&(r=1+(7|r)),e}}},4608:function(e,t){t.length=function(e){for(var t,n=0,i=0;i<e.length;++i)(t=e.charCodeAt(i))<128?n+=1:t<2048?n+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(i+1))?(++i,n+=4):n+=3;return n},t.read=function(e,t,n){if(n-t<1)return"";for(var i,o=null,r=[],s=0;t<n;)(i=e[t++])<128?r[s++]=i:191<i&&i<224?r[s++]=(31&i)<<6|63&e[t++]:239<i&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,r[s++]=55296+(i>>10),r[s++]=56320+(1023&i)):r[s++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],8191<s&&((o=o||[]).push(_StringfromCharCode.apply(String,r)),s=0);return o?(s&&o.push(_StringfromCharCode.apply(String,r.slice(0,s))),o.join("")):_StringfromCharCode.apply(String,r.slice(0,s))},t.write=function(e,t,n){for(var i,o,r=n,s=0;s<e.length;++s)(i=e.charCodeAt(s))<128?t[n++]=i:(i<2048?t[n++]=192|i>>6:(55296==(64512&i)&&56320==(64512&(o=e.charCodeAt(s+1)))?(++s,t[n++]=240|(i=65536+((1023&i)<<10)+(1023&o))>>18,t[n++]=128|63&i>>12):t[n++]=224|i>>12,t[n++]=128|63&i>>6),t[n++]=128|63&i);return n-r}},5685:function(e,t,n){e.exports=n(6184)},289:function(e,t,n){function s(e,t,n,i){if(t.resolvedType)if(t.resolvedType instanceof h){e("switch(d%s){",i);for(var o=t.resolvedType.values,r=Object.keys(o),s=0;s<r.length;++s)t.repeated&&o[r[s]]===t.typeDefault&&e("default:"),e("case%j:",r[s])("case %i:",o[r[s]])("m%s=%j",i,o[r[s]])("break");e("}")}else e('if(typeof d%s!=="object")',i)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",i,n,i);else{var a=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",i,i);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",i,i);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",i,i);break;case"uint64":a=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",i,i,a)('else if(typeof d%s==="string")',i)("m%s=parseInt(d%s,10)",i,i)('else if(typeof d%s==="number")',i)("m%s=d%s",i,i)('else if(typeof d%s==="object")',i)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",i,i,i,a?"true":"");break;case"bytes":e('if(typeof d%s==="string")',i)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",i,i,i)("else if(d%s.length)",i)("m%s=d%s",i,i);break;case"string":e("m%s=String(d%s)",i,i);break;case"bool":e("m%s=Boolean(d%s)",i,i)}}return e}function u(e,t,n,i){if(t.resolvedType)t.resolvedType instanceof h?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",i,n,i,i):e("d%s=types[%i].toObject(m%s,o)",i,n,i);else{var o=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",i,i,i,i);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',i)("d%s=o.longs===String?String(m%s):m%s",i,i,i)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",i,i,i,i,o?"true":"",i);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",i,i,i,i,i);break;default:e("d%s=m%s",i,i)}}return e}var h=n(37),f=n(2371);t.fromObject=function(e){var t=e.fieldsArray,n=f.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var i=0;i<t.length;++i){var o=t[i].resolve(),r=f.safeProp(o.name);o.map?(n("if(d%s){",r)('if(typeof d%s!=="object")',r)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",r)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",r),s(n,o,i,r+"[ks[i]]")("}")("}")):o.repeated?(n("if(d%s){",r)("if(!Array.isArray(d%s))",r)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",r)("for(var i=0;i<d%s.length;++i){",r),s(n,o,i,r+"[i]")("}")("}")):(o.resolvedType instanceof h||n("if(d%s!=null){",r),s(n,o,i,r),o.resolvedType instanceof h||n("}"))}return n("return m")},t.toObject=function(e){var t=e.fieldsArray.slice().sort(f.compareFieldsById);if(!t.length)return f.codegen()("return {}");for(var n=f.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],o=[],r=[],s=0;s<t.length;++s)t[s].partOf||(t[s].resolve().repeated?i:t[s].map?o:r).push(t[s]);if(i.length){for(n("if(o.arrays||o.defaults){"),s=0;s<i.length;++s)n("d%s=[]",f.safeProp(i[s].name));n("}")}if(o.length){for(n("if(o.objects||o.defaults){"),s=0;s<o.length;++s)n("d%s={}",f.safeProp(o[s].name));n("}")}if(r.length){for(n("if(o.defaults){"),s=0;s<r.length;++s){var a,c=r[s],l=f.safeProp(c.name);c.resolvedType instanceof h?n("d%s=o.enums===String?%j:%j",l,c.resolvedType.valuesById[c.typeDefault],c.typeDefault):c.long?n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,c.typeDefault.toString(),c.typeDefault.toNumber()):c.bytes?(a="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]",n("if(o.bytes===String)d%s=%j",l,_StringfromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",l,a)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",l,l)("}")):n("d%s=%j",l,c.typeDefault)}n("}")}for(var d=!1,s=0;s<t.length;++s){var c=t[s],p=e._fieldsArray.indexOf(c),l=f.safeProp(c.name);c.map?(d||(d=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),u(n,c,p,l+"[ks2[j]]")("}")):c.repeated?(n("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),u(n,c,p,l+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",l,c.name),u(n,c,p,l),c.partOf&&n("if(o.oneofs)")("d%s=%j",f.safeProp(c.partOf.name),c.name)),n("}")}return n("return d")}},2376:function(e,t,n){e.exports=function(e){var t=l.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var n=0;n<e.fieldsArray.length;++n){var i=e._fieldsArray[n].resolve(),o=i.resolvedType instanceof a?"int32":i.type,r="m"+l.safeProp(i.name);t("case %i:",i.id),i.map?(t("if(%s===util.emptyObject)",r)("%s={}",r)("var c2 = r.uint32()+r.pos"),void 0===c.defaults[i.keyType]?t("k=null"):t("k=%j",c.defaults[i.keyType]),void 0===c.defaults[o]?t("value=null"):t("value=%j",c.defaults[o]),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",i.keyType)("case 2:"),void 0===c.basic[o]?t("value=types[%i].decode(r,r.uint32())",n):t("value=r.%s()",o),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0===c.long[i.keyType]?t("%s[k]=value",r):t('%s[typeof k==="object"?util.longToHash(k):k]=value',r)):i.repeated?(t("if(!(%s&&%s.length))",r,r)("%s=[]",r),void 0!==c.packed[o]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",r,o)("}else"),void 0===c.basic[o]?t(i.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",r,n):t("%s.push(r.%s())",r,o)):void 0===c.basic[o]?t(i.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",r,n):t("%s=r.%s()",r,o),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<e._fieldsArray.length;++n){var s=e._fieldsArray[n];s.required&&t("if(!m.hasOwnProperty(%j))",s.name)("throw util.ProtocolError(%j,{instance:m})","missing required '"+s.name+"'")}return t("return m")};var a=n(37),c=n(243),l=n(2371)},9984:function(e,t,n){function l(e,t,n,i){t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,i,(3|t.id<<3)>>>0,(4|t.id<<3)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,i,(2|t.id<<3)>>>0)}e.exports=function(e){for(var t=u.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),n=e.fieldsArray.slice().sort(u.compareFieldsById),i=0;i<n.length;++i){var o=n[i].resolve(),r=e._fieldsArray.indexOf(o),s=o.resolvedType instanceof d?"int32":o.type,a=p.basic[s],c="m"+u.safeProp(o.name);o.map?(t("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",c,o.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",c)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(2|o.id<<3)>>>0,8|p.mapKey[o.keyType],o.keyType),void 0===a?t("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",r,c):t(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|a,s,c),t("}")("}")):o.repeated?(t("if(%s!=null&&%s.length){",c,c),o.packed&&void 0!==p.packed[s]?t("w.uint32(%i).fork()",(2|o.id<<3)>>>0)("for(var i=0;i<%s.length;++i)",c)("w.%s(%s[i])",s,c)("w.ldelim()"):(t("for(var i=0;i<%s.length;++i)",c),void 0===a?l(t,o,r,c+"[i]"):t("w.uint32(%i).%s(%s[i])",(o.id<<3|a)>>>0,s,c)),t("}")):(o.optional&&t("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",c,o.name),void 0===a?l(t,o,r,c):t("w.uint32(%i).%s(%s)",(o.id<<3|a)>>>0,s,c))}return t("return w")};var d=n(37),p=n(243),u=n(2371)},37:function(e,t,n){function a(e){return(a="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function i(e,t,n,i,o){if(c.call(this,e,n),t&&"object"!==a(t))throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=o||{},this.reserved=void 0,t)for(var r=Object.keys(t),s=0;s<r.length;++s)"number"==typeof t[r[s]]&&(this.valuesById[this.values[r[s]]=t[r[s]]]=r[s])}e.exports=i;var c=n(3319),o=(((i.prototype=Object.create(c.prototype)).constructor=i).className="Enum",n(219)),r=n(2371);i.fromJSON=function(e,t){e=new i(e,t.values,t.options,t.comment,t.comments);return e.reserved=t.reserved,e},i.prototype.toJSON=function(e){e=!!e&&!!e.keepComments;return r.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",e?this.comment:void 0,"comments",e?this.comments:void 0])},i.prototype.add=function(e,t,n){if(!r.isString(e))throw TypeError("name must be a string");if(!r.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=n||null,this},i.prototype.remove=function(e){if(!r.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},i.prototype.isReservedId=function(e){return o.isReservedId(this.reserved,e)},i.prototype.isReservedName=function(e){return o.isReservedName(this.reserved,e)}},4954:function(e,t,n){function s(e){return(s="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function a(e,t,n,i,o,r,s){if(d.isObject(i)?(s=o,r=i,i=o=void 0):d.isObject(o)&&(s=r,r=o,o=void 0),c.call(this,e,r),!d.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!d.isString(n))throw TypeError("type must be a string");if(void 0!==i&&!p.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==o&&!d.isString(o))throw TypeError("extend must be a string");this.rule=(i="proto3_optional"===i?"optional":i)&&"optional"!==i?i:void 0,this.type=n,this.id=t,this.extend=o||void 0,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!d.Long&&void 0!==l.long[n],this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=s}e.exports=a;var c=n(3319);((a.prototype=Object.create(c.prototype)).constructor=a).className="Field";var i,o=n(37),l=n(243),d=n(2371),p=/^required|optional|repeated$/;a.fromJSON=function(e,t){return new a(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(a.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),a.prototype.setOption=function(e,t,n){return"packed"===e&&(this._packed=null),c.prototype.setOption.call(this,e,t,n)},a.prototype.toJSON=function(e){e=!!e&&!!e.keepComments;return d.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},a.prototype.resolve=function(){var e;return this.resolved?this:(void 0===(this.typeDefault=l.defaults[this.type])&&(this.resolvedType=(this.declaringField||this).parent.lookupTypeOrEnum(this.type),this.typeDefault=this.resolvedType instanceof i?null:this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof o)&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault]),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof o)||delete this.options.packed,!Object.keys(this.options).length)&&(this.options=void 0),this.long?(this.typeDefault=d.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault)):this.bytes&&"string"==typeof this.typeDefault&&(d.base64.test(this.typeDefault)?d.base64.decode(this.typeDefault,e=d.newBuffer(d.base64.length(this.typeDefault)),0):d.utf8.write(this.typeDefault,e=d.newBuffer(d.utf8.length(this.typeDefault)),0),this.typeDefault=e),this.defaultValue=this.map?d.emptyObject:this.repeated?d.emptyArray:this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),c.prototype.resolve.call(this))},a.d=function(n,i,o,r){return"function"==typeof i?i=d.decorateType(i).name:i&&"object"===s(i)&&(i=d.decorateEnum(i).name),function(e,t){d.decorateType(e.constructor).add(new a(t,n,i,o,{default:r}))}},a._configure=function(e){i=e}},6184:function(e,t,n){var i=e.exports=n(2420);i.build="light",i.load=function(e,t,n){return"function"==typeof t?(n=t,t=new i.Root):t||(t=new i.Root),t.load(e,n)},i.loadSync=function(e,t){return(t=t||new i.Root).loadSync(e)},i.encoder=n(9984),i.decoder=n(2376),i.verifier=n(4329),i.converter=n(289),i.ReflectionObject=n(3319),i.Namespace=n(219),i.Root=n(6719),i.Enum=n(37),i.Type=n(2514),i.Field=n(4954),i.OneOf=n(1210),i.MapField=n(459),i.Service=n(2954),i.Method=n(3330),i.Message=n(3735),i.wrappers=n(6373),i.types=n(243),i.util=n(2371),i.ReflectionObject._configure(i.Root),i.Namespace._configure(i.Type,i.Service,i.Enum),i.Root._configure(i.Type),i.Field._configure(i.Type)},2420:function(e,t,n){function i(){o.util._configure(),o.Writer._configure(o.BufferWriter),o.Reader._configure(o.BufferReader)}var o=t;o.build="minimal",o.Writer=n(1329),o.BufferWriter=n(213),o.Reader=n(463),o.BufferReader=n(3102),o.util=n(9095),o.rpc=n(1921),o.roots=n(8292),o.configure=i,i()},459:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function s(e,t,n,i,o,r){if(a.call(this,e,t,i,void 0,void 0,o,r),!c.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}e.exports=s;var a=n(4954),i=(((s.prototype=Object.create(a.prototype)).constructor=s).className="MapField",n(243)),c=n(2371);s.fromJSON=function(e,t){return new s(e,t.id,t.keyType,t.type,t.options,t.comment)},s.prototype.toJSON=function(e){e=!!e&&!!e.keepComments;return c.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return a.prototype.resolve.call(this)},s.d=function(n,i,o){return"function"==typeof o?o=c.decorateType(o).name:o&&"object"===r(o)&&(o=c.decorateEnum(o).name),function(e,t){c.decorateType(e.constructor).add(new s(t,n,i,o))}}},3735:function(e,t,n){function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}e.exports=i;var o=n(9095);i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,o.toJSONOptions)}},3330:function(e,t,n){function i(e,t,n,i,o,r,s,a,c){if(d.isObject(o)?(s=o,o=r=void 0):d.isObject(r)&&(s=r,r=void 0),void 0!==t&&!d.isString(t))throw TypeError("type must be a string");if(!d.isString(n))throw TypeError("requestType must be a string");if(!d.isString(i))throw TypeError("responseType must be a string");l.call(this,e,s),this.type=t||"rpc",this.requestType=n,this.requestStream=!!o||void 0,this.responseType=i,this.responseStream=!!r||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=a,this.parsedOptions=c}e.exports=i;var l=n(3319),d=(((i.prototype=Object.create(l.prototype)).constructor=i).className="Method",n(2371));i.fromJSON=function(e,t){return new i(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},i.prototype.toJSON=function(e){e=!!e&&!!e.keepComments;return d.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",e?this.comment:void 0,"parsedOptions",this.parsedOptions])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),l.prototype.resolve.call(this))}},219:function(e,t,n){function i(e,t){if(e&&e.length){for(var n={},i=0;i<e.length;++i)n[e[i].name]=e[i].toJSON(t);return n}}function r(e,t){s.call(this,e,t),this.nested=void 0,this._nestedArray=null}function o(e){return e._nestedArray=null,e}e.exports=r;var s=n(3319);((r.prototype=Object.create(s.prototype)).constructor=r).className="Namespace";var a,c,l,d=n(4954),p=n(1210),u=n(2371);r.fromJSON=function(e,t){return new r(e,t.options).addJSON(t.nested)},r.arrayToJSON=i,r.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!=typeof e[n]&&e[n][0]<=t&&e[n][1]>t)return!0;return!1},r.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(r.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=u.toArray(this.nested))}}),r.prototype.toJSON=function(e){return u.toObject(["options",this.options,"nested",i(this.nestedArray,e)])},r.prototype.addJSON=function(e){if(e)for(var t,n=Object.keys(e),i=0;i<n.length;++i)t=e[n[i]],this.add((void 0===t.fields?void 0===t.values?void 0===t.methods?void 0===t.id?r:d:c:l:a).fromJSON(n[i],t));return this},r.prototype.get=function(e){return this.nested&&this.nested[e]||null},r.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof l)return this.nested[e].values;throw Error("no such enum: "+e)},r.prototype.add=function(e){if(!(e instanceof d&&void 0!==e.extend||e instanceof a||e instanceof l||e instanceof c||e instanceof r||e instanceof p))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof r&&e instanceof r)||t instanceof a||t instanceof c)throw Error("duplicate name '"+e.name+"' in "+this);for(var n=t.nestedArray,i=0;i<n.length;++i)e.add(n[i]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return(this.nested[e.name]=e).onAdd(this),o(this)},r.prototype.remove=function(e){if(!(e instanceof s))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),o(this)},r.prototype.define=function(e,t){if(u.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n,i=this;0<e.length;)if(n=e.shift(),i.nested&&i.nested[n]){if(!((i=i.nested[n])instanceof r))throw Error("path conflicts with non-namespace objects")}else i.add(i=new r(n));return t&&i.addJSON(t),i},r.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof r?e[t++].resolveAll():e[t++].resolve();return this.resolve()},r.prototype.lookup=function(e,t,n){if("boolean"==typeof t?(n=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),u.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var i=this.get(e[0]);if(i){if(1===e.length){if(!t||-1<t.indexOf(i.constructor))return i}else if(i instanceof r&&(i=i.lookup(e.slice(1),t,!0)))return i}else for(var o=0;o<this.nestedArray.length;++o)if(this._nestedArray[o]instanceof r&&(i=this._nestedArray[o].lookup(e,t,!0)))return i;return null===this.parent||n?null:this.parent.lookup(e,t)},r.prototype.lookupType=function(e){var t=this.lookup(e,[a]);if(t)return t;throw Error("no such type: "+e)},r.prototype.lookupEnum=function(e){var t=this.lookup(e,[l]);if(t)return t;throw Error("no such Enum '"+e+"' in "+this)},r.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[a,l]);if(t)return t;throw Error("no such Type or Enum '"+e+"' in "+this)},r.prototype.lookupService=function(e){var t=this.lookup(e,[c]);if(t)return t;throw Error("no such Service '"+e+"' in "+this)},r._configure=function(e,t,n){a=e,c=t,l=n}},3319:function(e,t,n){function i(e,t){if(!s.isString(e))throw TypeError("name must be a string");if(t&&!s.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}(e.exports=i).className="ReflectionObject";var o,s=n(2371);Object.defineProperties(i.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;e=e.root;e instanceof o&&e._handleAdd(this)},i.prototype.onRemove=function(e){e=e.root;e instanceof o&&e._handleRemove(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved||this.root instanceof o&&(this.resolved=!0),this},i.prototype.getOption=function(e){return this.options?this.options[e]:void 0},i.prototype.setOption=function(e,t,n){return n&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},i.prototype.setParsedOption=function(t,e,n){this.parsedOptions||(this.parsedOptions=[]);var i,o,r=this.parsedOptions;return n?(i=r.find(function(e){return Object.prototype.hasOwnProperty.call(e,t)}))?(o=i[t],s.setProperty(o,n,e)):((i={})[t]=s.setProperty({},n,e),r.push(i)):((o={})[t]=e,r.push(o)),this},i.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),i=0;i<n.length;++i)this.setOption(n[i],e[n[i]],t);return this},i.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},i._configure=function(e){o=e}},1210:function(e,t,n){function i(e,t,n,i){if(Array.isArray(t)||(n=t,t=void 0),r.call(this,e,n),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function o(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}e.exports=i;var r=n(3319),s=(((i.prototype=Object.create(r.prototype)).constructor=i).className="OneOf",n(4954)),a=n(2371);i.fromJSON=function(e,t){return new i(e,t.oneof,t.options,t.comment)},i.prototype.toJSON=function(e){e=!!e&&!!e.keepComments;return a.toObject(["options",this.options,"oneof",this.oneof,"comment",e?this.comment:void 0])},i.prototype.add=function(e){if(e instanceof s)return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),o(e.partOf=this),this;throw TypeError("field must be a Field")},i.prototype.remove=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),-1<(t=this.oneof.indexOf(e.name))&&this.oneof.splice(t,1),e.partOf=null,this},i.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t,n=0;n<this.oneof.length;++n)(t=e.get(this.oneof[n]))&&!t.partOf&&(t.partOf=this).fieldsArray.push(t);o(this)},i.prototype.onRemove=function(e){for(var t,n=0;n<this.fieldsArray.length;++n)(t=this.fieldsArray[n]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},i.d=function(){for(var n=Array(arguments.length),e=0;e<arguments.length;)n[e]=arguments[e++];return function(e,t){a.decorateType(e.constructor).add(new i(t,n)),Object.defineProperty(e,t,{get:a.oneOfGetter(n),set:a.oneOfSetter(n)})}}},463:function(e,t,n){function i(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function o(e){this.buf=e,this.pos=0,this.len=e.length}function r(){var e=new u(0,0),t=0;if(!(4<this.len-this.pos)){for(;t<3;++t){if(this.pos>=this.len)throw i(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,4<this.len-this.pos){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw i(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function s(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function a(){if(this.pos+8>this.len)throw i(this,8);return new u(s(this.buf,this.pos+=4),s(this.buf,this.pos+=4))}e.exports=o;function c(){return p.Buffer?function(e){return(o.create=function(e){return p.Buffer.isBuffer(e)?new l(e):f(e)})(e)}:f}var l,d,p=n(9095),u=p.LongBits,h=p.utf8,f="undefined"==typeof Uint8Array?function(e){if(Array.isArray(e))return new o(e);throw Error("illegal buffer")}:function(e){if(e instanceof Uint8Array||Array.isArray(e))return new o(e);throw Error("illegal buffer")};o.create=c(),o.prototype._slice=p.Array.prototype.subarray||p.Array.prototype.slice,o.prototype.uint32=(d=4294967295,function(){if(d=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(d=(d|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(d=(d|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(d=(d|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(d=(d|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)||!((this.pos+=5)>this.len))return d;throw this.pos=this.len,i(this,10)}),o.prototype.int32=function(){return 0|this.uint32()},o.prototype.sint32=function(){var e=this.uint32();return 0|e>>>1^-(1&e)},o.prototype.bool=function(){return 0!==this.uint32()},o.prototype.fixed32=function(){if(this.pos+4>this.len)throw i(this,4);return s(this.buf,this.pos+=4)},o.prototype.sfixed32=function(){if(this.pos+4>this.len)throw i(this,4);return 0|s(this.buf,this.pos+=4)},o.prototype.float=function(){if(this.pos+4>this.len)throw i(this,4);var e=p.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},o.prototype.double=function(){if(this.pos+8>this.len)throw i(this,4);var e=p.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},o.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw i(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},o.prototype.string=function(){var e=this.bytes();return h.read(e,0,e.length)},o.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw i(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw i(this)}while(128&this.buf[this.pos++]);return this},o.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},o._configure=function(e){l=e,o.create=c(),l._configure();var t=p.Long?"toLong":"toNumber";p.merge(o.prototype,{int64:function(){return r.call(this)[t](!1)},uint64:function(){return r.call(this)[t](!0)},sint64:function(){return r.call(this).zzDecode()[t](!1)},fixed64:function(){return a.call(this)[t](!0)},sfixed64:function(){return a.call(this)[t](!1)}})}},3102:function(e,t,n){function i(e){o.call(this,e)}e.exports=i;var o=n(463),r=((i.prototype=Object.create(o.prototype)).constructor=i,n(9095));i._configure=function(){r.Buffer&&(i.prototype._slice=r.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=_Mathmin(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=_Mathmin(this.pos+e,this.len))},i._configure()},6719:function(e,t,n){function i(e){r.call(this,"",e),this.deferred=[],this.files=[]}function h(){}function o(e,t){var n,i=t.parent.lookup(t.extend);if(i)return((n=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options)).declaringField=t).extensionField=n,i.add(n),1}e.exports=i;var r=n(219);((i.prototype=Object.create(r.prototype)).constructor=i).className="Root";var s,f,m,a=n(4954),c=n(37),l=n(1210),y=n(2371),d=(i.fromJSON=function(e,t){return t=t||new i,e.options&&t.setOptions(e.options),t.addJSON(e.nested)},i.prototype.resolvePath=y.path.resolve,i.prototype.fetch=y.fetch,i.prototype.load=function e(t,r,o){function s(e,t){if(o){var n=o;if(o=null,p)throw e;n(e,t)}}function a(e){var t=e.lastIndexOf("google/protobuf/");if(-1<t){e=e.substring(t);if(e in m)return e}return null}function c(e,t){try{if(y.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),y.isString(t)){f.filename=e;var n,i=f(t,d,r),o=0;if(i.imports)for(;o<i.imports.length;++o)(n=a(i.imports[o])||d.resolvePath(e,i.imports[o]))&&l(n);if(i.weakImports)for(o=0;o<i.weakImports.length;++o)(n=a(i.weakImports[o])||d.resolvePath(e,i.weakImports[o]))&&l(n,!0)}else d.setOptions(t.options).addJSON(t.nested)}catch(e){s(e)}p||u||s(null,d)}function l(n,i){if(!(-1<d.files.indexOf(n))){if(d.files.push(n),n in m)return p?c(n,m[n]):(++u,setTimeout(function(){--u,c(n,m[n])}));if(p){var e;try{e=y.fs.readFileSync(n).toString("utf8")}catch(n){return i||s(n)}c(n,e)}else++u,d.fetch(n,function(e,t){return--u,o?e?void(i?u||s(null,d):s(e)):void c(n,t):void 0})}}"function"==typeof r&&(o=r,r=void 0);var d=this;if(!o)return y.asPromise(e,d,t,r);var p=o===h,u=0;y.isString(t)&&(t=[t]);for(var n,i=0;i<t.length;++i)(n=d.resolvePath("",t[i]))&&l(n);return p?d:void(u||s(null,d))},i.prototype.loadSync=function(e,t){if(y.isNode)return this.load(e,t,h);throw Error("not supported")},i.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return r.prototype.resolveAll.call(this)},/^[A-Z]/);i.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||o(0,e)||this.deferred.push(e);else if(e instanceof c)d.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof l)){if(e instanceof s)for(var t=0;t<this.deferred.length;)o(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);d.test(e.name)&&(e.parent[e.name]=e)}},i.prototype._handleRemove=function(e){var t;if(e instanceof a)void 0!==e.extend&&(e.extensionField?(e.extensionField.parent.remove(e.extensionField),e.extensionField=null):-1<(t=this.deferred.indexOf(e))&&this.deferred.splice(t,1));else if(e instanceof c)d.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);d.test(e.name)&&delete e.parent[e.name]}},i._configure=function(e,t,n){s=e,f=t,m=n}},8292:function(e){e.exports={}},1921:function(e,t,n){t.Service=n(7655)},7655:function(e,t,n){function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");a.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!n}e.exports=i;var a=n(9095);((i.prototype=Object.create(a.EventEmitter.prototype)).constructor=i).prototype.rpcCall=function e(n,t,i,o,r){if(!o)throw TypeError("request must be specified");var s=this;if(!r)return a.asPromise(e,s,n,t,i,o);if(s.rpcImpl)try{return s.rpcImpl(n,t[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(e,t){if(e)return s.emit("error",e,n),r(e);if(null!==t){if(!(t instanceof i))try{t=i[s.responseDelimited?"decodeDelimited":"decode"](t)}catch(e){return s.emit("error",e,n),r(e)}return s.emit("data",t,n),r(null,t)}s.end(!0)})}catch(e){s.emit("error",e,n),setTimeout(function(){r(e)},0)}else setTimeout(function(){r(Error("already ended"))},0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},2954:function(e,t,n){function r(e,t){o.call(this,e,t),this.methods={},this._methodsArray=null}function i(e){return e._methodsArray=null,e}e.exports=r;var o=n(219),s=(((r.prototype=Object.create(o.prototype)).constructor=r).className="Service",n(3330)),a=n(2371),c=n(1921);r.fromJSON=function(e,t){var n=new r(e,t.options);if(t.methods)for(var i=Object.keys(t.methods),o=0;o<i.length;++o)n.add(s.fromJSON(i[o],t.methods[i[o]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n},r.prototype.toJSON=function(e){var t=o.prototype.toJSON.call(this,e),n=!!e&&!!e.keepComments;return a.toObject(["options",t&&t.options||void 0,"methods",o.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},Object.defineProperty(r.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=a.toArray(this.methods))}}),r.prototype.get=function(e){return this.methods[e]||o.prototype.get.call(this,e)},r.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return o.prototype.resolve.call(this)},r.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof s?i((this.methods[e.name]=e).parent=this):o.prototype.add.call(this,e)},r.prototype.remove=function(e){if(e instanceof s){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,i(this)}return o.prototype.remove.call(this,e)},r.prototype.create=function(e,t,n){for(var i,o,r=new c.Service(e,t,n),s=0;s<this.methodsArray.length;++s)r[o=a.lcFirst((i=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"")]=a.codegen(["r","c"],a.isReserved(o)?o+"_":o)("return this.rpcCall(m,q,s,r,c)")({m:i,q:i.resolvedRequestType.ctor,s:i.resolvedResponseType.ctor});return r}},2514:function(e,t,n){function s(e,t){a.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function i(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}e.exports=s;var a=n(219),c=(((s.prototype=Object.create(a.prototype)).constructor=s).className="Type",n(37)),l=n(1210),d=n(4954),p=n(459),u=n(2954),o=n(3735),r=n(463),h=n(1329),f=n(2371),m=n(9984),y=n(2376),g=n(4329),_=n(289),v=n(6373);Object.defineProperties(s.prototype,{fieldsById:{get:function(){if(!this._fieldsById){this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],i=n.id;if(this._fieldsById[i])throw Error("duplicate id "+i+" in "+this);this._fieldsById[i]=n}}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=f.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=f.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=s.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof o||((e.prototype=new o).constructor=e,f.merge(e.prototype,t)),e.$type=e.prototype.$type=this,f.merge(e,o,!0),this._ctor=e;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();for(var i={},n=0;n<this.oneofsArray.length;++n)i[this._oneofsArray[n].resolve().name]={get:f.oneOfGetter(this._oneofsArray[n].oneof),set:f.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(e.prototype,i)}}}),s.generateConstructor=function(e){for(var t,n=f.codegen(["p"],e.name),i=0;i<e.fieldsArray.length;++i)(t=e._fieldsArray[i]).map?n("this%s={}",f.safeProp(t.name)):t.repeated&&n("this%s=[]",f.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},s.fromJSON=function(e,t){var n=new s(e,t.options);n.extensions=t.extensions,n.reserved=t.reserved;for(var i=Object.keys(t.fields),o=0;o<i.length;++o)n.add((void 0===t.fields[i[o]].keyType?d:p).fromJSON(i[o],t.fields[i[o]]));if(t.oneofs)for(i=Object.keys(t.oneofs),o=0;o<i.length;++o)n.add(l.fromJSON(i[o],t.oneofs[i[o]]));if(t.nested)for(i=Object.keys(t.nested),o=0;o<i.length;++o){var r=t.nested[i[o]];n.add((void 0===r.id?void 0===r.fields?void 0===r.values?void 0===r.methods?a:u:c:s:d).fromJSON(i[o],r))}return t.extensions&&t.extensions.length&&(n.extensions=t.extensions),t.reserved&&t.reserved.length&&(n.reserved=t.reserved),t.group&&(n.group=!0),t.comment&&(n.comment=t.comment),n},s.prototype.toJSON=function(e){var t=a.prototype.toJSON.call(this,e),n=!!e&&!!e.keepComments;return f.toObject(["options",t&&t.options||void 0,"oneofs",a.arrayToJSON(this.oneofsArray,e),"fields",a.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},s.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();for(var n=this.oneofsArray,t=0;t<n.length;)n[t++].resolve();return a.prototype.resolveAll.call(this)},s.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},s.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof d&&void 0===e.extend){if((this._fieldsById||this.fieldsById)[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),(this.fields[e.name]=e).message=this,e.onAdd(this),i(this)}return e instanceof l?(this.oneofs||(this.oneofs={}),(this.oneofs[e.name]=e).onAdd(this),i(this)):a.prototype.add.call(this,e)},s.prototype.remove=function(e){if(e instanceof d&&void 0===e.extend){if(this.fields&&this.fields[e.name]===e)return delete this.fields[e.name],e.parent=null,e.onRemove(this),i(this);throw Error(e+" is not a member of "+this)}if(e instanceof l){if(this.oneofs&&this.oneofs[e.name]===e)return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),i(this);throw Error(e+" is not a member of "+this)}return a.prototype.remove.call(this,e)},s.prototype.isReservedId=function(e){return a.isReservedId(this.reserved,e)},s.prototype.isReservedName=function(e){return a.isReservedName(this.reserved,e)},s.prototype.create=function(e){return new this.ctor(e)},s.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);this.encode=m(this)({Writer:h,types:t,util:f}),this.decode=y(this)({Reader:r,types:t,util:f}),this.verify=g(this)({types:t,util:f}),this.fromObject=_.fromObject(this)({types:t,util:f}),this.toObject=_.toObject(this)({types:t,util:f});var i,e=v[e];return e&&((i=Object.create(this)).fromObject=this.fromObject,this.fromObject=e.fromObject.bind(i),i.toObject=this.toObject,this.toObject=e.toObject.bind(i)),this},s.prototype.encode=function(e,t){return this.setup().encode(e,t)},s.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},s.prototype.decode=function(e,t){return this.setup().decode(e,t)},s.prototype.decodeDelimited=function(e){return e instanceof r||(e=r.create(e)),this.decode(e,e.uint32())},s.prototype.verify=function(e){return this.setup().verify(e)},s.prototype.fromObject=function(e){return this.setup().fromObject(e)},s.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},s.d=function(t){return function(e){f.decorateType(e,t)}}},243:function(e,t,n){function i(e,t){var n=0,i={};for(t|=0;n<e.length;)i[o[n+t]]=e[n++];return i}var n=n(2371),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];t.basic=i([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),t.defaults=i([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),t.long=i([0,0,0,1,1],7),t.mapKey=i([0,0,0,5,5,0,0,0,1,1,0,2],2),t.packed=i([1,5,0,0,0,5,5,0,0,0,1,1,0])},2371:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}var o,r,s=e.exports=n(9095),a=n(8292),c=(s.codegen=n(8938),s.fetch=n(5667),s.path=n(5375),s.fs=s.inquire("fs"),s.toArray=function(e){if(e){for(var t=Object.keys(e),n=Array(t.length),i=0;i<t.length;)n[i]=e[t[i++]];return n}return[]},s.toObject=function(e){for(var t={},n=0;n<e.length;){var i=e[n++],o=e[n++];void 0!==o&&(t[i]=o)}return t},/\\/g),l=/"/g,d=(s.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},s.safeProp=function(e){return!/^[$\w_]+$/.test(e)||s.isReserved(e)?'["'+e.replace(c,"\\\\").replace(l,'\\"')+'"]':"."+e},s.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)},/_([a-z])/g),p=(s.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(d,function(e,t){return t.toUpperCase()})},s.compareFieldsById=function(e,t){return e.id-t.id},s.decorateType=function(e,t){return e.$type?(t&&e.$type.name!==t&&(s.decorateRoot.remove(e.$type),e.$type.name=t,s.decorateRoot.add(e.$type)),e.$type):(t=new(o=o||n(2514))(t||e.name),s.decorateRoot.add(t),t.ctor=e,Object.defineProperty(e,"$type",{value:t,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:t,enumerable:!1}),t)},0);s.decorateEnum=function(e){var t;return e.$type||(t=new(r=r||n(37))("Enum"+p++,e),s.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t)},s.setProperty=function(e,t,n){if("object"!==i(e))throw TypeError("dst must be an object");if(t)return function e(t,n,i){var o=n.shift();return"__proto__"!==o&&"prototype"!==o&&(0<n.length?t[o]=e(t[o]||{},n,i):((n=t[o])&&(i=[].concat(n).concat(i)),t[o]=i)),t}(e,t=t.split("."),n);throw TypeError("path must be specified")},Object.defineProperty(s,"decorateRoot",{get:function(){return a.decorated||(a.decorated=new(n(6719)))}})},1585:function(e,t,n){function i(e,t){this.lo=e>>>0,this.hi=t>>>0}e.exports=i;var o=n(9095),r=i.zero=new i(0,0),s=(r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1},i.zeroHash="\0\0\0\0\0\0\0\0",i.fromNumber=function(e){var t,n;return 0===e?r:(n=(e=(t=e<0)?-e:e)>>>0,e=(e-n)/4294967296>>>0,t&&(e=~e>>>0,n=~n>>>0,4294967295<++n)&&(n=0,4294967295<++e)&&(e=0),new i(n,e))},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(o.isString(e)){if(!o.Long)return i.fromNumber(parseInt(e,10));e=o.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):r},i.prototype.toNumber=function(e){var t;return!e&&this.hi>>>31?(e=1+~this.lo>>>0,t=~this.hi>>>0,-(e+4294967296*(t=e?t:t+1>>>0))):this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return o.Long?new o.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}},String.prototype.charCodeAt);i.fromHash=function(e){return"\0\0\0\0\0\0\0\0"===e?r:new i((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return _StringfromCharCode(255&this.lo,255&this.lo>>>8,255&this.lo>>>16,this.lo>>>24,255&this.hi,255&this.hi>>>8,255&this.hi>>>16,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0==n?0==t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},9095:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function o(e,t,n){for(var i=Object.keys(t),o=0;o<i.length;++o)void 0!==e[i[o]]&&n||(e[i[o]]=t[i[o]]);return e}function r(e){function n(e,t){return this instanceof n?(Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,n):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),void(t&&o(this,t))):new n(e,t)}return(n.prototype=Object.create(Error.prototype)).constructor=n,Object.defineProperty(n.prototype,"name",{get:function(){return e}}),n.prototype.toString=function(){return this.name+": "+this.message},n}var s=t;s.asPromise=n(4673),s.base64=n(3393),s.EventEmitter=n(5909),s.float=n(7279),s.inquire=n(9047),s.utf8=n(4608),s.pool=n(6435),s.LongBits=n(1585),s.isNode=!!(void 0!==n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),s.global=s.isNode&&n.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&_Mathfloor(e)===e},s.isString=function(e){return"string"==typeof e||e instanceof String},s.isObject=function(e){return e&&"object"===i(e)},s.isset=s.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==i(n)||0<(Array.isArray(n)?n:Object.keys(n)).length)},s.Buffer=function(){try{var e=s.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),s._Buffer_from=null,s._Buffer_allocUnsafe=null,s.newBuffer=function(e){return"number"==typeof e?s.Buffer?s._Buffer_allocUnsafe(e):new s.Array(e):s.Buffer?s._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},s.Array="undefined"==typeof Uint8Array?Array:Uint8Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(e){return e?s.LongBits.from(e).toHash():s.LongBits.zeroHash},s.longFromHash=function(e,t){e=s.LongBits.fromHash(e);return s.Long?s.Long.fromBits(e.lo,e.hi,t):e.toNumber(!!t)},s.merge=o,s.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},s.newError=r,s.ProtocolError=r("ProtocolError"),s.oneOfGetter=function(e){for(var n={},t=0;t<e.length;++t)n[e[t]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;-1<t;--t)if(1===n[e[t]]&&void 0!==this[e[t]]&&null!==this[e[t]])return e[t]}},s.oneOfSetter=function(n){return function(e){for(var t=0;t<n.length;++t)n[t]!==e&&delete this[n[t]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s._configure=function(){var n=s.Buffer;return n?(s._Buffer_from=n.from!==Uint8Array.from&&n.from||function(e,t){return new n(e,t)},void(s._Buffer_allocUnsafe=n.allocUnsafe||function(e){return new n(e)})):void(s._Buffer_from=s._Buffer_allocUnsafe=null)}},4329:function(e,t,n){function d(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function p(e,t,n,i){if(t.resolvedType)if(t.resolvedType instanceof s){e("switch(%s){",i)("default:")("return%j",d(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),r=0;r<o.length;++r)e("case %i:",t.resolvedType.values[o[r]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",n,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",d(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",d(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",d(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",d(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",d(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",d(t,"buffer"))}return e}e.exports=function(e){var t=u.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n={};e.oneofsArray.length&&t("var p={}");for(var i=0;i<e.fieldsArray.length;++i){var o,r=e._fieldsArray[i].resolve(),s="m"+u.safeProp(r.name);if(r.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",s,r.name),r.map){t("if(!util.isObject(%s))",s)("return%j",d(r,"object"))("var k=Object.keys(%s)",s)("for(var i=0;i<k.length;++i){"),l=c=a=void 0;var a=t,c=r,l="k[i]";switch(c.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":a("if(!util.key32Re.test(%s))",l)("return%j",d(c,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":a("if(!util.key64Re.test(%s))",l)("return%j",d(c,"integer|Long key"));break;case"bool":a("if(!util.key2Re.test(%s))",l)("return%j",d(c,"boolean key"))}p(t,r,i,s+"[k[i]]")("}")}else r.repeated?(t("if(!Array.isArray(%s))",s)("return%j",d(r,"array"))("for(var i=0;i<%s.length;++i){",s),p(t,r,i,s+"[i]")("}")):(r.partOf&&(o=u.safeProp(r.partOf.name),1===n[r.partOf.name]&&t("if(p%s===1)",o)("return%j",r.partOf.name+": multiple values"),n[r.partOf.name]=1,t("p%s=1",o)),p(t,r,i,s));r.optional&&t("}")}return t("return null")};var s=n(37),u=n(2371)},6373:function(e,t,n){var r=n(3735);t[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t,n=e["@type"].substring(e["@type"].lastIndexOf("/")+1),n=this.lookup(n);if(n)return-1===(t="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"]).indexOf("/")&&(t="/"+t),this.create({type_url:t,value:n.encode(n.fromObject(e)).finish()})}return this.fromObject(e)},toObject:function(e,t){var n,i="",o="";return!((e=t&&t.json&&e.type_url&&e.value&&(o=e.type_url.substring(e.type_url.lastIndexOf("/")+1),i=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1),n=this.lookup(o))?n.decode(e.value):e)instanceof this.ctor)&&e instanceof r?(n=e.$type.toObject(e,t),o=(i=""===i?"type.googleapis.com/":i)+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),n["@type"]=o,n):this.toObject(e,t)}}},1329:function(e,t,n){function i(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function o(){}function r(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function s(){this.len=0,this.head=new i(o,0,0),this.tail=this.head,this.states=null}function a(e,t,n){t[n]=255&e}function c(e,t){this.len=e,this.next=void 0,this.val=t}function l(e,t,n){for(;e.hi;)t[n++]=128|127&e.lo,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[n++]=128|127&e.lo,e.lo>>>=7;t[n++]=e.lo}function d(e,t,n){t[n]=255&e,t[n+1]=255&e>>>8,t[n+2]=255&e>>>16,t[n+3]=e>>>24}e.exports=s;var p,u,h=n(9095),f=h.LongBits,m=h.base64,y=h.utf8,g=(s.create=(u=function(){return h.Buffer?function(){return(s.create=function(){return new p})()}:function(){return new s}})(),s.alloc=function(e){return new h.Array(e)},h.Array!==Array&&(s.alloc=h.pool(s.alloc,h.Array.prototype.subarray)),s.prototype._push=function(e,t,n){return this.tail=this.tail.next=new i(e,t,n),this.len+=t,this},(c.prototype=Object.create(i.prototype)).fn=function(e,t,n){for(;127<e;)t[n++]=128|127&e,e>>>=7;t[n]=e},s.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new c((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},s.prototype.int32=function(e){return e<0?this._push(l,10,f.fromNumber(e)):this.uint32(e)},s.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},s.prototype.int64=s.prototype.uint64=function(e){e=f.from(e);return this._push(l,e.length(),e)},s.prototype.sint64=function(e){e=f.from(e).zzEncode();return this._push(l,e.length(),e)},s.prototype.bool=function(e){return this._push(a,1,e?1:0)},s.prototype.sfixed32=s.prototype.fixed32=function(e){return this._push(d,4,e>>>0)},s.prototype.sfixed64=s.prototype.fixed64=function(e){e=f.from(e);return this._push(d,4,e.lo)._push(d,4,e.hi)},s.prototype.float=function(e){return this._push(h.float.writeFloatLE,4,e)},s.prototype.double=function(e){return this._push(h.float.writeDoubleLE,8,e)},h.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]});s.prototype.bytes=function(e){var t,n=e.length>>>0;return n?(h.isString(e)&&(t=s.alloc(n=m.length(e)),m.decode(e,t,0),e=t),this.uint32(n)._push(g,n,e)):this._push(a,1,0)},s.prototype.string=function(e){var t=y.length(e);return t?this.uint32(t)._push(y.write,t,e):this._push(a,1,0)},s.prototype.fork=function(){return this.states=new r(this),this.head=this.tail=new i(o,0,0),this.len=0,this},s.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new i(o,0,0),this.len=0),this},s.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},s.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},s._configure=function(e){p=e,s.create=u(),p._configure()}},213:function(e,t,n){function i(){r.call(this)}function o(e,t,n){e.length<40?s.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}e.exports=i;var r=n(1329),s=((i.prototype=Object.create(r.prototype)).constructor=i,n(9095));i._configure=function(){i.alloc=s._Buffer_allocUnsafe,i.writeBytesBuffer=s.Buffer&&s.Buffer.prototype instanceof Uint8Array&&"set"===s.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}},i.prototype.bytes=function(e){var t=(e=s.isString(e)?s._Buffer_from(e,"base64"):e).length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=s.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},i._configure()},8132:function(e,t,n){n=n(5685),n=(n.roots.default||(n.roots.default=new n.Root)).addJSON({GOD:{nested:{PROTOCOLS:{nested:{GameCursor:{fields:{showOrHide:{type:"bool",id:1},cursorPos:{type:"CoordinatePos",id:2},cursorFrames:{rule:"repeated",type:"DynamicCursorDataSingleFrame",id:3},gameCursorSyncSeqNum:{type:"uint32",id:4},cursorStyle:{type:"CursorStyle",id:5},gameCursorData:{type:"GameCursorFrameData",id:6},iconCursorHotSpot:{type:"CoordinatePos",id:7},cursorWidth:{type:"uint32",id:8},cursorHeight:{type:"uint32",id:9}},nested:{CursorStyle:{values:{CURSOR_DEFAULT:0,CURSOR_CUSTOM:1,CURSOR_NONE:2,CURSOR_APPSTARTING:32650,CURSOR_ARROW:32512,CURSOR_CROSS:32515,CURSOR_HAND:32649,CURSOR_HELP:32651,CURSOR_IBEAM:32513,CURSOR_ICON:32641,CURSOR_NO:32648,CURSOR_SIZE:32640,CURSOR_SIZEALL:32646,CURSOR_SIZENESW:32643,CURSOR_SIZENS:32645,CURSOR_SIZENWSE:32642,CURSOR_SIZEWE:32644,CURSOR_UPARROW:32516,CURSOR_WAIT:32514}},CursorFrame:{fields:{stepFrame:{type:"uint32",id:1},cursorHotSpot:{type:"CoordinatePos",id:2},frameData:{type:"bytes",id:3}}},GameCursorFrameData:{fields:{frameRate:{type:"uint32",id:1},cursorFrames:{rule:"repeated",type:"CursorFrame",id:2}}}}},DynamicCursorDataSingleFrame:{fields:{frameInfo:{type:"CursorFramInfo",id:1},cursorData:{type:"CursorData",id:2}}},CursorFramInfo:{fields:{stepFrame:{type:"uint32",id:1},stepTotol:{type:"uint32",id:2},frameRate:{type:"uint32",id:3}}},CursorData:{fields:{cursorHotSpot:{type:"CoordinatePos",id:1},bmMaskInfo:{type:"bytes",id:2},bmColorInfo:{type:"bytes",id:3},bmMaskContent:{type:"bytes",id:4},bmColorContent:{type:"bytes",id:5},cursorBmp:{type:"bytes",id:6}}},InputOPData:{fields:{opList:{rule:"repeated",type:"OneInputOPData",id:1},handleComboKey:{type:"bool",id:2},opTick:{type:"uint32",id:99}}},OneInputOPData:{fields:{inputOp:{type:"int32",id:1},inputState:{type:"InputState",id:2},value:{type:"int32",id:3},posCursor:{type:"CoordinatePos",id:4},posMouse:{type:"CoordinatePos",id:5},opDevice:{type:"int32",id:6},xinputUserIndex:{type:"int32",id:7},gameCursorSyncSeqNum:{type:"uint32",id:8},touchEvent:{type:"TouchEvent",id:9},serialNumber:{type:"int32",id:11},timestamp:{type:"int64",id:12}},nested:{InputOP:{options:{allow_alias:!0},values:{OP_KEY_BEGIN:0,OP_KEY_VK_LBUTTON:1,OP_KEY_VK_RBUTTON:2,OP_KEY_VK_CANCEL:3,OP_KEY_VK_MBUTTON:4,OP_KEY_VK_XBUTTON1:5,OP_KEY_VK_XBUTTON2:6,OP_KEY_VK_BACK:8,OP_KEY_VK_TAB:9,OP_KEY_VK_CLEAR:12,OP_KEY_VK_RETURN:13,OP_KEY_VK_SHIFT:16,OP_KEY_VK_CONTROL:17,OP_KEY_VK_MENU:18,OP_KEY_VK_PAUSE:19,OP_KEY_VK_CAPITAL:20,OP_KEY_VK_KANA:21,OP_KEY_VK_HANGUL:21,OP_KEY_VK_JUNJA:23,OP_KEY_VK_FINAL:24,OP_KEY_VK_HANJA:25,OP_KEY_VK_KANJI:25,OP_KEY_VK_ESCAPE:27,OP_KEY_VK_CONVERT:28,OP_KEY_VK_NONCONVERT:29,OP_KEY_VK_ACCEPT:30,OP_KEY_VK_MODECHANGE:31,OP_KEY_VK_SPACE:32,OP_KEY_VK_PRIOR:33,OP_KEY_VK_NEXT:34,OP_KEY_VK_END:35,OP_KEY_VK_HOME:36,OP_KEY_VK_LEFT:37,OP_KEY_VK_UP:38,OP_KEY_VK_RIGHT:39,OP_KEY_VK_DOWN:40,OP_KEY_VK_SELECT:41,OP_KEY_VK_PRINT:42,OP_KEY_VK_EXECUTE:43,OP_KEY_VK_SNAPSHOT:44,OP_KEY_VK_INSERT:45,OP_KEY_VK_DELETE:46,OP_KEY_VK_HELP:47,OP_KEY_KEY_0:48,OP_KEY_KEY_1:49,OP_KEY_KEY_2:50,OP_KEY_KEY_3:51,OP_KEY_KEY_4:52,OP_KEY_KEY_5:53,OP_KEY_KEY_6:54,OP_KEY_KEY_7:55,OP_KEY_KEY_8:56,OP_KEY_KEY_9:57,OP_KEY_KEY_A:65,OP_KEY_KEY_B:66,OP_KEY_KEY_C:67,OP_KEY_KEY_D:68,OP_KEY_KEY_E:69,OP_KEY_KEY_F:70,OP_KEY_KEY_G:71,OP_KEY_KEY_H:72,OP_KEY_KEY_I:73,OP_KEY_KEY_J:74,OP_KEY_KEY_K:75,OP_KEY_KEY_L:76,OP_KEY_KEY_M:77,OP_KEY_KEY_N:78,OP_KEY_KEY_O:79,OP_KEY_KEY_P:80,OP_KEY_KEY_Q:81,OP_KEY_KEY_R:82,OP_KEY_KEY_S:83,OP_KEY_KEY_T:84,OP_KEY_KEY_U:85,OP_KEY_KEY_V:86,OP_KEY_KEY_W:87,OP_KEY_KEY_X:88,OP_KEY_KEY_Y:89,OP_KEY_KEY_Z:90,OP_KEY_VK_LWIN:91,OP_KEY_VK_RWIN:92,OP_KEY_VK_APPS:93,OP_KEY_VK_SLEEP:95,OP_KEY_VK_NUMPAD0:96,OP_KEY_VK_NUMPAD1:97,OP_KEY_VK_NUMPAD2:98,OP_KEY_VK_NUMPAD3:99,OP_KEY_VK_NUMPAD4:100,OP_KEY_VK_NUMPAD5:101,OP_KEY_VK_NUMPAD6:102,OP_KEY_VK_NUMPAD7:103,OP_KEY_VK_NUMPAD8:104,OP_KEY_VK_NUMPAD9:105,OP_KEY_VK_MULTIPLY:106,OP_KEY_VK_ADD:107,OP_KEY_VK_SEPARATOR:108,OP_KEY_VK_SUBTRACT:109,OP_KEY_VK_DECIMAL:110,OP_KEY_VK_DIVIDE:111,OP_KEY_VK_F1:112,OP_KEY_VK_F2:113,OP_KEY_VK_F3:114,OP_KEY_VK_F4:115,OP_KEY_VK_F5:116,OP_KEY_VK_F6:117,OP_KEY_VK_F7:118,OP_KEY_VK_F8:119,OP_KEY_VK_F9:120,OP_KEY_VK_F10:121,OP_KEY_VK_F11:122,OP_KEY_VK_F12:123,OP_KEY_VK_F13:124,OP_KEY_VK_F14:125,OP_KEY_VK_F15:126,OP_KEY_VK_F16:127,OP_KEY_VK_F17:128,OP_KEY_VK_F18:129,OP_KEY_VK_F19:130,OP_KEY_VK_F20:131,OP_KEY_VK_F21:132,OP_KEY_VK_F22:133,OP_KEY_VK_F23:134,OP_KEY_VK_F24:135,OP_KEY_VK_NUMLOCK:144,OP_KEY_VK_SCROLL:145,OP_KEY_VK_LSHIFT:160,OP_KEY_VK_RSHIFT:161,OP_KEY_VK_LCONTROL:162,OP_KEY_VK_RCONTROL:163,OP_KEY_VK_LMENU:164,OP_KEY_VK_RMENU:165,OP_KEY_VK_BROWSER_BACK:166,OP_KEY_VK_BROWSER_FORWARD:167,OP_KEY_VK_BROWSER_REFRESH:168,OP_KEY_VK_BROWSER_STOP:169,OP_KEY_VK_BROWSER_SEARCH:170,OP_KEY_VK_BROWSER_FAVORITES:171,OP_KEY_VK_BROWSER_HOME:172,OP_KEY_VK_VOLUME_MUT:173,OP_KEY_VK_VOLUME_DOWN:174,OP_KEY_VK_VOLUME_UP:175,OP_KEY_VK_MEDIA_NEXT_TRACK:176,OP_KEY_VK_MEDIA_PREV_TRACK:177,OP_KEY_VK_MEDIA_STOP:178,OP_KEY_VK_MEDIA_PLAY_PAUSE:179,OP_KEY_VK_LAUNCH_MAIL:180,OP_KEY_VK_LAUNCH_MEDIA_SELECT:181,OP_KEY_VK_LAUNCH_APP1:182,OP_KEY_VK_LAUNCH_APP2:183,OP_KEY_VK_OEM_1:186,OP_KEY_VK_OEM_PLUS:187,OP_KEY_VK_OEM_COMMA:188,OP_KEY_VK_OEM_MINUS:189,OP_KEY_VK_OEM_PERIOD:190,OP_KEY_VK_OEM_2:191,OP_KEY_VK_OEM_3:192,OP_KEY_VK_OEM_4:219,OP_KEY_VK_OEM_5:220,OP_KEY_VK_OEM_6:221,OP_KEY_VK_OEM_7:222,OP_KEY_VK_OEM_8:223,OP_KEY_VK_OEM_102:226,OP_KEY_VK_PACKET:231,OP_KEY_VK_PROCESSKEY:229,OP_KEY_VK_ATTN:246,OP_KEY_VK_CRSEL:247,OP_KEY_VK_EXSEL:248,OP_KEY_VK_EREOF:249,OP_KEY_VK_PLAY:250,OP_KEY_VK_ZOOM:251,OP_KEY_VK_NONAME:252,OP_KEY_VK_PA1:253,OP_KEY_VK_OEM_CLEAR:254,OP_KEY_END:510,OP_MOUSE_BEGIN:511,OP_MOUSE_BUTTON_LEFT:512,OP_MOUSE_BUTTON_MIDDLE:513,OP_MOUSE_BUTTON_RIGHT:514,OP_MOUSE_WHEEL:515,OP_MOUSE_MOV:516,OP_MOUSE_BUTTON_4:518,OP_MOUSE_BUTTON_5:519,OP_MOUSE_END:766,OP_GAMEPAD_BEGIN:767,OP_GAMEPAD_BTN_A:768,OP_GAMEPAD_BTN_B:769,OP_GAMEPAD_BTN_C:770,OP_GAMEPAD_BTN_D:771,OP_GAMEPAD_BTN_L1:772,OP_GAMEPAD_BTN_R1:773,OP_GAMEPAD_BTN_L2:774,OP_GAMEPAD_BTN_R2:775,OP_GAMEPAD_BTN_SELECT:776,OP_GAMEPAD_BTN_START:777,OP_GAMEPAD_BTN_LA:778,OP_GAMEPAD_BTN_RA:779,OP_GAMEPAD_BTN_MODE:780,OP_GAMEPAD_BTN_TURBO:781,OP_GAMEPAD_BTN_CLEAR:782,OP_GAEMPAD_AXIS_POV0:783,OP_GAMEPAD_AXIS_X:784,OP_GAMEPAD_AXIS_Y:785,OP_GAMEPAD_AXIS_Z:786,OP_GAMEPAD_AXIS_Z_ROTATION:787,OP_GAMEPAD_END:1022,OP_XINPUT_BEGIN:1023,OP_XINPUT_BUTTONS:1024,OP_XINPUT_LEFT_TRIGGER:1025,OP_XINPUT_RIGHT_TRIGGER:1026,OP_XINPUT_THUMB_LX:1027,OP_XINPUT_THUMB_LY:1028,OP_XINPUT_THUMB_RX:1029,OP_XINPUT_THUMB_RY:1030,OP_XINPUT_A_BUTTON:1031,OP_XINPUT_END:1150,OP_TOUCH_BEGIN:1151,OP_TOUCH_MOVE:1152,OP_TOUCH_POINT:1153,OP_TOUCH_CANCEL:1154,OP_TOUCH_END:1250}},InputState:{values:{OP_STATE_DEFAULT:1,OP_STATE_DOWN:2,OP_STATE_UP:3,OP_VK_UNTOGGLED:4,OP_VK_TOGGLED:5}},PointerProperties:{fields:{id:{type:"int32",id:1},type:{type:"TouchDevice",id:2},pressure:{type:"float",id:3},size:{type:"float",id:4},touchMajor:{type:"float",id:5},touchMinor:{type:"float",id:6},xPos:{type:"int32",id:7},yPos:{type:"int32",id:8},xPercent:{type:"float",id:9},yPercent:{type:"float",id:10}},nested:{TouchDevice:{values:{TOOL_TYPE_UNKNOWN:0,TOOL_TYPE_FINGER:1,TOOL_TYPE_STYLUS:2,TOOL_TYPE_MOUSE:3,TOOL_TYPE_ERASER:4}}}},TouchEvent:{fields:{pointerCount:{type:"int32",id:1},pointerProperties:{rule:"repeated",type:"PointerProperties",id:2}}}}},CoordinatePos:{fields:{x:{type:"int32",id:1},y:{type:"int32",id:2}}},InputMethodChData:{fields:{inputBuf:{type:"bytes",id:1}}},GSNotification:{fields:{type:{type:"GSNotifType",id:1},cid:{type:"int64",id:2},extInfo:{type:"string",id:3}},nested:{GSNotifType:{values:{GAME_QUIT:1,NO_INPUT_TIMEOUT:2,GET_CONTROL:3,LOST_CONTROL:4}}}},IMEType:{values:{IME_STANDARD:0,IME_PASSWORD:1,IME_NUMBER:2,IME_PHONE:3,IME_EMAILADDRESS:4}},StatusType:{values:{STATUS_HIDE:0,STATUS_SHOW:1}},IMEStatus:{fields:{statusType:{type:"StatusType",id:1},imeType:{type:"IMEType",id:2},imePointX:{type:"uint32",id:3},imePointY:{type:"uint32",id:4}}},TerminalType:{values:{TERMINAL_DEFAULT:0,TERMINAL_TV:1,TERMINAL_PC_WIN:2,TERMINAL_PC_MAC:3,TERMINAL_PC_LINUX:4,TERMINAL_ANDROID_PAD:5,TERMINAL_ANDROID_PHONE:6,TERMINAL_IOS_IPHONE:7,TERMINAL_IOS_IPAD:8,TERMINAL_WEB_PC_WIN:9,TERMINAL_WEB_PC_MAC:10,TERMINAL_WEB_PC_LINUX:11,TERMINAL_WEB_ANDROID_PAD:12,TERMINAL_WEB_ANDROID_PHONE:13,TERMINAL_WEB_IOS_IPHONE:14,TERMINAL_WEB_IOS_IPAD:15,TERMINAL_WEB_TV:16}},IMEStatusNotify:{fields:{terminalType:{type:"TerminalType",id:1},statusType:{type:"StatusType",id:2}}},GameSDKAction:{fields:{cid:{type:"int64",id:1},userId:{type:"string",id:2},sdkAction:{type:"string",id:3}}},GameSDKData:{fields:{cid:{type:"int64",id:1},userId:{type:"string",id:2},sdkData:{type:"string",id:3}}},ResetNoInputTimer:{fields:{value:{type:"int32",id:1}}},RestNoInputTimer_R:{fields:{result:{type:"int32",id:1},msg:{type:"string",id:2}}},ClipBoardData:{fields:{data:{type:"bytes",id:1}}}}}}}});e.exports=n}},__webpack_module_cache__={},__webpack_exports__=(__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==("undefined"==typeof globalThis?"undefined":_typeof(globalThis)))return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==("undefined"==typeof window?"undefined":_typeof(window)))return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},{});return function(){function n(e,t){if(1===e.nodeType)for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])}function r(e){for(var t=0,n=arguments.length,i=Array(1<n?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(var r=0,s=i;r<s.length;r++)t+=s[r].length;for(var a,c=new e(t),l=0,d=0,p=i;d<p.length;d++)a=p[d],c.set(a,l),l+=a.length;return c}function a(e){0<e.buttons&&e.stopPropagation(),e.cancelable&&e.preventDefault()}function o(e){return e<=10?e:-1}function s(){var e=1048575*Math.random();return _Mathfloor(e).toString(16)}function u(e){e=Object.prototype.toString.call(e);return e.substring(8,e.length-1).toLowerCase()}function c(e){for(var t,n=[],i=0;i<e.length;i++)if(1===(t=encodeURI(e[i])).length)n.push(t.charCodeAt(0));else for(var o=t.split("%"),r=1;r<o.length;r++)n.push(parseInt("0x"+o[r]));return new Uint8Array(n)}function l(){var e=window.navigator.userAgent.toLowerCase();return!/firefox/.test(e)&&!/qqbrowser/.test(e)&&"onpointerrawupdate"in window}function d(e,t,n,i){var o=e.verify(t);if(o)throw Error(o);o=e.create(t),t=e.encode(o).finish(),e=function(e){var t=[0,0,0,0];if(e<=255)t[0]=e;else for(var n=0;n<t.length;n++)256<=_Mathfloor(e/_Mathpow(256,n))&&(t[n]=_Mathfloor(e/_Mathpow(256,n))%256,t[n+1]=_Mathfloor(e/_Mathpow(256,n+1)));return t}(t.length+R.length);return R[6]=e[0],R[7]=e[1],R[8]=e[2],R[9]=e[3],R[11]=n,R[12]=i,r(Uint8Array,R,t)}function i(e,t){e=new Uint8Array(e).slice(14),t=t.decode(e);return JSON.stringify(t)}function p(e){return d(F,e,1,0)}function h(e){return i(e,H)}function f(e){return(f="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function y(e,t,n){var i;i=function(e){if("object"!==f(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!==f(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),(t="symbol"===f(i)?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function g(e){return(g="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function e(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!==g(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!==g(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"===g(e)?e:e+""}(n.key),n)}function v(e){var t=e.url,n=e.data,i=e.done,o=e.timeout,r=void 0===o?10:o,o=e.contentType,o=void 0===o?"application/x-www-form-urlencoded":o,s=e.retryRequestCount,a=new XMLHttpRequest,c=null;return"get"===e.method.toLowerCase()?(a.open("GET",t,!0),a.send()):"post"===e.method.toLowerCase()&&(a.open("POST",t,!0),a.setRequestHeader("Content-type",o),a.send(n)),a.onreadystatechange=function(){4===a.readyState&&(200<=a.status&&a.status<300||304===a.status?i(!0,{statusCode:a.status,message:"",timeout:1e3*r,retryRequestCount:s},a.responseText):i(!1,{statusCode:a.status,message:"",timeout:1e3*r,retryRequestCount:s},""),clearTimeout(c),a=void 0)},c=setTimeout(function(){a.abort()},1e3*r),function(){a&&(a.onreadystatechange=null,clearTimeout(c),a=c=void 0)}}function S(e){var i,o=e.url,r=e.data,s=e.method,a=e.contentType,t=e.timeout,c=e.retryCount,l=e.done,e=e.retryInterval,d=void 0===e?500:e,p=1;return"array"===(e=Object.prototype.toString.call(c)).substring(8,e.length-1).toLowerCase()&&0<c.length?(p=c.length,i=l,v({url:o,data:r,method:s,contentType:a,done:l=function(e,t,n){return e?void i(!0,t,n):--p<=0?void i(!1,t,n):void setTimeout(function(){v({url:o,data:r,method:s,contentType:a,done:l,timeout:c[p-1],retryRequestCount:c.length-p})},d)},timeout:c[p-1],retryRequestCount:0})):v({url:o,data:r,method:s,contentType:a,done:l,timeout:t,retryRequestCount:0})}function b(e){return(b="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function k(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function C(e,t,n){var i;i=function(e){if("object"!==b(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!==b(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),(t="symbol"===b(i)?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function w(e){return(w="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function T(e,t,n){var i;i=function(e){if("object"!==w(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!==w(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),(t="symbol"===w(i)?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return Y}});var t=__webpack_require__(2837),K=__webpack_require__.n(t),N=navigator.userAgent,t=__webpack_require__(8132),L=t.lookupType("GOD.PROTOCOLS.GameCursor"),F=t.lookup("GOD.PROTOCOLS.InputOPData"),$=t.lookup("GOD.PROTOCOLS.InputMethodChData"),E=t.lookup("GOD.PROTOCOLS.GameSDKAction"),j=t.lookup("GOD.PROTOCOLS.GameSDKData"),U=t.lookup("GOD.PROTOCOLS.GSNotification"),H=t.lookup("GOD.PROTOCOLS.IMEStatus"),G=t.lookup("GOD.PROTOCOLS.IMEStatusNotify"),V=t.lookup("GOD.PROTOCOLS.ResetNoInputTimer"),W=t.lookup("GOD.PROTOCOLS.RestNoInputTimer_R"),I=t.lookup("GOD.PROTOCOLS.ClipBoardData"),R=(t=new Uint8Array([67,85,80,75,1,0]),D=new Uint8Array([0,0,0,0]),A=new Uint8Array([6,1,0,0]),r(Uint8Array,t,D,A)),x=[91,"MetaLeft","MetaRight"],P="keydown",O="compositionstart",M="compositionend",z=(t=function e(t,n,i){var h=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");y(this,"_init",function(){["pointerlockchange","mozpointerlockchange","webkitpointerlockchange"].forEach(function(e){document.addEventListener(e,h._pointerLockChangeHandler)}),h._canvasNode.addEventListener("mousedown",h._mouseDownHandler),h._usePointerMove&&l()?h._canvasNode.addEventListener("pointerrawupdate",h._mouseMoveHandler):h._canvasNode.addEventListener("mousemove",h._mouseMoveHandler),document.addEventListener("mouseup",h._mouseUpHandler),h._canvasNode.addEventListener("wheel",h._wheelHandler),h._canvasNode.addEventListener("contextmenu",h._contextmenuHandler),document.addEventListener("keydown",h._keyDownHandler),document.addEventListener("keyup",h._keyUpHandler),window.addEventListener("focus",h._sendReleaseMouseAndKeyboardData),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach(function(e){window.addEventListener(e,h._fullscreenchangeHandler)});var e,t=h._getGamepads();for(e in t)t[e]&&h._gamepadConnectedHandler({gamepad:t[e]});window.addEventListener("gamepadconnected",h._gamepadConnectedHandler),window.addEventListener("gamepaddisconnected",h._gamepadDisconnectedHandler);n=h._storeKey.sendMouseData;var n=sessionStorage.getItem(n)||null;n&&(n=JSON.parse(n),h._posMouseCache.x=n.x,h._posMouseCache.y=n.y)}),y(this,"_pointerLockChangeHandler",function(){h._localMousePointerLockState=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement,h._localMousePointerLockState!==h._canvasNode&&(h._isEscKeyDown||h._isFullScreen||h._isAutoUnlockPointer||(h._sendReleaseKeyboardData(),h._sendEscKeyCode(),h._sendReleaseMouseData()),h._isAutoUnlockPointer=!1)}),y(this,"_sendMouseData",function(e,t,n,i,o,r,s,a,c){2===t?h._recordPressedMouseButtonsMap[e]={inputOp:e,inputState:t,value:n,posMouseX:r,posMouseY:s,posCursorX:a,posCursorY:c,timestamp:i,serialNumber:o}:3==t&&delete h._recordPressedMouseButtonsMap[e];e={inputOp:e,inputState:t,value:n,timestamp:i,serialNumber:o,posCursor:{x:_Mathfloor(a),y:_Mathfloor(c)},posMouse:{x:_Mathfloor(r),y:_Mathfloor(s)}};h._gamePlayer.sendData(p({opList:[e]}))}),y(this,"_mouseDownHandler",function(e){var t,n;a(e),h.calcRemoteAndLocalScreenRatio(),h._gamePlayer.getAudioState()&&h._gamePlayer.enableAudio(!0),h._remoteMousePointLockedState&&!h._localMousePointerLockState||(t=e.button,n=e.type,e=e.timeStamp,0<=o(t)&&(h._hasMouseDown[t]=!0,h._sendMouseData(h._mouseButtonMap[t],h._mouseEventMap[n],0,_Mathfloor(1e3*e),h._serialNumber,h._posMouseCache.x,h._posMouseCache.y,h._posCursorCache.x,h._posCursorCache.y)))}),y(this,"_mouseMoveHandler",function(e){if(a(e),h.calcRemoteAndLocalScreenRatio(),!h._remoteMousePointLockedState||h._localMousePointerLockState){var t=e.movementX,n=e.movementY,i=e.offsetX,o=e.offsetY,e=e.timeStamp;if(!(i<0||o<0)){if(h._posCursorCache.x=i/h._videoWidthRatio,h._posCursorCache.y=o/h._videoHeightRatio,h._remoteMousePointLockedState){if(0===t&&0===n)return;i=t*h._mouseMoveRatio/h._devicePixelRatio,o=n*h._mouseMoveRatio/h._devicePixelRatio,i=(0<i?_Mathceil:_Mathfloor)(i),o=(0<o?_Mathceil:_Mathfloor)(o);h._posMouseCache.x+=i,h._posMouseCache.y+=o}h._getSerialNumber(),h._sendMouseData(h._mouseButtonMap.move,h._mouseEventMap.default,0,_Mathfloor(1e3*e),h._serialNumber,h._posMouseCache.x,h._posMouseCache.y,h._posCursorCache.x,h._posCursorCache.y),t=h._storeKey.sendMouseData,n=JSON.stringify({x:h._posMouseCache.x,y:h._posMouseCache.y}),sessionStorage.setItem(t,n)}}}),y(this,"_mouseUpHandler",function(e){a(e);var t=e.button,n=e.type,i=e.target,e=e.timeStamp;return h._remoteMousePointLockedState&&!h._localMousePointerLockState&&i===h._canvasNode?void h.lockPointer():void(0<=o(t)&&h._hasMouseDown[t]&&(h._hasMouseDown[t]=!1,h._sendMouseData(h._mouseButtonMap[t],h._mouseEventMap[n],0,_Mathfloor(1e3*e),h._serialNumber,h._posMouseCache.x,h._posMouseCache.y,h._posCursorCache.x,h._posCursorCache.y)))}),y(this,"_wheelHandler",function(e){a(e);var t=0;0<e.deltaY?t=-1:e.deltaY<0&&(t=1),h._sendMouseData(h._mouseButtonMap.wheel,h._mouseEventMap.default,t,_Mathfloor(1e3*e.timeStamp),h._serialNumber,h._posMouseCache.x,h._posMouseCache.y,h._posCursorCache.x,h._posCursorCache.y)}),y(this,"_contextmenuHandler",function(e){a(e)}),y(this,"lockPointer",function(){h._remoteMousePointLockedState&&(h._canvasNode.requestPointerLock=h._canvasNode.requestPointerLock||h._canvasNode.mozRequestPointerLock||h._canvasNode.webkitRequestPointerLock,h._canvasNode.requestPointerLock())}),y(this,"_unlockPointer",function(){h._localMousePointerLockState&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock(),h._isAutoUnlockPointer=!0)}),y(this,"_keyboardHandler",function(e){var t=e.keyCode,n=e.type,i=e.code,o=e.target,r=e.key;if((function(e,t){try{return e===t||e!==t&&e.contains(t)}catch(e){}}(h._playerContainerNode,o)||!(o instanceof HTMLInputElement)&&!(o instanceof HTMLTextAreaElement))&&(a(e),-1===x.indexOf(t)&&-1===x.indexOf(i)||h._gameStartParams.isIgonreInterceptFNKey))if(-1!==[20,144,145].indexOf(t))h._sendKeyboardData(t,e.getModifierState(h._lockKeyboardMap[t])?5:4);else{if(!h._syncLockKeyboard){for(var s in h._lockKeyboardMap)h._sendKeyboardData(+s,e.getModifierState(h._lockKeyboardMap[s])?5:4);h._syncLockKeyboard=!0}"Escape"===r?("keydown"!==n||h._isEscKeyDown||(h._sendKeyboardData(t,h._keyboardEventTypeMap[n],0),h._isEscKeyDown=!0),"keyup"===n&&h._isEscKeyDown&&(h._sendKeyboardData(t,h._keyboardEventTypeMap[n],0),h._isEscKeyDown=!1)):h._sendKeyboardData(t,h._keyboardEventTypeMap[n],0)}}),y(this,"_keyDownHandler",function(e){h._keyboardHandler(e)}),y(this,"_keyUpHandler",function(e){h._keyboardHandler(e)}),y(this,"_sendKeyboardData",function(e,t,n){if(2===t){for(var i in h._recordPressedKeysMap)if(h._recordPressedKeysMap[i]&&18===parseInt(i)&&115===parseInt(e)&&!h._gameStartParams.isIgonreInterceptFNKey)return;h._recordPressedKeysMap[e]=1}else 3===t&&delete h._recordPressedKeysMap[e];h._gamePlayer.sendData(p({opList:[{inputOp:e,inputState:t,value:n}],handleComboKey:!!h._gameStartParams.isIgonreInterceptFNKey}))}),y(this,"setCustomCursor",function(e){var t,n,i;e&&(t=(e=JSON.parse(e)).showOrHide,n=e.cursorStyle,i=e.gameCursorData,e=e.iconCursorHotSpot,"boolean"===u(t)&&(h._remoteMousePointLockedState=!t,t?h._unlockPointer():h.lockPointer()),"CURSOR_NONE"===n?h._playerContainerNode.style.cursor="none":i&&"array"===u(i.cursorFrames)&&i.cursorFrames[0].frameData&&(t=i.cursorFrames[0].frameData,n=e?e.x:0,i=e?e.y:0,h._playerContainerNode.style.cursor="url(data:image/png;base64,".concat(t,") ").concat(n," ").concat(i,",auto")))}),y(this,"_sendEscKeyCode",function(){h._sendKeyboardData(27,2,0),h._sendKeyboardData(27,3,0)}),y(this,"_sendEnterKeyCode",function(){h._sendKeyboardData(13,2,0),h._sendKeyboardData(13,3,0)}),y(this,"_getGamepads",function(){return navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[]}),y(this,"_gamepadConnectedHandler",function(e){e=e.gamepad;h._gamepads[e.index]=e,!h._requestAnimationFrameId<=0&&(h._requestAnimationFrameId=window.requestAnimationFrame(h._updateGamepads))}),y(this,"_updateGamepads",function(){for(var e,t=h._getGamepads(),n=0;n<t.length;n++)t[n]&&(h._gamepads[t[n].index]=(t[n].index,h._gamepads,t[n]));for(e in h._gamepads)if(h._gamepads[e]){var i=h._gamepads[e];if(!i||!i.id)continue;var o=0,r=0,s=0;10<=i.buttons.length&&(o=(o=(o=(o=(o=(o|=i.buttons[0].pressed?4096:0)|(i.buttons[1].pressed?8192:0))|(i.buttons[2].pressed?16384:0))|(i.buttons[3].pressed?32768:0))|(i.buttons[4].pressed?256:0))|(i.buttons[5].pressed?512:0),r=i.buttons[6].pressed?parseInt(255*i.buttons[6].value):0,s=i.buttons[7].pressed?parseInt(255*i.buttons[7].value):0,o=(o|=i.buttons[8].pressed?32:0)|(i.buttons[9].pressed?16:0)),16<=i.buttons.length&&(o=(o=(o=(o=(o=(o|=i.buttons[10].pressed?64:0)|(i.buttons[11].pressed?128:0))|(i.buttons[12].pressed?1:0))|(i.buttons[13].pressed?2:0))|(i.buttons[14].pressed?4:0))|(i.buttons[15].pressed?8:0)),i.buttons.length;for(var a,c=void 0,l=void 0,d=void 0,p=void 0,u=0;u<i.axes.length;u++)-.15<(a=i.axes[u])&&a<.15&&(a=0),a*=32767,0===u?c=a:1===u?l=-a:2===u?d=a:3===u&&(p=-a);h._sendGamepadData(parseInt(e),parseInt(o),parseInt(r),parseInt(s),parseInt(c),parseInt(l),parseInt(d),parseInt(p))}h._requestAnimationFrameId=window.requestAnimationFrame(h._updateGamepads)}),y(this,"_gamepadDisconnectedHandler",function(e){var t,e=e.gamepad,n=(delete h._gamepads[e.index],delete h._saveXinputGamepadData[e.index],0);for(t in h._gamepads)n++;!n&&h._requestAnimationFrameId&&(window.cancelAnimationFrame(h._requestAnimationFrameId),h._requestAnimationFrameId=-1)}),y(this,"_sendGamepadData",function(e,t,n,i,o,r,s,a){var c={};c.XinputUserIndex=e,c.inputState=1,h._saveXinputGamepadData[e]=h._saveXinputGamepadData[e]||{},h._saveXinputGamepadData[e].buttons!==t&&(c.inputOp=h._gamepadInputOpMap.buttons,h._saveXinputGamepadData[e].buttons=c.value=t,h._gamePlayer.sendData(p({opList:[c]}))),h._saveXinputGamepadData[e].leftTrigger!==n&&(c.inputOp=h._gamepadInputOpMap.L2,h._saveXinputGamepadData[e].leftTrigger=c.value=n,h._gamePlayer.sendData(p({opList:[c]}))),h._saveXinputGamepadData[e].rightTrigger!==i&&(c.inputOp=h._gamepadInputOpMap.R2,h._saveXinputGamepadData[e].rightTrigger=c.value=i,h._gamePlayer.sendData(p({opList:[c]}))),h._saveXinputGamepadData[e].thumbLX!==o&&(c.inputOp=h._gamepadInputOpMap.LX,h._saveXinputGamepadData[e].thumbLX=c.value=o,h._gamePlayer.sendData(p({opList:[c]}))),h._saveXinputGamepadData[e].thumbLY!==r&&(c.inputOp=h._gamepadInputOpMap.LY,h._saveXinputGamepadData[e].thumbLY=c.value=r,h._gamePlayer.sendData(p({opList:[c]}))),h._saveXinputGamepadData[e].thumbRX!==s&&(c.inputOp=h._gamepadInputOpMap.RX,h._saveXinputGamepadData[e].thumbRX=c.value=s,h._gamePlayer.sendData(p({opList:[c]}))),h._saveXinputGamepadData[e].thumbRY!==a&&(c.inputOp=h._gamepadInputOpMap.RY,h._saveXinputGamepadData[e].thumbRY=c.value=a,h._gamePlayer.sendData(p({opList:[c]})))}),y(this,"removeKeyboardEvent",function(){document.removeEventListener("keydown",h._keyDownHandler),document.removeEventListener("keyup",h._keyUpHandler)}),y(this,"removeGamepadEvent",function(){window.removeEventListener("gamepadconnected",h._gamepadConnectedHandler),window.removeEventListener("gamepaddisconnected",h._gamepadDisconnectedHandler),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach(function(e){window.removeEventListener(e,h._fullscreenchangeHandler)})}),y(this,"removeMouseEvent",function(){h._canvasNode.removeEventListener("mousedown",h._mouseDownHandler),h._usePointerMove&&l()?h._canvasNode.removeEventListener("pointerrawupdate",h._mouseMoveHandler):h._canvasNode.removeEventListener("mousemove",h._mouseMoveHandler),document.removeEventListener("mouseup",h._mouseUpHandler),h._canvasNode.removeEventListener("wheel",h._wheelHandler),h._canvasNode.removeEventListener("contextmenu",h._contextmenuHandler)}),y(this,"_sendReleaseMouseAndKeyboardData",function(){h._sendReleaseKeyboardData(),h._sendReleaseMouseData()}),y(this,"_sendReleaseKeyboardData",function(){for(var e in h._recordPressedKeysMap)h._recordPressedKeysMap[e]&&(h._sendKeyboardData(parseInt(e),3,0),delete h._recordPressedKeysMap[e])}),y(this,"_sendReleaseMouseData",function(){for(var e in h._recordPressedMouseButtonsMap){var t,n,i,o,r,s,a;h._recordPressedMouseButtonsMap[e]&&(t=(e=h._recordPressedMouseButtonsMap[e]).inputOp,n=e.value,i=e.posMouseX,o=e.posMouseY,r=e.posCursorX,s=e.posCursorY,a=e.timestamp,e=e.serialNumber,h._sendMouseData(t,h._mouseEventMap.mouseup,n,a,e,i,o,r,s))}}),y(this,"_fullscreenchangeHandler",function(){h._isFullScreen=document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.fullscreenElement||document.msFullscreenElement,h._isFullScreen?h._useEscLongPress&&navigator.keyboard&&navigator.keyboard.lock&&navigator.keyboard.lock():h._isEscKeyDown||h._sendEscKeyCode()}),y(this,"_getSerialNumber",function(){h._serialNumber<4294967295?h._serialNumber++:h._serialNumber=0}),y(this,"sendInputSwitch",function(){h._sendKeyboardData(91,2,0),h._sendKeyboardData(32,2,0),h._sendKeyboardData(91,3,0),h._sendKeyboardData(32,3,0)}),y(this,"sendTextMessage",function(e){var t;"string"===u(e)&&((t={}).inputBuf=c(e),h._gamePlayer.sendData(d($,t,1,2)))}),y(this,"setMouseMoveRatio",function(e){"number"===u(e)&&(h._mouseMoveRatio=e)}),y(this,"calcRemoteAndLocalScreenRatio",function(e){e&&(h._gameStartParams.resolution=e);var t,n=h._canvasNode,i=n.clientWidth,n=n.clientHeight;(i!==h._videoWidth||n!==h._videoHeight||e)&&(t=(e=function(e){if(Array.isArray(e))return e}(e=(e||h._gameStartParams.resolution).split("x"))||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,o,r,s=[],a=!0,c=!1;try{for(o=(t=t.call(e)).next;!(a=(n=o.call(t)).done)&&(s.push(n.value),2!==s.length);a=!0);}catch(s){c=!0,i=s}finally{try{if(!a&&null!=t.return&&(r=t.return(),Object(r)!==r))return}finally{if(c)throw i}}return s}}(e)||function(e){var t;if(e)return"string"==typeof e?m(e,2):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(e,2):void 0}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],e=e[1],h._videoWidth=i,h._videoHeight=n,0<i&&0<t&&(h._videoWidthRatio=i/t),0<n)&&0<e&&(h._videoHeightRatio=n/e)}),this._playerContainerNode=n,this._canvasNode=n.getElementsByTagName("canvas")[0],this._gamePlayer=t,this._gameStartParams=i,this._usePointerMove=i.usePointerMove,this._useEscLongPress=this._gameStartParams.escLongPress,this._videoWidthRatio=1,this._videoHeightRatio=1,this._videoWidth=0,this._videoHeight=0,this._localMousePointerLockState=!1,this._remoteMousePointLockedState=!1,this._gamepads={},this._requestAnimationFrameId=-1,this._keyboardEventTypeMap={keydown:2,keyup:3},this._mouseEventMap={default:1,mousedown:2,mouseup:3},this._mouseButtonMap={0:512,1:513,2:514,3:518,4:519,move:516,wheel:515},this._mouseMoveRatio=1,this._syncLockKeyboard=!1,this._lockKeyboardMap={20:"CapsLock",144:"NumLock",145:"ScrollLock"},this._recordPressedKeysMap={},this._recordPressedMouseButtonsMap={},this._saveXinputGamepadData=[],this._gamepadInputOpMap={buttons:1024,L2:1025,R2:1026,LX:1027,LY:1028,RX:1029,RY:1030},this._posCursorCache={x:0,y:0},this._posMouseCache={x:0,y:0},this._hasMouseDown={},this._storeKey={sendMouseData:(n="sendMouseData".concat(i.cid),K().MD5(n))},this._devicePixelRatio=window.devicePixelRatio||1,this._serialNumber=0,this._isFullScreen=!1,this._isEscKeyDown=!1,this._isAutoUnlockPointer=!1,this._init()},Object.defineProperty(t,"prototype",{writable:!1}),t),q=(e((D=B).prototype,[{key:"_init_",value:function(){return this._virtualInputWarp||(this._virtualInputWarp=document.createElement("div"),this._virtualInputWarp.setAttribute("data-event","virtual-input"),n(this._virtualInputWarp,{"pointer-events":"auto",position:"fixed",display:"none",width:"1px",height:"1px","background-color":"transparent",left:"0",top:"0","z-index":"-1",overflow:"hidden"}),this._virtualInputWarp.innerHTML='<form action=\'javascript:false;\' style=\'width:inherit; height:inherit;\'>\n                        <input type="text" autocapitalize="off" autocomplete="off" autocorrect="off" style="width: 1px; height: 1px;"  class="hm-vir-input-msg"/>\n                  </form>',this.container.appendChild(this._virtualInputWarp),this.inputMsg=this._virtualInputWarp.querySelector(".hm-vir-input-msg"),this.inputMsg&&this.inputMsg.setAttribute("data-event","virtual-input"),this._bindEvent_()),this}},{key:"show",value:function(e,t){return this.inputMsg&&(this.display=!0,n(this._virtualInputWarp,{display:"block",zIndex:100,top:"".concat(e,"px"),left:"".concat(t,"px")}),this.inputMsg.focus()),this}},{key:"hide",value:function(){return this.inputMsg&&(this.display=!1,this.compositionEnd=!1,n(this._virtualInputWarp,{display:"none",zIndex:-1}),this.inputMsg.blur(),this.inputMsg.value=""),this}},{key:"setDisplayStatus",value:function(e,t){var n=e.statusType,i=e.imePointX,e=e.imePointY;"STATUS_SHOW"===n?(i=(n=this.calcInputPosition(i,e,t)).top,e=n.left,this.show(i,e)):this.hide()}},{key:"_bindEvent_",value:function(){var t=this;this.inputMsg&&(this.inputMsg.addEventListener("input",function(e){return t._onInput_(e)}),this.inputMsg.addEventListener(O,function(e){return t._onCompositionEvent_(e)}),this.inputMsg.addEventListener(M,function(e){return t._onCompositionEvent_(e)}),this.inputMsg.addEventListener(P,function(e){return t._onKeyEvent_(e)}),this.inputMsg.addEventListener("keyup",function(e){return t._onKeyEvent_(e)}))}},{key:"_isDisplay_",value:function(){return this.display=!!this._virtualInputWarp&&"block"===this._virtualInputWarp.style.display}},{key:"_onInput_",value:function(e){return a(e),this.inputLock||(this._gamePlayer.sendTextMessage(this.inputMsg.value),this.inputMsg.value=""),!1}},{key:"_onKeyEvent_",value:function(e){if(this.inputMsg&&this._isDisplay_()){if(e.type!==P&&"keyup"!==e.type)return e.stopPropagation(),!1;e.preventDefault();var t=e.keyCode||e.which||e.charCode;if(e.ctrlKey)switch(t){case 83:case 70:return e.preventDefault(),!1}if(e.altKey)switch(t){case 69:case 70:case 68:case 27:return e.preventDefault(),!1}}}},{key:"sendIMEStatusNotifyToGS",value:function(e){this._gamePlayer&&this._gamePlayer.sendData(d(G,{terminalType:9,statusType:e||0},1,3))}},{key:"_onCompositionEvent_",value:function(e){switch(e.preventDefault(),e.type){case O:this.inputLock=!0;break;case M:if(e.stopPropagation(),!this.inputLock)return;this.inputLock=!1,this._trigger(event.target,"input")}}},{key:"_trigger",value:function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}},{key:"_removeEvent_",value:function(){var t=this;this.inputMsg&&(this.inputMsg.removeEventListener("input",function(e){return t._onInput_(e)}),this.inputMsg.removeEventListener(O,function(e){return t._onCompositionEvent_(e)}),this.inputMsg.removeEventListener(M,function(e){return t._onCompositionEvent_(e)}),this.inputMsg.removeEventListener(P,function(e){return t._onKeyEvent_(e)}),this.inputMsg.removeEventListener("keyup",function(e){return t._onKeyEvent_(e)}))}},{key:"destroy",value:function(){try{this.display=!1,this.inputLock=!1,this.cursor="default",this._removeEvent_(),this.container.removeChild(this._virtualInputWarp),this._virtualInputWarp=null,this.inputMsg=null}catch(e){}}},{key:"calcInputPosition",value:function(e,t,n){var i=this.container,o=i.clientWidth,i=i.clientHeight,n=function(e){if(Array.isArray(e))return e}(n=n.split("x"))||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,o,r,s=[],a=!0,c=!1;try{for(o=(t=t.call(e)).next;!(a=(n=o.call(t)).done)&&(s.push(n.value),2!==s.length);a=!0);}catch(s){c=!0,i=s}finally{try{if(!a&&null!=t.return&&(r=t.return(),Object(r)!==r))return}finally{if(c)throw i}}return s}}(n)||function(e){var t;if(e)return"string"==typeof e?_(e,2):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_(e,2):void 0}(n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0];return{top:i*(t/n[1]),left:o*(e/r)}}}]),Object.defineProperty(D,"prototype",{writable:!1}),B),J=(A=function e(t,n,i,o){var p=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");C(this,"handleReceiveMsg",function(e){var t=JSON.parse(e.sdkAction).action;p._cacheReceiveMsg[t]=e}),C(this,"_addLocalMediaStream",function(){p._localMediaStream||p._createPredefineMediaStream(),p._localMediaStream.getTracks().forEach(function(e){p._pc.addTrack(e,p._localMediaStream)})}),C(this,"_createPredefineMediaStream",function(){p._localMediaStream=new MediaStream,(new(window.AudioContext||window.webkitAudioContext)).createMediaStreamDestination().stream.getAudioTracks().forEach(function(e){p._localMediaStream.addTrack(e)});var e=document.createElement("canvas"),e=(e.captureStream()||e.mozCaptureStream()).getVideoTracks()[0];p._localMediaStream.addTrack(e)}),C(this,"_replaceMediaTrack",function(e){p._localMediaStream=new MediaStream(e);var t=p._pc.getSenders().find(function(e){e=e.track;return e&&"audio"===e.kind}),n=(p._localMediaStream.getAudioTracks().forEach(function(e){t?t.replaceTrack(e):p._pc.addTrack(e,p._localMediaStream)}),p._pc.getSenders().find(function(e){e=e.track;return e&&"video"===e.kind})),e=p._localMediaStream.getVideoTracks();try{if(!e[0])return;var i,o,r,s,a,c=null,l=e[0].label,d=e[0].getCapabilities();p._gamePlayer.loggerSend("cameraInfo","label: ".concat(l,", capabilities: ").concat(JSON.stringify(d))),p._exposure&&d&&"array"===u(d.exposureMode)&&-1!==d.exposureMode.indexOf("manual")&&((i=JSON.parse(p._exposure)).forEach(function(e){"default"===e.manufacturer&&0<e.devices.length&&(c=e.devices[0])}),o=i.find(function(e){return new RegExp("^".concat(e.manufacturer),"igm").test(l)}),s=(c=o&&0<o.devices.length&&(r=o.devices.find(function(e){return new RegExp(e.device,"igm").test(l)}))?r:c).exposure.exposure_mode,a=(d.exposureTime?d.exposureTime.step:0)*c.exposure.min_exposure_time_step_multiple,c)&&a&&e[0].applyConstraints({advanced:[{exposureMode:s,exposureTime:a}]}).then(function(){})}catch(t){}e.forEach(function(e){n?n.replaceTrack(e):p._pc.addTrack(e,p._localMediaStream)})}),C(this,"changeResolution",function(){var e,t=p._pc.getSenders(),t=t&&t.find(function(e){e=e.track;return e&&"video"===e.kind});t&&t.getParameters&&((e=t.getParameters()).degradationPreference="maintain-resolution",t.setParameters)&&t.setParameters(e).then(function(){}).catch(function(){})}),C(this,"openMediaDevices",function(e,t){var n,i,o,r=e.video,e=e.audio,s={video:!1,audio:!1};"object"===u(r)&&(o=r.width,n=r.height,i=r.frameRate,r=r.deviceId,s.video={},s.video.width=o||p._frameWidth,s.video.height=n||p._frameHeight,s.video.frameRate=i||p._frameRate,s.video.deviceId="default"===r?"":r),"object"===u(e)&&(o=e.deviceId,s.audio={},s.audio.channelCount=2,s.audio.sampleRate=48e3,s.audio.echoCancellation=!0,s.audio.noiseSuppression=!0,s.audio.autoGainControl=!1,s.audio.deviceId="default"===o?"":o),navigator.mediaDevices.getUserMedia(function(t){for(var n,e=1;e<arguments.length;e++)n=null==arguments[e]?{}:arguments[e],e%2?k(Object(n),!0).forEach(function(e){C(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))});return t}({},s)).then(function(e){p.closeMediaDevices(),p._replaceMediaTrack(e),t&&t("",e)}).catch(function(e){t&&t(e)})}),C(this,"closeMediaDevices",function(t){p._localMediaStream.getTracks().forEach(function(e){return e?!t||"Camera"===t&&"video"===e.kind?void e.stop():void("Microphone"==t&&"audio"===e.kind&&e.stop()):void 0})}),C(this,"mediaDevicesResponseNotify",function(e,t){var n,i;Object.keys(p._cacheReceiveMsg).indexOf(e)<0||!t||"number"!=typeof t.op||"number"!=typeof t.code||(i=(e=p._cacheReceiveMsg[e]).sdkAction,n=e.cid,e=e.userId,(i=JSON.parse(i)).data=t,i.method="response",p._gamePlayer.sendActionData({cid:+n,userId:e,sdkAction:JSON.stringify(i)}))});i=(i||"1280x720").split("x");this._frameWidth=i[0],this._frameHeight=i[1],this._frameRate=o||30,this._gamePlayer=t,this._pc=n,this._localMediaStream=null,this._addLocalMediaStream(),this._cacheReceiveMsg={},this._exposure=this._gamePlayer._gameStartParams.sendVideoExposure},Object.defineProperty(A,"prototype",{writable:!1}),A);t=function e(t){var r=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");T(this,"_createRtcInstance",function(){var e=window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCSessionDescription;r._pc=new e(null),r._getRemoteSdp(),r._x86HaimaCamera=new J(r,r._pc,r._gameStartParams.sendVideoResolution,r._gameStartParams.sendVideoFps),r._gameControl=new z(r,r._playerContainerNode,r._gameStartParams),r._pc.addEventListener("icecandidate",r._icecandidateHandle),r._pc.addEventListener("track",r._trackHandle),r._pc.addEventListener("negotiationneeded",r._negotiationneededHandle),r._pc.addEventListener("iceconnectionstatechange",r._iceconnectionstatechangeHandle),r._pc.addEventListener("icegatheringstatechange",r._icegatheringstatechangeHandle),r._pc.addEventListener("signalingstatechange",r._signalingstatechangeHandle),r._pc.addEventListener("connectionstatechange",r._connectionstatechangeHandle),r._pc.addEventListener("datachannel",r._datachannelHandle)}),T(this,"_openHandle",function(){r._eventEmitter.emit("x86player","dataChannelOpen")}),T(this,"_messageHandle",function(e){var t,n,e=e.data;"string"!==u(e)?"arraybuffer"===u(e)&&(3===(t=new Uint8Array(e))[11]&&5===t[12]?(n=i(t,L),r._gameControl.setCustomCursor(n),r._eventEmitter.emit("x86player","dataChannelMsg",{cursorInfo:JSON.parse(n)})):4===t[11]&&8===t[12]?(n=JSON.parse(i(t,U)),r._eventEmitter.emit("x86player","dataChannelMsg",{notify:n}),r._hasControl="GET_CONTROL"===n.type,!r._hasControl&&r._virtualInput&&(r._virtualInput.hide(),r._cacheImeStatus=null)):1===t[11]&&1===t[12]?(r._eventEmitter.emit("x86player","dataChannelMsg",{IMEStatus:JSON.parse(h(t))}),r._hasControl&&r._virtualInput&&(r._cacheImeStatus=JSON.parse(h(t)),r._virtualInput.setDisplayStatus(r._cacheImeStatus,r._gameStartParams.resolution))):4===t[11]&&13===t[12]?(n=JSON.parse(i(t,E)),r._eventEmitter.emit("x86player","dataChannelMsg",{mediaDevicesRequest:JSON.parse(n.sdkAction)}),r._x86HaimaCamera.handleReceiveMsg(n)):4===t[11]&&12===t[12]?(n=JSON.parse(i(t,j)),r._eventEmitter.emit("x86player","dataChannelMsg",{sdkData:n.sdkData})):(1===t[11]&&7===t[12]&&(n=JSON.parse(i(t,W)),r._eventEmitter.emit("x86player","dataChannelMsg",{resetNoInputTimer:n})),4===t[11]&&16===t[12]&&(n=JSON.parse(i(t,I)),r._eventEmitter.emit("x86player","dataChannelMsg",{clipBoard:n})))):r._eventEmitter.emit("x86player","dataChannelMsg",{pingPong:e})}),T(this,"_closeHandle",function(){}),T(this,"_errorHandle",function(e){r._eventEmitter.emit("x86player","dataChannelError",e)}),T(this,"_destroyDataChannelInstance",function(){r._dataChannelInstance&&(r._dataChannelInstance.removeEventListener("open",r._openHandle),r._dataChannelInstance.removeEventListener("message",r._messageHandle),r._dataChannelInstance.removeEventListener("close",r._closeHandle),r._dataChannelInstance.removeEventListener("error",r._errorHandle),r._dataChannelInstance.close(),r._dataChannelInstance=null)}),T(this,"sendData",function(e){var t;"open"===(null==(t=r._dataChannelInstance)?void 0:t.readyState)&&r._dataChannelInstance.send(e)}),T(this,"sendActionData",function(e){r._eventEmitter.emit("x86player","mediaDevicesResponse",e),r.sendData(d(E,e,4,13))}),T(this,"_getRemoteSdp",function(){var e=r._gameStartParams,t=e.cid,e=e.gsmUri,o=(r._eventEmitter.emit("x86player","getRemoteSdpBegin",""),{isSucceed:null,response:null});r._httpRelease=S({url:e,data:JSON.stringify({cid:t,client_sdp:"",option:1}),method:"POST",contentType:"text/plain",retryCount:r._retryCount,timeout:10,retryInterval:2e3,done:function(e,t,n){if(o.isSucceed=e){var i,e=JSON.parse(n);if(0===(null==(i=e.ret)?void 0:i.result))return r._setRemoteSdp(e.gsproxy_sdp),r._eventEmitter.emit("x86player","getRemoteSdpSuccess",atob(e.gsproxy_sdp)),!1;o.response=e}else o.response=n;r._eventEmitter.emit("x86player","getRemoteSdpError",o)}})}),T(this,"_createAnswer",function(n){r._pc.createAnswer().then(function(e){return-1===e.sdp.indexOf("flexfec")&&n&&(e.sdp=e.sdp.replace(/a=rtpmap(.*)ulpfec(.*)\r\n/,function(e){return"".concat(e).concat(n)}),e.sdp=e.sdp.replace(/(m=video.*)\r\n/,function(e,t){return"".concat(t," ").concat(n.replace(/(.*):(\d*)(.*)/,"$2"))})),e.sdp=e.sdp.replace(/(a=rtcp-fb:[0-9]+ )nack\r\n/g,function(e,t){return"".concat(t,"nack\r\n").concat(t,"rrtr\r\n")}),e.sdp=e.sdp.replace(/minptime=10;useinbandfec=1/,"minptime=10;stereo=1;useinbandfec=1"),r._sendLocalSdp(e),r._pc.setLocalDescription(e)}).catch(function(e){r._eventEmitter.emit("x86player","createAnswerError",e)})}),T(this,"_sendLocalSdp",function(e){var t=r._gameStartParams,n=t.cid,t=t.gsmUri,n={cid:n,client_sdp:"".concat(btoa(JSON.stringify(e))),option:2},o=(r._eventEmitter.emit("x86player","sendLocalSdpBegin",e),{isSucceed:null,response:null});r._httpRelease=S({url:t,data:JSON.stringify(n),method:"POST",contentType:"text/plain",retryCount:r._retryCount,timeout:10,retryInterval:2e3,done:function(e,t,n){if(o.isSucceed=e){var i,e=JSON.parse(n);if(0===(null==(i=e.ret)?void 0:i.result))return r._eventEmitter.emit("x86player","sendLocalSdpSuccess",atob(e.gsproxy_sdp)),!1;o.response=e}else o.response=n;r._eventEmitter.emit("x86player","sendLocalSdpError",o)}})}),T(this,"_setRemoteSdp",function(e){var e=JSON.parse(atob(e)),t=e.sdp.match(/a=rtpmap(.*)flexfec-03(.*)\r\n/)[0];r._pc.setRemoteDescription(new RTCSessionDescription(e)).then(function(){r._createAnswer(t)}).catch(function(e){r._eventEmitter.emit("x86player","setRemoteDescriptionError",e)})}),T(this,"_icecandidateHandle",function(e){e=e.candidate;e&&r._eventEmitter.emit("x86player","icecandidate",e||e.candidate)}),T(this,"_trackHandle",function(e){var t=e.track,e=e.streams;r._eventEmitter.emit("x86player","track",t),"video"===t.kind&&(r._videoNode.srcObject=e[0]),"audio"===t.kind&&(r._hasAudioSteams=!0,r._audioNode.srcObject=e[0])}),T(this,"_negotiationneededHandle",function(){}),T(this,"_iceconnectionstatechangeHandle",function(){r._pc.iceConnectionState,r._eventEmitter.emit("x86player","iceConnectionState",r._pc.iceConnectionState)}),T(this,"_connectionstatechangeHandle",function(){r._pc.connectionState,r._eventEmitter.emit("x86player","connectionstatechange",r._pc.connectionState)}),T(this,"_datachannelHandle",function(e){r._dataChannelInstance=e.channel,r._dataChannelInstance.binaryType="arraybuffer",r._dataChannelInstance.addEventListener("open",r._openHandle),r._dataChannelInstance.addEventListener("message",r._messageHandle),r._dataChannelInstance.addEventListener("close",r._closeHandle),r._dataChannelInstance.addEventListener("error",r._errorHandle)}),T(this,"_signalingstatechangeHandle",function(){r._x86HaimaCamera.changeResolution(),r._eventEmitter.emit("x86player","signalingstatechange",r._pc.signalingState)}),T(this,"_icegatheringstatechangeHandle",function(){r._pc.iceGatheringState,r._eventEmitter.emit("x86player","icegatheringstatechange",r._pc.iceGatheringState)}),T(this,"_destroyRTCInstance",function(){r._pc&&(r._pc.removeEventListener("icecandidate",r._icecandidateHandle),r._pc.removeEventListener("track",r._trackHandle),r._pc.removeEventListener("negotiationneeded",r._negotiationneededHandle),r._pc.removeEventListener("iceconnectionstatechange",r._iceconnectionstatechangeHandle),r._pc.removeEventListener("icegatheringstatechange",r._icegatheringstatechangeHandle),r._pc.removeEventListener("signalingstatechange",r._signalingstatechangeHandle),r._pc.removeEventListener("connectionstatechange",r._connectionstatechangeHandle),r._pc.removeEventListener("datachannel",r._datachannelHandle),r._pc.close(),r._pc=null)}),T(this,"_getStandardStats",function(t){r._pc&&r._pc.getStats(null).then(function(e){e.forEach(function(e){if("inbound-rtp"===e.type&&"video"===e.kind){for(var t in e)r._rtcReceivedStatsMap[t]=e[t];e.packetsReceived&&(r._rtcReceivedStatsMap.packetsReceived=e.packetsReceived),e.packetsLost&&(r._rtcReceivedStatsMap.packetsLost=e.packetsLost),e.bytesReceived&&(r._rtcReceivedStatsMap.bytesReceived=e.bytesReceived),e.framesDecoded&&(r._rtcReceivedStatsMap.framesDecoded=e.framesDecoded),e.totalDecodeTime&&(r._rtcReceivedStatsMap.totalDecodeTime=e.totalDecodeTime),e.frameWidth&&(r._rtcReceivedStatsMap.frameWidth=e.frameWidth),e.frameHeight&&(r._rtcReceivedStatsMap.frameHeight=e.frameHeight),e.framesReceived&&(r._rtcReceivedStatsMap.framesReceived=e.framesReceived),/firefox/gi.test(N)&&(r._rtcReceivedStatsMap.currentRoundTripTime=e.jitter),r._rtcReceivedStatsMap.totalFreezesDuration=e.totalFreezesDuration,r._rtcReceivedStatsMap.freezeCount=e.freezeCount}"track"==e.type&&"video"==e.kind&&(e.frameWidth&&(r._rtcReceivedStatsMap.frameWidth=e.frameWidth),e.frameHeight&&(r._rtcReceivedStatsMap.frameHeight=e.frameHeight),e.framesReceived)&&(r._rtcReceivedStatsMap.framesReceived=e.framesReceived),"candidate-pair"===e.type&&-1<["succeeded","in-progress"].indexOf(e.state)&&(r._rtcReceivedStatsMap.currentRoundTripTime=e.currentRoundTripTime,r._rtcReceivedStatsMap.totalRoundTripTime=e.totalRoundTripTime,r._rtcReceivedStatsMap.responsesReceived=e.responsesReceived),"remote-candidate"===e.type&&(r._rtcReceivedStatsMap.remoteCandidate=e)}),t(r._rtcReceivedStatsMap,r._rtcSendStatsMap,e)}).catch(function(e){throw new Error(e)})}),T(this,"create",function(e){var t,n,i;if(e)return r._playerContainerId="player-".concat(s()),e="canvas-".concat(s()),t="video-".concat(s()),n="audio-".concat(s()),document.querySelector(".HMplayerBox")||((i=document.createElement("div")).setAttribute("class","HMplayerBox"),i.style.zIndex=6,document.querySelector(".KeyPositionBox").appendChild(i)),i="\n            <div id=".concat(r._playerContainerId,' style="position: relative; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 100%; height: 100%; overflow: hidden;">\n                <canvas id="').concat(e,'" style="width: 100%; height: 100%; position: absolute; z-index: 1; left: 0; top: 0; background: none;"></canvas>\n                <video id="').concat(t,'" muted autoplay playsinline webkit-playsinline x5-playsinline x5-video-player-type="h5" x5-video-orientation="landscape" x-webkit-airplay="allow" preload style="width: 100%; height: 100%; background: none; display: block; object-fit: fill;"></video>\n                <audio id="').concat(n,'" autoplay playsinline webkit-playsinline style="display:none; object-fit: fill;"></audio>\n            </div>'),document.querySelector(".HMplayerBox").innerHTML=i,r._playerContainerNode=document.getElementById(r._playerContainerId),r._videoNode=document.getElementById(t),r._audioNode=document.getElementById(n),r._videoNode.addEventListener("loadeddata",function(){}),r._virtualInput=new q(r),{videoId:t,canvasId:e}}),T(this,"connect",function(e){(r._gameStartParams=e).retryCount&&(r._retryCount=e.retryCount),r._createRtcInstance()}),T(this,"disconnect",function(){r._destroyDataChannelInstance(),r._destroyRTCInstance(),r._gameControl&&(r._gameControl.removeKeyboardEvent(),r._gameControl.removeMouseEvent(),r._gameControl.removeGamepadEvent()),r._virtualInput&&r._virtualInput.destroy(),document.getElementById(r._playerContainerId)&&document.getElementById(r._playerContainerId).remove(),r._httpRelease&&r._httpRelease(),r._hasAudioSteams=!1,r._x86HaimaCamera&&(r._x86HaimaCamera.closeMediaDevices(),r._x86HaimaCamera=null)}),T(this,"enableAudio",function(e){"boolean"===u(e)&&(r._hasAudioSteams?(r._audioNode.muted=!e,r._audioNode.play()):r._videoNode.muted=!e)}),T(this,"getAudioState",function(){return r._videoNode.muted}),T(this,"getWebrtcStats",function(e){r._getStandardStats(e)}),T(this,"sendTextMessage",function(e){r._gameControl&&r._gameControl.sendTextMessage(e)}),T(this,"setMouseMoveRatio",function(e){r._gameControl&&r._gameControl.setMouseMoveRatio(e)}),T(this,"calcRemoteAndLocalScreenRatio",function(e){r._gameControl&&r._gameControl.calcRemoteAndLocalScreenRatio(e),r._virtualInput&&r._cacheImeStatus&&r._virtualInput.setDisplayStatus(r._cacheImeStatus,e)}),T(this,"sendInputSwitch",function(){r._gameControl&&r._gameControl.sendInputSwitch()}),T(this,"lockPointer",function(){r._gameControl&&r._gameControl.lockPointer()}),T(this,"resetInputTimer",function(){r.sendData(d(V,{value:1},1,7))}),T(this,"loggerSend",function(e,t){r._eventEmitter.emit("x86player",e,t)}),T(this,"openMediaDevices",function(e,t){r._x86HaimaCamera.openMediaDevices(e,t)}),T(this,"closeMediaDevices",function(e){r._x86HaimaCamera.closeMediaDevices(e)}),T(this,"mediaDevicesResponseNotify",function(e,t){r._x86HaimaCamera.mediaDevicesResponseNotify(e,t)}),T(this,"sendDataToGame",function(e,t,n){r.sendData(d(E,{cid:e,userId:t,sdkAction:n},4,12))}),T(this,"sendDataToClipBoard",function(e){r.sendData((e={data:c(e)},d(I,e,4,16)))}),this._eventEmitter=t||{emit:function(){}},this._playerContainerId=null,this._videoNode=null,this._audioNode=null,this._playerContainerNode=null,this._gameStartParams=null,this._gameControl=null,this._x86HaimaCamera=null,this._dataChannelInstance=null,this._rtcReceivedStatsMap={},this._rtcSendStatsMap={},this._virtualInput=null,this._httpRelease=null,this._hasAudioSteams=!1,this._retryCount=[10,10,10,10,10,10],this._cacheImeStatus=null,this._hasControl=!0},Object.defineProperty(t,"prototype",{writable:!1});var D,A,Y=t;function B(e){if(!(this instanceof B))throw new TypeError("Cannot call a class as a function");this._gamePlayer=e,this.container=this._gamePlayer._playerContainerNode,void 0===this.container&&(this.container=document.body),this.display=!1,this.inputLock=!1,this._virtualInputWarp=null,this.cursor="default",this.inputMsg=null,this._init_()}}(),__webpack_exports__}))}),X86Player=getDefaultExportFromCjs(x86player),sdkTips={lang:"zh_CN",NETWORK_UNAVALIABLE:",",applyFailTips:{NETWORK_REQUEST_TIMEOUT:"",PLAYER_IMPORT_ERROR:"",PARAMS_ERROR:"",GAME_STOPPED:", ",CONNECTING:"",INTERNAL_ERROR:",",LOAD_GAME_FAILED:"",NETWORK_UNAVAILABLE:"",GET_CID_ERROR:"",GET_SAAS_WEBSOCKET_ERROR:"",GET_INSTANCE_ERROR:"",SAAS_WEBSOCKET_ERROR:"",GAME_START_ERROR:"",GET_DID_COUNTLY_ERROR:"",GET_DID_DID_ERROR:"",invalid_resolution:"",query_private_mode:",,?",game_interrupted:",",unsupportedDevice:""},uploadErrorMessage:{1e3:":file ",1001:":opType ",1002:":",1003:":opType",1004:"image/jpegimage/png",1005:"opType",1006:"",1007:": ",1e4:"IEChrome",10001:": ",10002:"",10003:"",10004:"MD5",10005:"",10006:"",10007:"BID ",10008:"CID ",10009:""},downloadErrorMessage:{cancel_name_empty:"fileName",download_name_empty:"fileName",has_task:"",no_task:"",download_file_error:"",user_cancel:"",image_not_found:"",download_limit:"",link_close:"",turned_off:"",noSupport:"IEChrome"},SaasSDK:{controlLose:"",controlFail:"",unknownError:"",supportLiving:"",screenshotFailed:"",paramTypeError:"",cidTypeError:"cid",infoTypeError:"controlInfos",assignmentFailed:"",queryFailed:"",linkLimit:"",PARAMS_ERROR:"",gameNotStart:"",systemUnknownError:"",midMissed:"mid",socketNotConnected:"socket",dataOrTypeMissed:"datatype",invalidType:"type",invalidData:"data",sendTimeout:"",updateStandbyDurationFailed:""},utils:{hour:"",minute:"",seconds:"",systemUnknownError:""},camera:{camera:"API",VideoFormat:"",useRefuses:""},request:{responseDataError:"response "},UIView:{completeSet:"",webFullScreen:"",exitWebFullScreen:"",fullScreen:"",exitFullScreen:"",customPlan:"(|)",onlySave5:"5",saveNewPlan:"|",pleaseInput:"",defaultPlan:"",lastSavePlan:"",delay:"",packetLoss:"",keyMouse:"",flashDisable:"Flash",displayInGame:"",clickOpen:"",cancel:"",continue:"",newPlan:"",simulation:"",rotate:"",space:"",setClick:"",liftPress:"",enterKeysControlSkill:"",InputSwipe:"",end:"",cancelRelease:"",controlDirection:"WASD",leftFire:"",switchLock:" <br> ",rightGo:"",sensitivity:"",right:"",notSet:"",cannotSet:"|",loading:"",transparency:"",guide:"",close:"",save:"",notSave:"",dragDirection:"",dragArrow:"WASD",clickScreen:"",experienceReticle:"Chrome",dragShooter:"/",enterKeysControlGame:" <br> /",experienceFire:"Chrome",dragFire:"",rightControl:"",dragSkill:"/",gesture:"/",swipeBtn:"",turnOnReminders:"F2/",newProjectName:"",saveChange:"",restore:"",description:"",arrowKeys:"WASD",customButton:"",rightWalk:"",smartCasting:"",frontSightFire:"",clearAll:"",reset:"",guideImgName:"img"},UIModel:{officialPlan:"1",cancel:"",continue:"",INVALID_PARAM:": ",pleaseSet:"",onlyEnNum:"",cannotRepeat:"",swipeLimit:"",notSupportSmart:"",notSupportRight:"",notSupportArrow:"WASD",nameRepeat:"",indexError:"index",notSet:"",completeSet:"",waiting:"",pleaseDownload:""},X86Player:{forward:"",next:"",newline:"",upperCase:"",lowerCase:"",delete:"",switchSymbol:"/",saasOperationTips:"",shift:"/",space:"",determine:""}},sdk=function(){var o,r,s,a,c,i,l,d,e,p=sdkTips,t="hm_player_js";for(e in"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),Object.values||(Object.values=function(e){if(e!==Object(e))throw new TypeError("Object.values called on a non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(e[t]);return n}),applyFailReason)applyFailReason[e]=toLine(applyFailReason[e]);function u(){h(),o&&o.restartGame("online")}function h(){r&&(r.isFistClicked=!1)}function f(){o.pauseGame("offline"),h(),o._emit("messageUIModel","showToastMessage","".concat(p.applyFailTips.NETWORK_UNAVAILABLE," [").concat(applyFailCode.NETWORK_BROKEN,"-").concat(n().cid,"]")),o._emit("sceneChanged","stop",{interval:o._getCurrentGameDuration(),reason:applyFailReason.NETWORK_OFF,message:"".concat(p.applyFailTips.NETWORK_UNAVAILABLE," [").concat(applyFailCode.NETWORK_BROKEN,"-").concat(n().cid,"]")})}function m(e,t){o&&o.sendLogger(e,t)}function n(){return o.getCid()}function y(e){o&&o.enableAudio(e)}return _objectSpread2({initSDK:function(n){"object"===typeCheck(window.gLanguage)?window.gLanguage=window.gLanguage:window.gLanguage={},p=assiginObj(p,window.gLanguage),n.language&&(p=assiginObj(p,n.language)),n.pkg_name&&(n.pkgName=n.pkg_name);var e=n.accessKeyID,t=n.accessKeyId;n.channelId,(e||t)&&hasOwnProperty(n,"channelId")?(c=getSDKPath("saas-sdk.js"),i?m(loggerEventId.init_sdk_fun_call_multi_error,JSON.stringify(n)):(i=!0,o=new SaasSDK({accessKeyId:n.accessKeyID||n.accessKeyId,channelId:n.channelId,X86Player:X86Player}),m(loggerEventId.init_sdk_fun_call,JSON.stringify(n)),a=n.playerPath,s=n.isHideToolBar,d=n.toolbarDomId?"#"+n.toolbarDomId:"",o.listen("sceneChanged",function(e,t){if("stop"===e&&(l=i=!1,"network_off"!=t.reason)&&(window.removeEventListener("online",u),window.removeEventListener("offline",f),r.stopGame(t)),"vibf"===e&&r.gUIViewFn("showLoading",!1),"reconnectingStatus"===e&&h(),n.onSceneChanged){if("stop"==e&&t.errorCode)try{t.errorCode=String(t.errorCode),t.errorCodeWithoutCid=t.errorCode.split("-")[0]}catch(e){}n.onSceneChanged(e,t),-1===["delay","packetsLost","internalStats","evnt","clst","RTCState","videoStreamInfo","cursorInfo"].indexOf(e)&&o.sendLogger(loggerEventId.sdk_scene_changed_call,e+",data:"+(t?JSON.stringify(t):""))}}),o.listen("messageHandler",function(e){n.MessageHandler&&n.MessageHandler(e)}))):alert("".concat(p.applyFailTips.PARAMS_ERROR," accessKeyId / channelId"))},startSDK:function(n,i){i.pkg_name&&(i.pkgName=i.pkg_name),l?m(loggerEventId.start_sdk_fun_call_multi_error,JSON.stringify(i)):(l=!0,m(loggerEventId.apply_game_fun_call,JSON.stringify(i)),document.getElementById(t)&&removePlayer(t),loadPlayer(a=a||c+"flowplayer/flowplayer.js",function(e){var t;if(!e)throw t={errorCode:applyFailCode.PARAMS_ERROR,errorMsg:"".concat(p.applyFailTips.PLAYER_IMPORT_ERROR)},m(loggerEventId.apply_game_fun_failed,t),new Error(p.applyFailTips.PLAYER_IMPORT_ERROR);e&&(i=Object.assign({},i,{isHideToolBar:s,toolbarDomId:d}),t=!1,_typeof((e=swfobject.getFlashPlayerVersion()).major)===_typeof(1)&&0<e.major&&(t=11<e.major||11==e.major&&4<=e.minor),i&&i.playingtime&&(i.playingtime=i.playingtime/1e3),(r=new UIModel(n,i,o,y,p)).gUIViewFn("showLoading",!0),r.listen("ModelCallSaasSDK",function(e,t){e=e,t=t,o&&o[e](t)}),r.listen("onUIAccessSceneChanged",function(e,t){i.UIAccessSceneChanged&&i.UIAccessSceneChanged(e,t)}),o.listen("messageUIModel",function(e,t){r.messageUIModel(e,t)}),o.listen("setSaasConfig",function(e){r.setInfoApply(e)}),o.listen("startGameing",function(e,t,n){r.setInfoApply(e,t,n)}),o.listen("screenMessageRotate",function(e){r.screenRotate(e)}),e=(new Date).getTime(),sessionStorage.setItem("startGameTS",e),o.applyGame(n,i,t,p))},t),window.addEventListener("online",u),window.addEventListener("offline",f))},stopSDK:function(e,t){o&&o.endGame(e,t)},stopAll:function(){try{JSON.parse(localStorage.cloudplay_cids)}catch(e){}o&&o.stopAll()},getCid:n,gameArchived:function(e){o&&o.gameArchived(e)},checkPlayingGame:function(e){o&&o.checkPlayingGame(e)},releasePlayingGame:function(e,t){return o&&o.releasePlayingGame(e,t)},getGameArchiveStatus:function(e){o&&o.getGameArchiveStatus(e)},sendMessage:function(e){return o.sendMessage(e)},reportFinishInfo:function(e){o&&o.reportFinishInfo(e)},enableAudio:y,enterQueue:function(){o&&o.enterQueue()},outQueue:function(){o&&o.outQueue()},bringUpApp:function(){o&&o.bringUpApp()},getNetInfo:function(){return o.getNetInfo()},getCloudPlayStatusCode:function(){return o.getCloudPlayStatusCode()},isHideToolBar:function(){return s},showKeyboardSet:function(){r.showKeyboardSet()},webPageFullScreenFn:function(){r.webPageFullScreenFn()},fullScreenFn:function(e){r.fullScreen(e)},showDelayData:function(){r.showDelayData()},switchResolution:function(){return 5!=o.gGameState&&(o.changeResolution.apply(o,arguments),!0)},getStreamingDomain:function(){return o&&o.getStreamingDomain()},upload:function(e){if("object"==_typeof(e))return o.uploadFile(e)},getFileList:function(e){return o.getFileList(e)},downLoadFile:function(e,t){return o.downLoadFile(e,t)},cancelDownLoadFile:function(e){return o.cancelDownload(e)},startLiving:function(e,t){return o.startLiving(e,t)},isSupportLiving:function(){return o.isSupportLiving()},endLiving:function(e){return o.endLiving(e)},getPinCode:function(){return o.getPinCode()},resetInputTimer:function(){return o.resetInputTimer()},version:function(){return SDK_VERSION},sendInputSwitch:function(){o&&o.sendInputSwitch()},setMouseMoveRatio:function(e){o&&o.setMouseMoveRatio(e)},controlPowerDistribute:function(e,t){o&&o.controlPowerDistribute(e,t)},controlPowerQuery:function(e,t){o&&o.controlPowerQuery(e,t)},captureGameImage:function(e,t){o&&o.captureGameImage(e,t)},sendMessageToRom:function(e){o&&o.sendMessageToRom(e)},startHangUp:function(e,t){return!!e&&(!e.downloadList||"array"!=typeCheck(e.downloadList)||e.downloadList.length<1?(t&&t(" downloadList"),!1):e.hangUpTime&&"number"==typeCheck(e.hangUpTime)?hasOwnProperty(e,"Cutoff")&&"boolean"==typeCheck(e.Cutoff)?void(o&&o.startHangUp(e,t)):(t&&t(" Cutoff"),!1):(t&&t(" hangUpTime"),!1))},stopHangUp:function(e){o&&o.stopHangUp(e)},getBigFileList:function(e){o&&o.getBigFileList(e)},updateGameUID:function(e,t){o&&o.updateGameUID(e,t)},requestVideoFrameCallback:function(e){o&&o.requestVideoFrame(e)},removeRequestVideoFrameCallback:function(){o&&o.removeRequestVideoFrame()},sendWSMessage:function(e){return o&&o.sendWSMessage(e)},getCapture:function(e){return o&&o.getCapture(e)},sendSensorData:function(e){return!!o&&o.sendSensorData(e)},startPlayer:function(){return!!o&&o.startPlayer()},pauseGame:function(){return!!o&&o.pausePlayer()},removeCacheCid:function(){o&&o.removeCacheCid()},openMediaDevices:function(e,t){o&&o.openMediaDevices(e,t)},closeMediaDevices:function(e){o&&o.closeMediaDevices(e)},mediaDevicesResponseNotify:function(e,t){o&&o.mediaDevicesResponseNotify(e,t)},cameraParamsSet:function(e){o&&o.cameraParamsSet(e)},sendDataToClipBoard:function(e){o&&o.sendDataToClipBoard(e)},updateStandbyDuration:function(e,t){o&&o.updateStandbyDuration(e,t)}},{})}();return sdk});
